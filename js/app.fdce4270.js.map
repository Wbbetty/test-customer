{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?e589","webpack:///./src/App.vue?db4e","webpack:///src/App.vue","webpack:///./src/App.vue?d83e","webpack:///./src/App.vue","webpack:///./src/route/index.js","webpack:///./src/main.js","webpack:///./src/lib/goeasy.dev.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_c","_self","attrs","staticRenderFns","component","use","originalPush","location","catch","router","routes","path","meta","title","keepAlive","children","route","config","productionTip","goEasy","getInstance","host","VUE_APP_ENV","appkey","GoEasy","im","pubsub","global","h","App","$mount","factory","commonjsGlobal","globalThis","self","getDefaultExportFromCjs","x","GoEasy$1","NetworkStatus","GoEasySocket","AbstractSocket","Permission","Emitter$6","Emitter","NetworkStatus_1$1","Emitter$5","socket","emit","rocket","status","CONNECT_FAILED","DISCONNECTED","start","doEmit","fail","resultCode","content","_this","isTimeout","authenticated","hasPermission","status_1","CONNECTED","RECONNECTED","EXPIRED_RECONNECTED","includes","complete","timeout_1","singleTimeout","unique","params","retried","ack","success","permissions","find","item","permission","RECONNECTING","_typeof","obj","iterator","constructor","lib$1","re","parts","parseuri$2","str","b","indexOf","substring","replace","exec","uri","source","authority","ipv6uri","browser$2","debug$6","s$1","m$1","h$1","d$1","y$1","ms$1","val","options","parse$1","isNaN","fmtLong$1","fmtShort$1","JSON","stringify","String","match","parseFloat","toLowerCase","ms","Math","round","plural$1","floor","ceil","selectColor","namespace","hash","charCodeAt","colors","abs","createDebug","prevTime","debug","enabled","curr","Date","diff","prev","args","Array","arguments","coerce","unshift","index","format","formatter","formatters","formatArgs","logFn","log","useColors","color","destroy","init","instances","enable","namespaces","save","names","skips","split","len","RegExp","substr","instance","disable","test","stack","humanize","process","navigator","userAgent","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","$1","lastC","Function","storage","removeItem","load","DEBUG","localstorage","localStorage","chrome","local","v","parseuri$1","debug$5","url_1","url","loc","protocol","charAt","port","ipv6","id","socket_ioParser","componentEmitter","mixin","on","addEventListener","fn","_callbacks","once","off","removeListener","removeAllListeners","removeEventListener","cb","callbacks","listeners","hasListeners","toString$1","toString","isarray","isArray","arr","Encoder","types","CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK","Decoder","ERROR_PACKET","encodeAsString","attachments","nsp","payload","tryStringify","reconstructor","decodeString","Number","buf","next","tryParse","isPayloadValid","parse","msg","encode","callback","encoding","add","packet","finishedReconstruction","lib","transports$1","browser$1","keys","has","withNativeBlob","Blob","withNativeFile","File","hasBinary2","hasBinary","Buffer","isBuffer","ArrayBuffer","toJSON","after_1","after","count","err_cb","bail","noop$1","proxy","byteArray","byteCount","byteIndex","stringFromCharCode","fromCharCode","ucs2decode","string","extra","output","counter","ucs2encode","array","checkScalarValue","codePoint","strict","toUpperCase","createByte","encodeCodePoint","symbol","utf8encode","opts","codePoints","byteString","readContinuationByte","continuationByte","decodeSymbol","byte1","byte2","byte3","byte4","utf8decode","tmp","utf8","version","decode","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","a","size","blobSupportsArrayBufferView","Uint8Array","blobBuilderSupported","append","getBlob","mapArrayBufferViews","ary","map","buffer","byteLength","copy","set","byteOffset","BlobBuilderConstructor","bb","forEach","part","BlobConstructor","blob","keys$1","utf8$1","packets","open","close","ping","pong","upgrade","noop","packetslist","tryDecode","each","done","eachWithIndex","el","encodePacket","supportsBinary","encoded","decodePacket","binaryType","asArray","rest","sliceBuffer","encodePayload","isBinary","setLengthHeader","encodeOne","doneCallback","results","join","decodePayload","chr","ret","parser$4","Emitter$4","transport","Transport$2","hostname","secure","query","timestampParam","timestampRequests","readyState","agent","enablesXDR","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","isReactNative","extraHeaders","localAddress","onError","desc","description","doOpen","doClose","onClose","send","write","onOpen","writable","onData","onPacket","parseqs$3","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","componentInherit","alphabet","seed","i$1","num","decoded","yeast$2","now","yeast_1","browser","debug$4","y","fmtLong","fmtShort","plural","hasCors","XMLHttpRequest","hasCORS","xmlhttprequest","xdomain","xscheme","XDomainRequest","concat","Transport$1","parseqs$2","parser$3","inherit$2","yeast$1","debug$3","polling$1","Polling$1","hasXHR2","xhr","responseType","forceBase64","poll","pause","onPause","polling","total","doPoll","callbackfn","doWrite","schema","sid","b64","Polling","inherit$1","pollingJsonp","JSONPPolling","rNewline","rEscapedNewline","empty","glob","___eio","form","iframe","async","insertAt","insertBefore","body","isUAgecko","area","iframeId","className","position","top","left","method","initIframe","html","action","submit","attachEvent","onreadystatechange","BrowserWebSocket","NodeWebSocket","Transport","parser$2","parseqs$1","inherit","yeast","debug$2","uni","wx","WebSocket","MozWebSocket","WebSocketImpl","GameGlobal","onopen","onclose","onmessage","tt","getSystemInfo","_socketTask","connectSocket","onMessage","res","my","sendSocketMessage","closeSocket","onSocketOpen","onSocketError","onSocketMessage","onSocketClose","uniSocketTask","socketTask","websocket$1","WS","perMessageDeflate","usingBrowserWebSocket","protocols","check","headers","ws","supports","binary","addEventListeners","ev","compress","threshold","JSONP","websocket","xd","xs","jsonp","isSSL","indexOf$1","indexof","transports","Emitter$3","debug$1","parser$1","parseuri","parseqs","socket$1","Socket$1","forceJSONP","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","onlyBinaryUpgrades","product","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","clone","priorWebsocketSuccess","Socket","parser","createTransport","EIO","requestTimeout","setTransport","onDrain","probe","failed","onTransportOpen","upgradeLosesBinary","upgrading","cleanup","flush","freezeTransport","onTransportClose","onupgrade","to","onHandshake","setPing","filterUpgrades","onHeartbeat","sendPacket","waitForUpgrade","cleanupAndClose","reason","filteredUpgrades","toArray_1","toArray","list","on_1","on$1","componentBind","hasBin","events","connect","connect_error","connect_timeout","connecting","disconnect","reconnect","reconnect_attempt","reconnect_failed","reconnect_error","reconnecting","io","json","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","autoConnect","subEvents","subs","pop","onpacket","sameNamespace","rootNamespaceError","onconnect","onevent","onack","ondisconnect","sent","emitBuffered","backo2","Backoff$1","min","max","factor","jitter","attempts","duration","pow","rand","random","deviation","reset","setMin","setMax","setJitter","UniApp$1","frameworkDetector","platformDetector","Platform","__values","TypeError","PlatformDetector","_a","e_1","_b","platform","methods","BROWSER","isBrowser","APP_IOS","isAppiOS","APP_ANDROID","isAppAndroid","APPLET_WX","isWXApplet","APPLET_WX_GAME","isWXGameApplet","keys_1","keys_1_1","e_1_1","UNKNOWN","currentPlatform","getElementById","getSystemInfoSync","plus","isAlipayApplet","isBytedanceApplet","isQQApplet","isBaiduApplet","FrameworkDetector","Framework","platform_detector_1","framework","UNIAPP","isUniApp","REACT_NATIVE","NATIVE_APPLET_WX","currentFramework","__fbGenNativeModule","isTaro","uniApp","framework_detector_1$4","UniApp","uniAppRunningBackend","listenAppRunning","globalEvent","runningBackend","uniApp$1","GoEasyDomainNumber$2","maxNumber","localStorageDispatcher","cookie","__values$3","Cookie","cookieName","cookies","cookies_1","cookies_1_1","startsWith","expires","domain","cookieText","toGMTString","remove","__values$2","LocalStorageDispatcher","cookie_1","CookieStorage","isDomain","put","expire","support","cookieEnabled","LocalStorage","getItem","setItem","UniappLocalStorage","getStorageSync","setStorageSync","removeStorageSync","WXLocalStorage","supportedStorage","storages","dispatch","goEasyDomainNumber","config_1","local_storage_dispatcher_1$1","GoEasyDomainNumber$1","GoEasyDomainNumber","refreshNumber","GOEASY_DOMAIN_NUMBER","number","eio","Emitter$2","Backoff","manager","Manager","nsps","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","lastPing","packetBuffer","_parser","encoder","decoder","isUniRunningBackend","isUni","emitAll","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","skipReconnect","openSub","errorSub","reg","nextIndex","timer","onping","onpong","ondata","ondecoded","onConnecting","encodedPackets","processPacketQueue","pack","subsLength","sub","delay","onreconnect","attempt","lookup","cache","managers","parsed","newConnection","forceNew","multiplex","Calibrator","isDef","isUndef","isPrimitive","isObject","isPlainObject","isRegExp","isValidArrayIndex","isFinite","isString","isNumber","isStringOrNumber","isEmpty","trim","isNative","Ctor","isFunction","isBoolean","isTrue","isFalse","calibrator","NetworkStatus_1","Permission_1","Emitter_1","Calibrator_1","NONE","connectedObservers","disconnectedObservers","emitter","CONNECTING","listener","getStatus","addConnectedObserver","addDisconnectedObserver","notify","response","IOSocket","__extends","_extendStatics","setPrototypeOf","__proto__","__","AbstractSocket_1","_super","reconnectingObservers","addReconnectingObserver","onReconnecting","onDisconnected","initListener","Rocket","UUID","rngBrowser","getRandomValues","crypto","msCrypto","rnds8","rnds","byteToHex","bytesToUuid$2","offset","bth","_nodeId","_clockseq","bytesToUuid_1","rng$1","bytesToUuid$1","_lastMSecs","_lastNSecs","v1$1","node","clockseq","seedBytes","msecs","getTime","nsecs","dt","tl","tmh","v1_1","rng","bytesToUuid","v4$1","ii","v4_1","v1","v4","uuid","uuid_1","guid","UUID_1","totalTimeout","startTime","expiredTime","MessageObserver$1","_i","MessageObserver","noop_1$4","guidList","findIndex","SocketTimeout","anonymousUserIdRepository","Calibrator_1$i","local_storage_dispatcher_1","AnonymousUserIdRepository","userId","ANONYMOUS_USER_ID_KEY","ClientInfo$1","platform_detector_1$1","framework_detector_1$3","ClientInfo","z","toZ","thisAsString","_char","clientInfo","RocketTypes","GNS$1","GNS","Calibrator_1$h","framework_detector_1$2","UniApp_1","allowNotification","uniappPlugin","regIdPromise","onClickNotificationCallback","payloadAssemblers","supportNotification","requireNativePlugin","askRegId","warn","allow","addAssembler","assembler","assemblePayload","assemble","createLocalNotification","g","createMessage","timerId","repeatCount","askRegIdPromise","regId","getRegIdPromise","listenPlusClickNotification","availableIntent","clear","intent","getIntentData","intentData","clearAll","listenClick","onClickNotification","clickHandler","IOSocket_1","Rocket_1","MessageObserver_1","noop_1","GoEasyDomainNumber_1","SocketTimeout_1","GoEasy_1","anonymous_user_id_repository_1","ClientInfo_1","RocketTypes_1","GNS_1","goEasyOptions","connectOptions","ioSocket","appKey","anonymous","userData","otp","artifactVersion","ioOpts","reconnectingTimes","messageObservers","connectFailedObservers","connectingObservers","expiredReconnectedObservers","onConnectSuccess","onConnectFailed","onConnectProgress","setUriAndOpts","extendOptions","onIoDisconnected","onIoReconnecting","onIoReconnected","addConnectFailedObserver","addConnectingObserver","onSuccess","onFailed","onProgress","wxmpId","appid","openid","supportTLS","supportOldBrowser","forceTLS","authorize","sendAck","gns","manualDisconnect","READ","commonRequestSingle","commonRequestTotal","allowNT","commonInfiniteSingle","commonInfiniteTotal","onAuthorizeSuccess","onAuthorizeFailed","DISCONNECTING","authorizeAck","u","expiredClient","enablePublish","WRITE","enableSubscribe","addExpiredReconnectedObserver","addMessageObserver","notifyMessageObservers","observers","ModuleTypes","IM","PUBSUB","Publisher","validatorUtils","ValidatorUtils","validateId","validateIdArray","from","Set","validateChannel","channel","validateChannelArray","channels","validateChannelAndChannels","hasChannel","hasChannels","validateCallbackOptions","callbackOptions","validateNotification","notification","validateValIsEmpty","validateWXMPTemplateMsg","wxmpTemplateMsg","template_id","miniprogram","pagepath","G","ud","validator_utils_1","g_1","publish","validate","nt","at","accessToken","Subscriber$1","Subscription$1","Subscription","RemoteEvents","Subscriber","noop_1$3","Calibrator_1$g","Rocket_1$7","Permission_1$7","Subscription_1","SocketTimeout_1$7","RocketTypes_1$9","RemoteEvents_1$2","validator_utils_1$9","g_1$i","subscriptions","class_1","oldPayload","ch","ctt","initialGoEasySocket","onNewMessage","onExpiredReconnected","resubscribe","subscribe","clearSubscriptions","neMessage","time","createNotification","subscription","findSubscriptionByChannel","supportGNS","formatOptions","formatCallback","unsubscribe","removeChannel","exist","History$2","History","noop_1$2","Calibrator_1$f","Rocket_1$6","Permission_1$6","SocketTimeout_1$6","RocketTypes_1$8","validator_utils_1$8","g_1$h","History$1","ackCallback","failCallback","historyMessages","commonQuerySingle","commonQueryTotal","PresenceSubscriber$1","PresenceSubscription$1","PresenceSubscription","onPresence","PresenceSubscriber","noop_1$1","Calibrator_1$e","Rocket_1$5","Permission_1$5","SocketTimeout_1$5","PresenceSubscription_1","RocketTypes_1$7","RemoteEvents_1$1","validator_utils_1$7","g_1$g","presenters","channelSplitArr","subscribePresence","presenceSubscription","findPresenceByChannel","presenter","unsubscribePresence","HereNow$1","HereNow","Calibrator_1$d","Rocket_1$4","Permission_1$4","SocketTimeout_1$4","RocketTypes_1$6","validator_utils_1$6","g_1$f","byChannel","includeUsers","distinct","channelVal","users","user","hereNow","byUserId","userIds","newUser","hereNowByUserIds","callbackUtils","Calibrator_1$c","CallbackUtils","PubSub","Publisher_1","Subscriber_1","History_1","PresenceSubscriber_1","HereNow_1","callback_utils_1$7","ModuleTypes_1$1","g_1$e","subscriber","publisher","histories","presence","hereNows","initialBeforeConnect","functionObj","validateOptions","history","apiEventCenter","imApiEvents","ImApiEvents","rtcApiEvents","RTCApiEvents","ApiEventCenter","im_api_events_1$3","rtc_api_events_1","Emitter$1","Calibrator_1$b","apiEvent","fire","GoEasyUploader$1","FileUploader$1","UniAppFileUploader$1","AbstractFileUploader","upload","uploadRequest","__extends$k","uniAppFileUploader","AbstractFileUploader_1$2","UniAppFileUploader","onprogress","uploadTask","uploadFile","filePath","getTempFilePath","formData","parameters","statusCode","errMsg","onProgressUpdate","file","tempFilePath","fullPath","WXFileUploader$1","__extends$j","wxFileUploader","AbstractFileUploader_1$1","WXFileUploader","fileRes","HtmlFileUploader$1","__extends$i","htmlFileUploader","AbstractFileUploader_1","HtmlFileUploader","setRequestHeader","progress","onloadstart","onloadend","FormData","fd","responseText","fileUploader","FileUploader","UniAppFileUploader_1","WXFileUploader_1","HtmlFileUploader_1","framework_detector_1$1","uploader","RequestBuilder","OSSRequestFactory$1","OssType","AliyunOSSRequestBuilder","FileUploadRequest","AbstractOSSRequestBuilder","build","token","messageType","newFileName","newFilename","MessageType","__extends$h","aliYunOSSRequestBuilder","AliYunOSSRequestBuilder","FileUploadRequest_1$1","AbstractOSSRequestBuilder_1$1","MessageType_1$3","dir","accessKeyId","policy","signature","success_action_status","FILE","QiNiuYunOSSRequestBuilder$1","__extends$g","qiNiuYunOSSRequestBuilder","AbstractOSSRequestBuilder_1","FileUploadRequest_1","QiNiuYunOSSRequestBuilder","downloadUrl","OSSRequestFactory","OssType_1","AliyunOSSRequestBuilder_1","QiNiuYunOSSRequestBuilder_1","aliYun","UploadTokenResolver","filename","OSSRequestFactory_1","UploadTokenResolver_1","uploadTokenResolver","vendor","GoEasyUploader","FileUploader_1","RequestBuilder_1","requestBuilder","doUpload","customizeUpload","IMMessageSender","PayloadImprover$1","FileMessagePayloadImprover$1","AbstractPayloadImprover$1","AbstractPayloadImprover","__extends$f","FileMessagePayloadImprover","AbstractPayloadImprover_1","GoEasyUploader_1$1","MessageType_1$2","goEasyUploader","improve","buildOptions","createOptions","VIDEO","video","uploadPromise","uploadResponse","setPayload","VideoMessagePayloadImprover$1","__extends$e","VideoMessagePayloadImprover","FileMessagePayloadImprover_1$1","rule","width","thumbnail","PayloadImprover","FileMessagePayloadImprover_1","VideoMessagePayloadImprover_1","MessageType_1$1","improvers","AUDIO","IMAGE","payloadImprover","BulletMessage","MessageType_1","mt","scene","Scene","CS","csMessage","tid","teamId","messageId","TEXT","goeasyEventCenter","EmitterEventDriver$1","EmitterEventDriver","GoEasyEventCenter","EmitterEventDriver_1","initial","eventDriver","eventname","internalEvents","IM_INTERNAL_EVENTS","AbstractMessage$1","AbstractMessage","g_1$d","clearUseLessAttribute","isOtherSent","senderId","getToData","PayloadImprover_1","BulletMessage_1","goeasy_event_center_1","internal_events_1","AbstractMessage_1","callback_utils_1","sendOptions","MessageStatus","SENDING","buildPromise","improvePromise","doSend","FAIL","bulletMessage","MESSAGE_SENDING","publishIM","MESSAGE_SEND_FAILED","SUCCESS","timestamp","customerId","sessionId","MESSAGE_SEND_SUCCESS","NEW","conversationList","Conversations$1","Conversation$1","MessageCache","sortedInserter","SortedInserter","insert","binarySearch","newIndex","k","cmp","compare","sorted_inserter_1","messages","allLoaded","sliceOverLengthMessages","CACHE_MAX_LENGTH","getMaxMessage","loadLocalMessages","limit","lastTimestamp","localMessages","totalSize","minTimestamp","maxTimestamp","between","cacheServerMessages","serverMessages","firstMessage","findMessageByTime","findMessagesByTimes","times","existsMessage","findMessageIndexById","deleteMessage","recallMessages","localMessage","recalled","deleteMessages","saveMessage","maxSuccessMessageTime","minTime","correctPosition","MessageDeleter","DeleteMessageRequest$1","Target$1","Target","GoEasy_1$e","Calibrator_1$a","g_1$c","PRIVATE","GROUP","byScene","targetId","byIMMessage","receiverId","byMessageReadRemoteEvent","markerId","byIMMessageDeletedEvent","deleterId","byConversationDTO","conversationDto","lastMessage","byRemoteRecallEvent","conversationId","DeleteMessageRequest","GoEasy_1$d","Target_1$4","sort","DeleteMessageRequest_1","deleteServerMessages","IM_DELETE_MESSAGE","MessageRecaller","RecallMessageRequest$1","RecallMessageRequest","Target_1$3","RecallMessageRequest_1","recallServerMessages","IM_RECALL_MESSAGE","remoteHistory","HistoryChangeQueryRequest","ReadMessageMarkRequest$1","ReadMessageMarkRequest","remoteAbbrMessageBuilder","PrivateMessage$1","__extends$d","PrivateMessage","AbstractMessage_1$2","GoEasy_1$c","read","GroupMessage$1","__extends$c","GroupMessage","AbstractMessage_1$1","GoEasy_1$b","groupId","__extends$b","CSMessage","GoEasy_1$a","g_1$b","accepted","sendByCustomer","csMessageType","CSMessageType","RemoteAbbrMessageBuilder","GoEasy_1$9","PrivateMessage_1$1","GroupMessage_1$1","cs_message_1$1","Calibrator_1$9","g_1$a","cs_message_type_1$3","remoteAbbrMessage","senderData","ts","TRANSFER","jsonPayload","transferTo","rc","__awaiter$7","__awaiter","thisArg","_arguments","P","generator","adopt","step","rejected","__generator$7","__generator","f","_","label","trys","ops","verb","op","RemoteHistory","GoEasy_1$8","HistoryChangeQueryRequest_1","Rocket_1$3","RocketTypes_1$5","Permission_1$3","SocketTimeout_1$3","g_1$9","ReadMessageMarkRequest_1","remote_abbr_message_builder_1$2","builder","sync","IM_HISTORY_CHANGE","loadServerMessages","IM_HISTORY","convertServerMessages","updateServerOffsets","markTime","IM_MARK_AS_READ","UserOffsets$1","UserOffsets","Calibrator_1$8","g_1$8","offsetMap","Map","markingTime","updateOffset","oldOffset","updateUserOffsets","userOffsets","userOffset","updateMyOffset","myOffset","getOffset","HistoryQueryRequest","unreadamountMaxmessageChangeDetector","goeasy_event_center_1$6","internal_events_1$6","UnreadAmountMaxMessageChangeDetector","pre","oldLastMessage","oldUnreadAmount","unreadAmount","oldLastMessageRecalled","oldLastMessageRead","oldLastMessageStatus","post","newLastMessageRead","newLastMessageRecalled","newLastMessageStatus","newUnreadAmount","newLastMessage","MAX_MESSAGE_CHANGED","UNREAD_AMOUNT_CHANGED","im_api_events_1","MessageCache_1","MessageDeleter_1","MessageRecaller_1","im_1","remote_history_1","UserOffsets_1","HistoryQueryRequest_1","unreadamount_maxmessage_change_detector_1","messageCache","initMaxMessageAndOffsets","markLocalMessagesRead","loadHistory","updateByServerChange","newLimit","newLastTimestamp","serverMessages_1","aopUnreadAmountMaxMessage","syncDeletedMessage","doSyncDeletedMessage","aec","MESSAGE_DELETED","recallMessage","syncRecalledMessage","doSyncRecalledMessage","MESSAGE_RECALLED","deletedMessageTimes","recalledTimes","markRead","syncMarkedMessage","onMessageSending","onMessageSendSuccess","onMessageSendFailed","maxMessage","onMessageReceived","decorator","err_1","fireMessageReadEvent","isOtherUserId","markedMessages","markMySentRead","MESSAGE_READ","markOthersSentRead","messages_1","messages_1_1","maxTime","agentHistory","liveSession","liveSessionRequest","LiveSessionRequest","customerStatus","CustomerStatus","agentStatus","csOnlineRequest","CSOnlineRequest","teamData","agentData","csOfflineRequest","CSOfflineRequest","csAgentsQueryRequest","CsAgentsQueryRequest","__awaiter$6","__generator$6","AgentStatus","Rocket_1$2","RocketTypes_1$4","Permission_1$2","SocketTimeout_1$2","Calibrator_1$7","cs_online_request_1","cs_offline_request_1","goeasy_event_center_1$5","internal_events_1$5","callback_utils_1$6","g_1$7","cs_agents_query_request_1","RemoteEvents_1","onConnected","CS_ONLINE_CHANGED","onlineChanged","queryTeams","queryMyTeamPromise","CS_MY_TEAMS","teamIds","myTeams","isOnline","option","online","CS_ONLINE","CS_ONLINE_SUCCESS","offline","CS_OFFLINE","CS_OFFLINE_SUCCESS","agents","CS_AGENTS","__awaiter$5","__generator$5","LiveSession","GoEasy_1$7","live_session_request_1","validator_utils_1$5","Rocket_1$1","RocketTypes_1$3","Permission_1$1","SocketTimeout_1$1","callback_utils_1$5","g_1$6","goeasy_event_center_1$4","internal_events_1$4","customer_status_1","cs_message_type_1$2","agent_status_1$2","CS_AGENT_MESSAGE_RECEIVED","CS_ACCEPTED","CS_ENDED","CS_TRANSFER","live","CS_LIVE_SESSION","session","liveOptions","onStatusUpdated","isMyCustomer","quit","currentSession","CS_QUIT_LIVE","tryUpdateStatus","newStatus","ACCEPT","sessionStart","User","END","cs_message_type_1","live_session_1","AgentHistory","unread","markingAmount","acceptedMaxMessage","increaseUnreadAmount","saveAcceptedMessage","initPendingMaxMessageAndOffsets","savePendingMessage","pendingMaxMessage","maxAcceptedMessageTime","preMark","postMark","customerHistory","CustomerHistory","Target_1","agent_history_1","customer_history_1","Histories","initialListeners","MESSAGE_RECEIVED","IM_MSG_READ","onRemoteMarkRead","IM_MSG_DELETED","onRemoteMessageDeleted","IM_MSG_RECALLED","onRemoteMessageRecalled","queryToTarget","findOrCreateHistory","values","findHistory","privateMarkAsRead","markOption","markAsRead","groupMarkAsRead","markMessageAsRead","validateMessageArray","firstTarget","Conversation","GoEasy_1$6","histories_1$5","dataLoaded","toDto","ConversationDTO","getUnreadAmount","maxMessageTime","CSConversation$1","__extends$a","CSConversation","Conversation_1$1","histories_1$4","GoEasy_1$5","remoteConversations","TopConversationRequest","RemoveConversationRequest","dataRequest","DataRequest","TopConversationRequest_1","RemoveConversationRequest_1","data_request_1","RemoteConversations","topConversation","removeConversation","rocketType","loadData","imData","__extends$9","__awaiter$4","__generator$4","__values$1","Conversations","Conversation_1","callback_utils_1$4","GoEasy_1$4","remote_abbr_message_builder_1$1","RocketTypes_1$2","im_api_events_1$2","goeasy_event_center_1$3","internal_events_1$3","Target_1$2","CSConversation_1$1","im_1$3","remote_conversations_1","histories_1$3","g_1$5","cs_message_type_1$1","Calibrator_1$6","onMaxMessageChanged","onUnreadMessageChanged","conversation","findConversation","fireUpdated","loadLocalConversations","updatedEventName","getUpdatedEventName","unreadTotal","conversations","CONVERSATIONS_UPDATED","latestConversations","loadServerConversations","rocketName","convertAbbrConversation","imLastConversations","abbrConversations","conversations_1","conversations_1_1","abbrConversation","top_1","lmsg","buildByAbbr","insertOne","saveOrUpdateConversation","buildByMessage","e_2","conversationDTO","e_2_1","findConversationIndex","removeLocalConversation","CONVERSATIONS_MAX_LENGTH","aScore","bScore","PendingConversations$1","__extends$8","__awaiter$3","__generator$3","PendingConversations","Conversations_1","GoEasy_1$3","RocketTypes_1$1","Target_1$1","goeasy_event_center_1$2","internal_events_1$2","im_api_events_1$1","histories_1$2","CSConversation_1","g_1$4","Calibrator_1$5","expired","onCSOnlineSuccess","onCSOfflineSuccess","_synchronized","PENDING_CONVERSATIONS_UPDATED","CS_PENDING_CONVERSATION","customerData","PendingConversations_1","cs_message_1","ConversationList","pendingConversations","latestPendingConversations","topPrivateConversation","topGroupConversation","validateConversationDTO","removePrivateConversation","removeGroupConversation","IMReceiver","remote_abbr_message_builder_1","histories_1","newPayload","tm","toType","gid","imMessage","abbrMessage","receivedMessage","history_1","PRIVATE_MESSAGE_RECEIVED","GROUP_MESSAGE_RECEIVED","GroupMessageSubscriber","groupIds","subscribeGroups","unsubscribeGroup","GroupPresenceSubscriber","GroupPresenceSubscribe","groupPresence","newMessageReceived","emitRocket","subscribeGroupPresence","unPresence","unsubscribeGroupPresence","emitType","groupOnlineCount","userAmount","GROUP_PRESENCE","GroupOnlineCount","imGroupOnlineCount","GroupHereNow","imGroupHereNow","UserPresenceSubscriber","userPresence","subscribeUserPresence","unsubscribeUserPresence","USER_PRESENCE","UserHereNow","imHereNow","IMMessageBuilder$1","WXImagePayloadBuilder","Str$1","Calibrator_1$4","Str","fileExtension","strArr","ImageMessagePayload$1","FileMessagePayload$1","AbstractMessagePayload$1","AbstractMessagePayload","__extends$7","FileMessagePayload","AbstractMessagePayload_1$2","contentType","__extends$6","ImageMessagePayload","FileMessagePayload_1$1","height","WXFilePayloadBuilder","AbstractPayloadBuilder$1","AbstractPayloadBuilder","messagePayload","AbstractPayloadBuilder_1","FileMessagePayload_1","filePayload","Str_1","ImageMessagePayload_1","WXFilePayloadBuilder_1","tempFile","namePath","getImageInfo","WXAudioPayloadBuilder","AudioMessagePayload$1","__extends$5","AudioMessagePayload","AudioMessagePayload_1","audioPayload","fileSize","TextPayloadBuilder$1","TextMessagePayload$1","__extends$4","TextMessagePayload","AbstractMessagePayload_1$1","text","__extends$3","TextPayloadBuilder","AbstractPayloadBuilder_1$1","TextMessagePayload_1","Calibrator_1$3","textPayload","WXVideoPayloadBuilder","VideoMessagePayload$1","__extends$2","VideoMessagePayload","AbstractMessagePayload_1","GoEasyVideo","GoEasyThumbnail","VideoMessagePayload_1","videoPayload","thumbTempFilePath","videoPath","UniAppImagePayloadBuilder","UniAppFilePayloadBuilder","UniAppFilePayloadBuilder_1","imagePayload","UniAppAudioPayloadBuilder","getFileInfo","innerAudioContext_1","createInnerAudioContext","onCanplay","errCode","UniAppVideoPayloadBuilder","HTMLImagePayloadBuilder","HTMLFilePayloadBuilder","URL","webkitURL","createObjectURL","HTMLFilePayloadBuilder_1","imagePayLoad","img","Image","revokeObjectURL","supportTypes","HTMLAudioPayloadBuilder","audioPayLoad","audio","onloadedmetadata","HTMLVideoPayloadBuilder","videoPayLoad","videoElement","videoWidth","videoHeight","getThumbnailUrl","canvas","getContext","drawImage","toDataURL","CustomPayloadBuilder$1","CustomMessagePayload","__extends$1","CustomPayloadBuilder","CustomMessagePayload_1","Calibrator_1$2","customMessageOptions","customMessagePayLoad","LocalIMMessageBuildOptions$1","LocalIMMessageBuildOptions","IMMessageBuilder","framework_detector_1","WXImagePayloadBuilder_1","WXAudioPayloadBuilder_1","TextPayloadBuilder_1","WXVideoPayloadBuilder_1","UniAppImagePayloadBuilder_1","UniAppAudioPayloadBuilder_1","UniAppVideoPayloadBuilder_1","HTMLImagePayloadBuilder_1","HTMLAudioPayloadBuilder_1","HTMLVideoPayloadBuilder_1","CustomPayloadBuilder_1","LocalIMMessageBuildOptions_1","Calibrator_1$1","GoEasy_1$2","GroupMessage_1","PrivateMessage_1","validator_utils_1$4","callback_utils_1$3","g_1$3","payloadBuilders","image","buildMessage","payloadBuilder","customPayloadBuilder","csMessageReceiver","CsMessageReceiver","goeasy_event_center_1$1","internal_events_1$1","agent_status_1$1","g_1$2","im_1$2","IMReceiver_1$1","histories_1$1","GoEasy_1$1","live_session_1$1","receivedMessage_1","target_1","CS_MESSAGE_RECEIVED","__awaiter$2","__generator$2","api_event_center_1","GoEasyUploader_1","IMMessageSender_1","conversation_list_1","IMReceiver_1","GroupMessageSubscriber_1","GroupPresenceSubscriber_1","GroupOnlineCount_1","GroupHereNow_1","UserPresenceSubscriber_1","UserHereNow_1","ModuleTypes_1","validator_utils_1$3","callback_utils_1$2","IMMessageBuilder_1","g_1$1","cs_message_receiver_1","_iMReceiver","_userHereNow","_groupHereNow","_groupOnlineCount","groupMessageSubscriber","afterConnect","messageBuilder","messageSender","_groupPresenceSubscriber","_userPresenceSubscriber","validateModules","callBack","createTextMessage","createImageMessage","createFileMessage","createAudioMessage","createVideoMessage","createCustomMessage","sendMessage","messageRecallOptions","messageDeleteOptions","markGroupMessageAsRead","markPrivateMessageAsRead","subscribeGroup","groupHereNow","mediaType","MediaType","cs","team","conversationHandler","csStatusQueryRequest","CSStatusQueryRequest","csAcceptRequest","CSAcceptRequest","csTransferRequest","CSTransferRequest","agentId","__awaiter$1","__generator$1","ConversationHandler","cs_status_query_request_1","cs_accept_request_1","validator_utils_1$2","callback_utils_1$1","cs_transfer_request_1","accept","CS_ACCEPT","acceptedMessage","end","CS_END","endedMessage","queryCustomerStatus","doCustomerStatus","activeCustomerStatus","activeCustomerStatusOptions","CS_CUSTOMER_STATUS","transfer","transferMessage","messageCreator","im_1$1","MessageCreator","extendProps","Team","validator_utils_1$1","conversation_handler_1","agent_status_1","message_creator_1","quitLiveSession","team_1","teams","CSTeam","GoEasyIM","GoEasyPubSub","CustomerStatusOptions","AgentOnlineOptions","CallBackOptions","GoEasySocket_1","pubsub_1","media_type_1","cs_1","packageVersion","csteam","getConnectionStatus","confirmUserId","goEasySocket","supportModules","moduleName","IM_EVENT","IM_SCENE","MEDIA_TYPE"],"mappings":"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","file":"js/app.fdce4270.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-4771dd73\":\"a894f9ff\",\"chunk-2265b2f0\":\"aa254f69\",\"chunk-227fd1dc\":\"ede1f7b7\",\"chunk-2d7026f2\":\"aa095e58\",\"chunk-f197b63e\":\"06627ab0\",\"chunk-a404a7dc\":\"0dd5a778\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-2265b2f0\":1,\"chunk-227fd1dc\":1,\"chunk-2d7026f2\":1,\"chunk-f197b63e\":1,\"chunk-a404a7dc\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-4771dd73\":\"31d6cfe0\",\"chunk-2265b2f0\":\"59825a41\",\"chunk-227fd1dc\":\"7014c242\",\"chunk-2d7026f2\":\"045045eb\",\"chunk-f197b63e\":\"2a2d2c26\",\"chunk-a404a7dc\":\"08706079\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=7865c2e9&prod&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'App'\n  }\n</script>\n\n<style>\n  #app {\n    font-family: 'HanHei SC', PingHei, 'PingFang SC', 'Helvetica Neue', Helvetica, Arial, 'Microsoft Yahei', 'Hiragino Sans GB', 'Heiti SC', 'WenQuanYi Micro Hei', 'Segoe UI Emoji', sans-serif;\n  }\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=7865c2e9&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=7865c2e9&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport VueRouter from 'vue-router';\n\nVue.use(VueRouter);\n\n//解决vue-router3.0以上版本，避免对当前位置冗余导航的警告信息：NavigationDuplicated: Avoided redundant navigation to current location\nconst originalPush = VueRouter.prototype.push;\nVueRouter.prototype.push = function push(location) {\n    return originalPush.call(this, location).catch((err) => err);\n};\n\nconst router = new VueRouter({\n    routes: [\n        {\n            path: '/agent',\n            component: () => import('../agent/view/Home'),\n            meta: {title: '客服', keepAlive: false},\n            children: [\n                {\n                    path: 'conversations',\n                    component: () => import('../agent/view/Conversations'),\n                    meta: {title: '会话', keepAlive: false},\n                    children: [\n                        {\n                            path: 'chat',\n                            component: () => import('../agent/view/Chat'),\n                            meta: {title: '聊天', keepAlive: false},\n                        }\n                    ]\n                },\n                {\n                    path: 'customers',\n                    component: () => import('../agent/view/Customers'),\n                    meta: {title: '联系人', keepAlive: false},\n                }\n            ]\n        },\n        {\n            path: '/customer',\n            component: () => import('../customer/index')\n        }\n    ]\n});\n\nexport default router;\n","import Vue from 'vue'\nimport App from './App.vue'\nimport router from \"./route/index.js\";\nimport GoEasy from \"./lib/goeasy.dev\";\n\nVue.config.productionTip = false;\n\nconst goEasy = GoEasy.getInstance({\n    host: `${process.env.VUE_APP_ENV}hangzhou.goeasy.io`,\n    appkey: \"PC-66e2d0459383432293edf91fb915f249\",\n    modules: [\"im\"]\n});\n\nVue.prototype.GoEasy = GoEasy;\nVue.prototype.goEasy = goEasy;\nVue.prototype.im = goEasy.im;\nVue.prototype.pubsub = goEasy.pubsub;\nVue.prototype.global = {};\n\n\n\nnew Vue({\n    router: router,\n    render: h => h(App),\n}).$mount('#app')\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.GoEasy = factory());\n})(this, (function () { 'use strict';\n\n\tvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\tfunction getDefaultExportFromCjs (x) {\n\t\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n\t}\n\n\tvar GoEasy$1 = {};\n\n\tvar NetworkStatus = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  exports.NetworkStatus = void 0;\n\n\t  (function (NetworkStatus) {\n\t    NetworkStatus[\"DISCONNECTED\"] = \"disconnected\";\n\t    NetworkStatus[\"DISCONNECTING\"] = \"disconnecting\";\n\t    NetworkStatus[\"CONNECTING\"] = \"connecting\";\n\t    NetworkStatus[\"CONNECTED\"] = \"connected\";\n\t    NetworkStatus[\"RECONNECTING\"] = \"reconnecting\";\n\t    NetworkStatus[\"RECONNECTED\"] = \"reconnected\";\n\t    NetworkStatus[\"EXPIRED_RECONNECTED\"] = \"reconnected\";\n\t    NetworkStatus[\"CONNECT_FAILED\"] = \"connect_failed\"; //连接失败\n\t  })(exports.NetworkStatus || (exports.NetworkStatus = {}));\n\t})(NetworkStatus);\n\n\tvar GoEasySocket = {};\n\n\tvar AbstractSocket = {};\n\n\tvar Permission = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  exports.Permission = void 0;\n\n\t  (function (Permission) {\n\t    Permission[\"WRITE\"] = \"WRITE\";\n\t    Permission[\"READ\"] = \"READ\";\n\t    Permission[\"NONE\"] = \"NONE\";\n\t  })(exports.Permission || (exports.Permission = {}));\n\t})(Permission);\n\n\tvar Emitter$6 = {};\n\n\tEmitter$6.__esModule = true;\n\tEmitter$6.Emitter = void 0;\n\tvar NetworkStatus_1$1 = NetworkStatus;\n\n\tvar Emitter$5 =\n\t/** @class */\n\tfunction () {\n\t  function Emitter(socket) {\n\t    this.socket = socket;\n\t  }\n\n\t  Emitter.prototype.emit = function (rocket) {\n\t    if (this.socket.status === NetworkStatus_1$1.NetworkStatus.CONNECT_FAILED || this.socket.status === NetworkStatus_1$1.NetworkStatus.DISCONNECTED) {\n\t      rocket.fail({\n\t        resultCode: '409',\n\t        content: 'Please connect first'\n\t      });\n\t      return;\n\t    }\n\n\t    rocket.start();\n\t    this.doEmit(rocket);\n\t  };\n\n\t  Emitter.prototype.doEmit = function (rocket) {\n\t    var _this = this;\n\n\t    if (rocket.isTimeout()) {\n\t      rocket.fail({\n\t        resultCode: 408,\n\t        content: \"Host unreachable or timeout\"\n\t      });\n\t      return;\n\t    }\n\n\t    if (this.socket.status === NetworkStatus_1$1.NetworkStatus.CONNECT_FAILED) {\n\t      rocket.fail({\n\t        resultCode: 408,\n\t        content: \"Failed to connect GoEasy.\"\n\t      });\n\t      return;\n\t    }\n\n\t    if (this.authenticated()) {\n\t      if (this.hasPermission(rocket)) {\n\t        var status_1 = [NetworkStatus_1$1.NetworkStatus.CONNECTED, NetworkStatus_1$1.NetworkStatus.RECONNECTED, NetworkStatus_1$1.NetworkStatus.EXPIRED_RECONNECTED];\n\n\t        if (status_1.includes(this.socket.status)) {\n\t          if (!rocket.complete) {\n\t            var timeout_1 = setTimeout(function () {\n\t              _this.doEmit(rocket);\n\t            }, rocket.singleTimeout);\n\n\t            if (rocket.unique) {\n\t              rocket.params.retried = rocket.retried;\n\t            }\n\n\t            this.socket.doEmit(rocket.name, rocket.params, function (ack) {\n\t              clearTimeout(timeout_1);\n\t              ack.resultCode === 200 || ack.code == 200 ? rocket.success(ack) : rocket.fail(ack);\n\t            });\n\t            rocket.retried++;\n\t          }\n\t        } else {\n\t          setTimeout(function () {\n\t            _this.doEmit(rocket);\n\t          }, 500);\n\t        }\n\t      } else {\n\t        rocket.fail({\n\t          resultCode: 401,\n\t          content: 'No permission' //应用层要重新定义\n\n\t        });\n\t      }\n\t    } else {\n\t      setTimeout(function () {\n\t        _this.doEmit(rocket);\n\t      }, 500);\n\t    }\n\t  };\n\n\t  Emitter.prototype.hasPermission = function (rocket) {\n\t    return !!this.socket.permissions.find(function (item) {\n\t      return item === rocket.permission;\n\t    });\n\t  };\n\n\t  Emitter.prototype.authenticated = function () {\n\t    var status = [NetworkStatus_1$1.NetworkStatus.CONNECTED, NetworkStatus_1$1.NetworkStatus.RECONNECTING, NetworkStatus_1$1.NetworkStatus.RECONNECTED, NetworkStatus_1$1.NetworkStatus.EXPIRED_RECONNECTED];\n\t    return status.includes(this.socket.status);\n\t  };\n\n\t  return Emitter;\n\t}();\n\n\tEmitter$6.Emitter = Emitter$5;\n\n\tfunction _typeof(obj) {\n\t  \"@babel/helpers - typeof\";\n\n\t  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n\t    return typeof obj;\n\t  } : function (obj) {\n\t    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n\t  }, _typeof(obj);\n\t}\n\n\tvar lib$1 = {exports: {}};\n\n\t/**\n\t * Parses an URI\n\t *\n\t * @author Steven Levithan <stevenlevithan.com> (MIT license)\n\t * @api private\n\t */\n\tvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\tvar parts = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'];\n\n\tvar parseuri$2 = function parseuri(str) {\n\t  var src = str,\n\t      b = str.indexOf('['),\n\t      e = str.indexOf(']');\n\n\t  if (b != -1 && e != -1) {\n\t    str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n\t  }\n\n\t  var m = re.exec(str || ''),\n\t      uri = {},\n\t      i = 14;\n\n\t  while (i--) {\n\t    uri[parts[i]] = m[i] || '';\n\t  }\n\n\t  if (b != -1 && e != -1) {\n\t    uri.source = src;\n\t    uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n\t    uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n\t    uri.ipv6uri = true;\n\t  }\n\n\t  return uri;\n\t};\n\n\tvar browser$2 = {exports: {}};\n\n\tvar debug$6 = {exports: {}};\n\n\tvar s$1 = 1000;\n\tvar m$1 = s$1 * 60;\n\tvar h$1 = m$1 * 60;\n\tvar d$1 = h$1 * 24;\n\tvar y$1 = d$1 * 365.25;\n\t/**\n\t * Parse or format the given `val`.\n\t *\n\t * Options:\n\t *\n\t *  - `long` verbose formatting [false]\n\t *\n\t * @param {String|Number} val\n\t * @param {Object} [options]\n\t * @throws {Error} throw an error if val is not a non-empty string or a number\n\t * @return {String|Number}\n\t * @api public\n\t */\n\n\tvar ms$1 = function ms(val, options) {\n\t  options = options || {};\n\n\t  var type = _typeof(val);\n\n\t  if (type === 'string' && val.length > 0) {\n\t    return parse$1(val);\n\t  } else if (type === 'number' && isNaN(val) === false) {\n\t    return options[\"long\"] ? fmtLong$1(val) : fmtShort$1(val);\n\t  }\n\n\t  throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val));\n\t};\n\t/**\n\t * Parse the given `str` and return milliseconds.\n\t *\n\t * @param {String} str\n\t * @return {Number}\n\t * @api private\n\t */\n\n\n\tfunction parse$1(str) {\n\t  str = String(str);\n\n\t  if (str.length > 100) {\n\t    return;\n\t  }\n\n\t  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\n\n\t  if (!match) {\n\t    return;\n\t  }\n\n\t  var n = parseFloat(match[1]);\n\t  var type = (match[2] || 'ms').toLowerCase();\n\n\t  switch (type) {\n\t    case 'years':\n\t    case 'year':\n\t    case 'yrs':\n\t    case 'yr':\n\t    case 'y':\n\t      return n * y$1;\n\n\t    case 'days':\n\t    case 'day':\n\t    case 'd':\n\t      return n * d$1;\n\n\t    case 'hours':\n\t    case 'hour':\n\t    case 'hrs':\n\t    case 'hr':\n\t    case 'h':\n\t      return n * h$1;\n\n\t    case 'minutes':\n\t    case 'minute':\n\t    case 'mins':\n\t    case 'min':\n\t    case 'm':\n\t      return n * m$1;\n\n\t    case 'seconds':\n\t    case 'second':\n\t    case 'secs':\n\t    case 'sec':\n\t    case 's':\n\t      return n * s$1;\n\n\t    case 'milliseconds':\n\t    case 'millisecond':\n\t    case 'msecs':\n\t    case 'msec':\n\t    case 'ms':\n\t      return n;\n\n\t    default:\n\t      return undefined;\n\t  }\n\t}\n\t/**\n\t * Short format for `ms`.\n\t *\n\t * @param {Number} ms\n\t * @return {String}\n\t * @api private\n\t */\n\n\n\tfunction fmtShort$1(ms) {\n\t  if (ms >= d$1) {\n\t    return Math.round(ms / d$1) + 'd';\n\t  }\n\n\t  if (ms >= h$1) {\n\t    return Math.round(ms / h$1) + 'h';\n\t  }\n\n\t  if (ms >= m$1) {\n\t    return Math.round(ms / m$1) + 'm';\n\t  }\n\n\t  if (ms >= s$1) {\n\t    return Math.round(ms / s$1) + 's';\n\t  }\n\n\t  return ms + 'ms';\n\t}\n\t/**\n\t * Long format for `ms`.\n\t *\n\t * @param {Number} ms\n\t * @return {String}\n\t * @api private\n\t */\n\n\n\tfunction fmtLong$1(ms) {\n\t  return plural$1(ms, d$1, 'day') || plural$1(ms, h$1, 'hour') || plural$1(ms, m$1, 'minute') || plural$1(ms, s$1, 'second') || ms + ' ms';\n\t}\n\t/**\n\t * Pluralization helper.\n\t */\n\n\n\tfunction plural$1(ms, n, name) {\n\t  if (ms < n) {\n\t    return;\n\t  }\n\n\t  if (ms < n * 1.5) {\n\t    return Math.floor(ms / n) + ' ' + name;\n\t  }\n\n\t  return Math.ceil(ms / n) + ' ' + name + 's';\n\t}\n\n\t(function (module, exports) {\n\t  /**\n\t   * This is the common logic for both the Node.js and web browser\n\t   * implementations of `debug()`.\n\t   *\n\t   * Expose `debug()` as the module.\n\t   */\n\t  exports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\n\t  exports.coerce = coerce;\n\t  exports.disable = disable;\n\t  exports.enable = enable;\n\t  exports.enabled = enabled;\n\t  exports.humanize = ms$1;\n\t  /**\n\t   * Active `debug` instances.\n\t   */\n\n\t  exports.instances = [];\n\t  /**\n\t   * The currently active debug mode names, and names to skip.\n\t   */\n\n\t  exports.names = [];\n\t  exports.skips = [];\n\t  /**\n\t   * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t   *\n\t   * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t   */\n\n\t  exports.formatters = {};\n\t  /**\n\t   * Select a color.\n\t   * @param {String} namespace\n\t   * @return {Number}\n\t   * @api private\n\t   */\n\n\t  function selectColor(namespace) {\n\t    var hash = 0,\n\t        i;\n\n\t    for (i in namespace) {\n\t      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n\t      hash |= 0; // Convert to 32bit integer\n\t    }\n\n\t    return exports.colors[Math.abs(hash) % exports.colors.length];\n\t  }\n\t  /**\n\t   * Create a debugger with the given `namespace`.\n\t   *\n\t   * @param {String} namespace\n\t   * @return {Function}\n\t   * @api public\n\t   */\n\n\n\t  function createDebug(namespace) {\n\t    var prevTime;\n\n\t    function debug() {\n\t      // disabled?\n\t      if (!debug.enabled) return;\n\t      var self = debug; // set `diff` timestamp\n\n\t      var curr = +new Date();\n\t      var ms = curr - (prevTime || curr);\n\t      self.diff = ms;\n\t      self.prev = prevTime;\n\t      self.curr = curr;\n\t      prevTime = curr; // turn the `arguments` into a proper Array\n\n\t      var args = new Array(arguments.length);\n\n\t      for (var i = 0; i < args.length; i++) {\n\t        args[i] = arguments[i];\n\t      }\n\n\t      args[0] = exports.coerce(args[0]);\n\n\t      if ('string' !== typeof args[0]) {\n\t        // anything else let's inspect with %O\n\t        args.unshift('%O');\n\t      } // apply any `formatters` transformations\n\n\n\t      var index = 0;\n\t      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n\t        // if we encounter an escaped % then don't increase the array index\n\t        if (match === '%%') return match;\n\t        index++;\n\t        var formatter = exports.formatters[format];\n\n\t        if ('function' === typeof formatter) {\n\t          var val = args[index];\n\t          match = formatter.call(self, val); // now we need to remove `args[index]` since it's inlined in the `format`\n\n\t          args.splice(index, 1);\n\t          index--;\n\t        }\n\n\t        return match;\n\t      }); // apply env-specific formatting (colors, etc.)\n\n\t      exports.formatArgs.call(self, args);\n\t      var logFn = debug.log || exports.log || console.log.bind(console);\n\t      logFn.apply(self, args);\n\t    }\n\n\t    debug.namespace = namespace;\n\t    debug.enabled = exports.enabled(namespace);\n\t    debug.useColors = exports.useColors();\n\t    debug.color = selectColor(namespace);\n\t    debug.destroy = destroy; // env-specific initialization logic for debug instances\n\n\t    if ('function' === typeof exports.init) {\n\t      exports.init(debug);\n\t    }\n\n\t    exports.instances.push(debug);\n\t    return debug;\n\t  }\n\n\t  function destroy() {\n\t    var index = exports.instances.indexOf(this);\n\n\t    if (index !== -1) {\n\t      exports.instances.splice(index, 1);\n\t      return true;\n\t    } else {\n\t      return false;\n\t    }\n\t  }\n\t  /**\n\t   * Enables a debug mode by namespaces. This can include modes\n\t   * separated by a colon and wildcards.\n\t   *\n\t   * @param {String} namespaces\n\t   * @api public\n\t   */\n\n\n\t  function enable(namespaces) {\n\t    exports.save(namespaces);\n\t    exports.names = [];\n\t    exports.skips = [];\n\t    var i;\n\t    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t    var len = split.length;\n\n\t    for (i = 0; i < len; i++) {\n\t      if (!split[i]) continue; // ignore empty strings\n\n\t      namespaces = split[i].replace(/\\*/g, '.*?');\n\n\t      if (namespaces[0] === '-') {\n\t        exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t      } else {\n\t        exports.names.push(new RegExp('^' + namespaces + '$'));\n\t      }\n\t    }\n\n\t    for (i = 0; i < exports.instances.length; i++) {\n\t      var instance = exports.instances[i];\n\t      instance.enabled = exports.enabled(instance.namespace);\n\t    }\n\t  }\n\t  /**\n\t   * Disable debug output.\n\t   *\n\t   * @api public\n\t   */\n\n\n\t  function disable() {\n\t    exports.enable('');\n\t  }\n\t  /**\n\t   * Returns true if the given mode name is enabled, false otherwise.\n\t   *\n\t   * @param {String} name\n\t   * @return {Boolean}\n\t   * @api public\n\t   */\n\n\n\t  function enabled(name) {\n\t    if (name[name.length - 1] === '*') {\n\t      return true;\n\t    }\n\n\t    var i, len;\n\n\t    for (i = 0, len = exports.skips.length; i < len; i++) {\n\t      if (exports.skips[i].test(name)) {\n\t        return false;\n\t      }\n\t    }\n\n\t    for (i = 0, len = exports.names.length; i < len; i++) {\n\t      if (exports.names[i].test(name)) {\n\t        return true;\n\t      }\n\t    }\n\n\t    return false;\n\t  }\n\t  /**\n\t   * Coerce `val`.\n\t   *\n\t   * @param {Mixed} val\n\t   * @return {Mixed}\n\t   * @api private\n\t   */\n\n\n\t  function coerce(val) {\n\t    if (val instanceof Error) return val.stack || val.message;\n\t    return val;\n\t  }\n\t})(debug$6, debug$6.exports);\n\n\t(function (module, exports) {\n\t  exports = module.exports = debug$6.exports;\n\t  exports.log = log;\n\t  exports.formatArgs = formatArgs;\n\t  exports.save = save;\n\t  exports.load = load;\n\t  exports.useColors = useColors;\n\t  exports.storage = 'undefined' != typeof chrome && 'undefined' != typeof chrome.storage ? chrome.storage.local : localstorage();\n\t  /**\n\t   * Colors.\n\t   */\n\n\t  exports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n\t  /**\n\t   * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n\t   * and the Firebug extension (any Firefox version) are known\n\t   * to support \"%c\" CSS customizations.\n\t   *\n\t   * TODO: add a `localStorage` variable to explicitly enable/disable colors\n\t   */\n\n\t  function useColors() {\n\t    // NB: In an Electron preload script, document will be defined but not fully\n\t    // initialized. Since we know we're in Chrome, we'll just detect this case\n\t    // explicitly\n\t    if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n\t      return true;\n\t    } // Internet Explorer and Edge do not support colors.\n\n\n\t    if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t      return false;\n\t    } // is webkit? http://stackoverflow.com/a/16459606/376773\n\t    // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n\t    return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // is firebug? http://stackoverflow.com/a/398120/376773\n\t    typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // is firefox >= v31?\n\t    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t    typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // double check webkit in userAgent just in case we are in a worker\n\t    typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n\t  }\n\t  /**\n\t   * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n\t   */\n\n\n\t  exports.formatters.j = function (v) {\n\t    try {\n\t      return JSON.stringify(v);\n\t    } catch (err) {\n\t      return '[UnexpectedJSONParseError]: ' + err.message;\n\t    }\n\t  };\n\t  /**\n\t   * Colorize log arguments if enabled.\n\t   *\n\t   * @api public\n\t   */\n\n\n\t  function formatArgs(args) {\n\t    var useColors = this.useColors;\n\t    args[0] = (useColors ? '%c' : '') + this.namespace + (useColors ? ' %c' : ' ') + args[0] + (useColors ? '%c ' : ' ') + '+' + exports.humanize(this.diff);\n\t    if (!useColors) return;\n\t    var c = 'color: ' + this.color;\n\t    args.splice(1, 0, c, 'color: inherit'); // the final \"%c\" is somewhat tricky, because there could be other\n\t    // arguments passed either before or after the %c, so we need to\n\t    // figure out the correct index to insert the CSS into\n\n\t    var index = 0;\n\t    var lastC = 0;\n\t    args[0].replace(/%[a-zA-Z%]/g, function (match) {\n\t      if ('%%' === match) return;\n\t      index++;\n\n\t      if ('%c' === match) {\n\t        // we only are interested in the *last* %c\n\t        // (the user may have provided their own)\n\t        lastC = index;\n\t      }\n\t    });\n\t    args.splice(lastC, 0, c);\n\t  }\n\t  /**\n\t   * Invokes `console.log()` when available.\n\t   * No-op when `console.log` is not a \"function\".\n\t   *\n\t   * @api public\n\t   */\n\n\n\t  function log() {\n\t    // this hackery is required for IE8/9, where\n\t    // the `console.log` function doesn't have 'apply'\n\t    return 'object' === (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) && console.log && Function.prototype.apply.call(console.log, console, arguments);\n\t  }\n\t  /**\n\t   * Save `namespaces`.\n\t   *\n\t   * @param {String} namespaces\n\t   * @api private\n\t   */\n\n\n\t  function save(namespaces) {\n\t    try {\n\t      if (null == namespaces) {\n\t        exports.storage.removeItem('debug');\n\t      } else {\n\t        exports.storage.debug = namespaces;\n\t      }\n\t    } catch (e) {}\n\t  }\n\t  /**\n\t   * Load `namespaces`.\n\t   *\n\t   * @return {String} returns the previously persisted debug modes\n\t   * @api private\n\t   */\n\n\n\t  function load() {\n\t    var r;\n\n\t    try {\n\t      r = exports.storage.debug;\n\t    } catch (e) {} // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n\t    if (!r && typeof process !== 'undefined' && 'env' in process) {\n\t      r = process.env.DEBUG;\n\t    }\n\n\t    return r;\n\t  }\n\t  /**\n\t   * Enable namespaces listed in `localStorage.debug` initially.\n\t   */\n\n\n\t  exports.enable(load());\n\t  /**\n\t   * Localstorage attempts to return the localstorage.\n\t   *\n\t   * This is necessary because safari throws\n\t   * when a user disables cookies/localstorage\n\t   * and you attempt to access it.\n\t   *\n\t   * @return {LocalStorage}\n\t   * @api private\n\t   */\n\n\t  function localstorage() {\n\t    try {\n\t      return window.localStorage;\n\t    } catch (e) {}\n\t  }\n\t})(browser$2, browser$2.exports);\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar parseuri$1 = parseuri$2;\n\tvar debug$5 = browser$2.exports('socket.io-client:url');\n\t/**\n\t * Module exports.\n\t */\n\n\tvar url_1 = url;\n\t/**\n\t * URL parser.\n\t *\n\t * @param {String} url\n\t * @param {Object} An object meant to mimic window.location.\n\t *                 Defaults to window.location.\n\t * @api public\n\t */\n\n\tfunction url(uri, loc) {\n\t  var obj = uri; // default to window.location\n\n\t  loc = loc || typeof location !== 'undefined' && location;\n\t  if (null == uri) uri = loc.protocol + '//' + loc.host; // relative path support\n\n\t  if ('string' === typeof uri) {\n\t    if ('/' === uri.charAt(0)) {\n\t      if ('/' === uri.charAt(1)) {\n\t        uri = loc.protocol + uri;\n\t      } else {\n\t        uri = loc.host + uri;\n\t      }\n\t    }\n\n\t    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n\t      debug$5('protocol-less url %s', uri);\n\n\t      if ('undefined' !== typeof loc) {\n\t        uri = loc.protocol + '//' + uri;\n\t      } else {\n\t        uri = 'https://' + uri;\n\t      }\n\t    } // parse\n\n\n\t    debug$5('parse %s', uri);\n\t    obj = parseuri$1(uri);\n\t  } // make sure we treat `localhost:80` and `localhost` equally\n\n\n\t  if (!obj.port) {\n\t    if (/^(http|ws)$/.test(obj.protocol)) {\n\t      obj.port = '80';\n\t    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n\t      obj.port = '443';\n\t    }\n\t  }\n\n\t  obj.path = obj.path || '/';\n\t  var ipv6 = obj.host.indexOf(':') !== -1;\n\t  var host = ipv6 ? '[' + obj.host + ']' : obj.host; // define unique id\n\n\t  obj.id = obj.protocol + '://' + host + ':' + obj.port; // define href\n\n\t  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : ':' + obj.port);\n\t  return obj;\n\t}\n\n\tvar socket_ioParser = {};\n\n\tvar componentEmitter = {exports: {}};\n\n\t(function (module) {\n\t  /**\n\t   * Expose `Emitter`.\n\t   */\n\t  {\n\t    module.exports = Emitter;\n\t  }\n\t  /**\n\t   * Initialize a new `Emitter`.\n\t   *\n\t   * @api public\n\t   */\n\n\n\t  function Emitter(obj) {\n\t    if (obj) return mixin(obj);\n\t  }\n\t  /**\n\t   * Mixin the emitter properties.\n\t   *\n\t   * @param {Object} obj\n\t   * @return {Object}\n\t   * @api private\n\t   */\n\n\t  function mixin(obj) {\n\t    for (var key in Emitter.prototype) {\n\t      obj[key] = Emitter.prototype[key];\n\t    }\n\n\t    return obj;\n\t  }\n\t  /**\n\t   * Listen on the given `event` with `fn`.\n\t   *\n\t   * @param {String} event\n\t   * @param {Function} fn\n\t   * @return {Emitter}\n\t   * @api public\n\t   */\n\n\n\t  Emitter.prototype.on = Emitter.prototype.addEventListener = function (event, fn) {\n\t    this._callbacks = this._callbacks || {};\n\t    (this._callbacks['$' + event] = this._callbacks['$' + event] || []).push(fn);\n\t    return this;\n\t  };\n\t  /**\n\t   * Adds an `event` listener that will be invoked a single\n\t   * time then automatically removed.\n\t   *\n\t   * @param {String} event\n\t   * @param {Function} fn\n\t   * @return {Emitter}\n\t   * @api public\n\t   */\n\n\n\t  Emitter.prototype.once = function (event, fn) {\n\t    function on() {\n\t      this.off(event, on);\n\t      fn.apply(this, arguments);\n\t    }\n\n\t    on.fn = fn;\n\t    this.on(event, on);\n\t    return this;\n\t  };\n\t  /**\n\t   * Remove the given callback for `event` or all\n\t   * registered callbacks.\n\t   *\n\t   * @param {String} event\n\t   * @param {Function} fn\n\t   * @return {Emitter}\n\t   * @api public\n\t   */\n\n\n\t  Emitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function (event, fn) {\n\t    this._callbacks = this._callbacks || {}; // all\n\n\t    if (0 == arguments.length) {\n\t      this._callbacks = {};\n\t      return this;\n\t    } // specific event\n\n\n\t    var callbacks = this._callbacks['$' + event];\n\t    if (!callbacks) return this; // remove all handlers\n\n\t    if (1 == arguments.length) {\n\t      delete this._callbacks['$' + event];\n\t      return this;\n\t    } // remove specific handler\n\n\n\t    var cb;\n\n\t    for (var i = 0; i < callbacks.length; i++) {\n\t      cb = callbacks[i];\n\n\t      if (cb === fn || cb.fn === fn) {\n\t        callbacks.splice(i, 1);\n\t        break;\n\t      }\n\t    }\n\n\t    return this;\n\t  };\n\t  /**\n\t   * Emit `event` with the given args.\n\t   *\n\t   * @param {String} event\n\t   * @param {Mixed} ...\n\t   * @return {Emitter}\n\t   */\n\n\n\t  Emitter.prototype.emit = function (event) {\n\t    this._callbacks = this._callbacks || {};\n\t    var args = [].slice.call(arguments, 1),\n\t        callbacks = this._callbacks['$' + event];\n\n\t    if (callbacks) {\n\t      callbacks = callbacks.slice(0);\n\n\t      for (var i = 0, len = callbacks.length; i < len; ++i) {\n\t        callbacks[i].apply(this, args);\n\t      }\n\t    }\n\n\t    return this;\n\t  };\n\t  /**\n\t   * Return array of callbacks for `event`.\n\t   *\n\t   * @param {String} event\n\t   * @return {Array}\n\t   * @api public\n\t   */\n\n\n\t  Emitter.prototype.listeners = function (event) {\n\t    this._callbacks = this._callbacks || {};\n\t    return this._callbacks['$' + event] || [];\n\t  };\n\t  /**\n\t   * Check if this emitter has `event` handlers.\n\t   *\n\t   * @param {String} event\n\t   * @return {Boolean}\n\t   * @api public\n\t   */\n\n\n\t  Emitter.prototype.hasListeners = function (event) {\n\t    return !!this.listeners(event).length;\n\t  };\n\t})(componentEmitter);\n\n\tvar toString$1 = {}.toString;\n\n\tvar isarray = Array.isArray || function (arr) {\n\t  return toString$1.call(arr) == '[object Array]';\n\t};\n\n\t(function (exports) {\n\t  /**\n\t   * Module dependencies.\n\t   */\n\t  var debug = browser$2.exports('socket.io-parser');\n\t  var Emitter = componentEmitter.exports; // var binary = require('./binary');\n\n\t  var isArray = isarray; // var isBuf = require('./is-buffer');\n\n\t  /**\n\t   * Protocol version.\n\t   *\n\t   * @api public\n\t   */\n\n\t  exports.protocol = 4;\n\t  /**\n\t   * Packet types.\n\t   *\n\t   * @api public\n\t   */\n\n\t  exports.types = ['CONNECT', 'DISCONNECT', 'EVENT', 'ACK', 'ERROR', 'BINARY_EVENT', 'BINARY_ACK'];\n\t  /**\n\t   * Packet type `connect`.\n\t   *\n\t   * @api public\n\t   */\n\n\t  exports.CONNECT = 0;\n\t  /**\n\t   * Packet type `disconnect`.\n\t   *\n\t   * @api public\n\t   */\n\n\t  exports.DISCONNECT = 1;\n\t  /**\n\t   * Packet type `event`.\n\t   *\n\t   * @api public\n\t   */\n\n\t  exports.EVENT = 2;\n\t  /**\n\t   * Packet type `ack`.\n\t   *\n\t   * @api public\n\t   */\n\n\t  exports.ACK = 3;\n\t  /**\n\t   * Packet type `error`.\n\t   *\n\t   * @api public\n\t   */\n\n\t  exports.ERROR = 4;\n\t  /**\n\t   * Packet type 'binary event'\n\t   *\n\t   * @api public\n\t   */\n\n\t  exports.BINARY_EVENT = 5;\n\t  /**\n\t   * Packet type `binary ack`. For acks with binary arguments.\n\t   *\n\t   * @api public\n\t   */\n\n\t  exports.BINARY_ACK = 6;\n\t  /**\n\t   * Encoder constructor.\n\t   *\n\t   * @api public\n\t   */\n\n\t  exports.Encoder = Encoder;\n\t  /**\n\t   * Decoder constructor.\n\t   *\n\t   * @api public\n\t   */\n\n\t  exports.Decoder = Decoder;\n\t  /**\n\t   * A socket.io Encoder instance\n\t   *\n\t   * @api public\n\t   */\n\n\t  function Encoder() {}\n\n\t  var ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\t  /**\n\t   * Encode a packet as a single string if non-binary, or as a\n\t   * buffer sequence, depending on packet type.\n\t   *\n\t   * @param {Object} obj - packet object\n\t   * @param {Function} callback - function to handle encodings (likely engine.write)\n\t   * @return Calls callback with Array of encodings\n\t   * @api public\n\t   */\n\n\t  Encoder.prototype.encode = function (obj, callback) {\n\t    // debug('encoding packet %j', obj);\n\t    //\n\t    // if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n\t    //   encodeAsBinary(obj, callback);\n\t    // } else {\n\t    var encoding = encodeAsString(obj);\n\t    callback([encoding]); // }\n\t  };\n\t  /**\n\t   * Encode packet as string.\n\t   *\n\t   * @param {Object} packet\n\t   * @return {String} encoded\n\t   * @api private\n\t   */\n\n\n\t  function encodeAsString(obj) {\n\t    // first is type\n\t    var str = '' + obj.type; // attachments if we have them\n\n\t    if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n\t      str += obj.attachments + '-';\n\t    } // if we have a namespace other than `/`\n\t    // we append it followed by a comma `,`\n\n\n\t    if (obj.nsp && '/' !== obj.nsp) {\n\t      str += obj.nsp + ',';\n\t    } // immediately followed by the id\n\n\n\t    if (null != obj.id) {\n\t      str += obj.id;\n\t    } // json data\n\n\n\t    if (null != obj.data) {\n\t      var payload = tryStringify(obj.data);\n\n\t      if (payload !== false) {\n\t        str += payload;\n\t      } else {\n\t        return ERROR_PACKET;\n\t      }\n\t    }\n\n\t    debug('encoded %j as %s', obj, str);\n\t    return str;\n\t  }\n\n\t  function tryStringify(str) {\n\t    try {\n\t      return JSON.stringify(str);\n\t    } catch (e) {\n\t      return false;\n\t    }\n\t  }\n\t  /**\n\t   * Encode packet as 'buffer sequence' by removing blobs, and\n\t   * deconstructing packet into object with placeholders and\n\t   * a list of buffers.\n\t   *\n\t   * @param {Object} packet\n\t   * @return {Buffer} encoded\n\t   * @api private\n\t   */\n\t  // function encodeAsBinary(obj, callback) {\n\t  //\n\t  //   function writeEncoding(bloblessData) {\n\t  //     var deconstruction = binary.deconstructPacket(bloblessData);\n\t  //     var pack = encodeAsString(deconstruction.packet);\n\t  //     var buffers = deconstruction.buffers;\n\t  //\n\t  //     buffers.unshift(pack); // add packet info to beginning of data list\n\t  //     callback(buffers); // write all the buffers\n\t  //   }\n\t  //\n\t  //   binary.removeBlobs(obj, writeEncoding);\n\t  // }\n\n\t  /**\n\t   * A socket.io Decoder instance\n\t   *\n\t   * @return {Object} decoder\n\t   * @api public\n\t   */\n\n\n\t  function Decoder() {\n\t    this.reconstructor = null;\n\t  }\n\t  /**\n\t   * Mix in `Emitter` with Decoder.\n\t   */\n\n\n\t  Emitter(Decoder.prototype);\n\t  /**\n\t   * Decodes an encoded packet string into packet JSON.\n\t   *\n\t   * @param {String} obj - encoded packet\n\t   * @return {Object} packet\n\t   * @api public\n\t   */\n\n\t  Decoder.prototype.add = function (obj) {\n\t    var packet;\n\n\t    if (typeof obj === 'string') {\n\t      packet = decodeString(obj); // if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n\t      //   this.reconstructor = new BinaryReconstructor(packet);\n\t      //\n\t      //   // no attachments, labeled binary but no binary data to follow\n\t      //   if (this.reconstructor.reconPack.attachments === 0) {\n\t      //     this.emit('decoded', packet);\n\t      //   }\n\t      // } else { // non-binary full packet\n\n\t      this.emit('decoded', packet); // }\n\t    } // else if (isBuf(obj) || obj.base64) { // raw binary data\n\t    //   if (!this.reconstructor) {\n\t    //     throw new Error('got binary data when not reconstructing a packet');\n\t    //   } else {\n\t    //     packet = this.reconstructor.takeBinaryData(obj);\n\t    //     if (packet) { // received final buffer\n\t    //       this.reconstructor = null;\n\t    //       this.emit('decoded', packet);\n\t    //     }\n\t    //   }\n\t    // }\n\t    else {\n\t      throw new Error('Unknown type: ' + obj);\n\t    }\n\t  };\n\t  /**\n\t   * Decode a packet String (JSON data)\n\t   *\n\t   * @param {String} str\n\t   * @return {Object} packet\n\t   * @api private\n\t   */\n\n\n\t  function decodeString(str) {\n\t    var i = 0; // look up type\n\n\t    var p = {\n\t      type: Number(str.charAt(0))\n\t    };\n\n\t    if (null == exports.types[p.type]) {\n\t      return error('unknown packet type ' + p.type);\n\t    } // look up attachments if type binary\n\n\n\t    if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n\t      var buf = '';\n\n\t      while (str.charAt(++i) !== '-') {\n\t        buf += str.charAt(i);\n\t        if (i == str.length) break;\n\t      }\n\n\t      if (buf != Number(buf) || str.charAt(i) !== '-') {\n\t        throw new Error('Illegal attachments');\n\t      }\n\n\t      p.attachments = Number(buf);\n\t    } // look up namespace (if any)\n\n\n\t    if ('/' === str.charAt(i + 1)) {\n\t      p.nsp = '';\n\n\t      while (++i) {\n\t        var c = str.charAt(i);\n\t        if (',' === c) break;\n\t        p.nsp += c;\n\t        if (i === str.length) break;\n\t      }\n\t    } else {\n\t      p.nsp = '/';\n\t    } // look up id\n\n\n\t    var next = str.charAt(i + 1);\n\n\t    if ('' !== next && Number(next) == next) {\n\t      p.id = '';\n\n\t      while (++i) {\n\t        var c = str.charAt(i);\n\n\t        if (null == c || Number(c) != c) {\n\t          --i;\n\t          break;\n\t        }\n\n\t        p.id += str.charAt(i);\n\t        if (i === str.length) break;\n\t      }\n\n\t      p.id = Number(p.id);\n\t    } // look up json data\n\n\n\t    if (str.charAt(++i)) {\n\t      var payload = tryParse(str.substr(i));\n\t      var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n\n\t      if (isPayloadValid) {\n\t        p.data = payload;\n\t      } else {\n\t        return error('invalid payload');\n\t      }\n\t    }\n\n\t    debug('decoded %s as %j', str, p);\n\t    return p;\n\t  }\n\n\t  function tryParse(str) {\n\t    try {\n\t      return JSON.parse(str);\n\t    } catch (e) {\n\t      return false;\n\t    }\n\t  }\n\t  /**\n\t   * Deallocates a parser's resources\n\t   *\n\t   * @api public\n\t   */\n\n\n\t  Decoder.prototype.destroy = function () {\n\t    if (this.reconstructor) {\n\t      this.reconstructor.finishedReconstruction();\n\t    }\n\t  };\n\n\t  function error(msg) {\n\t    return {\n\t      type: exports.ERROR,\n\t      data: 'parser error: ' + msg\n\t    };\n\t  }\n\t})(socket_ioParser);\n\n\tvar lib = {exports: {}};\n\n\tvar transports$1 = {};\n\n\tvar browser$1 = {};\n\n\t/**\n\t * Gets the keys for an object.\n\t *\n\t * @return {Array} keys\n\t * @api private\n\t */\n\n\tvar keys = Object.keys || function keys(obj) {\n\t  var arr = [];\n\t  var has = Object.prototype.hasOwnProperty;\n\n\t  for (var i in obj) {\n\t    if (has.call(obj, i)) {\n\t      arr.push(i);\n\t    }\n\t  }\n\n\t  return arr;\n\t};\n\n\t/*\n\t * Module requirements.\n\t */\n\n\tvar isArray = isarray;\n\tvar toString = Object.prototype.toString;\n\tvar withNativeBlob = typeof Blob === 'function' || typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\n\tvar withNativeFile = typeof File === 'function' || typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\t/**\n\t * Module exports.\n\t */\n\n\tvar hasBinary2 = hasBinary;\n\t/**\n\t * Checks for binary data.\n\t *\n\t * Supports Buffer, ArrayBuffer, Blob and File.\n\t *\n\t * @param {Object} anything\n\t * @api public\n\t */\n\n\tfunction hasBinary(obj) {\n\t  if (!obj || _typeof(obj) !== 'object') {\n\t    return false;\n\t  }\n\n\t  if (isArray(obj)) {\n\t    for (var i = 0, l = obj.length; i < l; i++) {\n\t      if (hasBinary(obj[i])) {\n\t        return true;\n\t      }\n\t    }\n\n\t    return false;\n\t  }\n\n\t  if (typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj) || typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer || withNativeBlob && obj instanceof Blob || withNativeFile && obj instanceof File) {\n\t    return true;\n\t  } // see: https://github.com/Automattic/has-binary/pull/4\n\n\n\t  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n\t    return hasBinary(obj.toJSON(), true);\n\t  }\n\n\t  for (var key in obj) {\n\t    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n\t      return true;\n\t    }\n\t  }\n\n\t  return false;\n\t}\n\n\tvar after_1 = after;\n\n\tfunction after(count, callback, err_cb) {\n\t  var bail = false;\n\t  err_cb = err_cb || noop$1;\n\t  proxy.count = count;\n\t  return count === 0 ? callback() : proxy;\n\n\t  function proxy(err, result) {\n\t    if (proxy.count <= 0) {\n\t      throw new Error('after called too many times');\n\t    }\n\n\t    --proxy.count; // after first error, rest are passed to err_cb\n\n\t    if (err) {\n\t      bail = true;\n\t      callback(err); // future error callbacks will go to error handler\n\n\t      callback = err_cb;\n\t    } else if (proxy.count === 0 && !bail) {\n\t      callback(null, result);\n\t    }\n\t  }\n\t}\n\n\tfunction noop$1() {}\n\n\t/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\tvar stringFromCharCode = String.fromCharCode; // Taken from https://mths.be/punycode\n\n\tfunction ucs2decode(string) {\n\t  var output = [];\n\t  var counter = 0;\n\t  var length = string.length;\n\t  var value;\n\t  var extra;\n\n\t  while (counter < length) {\n\t    value = string.charCodeAt(counter++);\n\n\t    if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t      // high surrogate, and there is a next character\n\t      extra = string.charCodeAt(counter++);\n\n\t      if ((extra & 0xFC00) == 0xDC00) {\n\t        // low surrogate\n\t        output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t      } else {\n\t        // unmatched surrogate; only append this code unit, in case the next\n\t        // code unit is the high surrogate of a surrogate pair\n\t        output.push(value);\n\t        counter--;\n\t      }\n\t    } else {\n\t      output.push(value);\n\t    }\n\t  }\n\n\t  return output;\n\t} // Taken from https://mths.be/punycode\n\n\n\tfunction ucs2encode(array) {\n\t  var length = array.length;\n\t  var index = -1;\n\t  var value;\n\t  var output = '';\n\n\t  while (++index < length) {\n\t    value = array[index];\n\n\t    if (value > 0xFFFF) {\n\t      value -= 0x10000;\n\t      output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t      value = 0xDC00 | value & 0x3FF;\n\t    }\n\n\t    output += stringFromCharCode(value);\n\t  }\n\n\t  return output;\n\t}\n\n\tfunction checkScalarValue(codePoint, strict) {\n\t  if (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t    if (strict) {\n\t      throw Error('Lone surrogate U+' + codePoint.toString(16).toUpperCase() + ' is not a scalar value');\n\t    }\n\n\t    return false;\n\t  }\n\n\t  return true;\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\n\tfunction createByte(codePoint, shift) {\n\t  return stringFromCharCode(codePoint >> shift & 0x3F | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint, strict) {\n\t  if ((codePoint & 0xFFFFFF80) == 0) {\n\t    // 1-byte sequence\n\t    return stringFromCharCode(codePoint);\n\t  }\n\n\t  var symbol = '';\n\n\t  if ((codePoint & 0xFFFFF800) == 0) {\n\t    // 2-byte sequence\n\t    symbol = stringFromCharCode(codePoint >> 6 & 0x1F | 0xC0);\n\t  } else if ((codePoint & 0xFFFF0000) == 0) {\n\t    // 3-byte sequence\n\t    if (!checkScalarValue(codePoint, strict)) {\n\t      codePoint = 0xFFFD;\n\t    }\n\n\t    symbol = stringFromCharCode(codePoint >> 12 & 0x0F | 0xE0);\n\t    symbol += createByte(codePoint, 6);\n\t  } else if ((codePoint & 0xFFE00000) == 0) {\n\t    // 4-byte sequence\n\t    symbol = stringFromCharCode(codePoint >> 18 & 0x07 | 0xF0);\n\t    symbol += createByte(codePoint, 12);\n\t    symbol += createByte(codePoint, 6);\n\t  }\n\n\t  symbol += stringFromCharCode(codePoint & 0x3F | 0x80);\n\t  return symbol;\n\t}\n\n\tfunction utf8encode(string, opts) {\n\t  opts = opts || {};\n\t  var strict = false !== opts.strict;\n\t  var codePoints = ucs2decode(string);\n\t  var length = codePoints.length;\n\t  var index = -1;\n\t  var codePoint;\n\t  var byteString = '';\n\n\t  while (++index < length) {\n\t    codePoint = codePoints[index];\n\t    byteString += encodeCodePoint(codePoint, strict);\n\t  }\n\n\t  return byteString;\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\n\tfunction readContinuationByte() {\n\t  if (byteIndex >= byteCount) {\n\t    throw Error('Invalid byte index');\n\t  }\n\n\t  var continuationByte = byteArray[byteIndex] & 0xFF;\n\t  byteIndex++;\n\n\t  if ((continuationByte & 0xC0) == 0x80) {\n\t    return continuationByte & 0x3F;\n\t  } // If we end up here, it’s not a continuation byte\n\n\n\t  throw Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol(strict) {\n\t  var byte1;\n\t  var byte2;\n\t  var byte3;\n\t  var byte4;\n\t  var codePoint;\n\n\t  if (byteIndex > byteCount) {\n\t    throw Error('Invalid byte index');\n\t  }\n\n\t  if (byteIndex == byteCount) {\n\t    return false;\n\t  } // Read first byte\n\n\n\t  byte1 = byteArray[byteIndex] & 0xFF;\n\t  byteIndex++; // 1-byte sequence (no continuation bytes)\n\n\t  if ((byte1 & 0x80) == 0) {\n\t    return byte1;\n\t  } // 2-byte sequence\n\n\n\t  if ((byte1 & 0xE0) == 0xC0) {\n\t    byte2 = readContinuationByte();\n\t    codePoint = (byte1 & 0x1F) << 6 | byte2;\n\n\t    if (codePoint >= 0x80) {\n\t      return codePoint;\n\t    } else {\n\t      throw Error('Invalid continuation byte');\n\t    }\n\t  } // 3-byte sequence (may include unpaired surrogates)\n\n\n\t  if ((byte1 & 0xF0) == 0xE0) {\n\t    byte2 = readContinuationByte();\n\t    byte3 = readContinuationByte();\n\t    codePoint = (byte1 & 0x0F) << 12 | byte2 << 6 | byte3;\n\n\t    if (codePoint >= 0x0800) {\n\t      return checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t    } else {\n\t      throw Error('Invalid continuation byte');\n\t    }\n\t  } // 4-byte sequence\n\n\n\t  if ((byte1 & 0xF8) == 0xF0) {\n\t    byte2 = readContinuationByte();\n\t    byte3 = readContinuationByte();\n\t    byte4 = readContinuationByte();\n\t    codePoint = (byte1 & 0x07) << 0x12 | byte2 << 0x0C | byte3 << 0x06 | byte4;\n\n\t    if (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t      return codePoint;\n\t    }\n\t  }\n\n\t  throw Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\n\tfunction utf8decode(byteString, opts) {\n\t  opts = opts || {};\n\t  var strict = false !== opts.strict;\n\t  byteArray = ucs2decode(byteString);\n\t  byteCount = byteArray.length;\n\t  byteIndex = 0;\n\t  var codePoints = [];\n\t  var tmp;\n\n\t  while ((tmp = decodeSymbol(strict)) !== false) {\n\t    codePoints.push(tmp);\n\t  }\n\n\t  return ucs2encode(codePoints);\n\t}\n\n\tvar utf8 = {\n\t  version: '2.1.2',\n\t  encode: utf8encode,\n\t  decode: utf8decode\n\t};\n\n\t/**\n\t * Create a blob builder even when vendor prefixes exist\n\t */\n\tvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder : typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder : typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder : typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : false;\n\t/**\n\t * Check if Blob constructor is supported\n\t */\n\n\tvar blobSupported = function () {\n\t  try {\n\t    var a = new Blob(['hi']);\n\t    return a.size === 2;\n\t  } catch (e) {\n\t    return false;\n\t  }\n\t}();\n\t/**\n\t * Check if Blob constructor supports ArrayBufferViews\n\t * Fails in Safari 6, so we need to map to ArrayBuffers there.\n\t */\n\n\n\tvar blobSupportsArrayBufferView = blobSupported && function () {\n\t  try {\n\t    var b = new Blob([new Uint8Array([1, 2])]);\n\t    return b.size === 2;\n\t  } catch (e) {\n\t    return false;\n\t  }\n\t}();\n\t/**\n\t * Check if BlobBuilder is supported\n\t */\n\n\n\tvar blobBuilderSupported = BlobBuilder && BlobBuilder.prototype.append && BlobBuilder.prototype.getBlob;\n\t/**\n\t * Helper function that maps ArrayBufferViews to ArrayBuffers\n\t * Used by BlobBuilder constructor and old browsers that didn't\n\t * support it in the Blob constructor.\n\t */\n\n\tfunction mapArrayBufferViews(ary) {\n\t  return ary.map(function (chunk) {\n\t    if (chunk.buffer instanceof ArrayBuffer) {\n\t      var buf = chunk.buffer; // if this is a subarray, make a copy so we only\n\t      // include the subarray region from the underlying buffer\n\n\t      if (chunk.byteLength !== buf.byteLength) {\n\t        var copy = new Uint8Array(chunk.byteLength);\n\t        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n\t        buf = copy.buffer;\n\t      }\n\n\t      return buf;\n\t    }\n\n\t    return chunk;\n\t  });\n\t}\n\n\tfunction BlobBuilderConstructor(ary, options) {\n\t  options = options || {};\n\t  var bb = new BlobBuilder();\n\t  mapArrayBufferViews(ary).forEach(function (part) {\n\t    bb.append(part);\n\t  });\n\t  return options.type ? bb.getBlob(options.type) : bb.getBlob();\n\t}\n\n\tfunction BlobConstructor(ary, options) {\n\t  return new Blob(mapArrayBufferViews(ary), options || {});\n\t}\n\n\tif (typeof Blob !== 'undefined') {\n\t  BlobBuilderConstructor.prototype = Blob.prototype;\n\t  BlobConstructor.prototype = Blob.prototype;\n\t}\n\n\tvar blob = function () {\n\t  if (blobSupported) {\n\t    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\n\t  } else if (blobBuilderSupported) {\n\t    return BlobBuilderConstructor;\n\t  } else {\n\t    return undefined;\n\t  }\n\t}();\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\t(function (exports) {\n\t  var keys$1 = keys;\n\t  var hasBinary = hasBinary2; // var sliceBuffer = require('arraybuffer.slice');\n\n\t  var after = after_1;\n\t  var utf8$1 = utf8; // var base64encoder;\n\t  // if (typeof ArrayBuffer !== 'undefined') {\n\t  //   base64encoder = require('base64-arraybuffer');\n\t  // }\n\n\t  /**\n\t   * Check if we are running an android browser. That requires us to use\n\t   * ArrayBuffer with polling transports...\n\t   *\n\t   * http://ghinda.net/jpeg-blob-ajax-android/\n\t   */\n\n\t  typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\t  /**\n\t   * Check if we are running in PhantomJS.\n\t   * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n\t   * https://github.com/ariya/phantomjs/issues/11395\n\t   * @type boolean\n\t   */\n\n\t  typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\t  /**\n\t   * Current protocol version.\n\t   */\n\n\t  exports.protocol = 3;\n\t  /**\n\t   * Packet types.\n\t   */\n\n\t  var packets = exports.packets = {\n\t    open: 0 // non-ws\n\t    ,\n\t    close: 1 // non-ws\n\t    ,\n\t    ping: 2,\n\t    pong: 3,\n\t    message: 4,\n\t    upgrade: 5,\n\t    noop: 6\n\t  };\n\t  var packetslist = keys$1(packets);\n\t  /**\n\t   * Premade error packet.\n\t   */\n\n\t  var err = {\n\t    type: 'error',\n\t    data: 'parser error'\n\t  };\n\t  /**\n\t   * Create a blob api even for blob builder when vendor prefixes exist\n\t   */\n\n\t  var Blob = blob;\n\t  /**\n\t   * Encodes a packet.\n\t   *\n\t   *     <packet type id> [ <data> ]\n\t   *\n\t   * Example:\n\t   *\n\t   *     5hello world\n\t   *     3\n\t   *     4\n\t   *\n\t   * Binary is encoded in an identical principle\n\t   *\n\t   * @api private\n\t   */\n\n\t  exports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n\t    if (typeof supportsBinary === 'function') {\n\t      callback = supportsBinary;\n\t      supportsBinary = false;\n\t    }\n\n\t    if (typeof utf8encode === 'function') {\n\t      callback = utf8encode;\n\t      utf8encode = null;\n\t    }\n\n\t    packet.data === undefined ? undefined : packet.data.buffer || packet.data; // if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n\t    //   return encodeArrayBuffer(packet, supportsBinary, callback);\n\t    // } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n\t    //   return encodeBlob(packet, supportsBinary, callback);\n\t    // }\n\t    //\n\t    // // might be an object with { base64: true, data: dataAsBase64String }\n\t    // if (data && data.base64) {\n\t    //   return encodeBase64Object(packet, callback);\n\t    // }\n\t    // Sending data as a utf-8 string\n\n\t    var encoded = packets[packet.type]; // data fragment is optional\n\n\t    if (undefined !== packet.data) {\n\t      encoded += utf8encode ? utf8$1.encode(String(packet.data), {\n\t        strict: false\n\t      }) : String(packet.data);\n\t    }\n\n\t    return callback('' + encoded);\n\t  }; // function encodeBase64Object(packet, callback) {\n\t  //   // packet data is an object { base64: true, data: dataAsBase64String }\n\t  //   var message = 'b' + exports.packets[packet.type] + packet.data.data;\n\t  //   return callback(message);\n\t  // }\n\n\t  /**\n\t   * Encode packet helpers for binary types\n\t   */\n\t  // function encodeArrayBuffer(packet, supportsBinary, callback) {\n\t  //   if (!supportsBinary) {\n\t  //     return exports.encodeBase64Packet(packet, callback);\n\t  //   }\n\t  //\n\t  //   var data = packet.data;\n\t  //   var contentArray = new Uint8Array(data);\n\t  //   var resultBuffer = new Uint8Array(1 + data.byteLength);\n\t  //\n\t  //   resultBuffer[0] = packets[packet.type];\n\t  //   for (var i = 0; i < contentArray.length; i++) {\n\t  //     resultBuffer[i+1] = contentArray[i];\n\t  //   }\n\t  //\n\t  //   return callback(resultBuffer.buffer);\n\t  // }\n\t  //\n\t  // function encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n\t  //   if (!supportsBinary) {\n\t  //     return exports.encodeBase64Packet(packet, callback);\n\t  //   }\n\t  //\n\t  //   var fr = new FileReader();\n\t  //   fr.onload = function() {\n\t  //     exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n\t  //   };\n\t  //   return fr.readAsArrayBuffer(packet.data);\n\t  // }\n\t  //\n\t  // function encodeBlob(packet, supportsBinary, callback) {\n\t  //   if (!supportsBinary) {\n\t  //     return exports.encodeBase64Packet(packet, callback);\n\t  //   }\n\t  //\n\t  //   if (dontSendBlobs) {\n\t  //     return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n\t  //   }\n\t  //\n\t  //   var length = new Uint8Array(1);\n\t  //   length[0] = packets[packet.type];\n\t  //   var blob = new Blob([length.buffer, packet.data]);\n\t  //\n\t  //   return callback(blob);\n\t  // }\n\n\t  /**\n\t   * Encodes a packet with binary data in a base64 string\n\t   *\n\t   * @param {Object} packet, has `type` and `data`\n\t   * @return {String} base64 encoded message\n\t   */\n\t  // exports.encodeBase64Packet = function(packet, callback) {\n\t  //   var message = 'b' + exports.packets[packet.type];\n\t  //   if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n\t  //     var fr = new FileReader();\n\t  //     fr.onload = function() {\n\t  //       var b64 = fr.result.split(',')[1];\n\t  //       callback(message + b64);\n\t  //     };\n\t  //     return fr.readAsDataURL(packet.data);\n\t  //   }\n\t  //\n\t  //   var b64data;\n\t  //   try {\n\t  //     b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n\t  //   } catch (e) {\n\t  //     // iPhone Safari doesn't let you apply with typed arrays\n\t  //     var typed = new Uint8Array(packet.data);\n\t  //     var basic = new Array(typed.length);\n\t  //     for (var i = 0; i < typed.length; i++) {\n\t  //       basic[i] = typed[i];\n\t  //     }\n\t  //     b64data = String.fromCharCode.apply(null, basic);\n\t  //   }\n\t  //   message += btoa(b64data);\n\t  //   return callback(message);\n\t  // };\n\n\t  /**\n\t   * Decodes a packet. Changes format to Blob if requested.\n\t   *\n\t   * @return {Object} with `type` and `data` (if any)\n\t   * @api private\n\t   */\n\n\n\t  exports.decodePacket = function (data, binaryType, utf8decode) {\n\t    if (data === undefined) {\n\t      return err;\n\t    } // String data\n\n\n\t    if (typeof data === 'string') {\n\t      // if (data.charAt(0) === 'b') {\n\t      //   return exports.decodeBase64Packet(data.substr(1), binaryType);\n\t      // }\n\t      if (utf8decode) {\n\t        data = tryDecode(data);\n\n\t        if (data === false) {\n\t          return err;\n\t        }\n\t      }\n\n\t      var type = data.charAt(0);\n\n\t      if (Number(type) != type || !packetslist[type]) {\n\t        return err;\n\t      }\n\n\t      if (data.length > 1) {\n\t        return {\n\t          type: packetslist[type],\n\t          data: data.substring(1)\n\t        };\n\t      } else {\n\t        return {\n\t          type: packetslist[type]\n\t        };\n\t      }\n\t    }\n\n\t    var asArray = new Uint8Array(data);\n\t    var type = asArray[0];\n\t    var rest = sliceBuffer(data, 1);\n\n\t    if (Blob && binaryType === 'blob') {\n\t      rest = new Blob([rest]);\n\t    }\n\n\t    return {\n\t      type: packetslist[type],\n\t      data: rest\n\t    };\n\t  };\n\n\t  function tryDecode(data) {\n\t    try {\n\t      data = utf8$1.decode(data, {\n\t        strict: false\n\t      });\n\t    } catch (e) {\n\t      return false;\n\t    }\n\n\t    return data;\n\t  }\n\t  /**\n\t   * Decodes a packet encoded in a base64 string\n\t   *\n\t   * @param {String} base64 encoded message\n\t   * @return {Object} with `type` and `data` (if any)\n\t   */\n\t  // exports.decodeBase64Packet = function(msg, binaryType) {\n\t  //   var type = packetslist[msg.charAt(0)];\n\t  //   if (!base64encoder) {\n\t  //     return { type: type, data: { base64: true, data: msg.substr(1) } };\n\t  //   }\n\t  //\n\t  //   var data = base64encoder.decode(msg.substr(1));\n\t  //\n\t  //   if (binaryType === 'blob' && Blob) {\n\t  //     data = new Blob([data]);\n\t  //   }\n\t  //\n\t  //   return { type: type, data: data };\n\t  // };\n\n\t  /**\n\t   * Encodes multiple messages (payload).\n\t   *\n\t   *     <length>:data\n\t   *\n\t   * Example:\n\t   *\n\t   *     11:hello world2:hi\n\t   *\n\t   * If any contents are binary, they will be encoded as base64 strings. Base64\n\t   * encoded strings are marked with a b before the length specifier\n\t   *\n\t   * @param {Array} packets\n\t   * @api private\n\t   */\n\n\n\t  exports.encodePayload = function (packets, supportsBinary, callback) {\n\t    if (typeof supportsBinary === 'function') {\n\t      callback = supportsBinary;\n\t      supportsBinary = null;\n\t    }\n\n\t    var isBinary = hasBinary(packets); //\n\t    // if (supportsBinary && isBinary) {\n\t    //   if (Blob && !dontSendBlobs) {\n\t    //     return exports.encodePayloadAsBlob(packets, callback);\n\t    //   }\n\t    //\n\t    //   return exports.encodePayloadAsArrayBuffer(packets, callback);\n\t    // }\n\n\t    if (!packets.length) {\n\t      return callback('0:');\n\t    }\n\n\t    function setLengthHeader(message) {\n\t      return message.length + ':' + message;\n\t    }\n\n\t    function encodeOne(packet, doneCallback) {\n\t      exports.encodePacket(packet, !isBinary ? false : supportsBinary, true, function (message) {\n\t        doneCallback(null, setLengthHeader(message));\n\t      });\n\t    }\n\n\t    map(packets, encodeOne, function (err, results) {\n\t      return callback(results.join(''));\n\t    });\n\t  };\n\t  /**\n\t   * Async array map using after\n\t   */\n\n\n\t  function map(ary, each, done) {\n\t    var result = new Array(ary.length);\n\t    var next = after(ary.length, done);\n\n\t    var eachWithIndex = function eachWithIndex(i, el, cb) {\n\t      each(el, function (error, msg) {\n\t        result[i] = msg;\n\t        cb(error, result);\n\t      });\n\t    };\n\n\t    for (var i = 0; i < ary.length; i++) {\n\t      eachWithIndex(i, ary[i], next);\n\t    }\n\t  }\n\t  /*\n\t   * Decodes data when a payload is maybe expected. Possible binary contents are\n\t   * decoded from their base64 representation\n\t   *\n\t   * @param {String} data, callback method\n\t   * @api public\n\t   */\n\n\n\t  exports.decodePayload = function (data, binaryType, callback) {\n\t    // if (typeof data !== 'string') {\n\t    //   return exports.decodePayloadAsBinary(data, binaryType, callback);\n\t    // }\n\t    if (typeof binaryType === 'function') {\n\t      callback = binaryType;\n\t      binaryType = null;\n\t    }\n\n\t    var packet;\n\n\t    if (data === '') {\n\t      // parser error - ignoring payload\n\t      return callback(err, 0, 1);\n\t    }\n\n\t    var length = '',\n\t        n,\n\t        msg;\n\n\t    for (var i = 0, l = data.length; i < l; i++) {\n\t      var chr = data.charAt(i);\n\n\t      if (chr !== ':') {\n\t        length += chr;\n\t        continue;\n\t      }\n\n\t      if (length === '' || length != (n = Number(length))) {\n\t        // parser error - ignoring payload\n\t        return callback(err, 0, 1);\n\t      }\n\n\t      msg = data.substr(i + 1, n);\n\n\t      if (length != msg.length) {\n\t        // parser error - ignoring payload\n\t        return callback(err, 0, 1);\n\t      }\n\n\t      if (msg.length) {\n\t        packet = exports.decodePacket(msg, binaryType, true);\n\n\t        if (err.type === packet.type && err.data === packet.data) {\n\t          // parser error in individual packet - ignoring payload\n\t          return callback(err, 0, 1);\n\t        }\n\n\t        var ret = callback(packet, i + n, l);\n\t        if (false === ret) return;\n\t      } // advance cursor\n\n\n\t      i += n;\n\t      length = '';\n\t    }\n\n\t    if (length !== '') {\n\t      // parser error - ignoring payload\n\t      return callback(err, 0, 1);\n\t    }\n\t  };\n\t  /**\n\t   * Encodes multiple messages (payload) as binary.\n\t   *\n\t   * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n\t   * 255><data>\n\t   *\n\t   * Example:\n\t   * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n\t   *\n\t   * @param {Array} packets\n\t   * @return {ArrayBuffer} encoded payload\n\t   * @api private\n\t   */\n\t  // exports.encodePayloadAsArrayBuffer = function(packets, callback) {\n\t  //   if (!packets.length) {\n\t  //     return callback(new ArrayBuffer(0));\n\t  //   }\n\t  //\n\t  //   function encodeOne(packet, doneCallback) {\n\t  //     exports.encodePacket(packet, true, true, function(data) {\n\t  //       return doneCallback(null, data);\n\t  //     });\n\t  //   }\n\t  //\n\t  //   map(packets, encodeOne, function(err, encodedPackets) {\n\t  //     var totalLength = encodedPackets.reduce(function(acc, p) {\n\t  //       var len;\n\t  //       if (typeof p === 'string'){\n\t  //         len = p.length;\n\t  //       } else {\n\t  //         len = p.byteLength;\n\t  //       }\n\t  //       return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n\t  //     }, 0);\n\t  //\n\t  //     var resultArray = new Uint8Array(totalLength);\n\t  //\n\t  //     var bufferIndex = 0;\n\t  //     encodedPackets.forEach(function(p) {\n\t  //       var isString = typeof p === 'string';\n\t  //       var ab = p;\n\t  //       if (isString) {\n\t  //         var view = new Uint8Array(p.length);\n\t  //         for (var i = 0; i < p.length; i++) {\n\t  //           view[i] = p.charCodeAt(i);\n\t  //         }\n\t  //         ab = view.buffer;\n\t  //       }\n\t  //\n\t  //       if (isString) { // not true binary\n\t  //         resultArray[bufferIndex++] = 0;\n\t  //       } else { // true binary\n\t  //         resultArray[bufferIndex++] = 1;\n\t  //       }\n\t  //\n\t  //       var lenStr = ab.byteLength.toString();\n\t  //       for (var i = 0; i < lenStr.length; i++) {\n\t  //         resultArray[bufferIndex++] = parseInt(lenStr[i]);\n\t  //       }\n\t  //       resultArray[bufferIndex++] = 255;\n\t  //\n\t  //       var view = new Uint8Array(ab);\n\t  //       for (var i = 0; i < view.length; i++) {\n\t  //         resultArray[bufferIndex++] = view[i];\n\t  //       }\n\t  //     });\n\t  //\n\t  //     return callback(resultArray.buffer);\n\t  //   });\n\t  // };\n\n\t  /**\n\t   * Encode as Blob\n\t   */\n\t  // exports.encodePayloadAsBlob = function(packets, callback) {\n\t  //   function encodeOne(packet, doneCallback) {\n\t  //     exports.encodePacket(packet, true, true, function(encoded) {\n\t  //       var binaryIdentifier = new Uint8Array(1);\n\t  //       binaryIdentifier[0] = 1;\n\t  //       if (typeof encoded === 'string') {\n\t  //         var view = new Uint8Array(encoded.length);\n\t  //         for (var i = 0; i < encoded.length; i++) {\n\t  //           view[i] = encoded.charCodeAt(i);\n\t  //         }\n\t  //         encoded = view.buffer;\n\t  //         binaryIdentifier[0] = 0;\n\t  //       }\n\t  //\n\t  //       var len = (encoded instanceof ArrayBuffer)\n\t  //         ? encoded.byteLength\n\t  //         : encoded.size;\n\t  //\n\t  //       var lenStr = len.toString();\n\t  //       var lengthAry = new Uint8Array(lenStr.length + 1);\n\t  //       for (var i = 0; i < lenStr.length; i++) {\n\t  //         lengthAry[i] = parseInt(lenStr[i]);\n\t  //       }\n\t  //       lengthAry[lenStr.length] = 255;\n\t  //\n\t  //       if (Blob) {\n\t  //         var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n\t  //         doneCallback(null, blob);\n\t  //       }\n\t  //     });\n\t  //   }\n\t  //\n\t  //   map(packets, encodeOne, function(err, results) {\n\t  //     return callback(new Blob(results));\n\t  //   });\n\t  // };\n\n\t  /*\n\t   * Decodes data when a payload is maybe expected. Strings are decoded by\n\t   * interpreting each byte as a key code for entries marked to start with 0. See\n\t   * description of encodePayloadAsBinary\n\t   *\n\t   * @param {ArrayBuffer} data, callback method\n\t   * @api public\n\t   */\n\t  // exports.decodePayloadAsBinary = function (data, binaryType, callback) {\n\t  //   if (typeof binaryType === 'function') {\n\t  //     callback = binaryType;\n\t  //     binaryType = null;\n\t  //   }\n\t  //\n\t  //   var bufferTail = data;\n\t  //   var buffers = [];\n\t  //\n\t  //   while (bufferTail.byteLength > 0) {\n\t  //     var tailArray = new Uint8Array(bufferTail);\n\t  //     var isString = tailArray[0] === 0;\n\t  //     var msgLength = '';\n\t  //\n\t  //     for (var i = 1; ; i++) {\n\t  //       if (tailArray[i] === 255) break;\n\t  //\n\t  //       // 310 = char length of Number.MAX_VALUE\n\t  //       if (msgLength.length > 310) {\n\t  //         return callback(err, 0, 1);\n\t  //       }\n\t  //\n\t  //       msgLength += tailArray[i];\n\t  //     }\n\t  //\n\t  //     bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n\t  //     msgLength = parseInt(msgLength);\n\t  //\n\t  //     var msg = sliceBuffer(bufferTail, 0, msgLength);\n\t  //     if (isString) {\n\t  //       try {\n\t  //         msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n\t  //       } catch (e) {\n\t  //         // iPhone Safari doesn't let you apply to typed arrays\n\t  //         var typed = new Uint8Array(msg);\n\t  //         msg = '';\n\t  //         for (var i = 0; i < typed.length; i++) {\n\t  //           msg += String.fromCharCode(typed[i]);\n\t  //         }\n\t  //       }\n\t  //     }\n\t  //\n\t  //     buffers.push(msg);\n\t  //     bufferTail = sliceBuffer(bufferTail, msgLength);\n\t  //   }\n\t  //\n\t  //   var total = buffers.length;\n\t  //   buffers.forEach(function(buffer, i) {\n\t  //     callback(exports.decodePacket(buffer, binaryType, true), i, total);\n\t  //   });\n\t  // };\n\n\t})(browser$1);\n\n\t/**\n\t * Module dependencies.\n\t */\n\tvar parser$4 = browser$1;\n\tvar Emitter$4 = componentEmitter.exports;\n\t/**\n\t * Module exports.\n\t */\n\n\tvar transport = Transport$2;\n\t/**\n\t * Transport abstract constructor.\n\t *\n\t * @param {Object} options.\n\t * @api private\n\t */\n\n\tfunction Transport$2(opts) {\n\t  this.path = opts.path;\n\t  this.hostname = opts.hostname;\n\t  this.port = opts.port;\n\t  this.secure = opts.secure;\n\t  this.query = opts.query;\n\t  this.timestampParam = opts.timestampParam;\n\t  this.timestampRequests = opts.timestampRequests;\n\t  this.readyState = '';\n\t  this.agent = opts.agent || false;\n\t  this.socket = opts.socket;\n\t  this.enablesXDR = opts.enablesXDR; // SSL options for Node.js client\n\n\t  this.pfx = opts.pfx;\n\t  this.key = opts.key;\n\t  this.passphrase = opts.passphrase;\n\t  this.cert = opts.cert;\n\t  this.ca = opts.ca;\n\t  this.ciphers = opts.ciphers;\n\t  this.rejectUnauthorized = opts.rejectUnauthorized;\n\t  this.forceNode = opts.forceNode; // results of ReactNative environment detection\n\n\t  this.isReactNative = opts.isReactNative; // other options for Node.js client\n\n\t  this.extraHeaders = opts.extraHeaders;\n\t  this.localAddress = opts.localAddress;\n\t}\n\t/**\n\t * Mix in `Emitter`.\n\t */\n\n\n\tEmitter$4(Transport$2.prototype);\n\t/**\n\t * Emits an error.\n\t *\n\t * @param {String} str\n\t * @return {Transport} for chaining\n\t * @api public\n\t */\n\n\tTransport$2.prototype.onError = function (msg, desc) {\n\t  var err = new Error(msg);\n\t  err.type = 'TransportError';\n\t  err.description = desc;\n\t  this.emit('error', err);\n\t  return this;\n\t};\n\t/**\n\t * Opens the transport.\n\t *\n\t * @api public\n\t */\n\n\n\tTransport$2.prototype.open = function () {\n\t  if ('closed' === this.readyState || '' === this.readyState) {\n\t    this.readyState = 'opening';\n\t    this.doOpen();\n\t  }\n\n\t  return this;\n\t};\n\t/**\n\t * Closes the transport.\n\t *\n\t * @api private\n\t */\n\n\n\tTransport$2.prototype.close = function () {\n\t  if ('opening' === this.readyState || 'open' === this.readyState) {\n\t    this.doClose();\n\t    this.onClose();\n\t  }\n\n\t  return this;\n\t};\n\t/**\n\t * Sends multiple packets.\n\t *\n\t * @param {Array} packets\n\t * @api private\n\t */\n\n\n\tTransport$2.prototype.send = function (packets) {\n\t  if ('open' === this.readyState) {\n\t    this.write(packets);\n\t  } else {\n\t    throw new Error('Transport not open');\n\t  }\n\t};\n\t/**\n\t * Called upon open\n\t *\n\t * @api private\n\t */\n\n\n\tTransport$2.prototype.onOpen = function () {\n\t  this.readyState = 'open';\n\t  this.writable = true;\n\t  this.emit('open');\n\t};\n\t/**\n\t * Called with data.\n\t *\n\t * @param {String} data\n\t * @api private\n\t */\n\n\n\tTransport$2.prototype.onData = function (data) {\n\t  var packet = parser$4.decodePacket(data, this.socket.binaryType);\n\t  this.onPacket(packet);\n\t};\n\t/**\n\t * Called with a decoded packet.\n\t */\n\n\n\tTransport$2.prototype.onPacket = function (packet) {\n\t  this.emit('packet', packet);\n\t};\n\t/**\n\t * Called upon close.\n\t *\n\t * @api private\n\t */\n\n\n\tTransport$2.prototype.onClose = function () {\n\t  this.readyState = 'closed';\n\t  this.emit('close');\n\t};\n\n\tvar parseqs$3 = {};\n\n\t/**\n\t * Compiles a querystring\n\t * Returns string representation of the object\n\t *\n\t * @param {Object}\n\t * @api private\n\t */\n\n\tparseqs$3.encode = function (obj) {\n\t  var str = '';\n\n\t  for (var i in obj) {\n\t    if (obj.hasOwnProperty(i)) {\n\t      if (str.length) str += '&';\n\t      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n\t    }\n\t  }\n\n\t  return str;\n\t};\n\t/**\n\t * Parses a simple querystring into an object\n\t *\n\t * @param {String} qs\n\t * @api private\n\t */\n\n\n\tparseqs$3.decode = function (qs) {\n\t  var qry = {};\n\t  var pairs = qs.split('&');\n\n\t  for (var i = 0, l = pairs.length; i < l; i++) {\n\t    var pair = pairs[i].split('=');\n\t    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n\t  }\n\n\t  return qry;\n\t};\n\n\tvar componentInherit = function componentInherit(a, b) {\n\t  var fn = function fn() {};\n\n\t  fn.prototype = b.prototype;\n\t  a.prototype = new fn();\n\t  a.prototype.constructor = a;\n\t};\n\n\tvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''),\n\t    length = 64,\n\t    map = {},\n\t    seed = 0,\n\t    i$1 = 0,\n\t    prev;\n\t/**\n\t * Return a string representing the specified number.\n\t *\n\t * @param {Number} num The number to convert.\n\t * @returns {String} The string representation of the number.\n\t * @api public\n\t */\n\n\tfunction encode(num) {\n\t  var encoded = '';\n\n\t  do {\n\t    encoded = alphabet[num % length] + encoded;\n\t    num = Math.floor(num / length);\n\t  } while (num > 0);\n\n\t  return encoded;\n\t}\n\t/**\n\t * Return the integer value specified by the given string.\n\t *\n\t * @param {String} str The string to convert.\n\t * @returns {Number} The integer value represented by the string.\n\t * @api public\n\t */\n\n\n\tfunction decode(str) {\n\t  var decoded = 0;\n\n\t  for (i$1 = 0; i$1 < str.length; i$1++) {\n\t    decoded = decoded * length + map[str.charAt(i$1)];\n\t  }\n\n\t  return decoded;\n\t}\n\t/**\n\t * Yeast: A tiny growing id generator.\n\t *\n\t * @returns {String} A unique id.\n\t * @api public\n\t */\n\n\n\tfunction yeast$2() {\n\t  var now = encode(+new Date());\n\t  if (now !== prev) return seed = 0, prev = now;\n\t  return now + '.' + encode(seed++);\n\t} //\n\t// Map each character to its index.\n\t//\n\n\n\tfor (; i$1 < length; i$1++) {\n\t  map[alphabet[i$1]] = i$1;\n\t} //\n\t// Expose the `yeast`, `encode` and `decode` functions.\n\t//\n\n\n\tyeast$2.encode = encode;\n\tyeast$2.decode = decode;\n\tvar yeast_1 = yeast$2;\n\n\tvar browser = {exports: {}};\n\n\tvar debug$4 = {exports: {}};\n\n\tvar s = 1000;\n\tvar m = s * 60;\n\tvar h = m * 60;\n\tvar d = h * 24;\n\tvar y = d * 365.25;\n\t/**\n\t * Parse or format the given `val`.\n\t *\n\t * Options:\n\t *\n\t *  - `long` verbose formatting [false]\n\t *\n\t * @param {String|Number} val\n\t * @param {Object} [options]\n\t * @throws {Error} throw an error if val is not a non-empty string or a number\n\t * @return {String|Number}\n\t * @api public\n\t */\n\n\tvar ms = function ms(val, options) {\n\t  options = options || {};\n\n\t  var type = _typeof(val);\n\n\t  if (type === 'string' && val.length > 0) {\n\t    return parse(val);\n\t  } else if (type === 'number' && isNaN(val) === false) {\n\t    return options[\"long\"] ? fmtLong(val) : fmtShort(val);\n\t  }\n\n\t  throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val));\n\t};\n\t/**\n\t * Parse the given `str` and return milliseconds.\n\t *\n\t * @param {String} str\n\t * @return {Number}\n\t * @api private\n\t */\n\n\n\tfunction parse(str) {\n\t  str = String(str);\n\n\t  if (str.length > 100) {\n\t    return;\n\t  }\n\n\t  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\n\n\t  if (!match) {\n\t    return;\n\t  }\n\n\t  var n = parseFloat(match[1]);\n\t  var type = (match[2] || 'ms').toLowerCase();\n\n\t  switch (type) {\n\t    case 'years':\n\t    case 'year':\n\t    case 'yrs':\n\t    case 'yr':\n\t    case 'y':\n\t      return n * y;\n\n\t    case 'days':\n\t    case 'day':\n\t    case 'd':\n\t      return n * d;\n\n\t    case 'hours':\n\t    case 'hour':\n\t    case 'hrs':\n\t    case 'hr':\n\t    case 'h':\n\t      return n * h;\n\n\t    case 'minutes':\n\t    case 'minute':\n\t    case 'mins':\n\t    case 'min':\n\t    case 'm':\n\t      return n * m;\n\n\t    case 'seconds':\n\t    case 'second':\n\t    case 'secs':\n\t    case 'sec':\n\t    case 's':\n\t      return n * s;\n\n\t    case 'milliseconds':\n\t    case 'millisecond':\n\t    case 'msecs':\n\t    case 'msec':\n\t    case 'ms':\n\t      return n;\n\n\t    default:\n\t      return undefined;\n\t  }\n\t}\n\t/**\n\t * Short format for `ms`.\n\t *\n\t * @param {Number} ms\n\t * @return {String}\n\t * @api private\n\t */\n\n\n\tfunction fmtShort(ms) {\n\t  if (ms >= d) {\n\t    return Math.round(ms / d) + 'd';\n\t  }\n\n\t  if (ms >= h) {\n\t    return Math.round(ms / h) + 'h';\n\t  }\n\n\t  if (ms >= m) {\n\t    return Math.round(ms / m) + 'm';\n\t  }\n\n\t  if (ms >= s) {\n\t    return Math.round(ms / s) + 's';\n\t  }\n\n\t  return ms + 'ms';\n\t}\n\t/**\n\t * Long format for `ms`.\n\t *\n\t * @param {Number} ms\n\t * @return {String}\n\t * @api private\n\t */\n\n\n\tfunction fmtLong(ms) {\n\t  return plural(ms, d, 'day') || plural(ms, h, 'hour') || plural(ms, m, 'minute') || plural(ms, s, 'second') || ms + ' ms';\n\t}\n\t/**\n\t * Pluralization helper.\n\t */\n\n\n\tfunction plural(ms, n, name) {\n\t  if (ms < n) {\n\t    return;\n\t  }\n\n\t  if (ms < n * 1.5) {\n\t    return Math.floor(ms / n) + ' ' + name;\n\t  }\n\n\t  return Math.ceil(ms / n) + ' ' + name + 's';\n\t}\n\n\t(function (module, exports) {\n\t  /**\n\t   * This is the common logic for both the Node.js and web browser\n\t   * implementations of `debug()`.\n\t   *\n\t   * Expose `debug()` as the module.\n\t   */\n\t  exports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\n\t  exports.coerce = coerce;\n\t  exports.disable = disable;\n\t  exports.enable = enable;\n\t  exports.enabled = enabled;\n\t  exports.humanize = ms;\n\t  /**\n\t   * Active `debug` instances.\n\t   */\n\n\t  exports.instances = [];\n\t  /**\n\t   * The currently active debug mode names, and names to skip.\n\t   */\n\n\t  exports.names = [];\n\t  exports.skips = [];\n\t  /**\n\t   * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t   *\n\t   * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t   */\n\n\t  exports.formatters = {};\n\t  /**\n\t   * Select a color.\n\t   * @param {String} namespace\n\t   * @return {Number}\n\t   * @api private\n\t   */\n\n\t  function selectColor(namespace) {\n\t    var hash = 0,\n\t        i;\n\n\t    for (i in namespace) {\n\t      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n\t      hash |= 0; // Convert to 32bit integer\n\t    }\n\n\t    return exports.colors[Math.abs(hash) % exports.colors.length];\n\t  }\n\t  /**\n\t   * Create a debugger with the given `namespace`.\n\t   *\n\t   * @param {String} namespace\n\t   * @return {Function}\n\t   * @api public\n\t   */\n\n\n\t  function createDebug(namespace) {\n\t    var prevTime;\n\n\t    function debug() {\n\t      // disabled?\n\t      if (!debug.enabled) return;\n\t      var self = debug; // set `diff` timestamp\n\n\t      var curr = +new Date();\n\t      var ms = curr - (prevTime || curr);\n\t      self.diff = ms;\n\t      self.prev = prevTime;\n\t      self.curr = curr;\n\t      prevTime = curr; // turn the `arguments` into a proper Array\n\n\t      var args = new Array(arguments.length);\n\n\t      for (var i = 0; i < args.length; i++) {\n\t        args[i] = arguments[i];\n\t      }\n\n\t      args[0] = exports.coerce(args[0]);\n\n\t      if ('string' !== typeof args[0]) {\n\t        // anything else let's inspect with %O\n\t        args.unshift('%O');\n\t      } // apply any `formatters` transformations\n\n\n\t      var index = 0;\n\t      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n\t        // if we encounter an escaped % then don't increase the array index\n\t        if (match === '%%') return match;\n\t        index++;\n\t        var formatter = exports.formatters[format];\n\n\t        if ('function' === typeof formatter) {\n\t          var val = args[index];\n\t          match = formatter.call(self, val); // now we need to remove `args[index]` since it's inlined in the `format`\n\n\t          args.splice(index, 1);\n\t          index--;\n\t        }\n\n\t        return match;\n\t      }); // apply env-specific formatting (colors, etc.)\n\n\t      exports.formatArgs.call(self, args);\n\t      var logFn = debug.log || exports.log || console.log.bind(console);\n\t      logFn.apply(self, args);\n\t    }\n\n\t    debug.namespace = namespace;\n\t    debug.enabled = exports.enabled(namespace);\n\t    debug.useColors = exports.useColors();\n\t    debug.color = selectColor(namespace);\n\t    debug.destroy = destroy; // env-specific initialization logic for debug instances\n\n\t    if ('function' === typeof exports.init) {\n\t      exports.init(debug);\n\t    }\n\n\t    exports.instances.push(debug);\n\t    return debug;\n\t  }\n\n\t  function destroy() {\n\t    var index = exports.instances.indexOf(this);\n\n\t    if (index !== -1) {\n\t      exports.instances.splice(index, 1);\n\t      return true;\n\t    } else {\n\t      return false;\n\t    }\n\t  }\n\t  /**\n\t   * Enables a debug mode by namespaces. This can include modes\n\t   * separated by a colon and wildcards.\n\t   *\n\t   * @param {String} namespaces\n\t   * @api public\n\t   */\n\n\n\t  function enable(namespaces) {\n\t    exports.save(namespaces);\n\t    exports.names = [];\n\t    exports.skips = [];\n\t    var i;\n\t    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t    var len = split.length;\n\n\t    for (i = 0; i < len; i++) {\n\t      if (!split[i]) continue; // ignore empty strings\n\n\t      namespaces = split[i].replace(/\\*/g, '.*?');\n\n\t      if (namespaces[0] === '-') {\n\t        exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t      } else {\n\t        exports.names.push(new RegExp('^' + namespaces + '$'));\n\t      }\n\t    }\n\n\t    for (i = 0; i < exports.instances.length; i++) {\n\t      var instance = exports.instances[i];\n\t      instance.enabled = exports.enabled(instance.namespace);\n\t    }\n\t  }\n\t  /**\n\t   * Disable debug output.\n\t   *\n\t   * @api public\n\t   */\n\n\n\t  function disable() {\n\t    exports.enable('');\n\t  }\n\t  /**\n\t   * Returns true if the given mode name is enabled, false otherwise.\n\t   *\n\t   * @param {String} name\n\t   * @return {Boolean}\n\t   * @api public\n\t   */\n\n\n\t  function enabled(name) {\n\t    if (name[name.length - 1] === '*') {\n\t      return true;\n\t    }\n\n\t    var i, len;\n\n\t    for (i = 0, len = exports.skips.length; i < len; i++) {\n\t      if (exports.skips[i].test(name)) {\n\t        return false;\n\t      }\n\t    }\n\n\t    for (i = 0, len = exports.names.length; i < len; i++) {\n\t      if (exports.names[i].test(name)) {\n\t        return true;\n\t      }\n\t    }\n\n\t    return false;\n\t  }\n\t  /**\n\t   * Coerce `val`.\n\t   *\n\t   * @param {Mixed} val\n\t   * @return {Mixed}\n\t   * @api private\n\t   */\n\n\n\t  function coerce(val) {\n\t    if (val instanceof Error) return val.stack || val.message;\n\t    return val;\n\t  }\n\t})(debug$4, debug$4.exports);\n\n\t(function (module, exports) {\n\t  exports = module.exports = debug$4.exports;\n\t  exports.log = log;\n\t  exports.formatArgs = formatArgs;\n\t  exports.save = save;\n\t  exports.load = load;\n\t  exports.useColors = useColors;\n\t  exports.storage = 'undefined' != typeof chrome && 'undefined' != typeof chrome.storage ? chrome.storage.local : localstorage();\n\t  /**\n\t   * Colors.\n\t   */\n\n\t  exports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n\t  /**\n\t   * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n\t   * and the Firebug extension (any Firefox version) are known\n\t   * to support \"%c\" CSS customizations.\n\t   *\n\t   * TODO: add a `localStorage` variable to explicitly enable/disable colors\n\t   */\n\n\t  function useColors() {\n\t    // NB: In an Electron preload script, document will be defined but not fully\n\t    // initialized. Since we know we're in Chrome, we'll just detect this case\n\t    // explicitly\n\t    if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n\t      return true;\n\t    } // Internet Explorer and Edge do not support colors.\n\n\n\t    if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t      return false;\n\t    } // is webkit? http://stackoverflow.com/a/16459606/376773\n\t    // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n\t    return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // is firebug? http://stackoverflow.com/a/398120/376773\n\t    typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // is firefox >= v31?\n\t    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t    typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // double check webkit in userAgent just in case we are in a worker\n\t    typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n\t  }\n\t  /**\n\t   * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n\t   */\n\n\n\t  exports.formatters.j = function (v) {\n\t    try {\n\t      return JSON.stringify(v);\n\t    } catch (err) {\n\t      return '[UnexpectedJSONParseError]: ' + err.message;\n\t    }\n\t  };\n\t  /**\n\t   * Colorize log arguments if enabled.\n\t   *\n\t   * @api public\n\t   */\n\n\n\t  function formatArgs(args) {\n\t    var useColors = this.useColors;\n\t    args[0] = (useColors ? '%c' : '') + this.namespace + (useColors ? ' %c' : ' ') + args[0] + (useColors ? '%c ' : ' ') + '+' + exports.humanize(this.diff);\n\t    if (!useColors) return;\n\t    var c = 'color: ' + this.color;\n\t    args.splice(1, 0, c, 'color: inherit'); // the final \"%c\" is somewhat tricky, because there could be other\n\t    // arguments passed either before or after the %c, so we need to\n\t    // figure out the correct index to insert the CSS into\n\n\t    var index = 0;\n\t    var lastC = 0;\n\t    args[0].replace(/%[a-zA-Z%]/g, function (match) {\n\t      if ('%%' === match) return;\n\t      index++;\n\n\t      if ('%c' === match) {\n\t        // we only are interested in the *last* %c\n\t        // (the user may have provided their own)\n\t        lastC = index;\n\t      }\n\t    });\n\t    args.splice(lastC, 0, c);\n\t  }\n\t  /**\n\t   * Invokes `console.log()` when available.\n\t   * No-op when `console.log` is not a \"function\".\n\t   *\n\t   * @api public\n\t   */\n\n\n\t  function log() {\n\t    // this hackery is required for IE8/9, where\n\t    // the `console.log` function doesn't have 'apply'\n\t    return 'object' === (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) && console.log && Function.prototype.apply.call(console.log, console, arguments);\n\t  }\n\t  /**\n\t   * Save `namespaces`.\n\t   *\n\t   * @param {String} namespaces\n\t   * @api private\n\t   */\n\n\n\t  function save(namespaces) {\n\t    try {\n\t      if (null == namespaces) {\n\t        exports.storage.removeItem('debug');\n\t      } else {\n\t        exports.storage.debug = namespaces;\n\t      }\n\t    } catch (e) {}\n\t  }\n\t  /**\n\t   * Load `namespaces`.\n\t   *\n\t   * @return {String} returns the previously persisted debug modes\n\t   * @api private\n\t   */\n\n\n\t  function load() {\n\t    var r;\n\n\t    try {\n\t      r = exports.storage.debug;\n\t    } catch (e) {} // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n\t    if (!r && typeof process !== 'undefined' && 'env' in process) {\n\t      r = process.env.DEBUG;\n\t    }\n\n\t    return r;\n\t  }\n\t  /**\n\t   * Enable namespaces listed in `localStorage.debug` initially.\n\t   */\n\n\n\t  exports.enable(load());\n\t  /**\n\t   * Localstorage attempts to return the localstorage.\n\t   *\n\t   * This is necessary because safari throws\n\t   * when a user disables cookies/localstorage\n\t   * and you attempt to access it.\n\t   *\n\t   * @return {LocalStorage}\n\t   * @api private\n\t   */\n\n\t  function localstorage() {\n\t    try {\n\t      return window.localStorage;\n\t    } catch (e) {}\n\t  }\n\t})(browser, browser.exports);\n\n\tvar hasCors = {exports: {}};\n\n\t/**\n\t * Module exports.\n\t *\n\t * Logic borrowed from Modernizr:\n\t *\n\t *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n\t */\n\n\ttry {\n\t  hasCors.exports = typeof XMLHttpRequest !== 'undefined' && 'withCredentials' in new XMLHttpRequest();\n\t} catch (err) {\n\t  // if XMLHttp support is disabled in IE then it will throw\n\t  // when trying to create\n\t  hasCors.exports = false;\n\t}\n\n\tvar hasCORS = hasCors.exports;\n\n\tvar xmlhttprequest = function xmlhttprequest(opts) {\n\t  var xdomain = opts.xdomain; // scheme must be same when usign XDomainRequest\n\t  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n\n\t  var xscheme = opts.xscheme; // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n\t  // https://github.com/Automattic/engine.io-client/pull/217\n\n\t  var enablesXDR = opts.enablesXDR; // XMLHttpRequest can be disabled on IE\n\n\t  try {\n\t    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n\t      return new XMLHttpRequest();\n\t    }\n\t  } catch (e) {} // Use XDomainRequest for IE8 if enablesXDR is true\n\t  // because loading bar keeps flashing when using jsonp-polling\n\t  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n\n\n\t  try {\n\t    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n\t      return new XDomainRequest();\n\t    }\n\t  } catch (e) {}\n\n\t  if (!xdomain) {\n\t    try {\n\t      return new self[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n\t    } catch (e) {}\n\t  }\n\t};\n\n\t/**\n\t * Module dependencies.\n\t */\n\tvar Transport$1 = transport;\n\tvar parseqs$2 = parseqs$3;\n\tvar parser$3 = browser$1;\n\tvar inherit$2 = componentInherit;\n\tvar yeast$1 = yeast_1;\n\tvar debug$3 = browser.exports('engine.io-client:polling');\n\t/**\n\t * Module exports.\n\t */\n\n\tvar polling$1 = Polling$1;\n\t/**\n\t * Is XHR2 supported?\n\t */\n\n\tvar hasXHR2 = function () {\n\t  var XMLHttpRequest = xmlhttprequest;\n\t  var xhr = new XMLHttpRequest({\n\t    xdomain: false\n\t  });\n\t  return null != xhr.responseType;\n\t}();\n\t/**\n\t * Polling interface.\n\t *\n\t * @param {Object} opts\n\t * @api private\n\t */\n\n\n\tfunction Polling$1(opts) {\n\t  var forceBase64 = opts && opts.forceBase64;\n\n\t  if (!hasXHR2 || forceBase64) {\n\t    this.supportsBinary = false;\n\t  }\n\n\t  Transport$1.call(this, opts);\n\t}\n\t/**\n\t * Inherits from Transport.\n\t */\n\n\n\tinherit$2(Polling$1, Transport$1);\n\t/**\n\t * Transport name.\n\t */\n\n\tPolling$1.prototype.name = 'polling';\n\t/**\n\t * Opens the socket (triggers polling). We write a PING message to determine\n\t * when the transport is open.\n\t *\n\t * @api private\n\t */\n\n\tPolling$1.prototype.doOpen = function () {\n\t  this.poll();\n\t};\n\t/**\n\t * Pauses polling.\n\t *\n\t * @param {Function} callback upon buffers are flushed and transport is paused\n\t * @api private\n\t */\n\n\n\tPolling$1.prototype.pause = function (onPause) {\n\t  var self = this;\n\t  this.readyState = 'pausing';\n\n\t  function pause() {\n\t    debug$3('paused');\n\t    self.readyState = 'paused';\n\t    onPause();\n\t  }\n\n\t  if (this.polling || !this.writable) {\n\t    var total = 0;\n\n\t    if (this.polling) {\n\t      debug$3('we are currently polling - waiting to pause');\n\t      total++;\n\t      this.once('pollComplete', function () {\n\t        debug$3('pre-pause polling complete');\n\t        --total || pause();\n\t      });\n\t    }\n\n\t    if (!this.writable) {\n\t      debug$3('we are currently writing - waiting to pause');\n\t      total++;\n\t      this.once('drain', function () {\n\t        debug$3('pre-pause writing complete');\n\t        --total || pause();\n\t      });\n\t    }\n\t  } else {\n\t    pause();\n\t  }\n\t};\n\t/**\n\t * Starts polling cycle.\n\t *\n\t * @api public\n\t */\n\n\n\tPolling$1.prototype.poll = function () {\n\t  debug$3('polling');\n\t  this.polling = true;\n\t  this.doPoll();\n\t  this.emit('poll');\n\t};\n\t/**\n\t * Overloads onData to detect payloads.\n\t *\n\t * @api private\n\t */\n\n\n\tPolling$1.prototype.onData = function (data) {\n\t  var self = this;\n\t  debug$3('polling got data %s', data);\n\n\t  var callback = function callback(packet, index, total) {\n\t    // if its the first message we consider the transport open\n\t    if ('opening' === self.readyState) {\n\t      self.onOpen();\n\t    } // if its a close packet, we close the ongoing requests\n\n\n\t    if ('close' === packet.type) {\n\t      self.onClose();\n\t      return false;\n\t    } // otherwise bypass onData and handle the message\n\n\n\t    self.onPacket(packet);\n\t  }; // decode payload\n\n\n\t  parser$3.decodePayload(data, this.socket.binaryType, callback); // if an event did not trigger closing\n\n\t  if ('closed' !== this.readyState) {\n\t    // if we got data we're not polling\n\t    this.polling = false;\n\t    this.emit('pollComplete');\n\n\t    if ('open' === this.readyState) {\n\t      this.poll();\n\t    } else {\n\t      debug$3('ignoring poll - transport state \"%s\"', this.readyState);\n\t    }\n\t  }\n\t};\n\t/**\n\t * For polling, send a close packet.\n\t *\n\t * @api private\n\t */\n\n\n\tPolling$1.prototype.doClose = function () {\n\t  var self = this;\n\n\t  function close() {\n\t    debug$3('writing close packet');\n\t    self.write([{\n\t      type: 'close'\n\t    }]);\n\t  }\n\n\t  if ('open' === this.readyState) {\n\t    debug$3('transport open - closing');\n\t    close();\n\t  } else {\n\t    // in case we're trying to close while\n\t    // handshaking is in progress (GH-164)\n\t    debug$3('transport not open - deferring close');\n\t    this.once('open', close);\n\t  }\n\t};\n\t/**\n\t * Writes a packets payload.\n\t *\n\t * @param {Array} data packets\n\t * @param {Function} drain callback\n\t * @api private\n\t */\n\n\n\tPolling$1.prototype.write = function (packets) {\n\t  var self = this;\n\t  this.writable = false;\n\n\t  var callbackfn = function callbackfn() {\n\t    self.writable = true;\n\t    self.emit('drain');\n\t  };\n\n\t  parser$3.encodePayload(packets, this.supportsBinary, function (data) {\n\t    self.doWrite(data, callbackfn);\n\t  });\n\t};\n\t/**\n\t * Generates uri for connection.\n\t *\n\t * @api private\n\t */\n\n\n\tPolling$1.prototype.uri = function () {\n\t  var query = this.query || {};\n\t  var schema = this.secure ? 'https' : 'http';\n\t  var port = ''; // cache busting is forced\n\n\t  if (false !== this.timestampRequests) {\n\t    query[this.timestampParam] = yeast$1();\n\t  }\n\n\t  if (!this.supportsBinary && !query.sid) {\n\t    query.b64 = 1;\n\t  }\n\n\t  query = parseqs$2.encode(query); // avoid port if default for schema\n\n\t  if (this.port && ('https' === schema && Number(this.port) !== 443 || 'http' === schema && Number(this.port) !== 80)) {\n\t    port = ':' + this.port;\n\t  } // prepend ? to query\n\n\n\t  if (query.length) {\n\t    query = '?' + query;\n\t  }\n\n\t  var ipv6 = this.hostname.indexOf(':') !== -1;\n\t  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n\t};\n\n\t/**\n\t * Module requirements.\n\t */\n\tvar Polling = polling$1;\n\tvar inherit$1 = componentInherit;\n\t/**\n\t * Module exports.\n\t */\n\n\tvar pollingJsonp = JSONPPolling;\n\t/**\n\t * Cached regular expressions.\n\t */\n\n\tvar rNewline = /\\n/g;\n\tvar rEscapedNewline = /\\\\n/g;\n\t/**\n\t * Global JSONP callbacks.\n\t */\n\n\tvar callbacks;\n\t/**\n\t * Noop.\n\t */\n\n\tfunction empty() {}\n\t/**\n\t * Until https://github.com/tc39/proposal-global is shipped.\n\t */\n\n\n\tfunction glob() {\n\t  return typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : typeof commonjsGlobal !== 'undefined' ? commonjsGlobal : {};\n\t}\n\t/**\n\t * JSONP Polling constructor.\n\t *\n\t * @param {Object} opts.\n\t * @api public\n\t */\n\n\n\tfunction JSONPPolling(opts) {\n\t  Polling.call(this, opts);\n\t  this.query = this.query || {}; // define global callbacks array if not present\n\t  // we do this here (lazily) to avoid unneeded global pollution\n\n\t  if (!callbacks) {\n\t    // we need to consider multiple engines in the same page\n\t    var global = glob();\n\t    callbacks = global.___eio = global.___eio || [];\n\t  } // callback identifier\n\n\n\t  this.index = callbacks.length; // add callback to jsonp global\n\n\t  var self = this;\n\t  callbacks.push(function (msg) {\n\t    self.onData(msg);\n\t  }); // append to query string\n\n\t  this.query.j = this.index; // prevent spurious errors from being emitted when the window is unloaded\n\n\t  if (typeof addEventListener === 'function') {\n\t    addEventListener('beforeunload', function () {\n\t      if (self.script) self.script.onerror = empty;\n\t    }, false);\n\t  }\n\t}\n\t/**\n\t * Inherits from Polling.\n\t */\n\n\n\tinherit$1(JSONPPolling, Polling);\n\t/*\n\t * JSONP only supports binary as base64 encoded strings\n\t */\n\n\tJSONPPolling.prototype.supportsBinary = false;\n\t/**\n\t * Closes the socket.\n\t *\n\t * @api private\n\t */\n\n\tJSONPPolling.prototype.doClose = function () {\n\t  if (this.script) {\n\t    this.script.parentNode.removeChild(this.script);\n\t    this.script = null;\n\t  }\n\n\t  if (this.form) {\n\t    this.form.parentNode.removeChild(this.form);\n\t    this.form = null;\n\t    this.iframe = null;\n\t  }\n\n\t  Polling.prototype.doClose.call(this);\n\t};\n\t/**\n\t * Starts a poll cycle.\n\t *\n\t * @api private\n\t */\n\n\n\tJSONPPolling.prototype.doPoll = function () {\n\t  var self = this;\n\t  var script = document.createElement('script');\n\n\t  if (this.script) {\n\t    this.script.parentNode.removeChild(this.script);\n\t    this.script = null;\n\t  }\n\n\t  script.async = true;\n\t  script.src = this.uri();\n\n\t  script.onerror = function (e) {\n\t    self.onError('jsonp poll error', e);\n\t  };\n\n\t  var insertAt = document.getElementsByTagName('script')[0];\n\n\t  if (insertAt) {\n\t    insertAt.parentNode.insertBefore(script, insertAt);\n\t  } else {\n\t    (document.head || document.body).appendChild(script);\n\t  }\n\n\t  this.script = script;\n\t  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n\t  if (isUAgecko) {\n\t    setTimeout(function () {\n\t      var iframe = document.createElement('iframe');\n\t      document.body.appendChild(iframe);\n\t      document.body.removeChild(iframe);\n\t    }, 100);\n\t  }\n\t};\n\t/**\n\t * Writes with a hidden iframe.\n\t *\n\t * @param {String} data to send\n\t * @param {Function} called upon flush.\n\t * @api private\n\t */\n\n\n\tJSONPPolling.prototype.doWrite = function (data, fn) {\n\t  var self = this;\n\n\t  if (!this.form) {\n\t    var form = document.createElement('form');\n\t    var area = document.createElement('textarea');\n\t    var id = this.iframeId = 'eio_iframe_' + this.index;\n\t    var iframe;\n\t    form.className = 'socketio';\n\t    form.style.position = 'absolute';\n\t    form.style.top = '-1000px';\n\t    form.style.left = '-1000px';\n\t    form.target = id;\n\t    form.method = 'POST';\n\t    form.setAttribute('accept-charset', 'utf-8');\n\t    area.name = 'd';\n\t    form.appendChild(area);\n\t    document.body.appendChild(form);\n\t    this.form = form;\n\t    this.area = area;\n\t  }\n\n\t  this.form.action = this.uri();\n\n\t  function complete() {\n\t    initIframe();\n\t    fn();\n\t  }\n\n\t  function initIframe() {\n\t    if (self.iframe) {\n\t      try {\n\t        self.form.removeChild(self.iframe);\n\t      } catch (e) {\n\t        self.onError('jsonp polling iframe removal error', e);\n\t      }\n\t    }\n\n\t    try {\n\t      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n\t      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n\t      iframe = document.createElement(html);\n\t    } catch (e) {\n\t      iframe = document.createElement('iframe');\n\t      iframe.name = self.iframeId;\n\t      iframe.src = 'javascript:0';\n\t    }\n\n\t    iframe.id = self.iframeId;\n\t    self.form.appendChild(iframe);\n\t    self.iframe = iframe;\n\t  }\n\n\t  initIframe(); // escape \\n to prevent it from being converted into \\r\\n by some UAs\n\t  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n\n\t  data = data.replace(rEscapedNewline, '\\\\\\n');\n\t  this.area.value = data.replace(rNewline, '\\\\n');\n\n\t  try {\n\t    this.form.submit();\n\t  } catch (e) {}\n\n\t  if (this.iframe.attachEvent) {\n\t    this.iframe.onreadystatechange = function () {\n\t      if (self.iframe.readyState === 'complete') {\n\t        complete();\n\t      }\n\t    };\n\t  } else {\n\t    this.iframe.onload = complete;\n\t  }\n\t};\n\n\tvar Transport = transport;\n\tvar parser$2 = browser$1;\n\tvar parseqs$1 = parseqs$3;\n\tvar inherit = componentInherit;\n\tvar yeast = yeast_1;\n\tvar debug$2 = browser.exports('engine.io-client:websocket');\n\tvar BrowserWebSocket, NodeWebSocket;\n\n\tif (typeof uni === \"undefined\" && typeof wx === \"undefined\" || typeof WebSocket !== \"undefined\") {\n\t  if (typeof WebSocket !== 'undefined') {\n\t    BrowserWebSocket = WebSocket;\n\t  } else if (typeof self !== 'undefined') {\n\t    BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n\t  } else {\n\t    try {\n\t      NodeWebSocket = require('ws');\n\t    } catch (e) {}\n\t  }\n\t}\n\t/**\n\t * Get either the `WebSocket` or `MozWebSocket` globals\n\t * in the browser or try to resolve WebSocket-compatible\n\t * interface exposed by `ws` for Node-like environment.\n\t */\n\n\n\tvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n\tif ((typeof uni !== \"undefined\" || typeof wx !== \"undefined\") && typeof WebSocket === \"undefined\" || typeof GameGlobal !== \"undefined\") {\n\t  WebSocketImpl = function WebSocket(uri) {\n\t    var self = this;\n\n\t    self.onopen = function () {};\n\n\t    self.onclose = function () {};\n\n\t    self.onmessage = function (data) {};\n\n\t    self.onerror = function (e) {};\n\n\t    if ((typeof tt === \"undefined\" ? \"undefined\" : _typeof(tt)) === \"object\" && tt.getSystemInfo) {\n\t      var _socketTask = tt.connectSocket({\n\t        url: uri\n\t      });\n\n\t      self.send = function (data) {\n\t        _socketTask.send({\n\t          data: data\n\t        });\n\t      };\n\n\t      self.close = function () {\n\t        _socketTask.close();\n\t      };\n\n\t      _socketTask.onOpen(function () {\n\t        self.onopen();\n\t      });\n\n\t      _socketTask.onError(function (e) {\n\t        self.onerror(e);\n\t      });\n\n\t      _socketTask.onMessage(function (res) {\n\t        self.onmessage(res);\n\t      });\n\n\t      _socketTask.onClose(function () {\n\t        self.onclose();\n\t      });\n\t    } else if (typeof uni !== \"undefined\") {\n\t      if (typeof my !== \"undefined\") {\n\t        my.connectSocket({\n\t          url: uri\n\t        });\n\n\t        self.send = function (data) {\n\t          my.sendSocketMessage({\n\t            data: data\n\t          });\n\t        };\n\n\t        self.close = function (data) {\n\t          my.closeSocket();\n\t        };\n\n\t        my.onSocketOpen(function (res) {\n\t          self.onopen();\n\t        });\n\t        my.onSocketError(function (e) {\n\t          self.onerror(e);\n\t        });\n\t        my.onSocketMessage(function (res) {\n\t          self.onmessage(res);\n\t        });\n\t        my.onSocketClose(function (e) {\n\t          self.onclose(e);\n\t        });\n\t      } else {\n\t        var uniSocketTask = uni.connectSocket({\n\t          url: uri,\n\t          complete: function complete() {}\n\t        });\n\n\t        self.send = function (data) {\n\t          uniSocketTask.send({\n\t            data: data\n\t          });\n\t        };\n\n\t        self.close = function () {\n\t          uniSocketTask.close();\n\t        };\n\n\t        uniSocketTask.onOpen(function (res) {\n\t          self.onopen();\n\t        });\n\t        uniSocketTask.onError(function (e) {\n\t          self.onerror(e);\n\t        });\n\t        uniSocketTask.onMessage(function (res) {\n\t          self.onmessage(res);\n\t        });\n\t        uniSocketTask.onClose(function (res) {\n\t          self.onclose();\n\t        });\n\t      }\n\t    } else {\n\t      var socketTask = wx.connectSocket({\n\t        url: uri\n\t      });\n\n\t      self.send = function (data) {\n\t        socketTask.send({\n\t          data: data\n\t        });\n\t      };\n\n\t      self.close = function (data) {\n\t        socketTask.close({\n\t          code: 1000\n\t        });\n\t      };\n\n\t      socketTask.onOpen(function () {\n\t        self.onopen();\n\t      });\n\t      socketTask.onError(function (e) {\n\t        self.onerror(e);\n\t      });\n\t      socketTask.onMessage(function (res) {\n\t        self.onmessage(res);\n\t      });\n\t      socketTask.onClose(function (e) {\n\t        self.onclose(e);\n\t      });\n\t    }\n\t  };\n\t}\n\t/**\n\t * Module exports.\n\t */\n\n\n\tvar websocket$1 = WS;\n\t/**\n\t * WebSocket transport constructor.\n\t *\n\t * @api {Object} connection options\n\t * @api public\n\t */\n\n\tfunction WS(opts) {\n\t  var forceBase64 = opts && opts.forceBase64;\n\n\t  if (forceBase64) {\n\t    this.supportsBinary = false;\n\t  }\n\n\t  if (typeof uni === \"undefined\" && typeof wx === \"undefined\" || typeof WebSocket !== \"undefined\") {\n\t    this.perMessageDeflate = opts.perMessageDeflate;\n\t    this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n\t    this.protocols = opts.protocols;\n\n\t    if (!this.usingBrowserWebSocket) {\n\t      WebSocketImpl = NodeWebSocket;\n\t    }\n\t  }\n\n\t  Transport.call(this, opts);\n\t}\n\t/**\n\t * Inherits from Transport.\n\t */\n\n\n\tinherit(WS, Transport);\n\t/**\n\t * Transport name.\n\t *\n\t * @api public\n\t */\n\n\tWS.prototype.name = 'websocket';\n\t/*\n\t * WebSockets support binary\n\t */\n\n\tWS.prototype.supportsBinary = false;\n\t/**\n\t * Opens socket.\n\t *\n\t * @api private\n\t */\n\n\tWS.prototype.doOpen = function () {\n\t  if (!this.check()) {\n\t    // let probe timeout\n\t    return;\n\t  }\n\n\t  var uri = this.uri();\n\t  var protocols;\n\n\t  if (typeof uni === \"undefined\" && typeof wx === \"undefined\" || typeof WebSocket !== \"undefined\") {\n\t    protocols = this.protocols;\n\t  }\n\n\t  var opts;\n\n\t  if ((typeof uni !== \"undefined\" || typeof wx !== \"undefined\") && typeof WebSocket === \"undefined\") {\n\t    opts = {\n\t      agent: this.agent\n\t    };\n\t  } else {\n\t    opts = {\n\t      agent: this.agent,\n\t      perMessageDeflate: this.perMessageDeflate\n\t    };\n\t  } // SSL options for Node.js client\n\n\n\t  opts.pfx = this.pfx;\n\t  opts.key = this.key;\n\t  opts.passphrase = this.passphrase;\n\t  opts.cert = this.cert;\n\t  opts.ca = this.ca;\n\t  opts.ciphers = this.ciphers;\n\t  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n\t  if (this.extraHeaders) {\n\t    opts.headers = this.extraHeaders;\n\t  }\n\n\t  if (this.localAddress) {\n\t    opts.localAddress = this.localAddress;\n\t  }\n\n\t  try {\n\t    if ((typeof uni !== \"undefined\" || typeof wx !== \"undefined\") && typeof WebSocket === \"undefined\") {\n\t      this.ws = new WebSocketImpl(uri);\n\t    } else {\n\t      this.ws = this.usingBrowserWebSocket && !this.isReactNative ? protocols ? new WebSocketImpl(uri, protocols) : new WebSocketImpl(uri) : new WebSocketImpl(uri, protocols, opts);\n\t    }\n\t  } catch (err) {\n\t    return this.emit('error', err);\n\t  }\n\n\t  if (this.ws.binaryType === undefined) {\n\t    this.supportsBinary = false;\n\t  }\n\n\t  if (this.ws.supports && this.ws.supports.binary) {\n\t    this.supportsBinary = true;\n\t    this.ws.binaryType = 'nodebuffer';\n\t  } else {\n\t    this.ws.binaryType = 'arraybuffer';\n\t  }\n\n\t  this.addEventListeners();\n\t};\n\t/**\n\t * Adds event listeners to the socket\n\t *\n\t * @api private\n\t */\n\n\n\tWS.prototype.addEventListeners = function () {\n\t  var self = this;\n\n\t  this.ws.onopen = function () {\n\t    self.onOpen();\n\t  };\n\n\t  this.ws.onclose = function () {\n\t    self.onClose();\n\t  };\n\n\t  this.ws.onmessage = function (ev) {\n\t    self.onData(ev.data);\n\t  };\n\n\t  this.ws.onerror = function (e) {\n\t    self.onError('websocket error', e);\n\t  };\n\t};\n\t/**\n\t * Writes data to socket.\n\t *\n\t * @param {Array} array of packets.\n\t * @api private\n\t */\n\n\n\tWS.prototype.write = function (packets) {\n\t  var self = this;\n\t  this.writable = false; // encodePacket efficient as it uses WS framing\n\t  // no need for encodePayload\n\n\t  var total = packets.length;\n\n\t  for (var i = 0, l = total; i < l; i++) {\n\t    (function (packet) {\n\t      parser$2.encodePacket(packet, self.supportsBinary, function (data) {\n\t        if ((typeof uni !== \"undefined\" || typeof wx !== \"undefined\") && typeof WebSocket === \"undefined\") {\n\t          try {\n\t            self.ws.send(data);\n\t          } catch (e) {\n\t            debug$2('websocket closed before onclose event');\n\t          }\n\t        } else {\n\t          if (!self.usingBrowserWebSocket) {\n\t            // always create a new object (GH-437)\n\t            var opts = {};\n\n\t            if (packet.options) {\n\t              opts.compress = packet.options.compress;\n\t            }\n\n\t            if (self.perMessageDeflate) {\n\t              var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n\n\t              if (len < self.perMessageDeflate.threshold) {\n\t                opts.compress = false;\n\t              }\n\t            }\n\t          } // Sometimes the websocket has already been closed but the browser didn't\n\t          // have a chance of informing us about it yet, in that case send will\n\t          // throw an error\n\n\n\t          try {\n\t            if (self.usingBrowserWebSocket) {\n\t              // TypeError is thrown when passing the second argument on Safari\n\t              self.ws.send(data);\n\t            } else {\n\t              self.ws.send(data, opts);\n\t            }\n\t          } catch (e) {\n\t            debug$2('websocket closed before onclose event');\n\t          }\n\t        }\n\n\t        --total || done();\n\t      });\n\t    })(packets[i]);\n\t  }\n\n\t  function done() {\n\t    self.emit('flush'); // fake drain\n\t    // defer to next tick to allow Socket to clear writeBuffer\n\n\t    setTimeout(function () {\n\t      self.writable = true;\n\t      self.emit('drain');\n\t    }, 0);\n\t  }\n\t};\n\t/**\n\t * Called upon close\n\t *\n\t * @api private\n\t */\n\n\n\tWS.prototype.onClose = function () {\n\t  Transport.prototype.onClose.call(this);\n\t};\n\t/**\n\t * Closes socket.\n\t *\n\t * @api private\n\t */\n\n\n\tWS.prototype.doClose = function () {\n\t  if (typeof this.ws !== 'undefined') {\n\t    this.ws.close();\n\t  }\n\t};\n\t/**\n\t * Generates uri for connection.\n\t *\n\t * @api private\n\t */\n\n\n\tWS.prototype.uri = function () {\n\t  var query = this.query || {};\n\t  var schema = this.secure ? 'wss' : 'ws';\n\t  var port = ''; // avoid port if default for schema\n\n\t  if (this.port && ('wss' === schema && Number(this.port) !== 443 || 'ws' === schema && Number(this.port) !== 80)) {\n\t    port = ':' + this.port;\n\t  } // append timestamp to URI\n\n\n\t  if (this.timestampRequests) {\n\t    query[this.timestampParam] = yeast();\n\t  } // communicate binary support capabilities\n\n\n\t  if (!this.supportsBinary) {\n\t    query.b64 = 1;\n\t  }\n\n\t  query = parseqs$1.encode(query); // prepend ? to query\n\n\t  if (query.length) {\n\t    query = '?' + query;\n\t  }\n\n\t  var ipv6 = this.hostname.indexOf(':') !== -1;\n\t  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n\t};\n\t/**\n\t * Feature detection for WebSocket.\n\t *\n\t * @return {Boolean} whether this transport is available.\n\t * @api public\n\t */\n\n\n\tWS.prototype.check = function () {\n\t  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n\t};\n\n\t/**\n\t * Module dependencies\n\t */\n\t// var XHR = require('./polling-xhr');\n\n\tvar JSONP = pollingJsonp;\n\tvar websocket = websocket$1;\n\t/**\n\t * Export transports.\n\t */\n\n\ttransports$1.polling = polling;\n\ttransports$1.websocket = websocket;\n\t/**\n\t * Polling transport polymorphic constructor.\n\t * Decides on xhr vs jsonp based on feature detection.\n\t *\n\t * @api private\n\t */\n\n\tfunction polling(opts) {\n\t  var xd = false;\n\t  var xs = false;\n\t  false !== opts.jsonp;\n\n\t  if (typeof location !== 'undefined') {\n\t    var isSSL = 'https:' === location.protocol;\n\t    var port = location.port; // some user agents have empty `location.port`\n\n\t    if (!port) {\n\t      port = isSSL ? 443 : 80;\n\t    }\n\n\t    xd = opts.hostname !== location.hostname || port !== opts.port;\n\t    xs = opts.secure !== isSSL;\n\t  }\n\n\t  opts.xdomain = xd;\n\t  opts.xscheme = xs; // xhr = new XMLHttpRequest(opts);\n\t  //\n\t  // if ('open' in xhr && !opts.forceJSONP) {\n\t  //   return new XHR(opts);\n\t  // } else {\n\t  //   if (!jsonp) throw new Error('JSONP disabled');\n\n\t  return new JSONP(opts); // }\n\t}\n\n\tvar indexOf$1 = [].indexOf;\n\n\tvar indexof = function indexof(arr, obj) {\n\t  if (indexOf$1) return arr.indexOf(obj);\n\n\t  for (var i = 0; i < arr.length; ++i) {\n\t    if (arr[i] === obj) return i;\n\t  }\n\n\t  return -1;\n\t};\n\n\tvar transports = transports$1;\n\tvar Emitter$3 = componentEmitter.exports;\n\tvar debug$1 = browser.exports('engine.io-client:socket');\n\tvar index = indexof;\n\tvar parser$1 = browser$1;\n\tvar parseuri = parseuri$2;\n\tvar parseqs = parseqs$3;\n\t/**\n\t * Module exports.\n\t */\n\n\tvar socket$1 = Socket$1;\n\t/**\n\t * Socket constructor.\n\t *\n\t * @param {String|Object} uri or options\n\t * @param {Object} options\n\t * @api public\n\t */\n\n\tfunction Socket$1(uri, opts) {\n\t  if (!(this instanceof Socket$1)) return new Socket$1(uri, opts);\n\t  opts = opts || {};\n\n\t  if (uri && 'object' === _typeof(uri)) {\n\t    opts = uri;\n\t    uri = null;\n\t  }\n\n\t  if (uri) {\n\t    uri = parseuri(uri);\n\t    opts.hostname = uri.host;\n\t    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n\t    opts.port = uri.port;\n\t    if (uri.query) opts.query = uri.query;\n\t  } else if (opts.host) {\n\t    opts.hostname = parseuri(opts.host).host;\n\t  }\n\n\t  this.secure = null != opts.secure ? opts.secure : typeof location !== 'undefined' && 'https:' === location.protocol;\n\n\t  if (opts.hostname && !opts.port) {\n\t    // if no port is specified manually, use the protocol default\n\t    opts.port = this.secure ? '443' : '80';\n\t  }\n\n\t  this.agent = opts.agent || false;\n\t  this.hostname = opts.hostname || (typeof location !== 'undefined' ? location.hostname : 'localhost');\n\t  this.port = opts.port || (typeof location !== 'undefined' && location.port ? location.port : this.secure ? 443 : 80);\n\t  this.query = opts.query || {};\n\t  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n\t  this.upgrade = false !== opts.upgrade;\n\t  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n\t  this.forceJSONP = !!opts.forceJSONP;\n\t  this.jsonp = false !== opts.jsonp;\n\t  this.forceBase64 = !!opts.forceBase64;\n\t  this.enablesXDR = !!opts.enablesXDR;\n\t  this.timestampParam = opts.timestampParam || 't';\n\t  this.timestampRequests = opts.timestampRequests;\n\t  this.transports = opts.transports || ['polling', 'websocket'];\n\t  this.transportOptions = opts.transportOptions || {};\n\t  this.readyState = '';\n\t  this.writeBuffer = [];\n\t  this.prevBufferLen = 0;\n\t  this.policyPort = opts.policyPort || 843;\n\t  this.rememberUpgrade = opts.rememberUpgrade || false;\n\t  this.binaryType = null;\n\t  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n\t  this.perMessageDeflate = false !== opts.perMessageDeflate ? opts.perMessageDeflate || {} : false;\n\t  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n\n\t  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n\t    this.perMessageDeflate.threshold = 1024;\n\t  } // SSL options for Node.js client\n\n\n\t  this.pfx = opts.pfx || null;\n\t  this.key = opts.key || null;\n\t  this.passphrase = opts.passphrase || null;\n\t  this.cert = opts.cert || null;\n\t  this.ca = opts.ca || null;\n\t  this.ciphers = opts.ciphers || null;\n\t  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n\t  this.forceNode = !!opts.forceNode; // detect ReactNative environment\n\n\t  this.isReactNative = typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative'; // other options for Node.js or ReactNative client\n\n\t  if (typeof self === 'undefined' || this.isReactNative) {\n\t    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n\t      this.extraHeaders = opts.extraHeaders;\n\t    }\n\n\t    if (opts.localAddress) {\n\t      this.localAddress = opts.localAddress;\n\t    }\n\t  } // set on handshake\n\n\n\t  this.id = null;\n\t  this.upgrades = null;\n\t  this.pingInterval = null;\n\t  this.pingTimeout = null; // set on heartbeat\n\n\t  this.pingIntervalTimer = null;\n\t  this.pingTimeoutTimer = null;\n\t  this.open();\n\t}\n\n\tSocket$1.priorWebsocketSuccess = false;\n\t/**\n\t * Mix in `Emitter`.\n\t */\n\n\tEmitter$3(Socket$1.prototype);\n\t/**\n\t * Protocol version.\n\t *\n\t * @api public\n\t */\n\n\tSocket$1.protocol = parser$1.protocol; // this is an int\n\n\t/**\n\t * Expose deps for legacy compatibility\n\t * and standalone browser access.\n\t */\n\n\tSocket$1.Socket = Socket$1;\n\tSocket$1.Transport = transport;\n\tSocket$1.transports = transports$1;\n\tSocket$1.parser = browser$1;\n\t/**\n\t * Creates transport of the given type.\n\t *\n\t * @param {String} transport name\n\t * @return {Transport}\n\t * @api private\n\t */\n\n\tSocket$1.prototype.createTransport = function (name) {\n\t  debug$1('creating transport \"%s\"', name);\n\t  var query = clone(this.query); // append engine.io protocol identifier\n\n\t  query.EIO = parser$1.protocol; // transport name\n\n\t  query.transport = name; // per-transport options\n\n\t  var options = this.transportOptions[name] || {}; // session id if we already have one\n\n\t  if (this.id) query.sid = this.id;\n\t  var transport = new transports[name]({\n\t    query: query,\n\t    socket: this,\n\t    agent: options.agent || this.agent,\n\t    hostname: options.hostname || this.hostname,\n\t    port: options.port || this.port,\n\t    secure: options.secure || this.secure,\n\t    path: options.path || this.path,\n\t    forceJSONP: options.forceJSONP || this.forceJSONP,\n\t    jsonp: options.jsonp || this.jsonp,\n\t    forceBase64: options.forceBase64 || this.forceBase64,\n\t    enablesXDR: options.enablesXDR || this.enablesXDR,\n\t    timestampRequests: options.timestampRequests || this.timestampRequests,\n\t    timestampParam: options.timestampParam || this.timestampParam,\n\t    policyPort: options.policyPort || this.policyPort,\n\t    pfx: options.pfx || this.pfx,\n\t    key: options.key || this.key,\n\t    passphrase: options.passphrase || this.passphrase,\n\t    cert: options.cert || this.cert,\n\t    ca: options.ca || this.ca,\n\t    ciphers: options.ciphers || this.ciphers,\n\t    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n\t    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n\t    extraHeaders: options.extraHeaders || this.extraHeaders,\n\t    forceNode: options.forceNode || this.forceNode,\n\t    localAddress: options.localAddress || this.localAddress,\n\t    requestTimeout: options.requestTimeout || this.requestTimeout,\n\t    protocols: options.protocols || void 0,\n\t    isReactNative: this.isReactNative\n\t  });\n\t  return transport;\n\t};\n\n\tfunction clone(obj) {\n\t  var o = {};\n\n\t  for (var i in obj) {\n\t    if (obj.hasOwnProperty(i)) {\n\t      o[i] = obj[i];\n\t    }\n\t  }\n\n\t  return o;\n\t}\n\t/**\n\t * Initializes transport to use and starts probe.\n\t *\n\t * @api private\n\t */\n\n\n\tSocket$1.prototype.open = function () {\n\t  var transport;\n\n\t  if (this.rememberUpgrade && Socket$1.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n\t    transport = 'websocket';\n\t  } else if (0 === this.transports.length) {\n\t    // Emit error on next tick so it can be listened to\n\t    var self = this;\n\t    setTimeout(function () {\n\t      self.emit('error', 'No transports available');\n\t    }, 0);\n\t    return;\n\t  } else {\n\t    transport = this.transports[0];\n\t  }\n\n\t  this.readyState = 'opening'; // Retry with the next transport if the transport is disabled (jsonp: false)\n\n\t  try {\n\t    transport = this.createTransport(transport);\n\t  } catch (e) {\n\t    this.transports.shift();\n\t    this.open();\n\t    return;\n\t  }\n\n\t  transport.open();\n\t  this.setTransport(transport);\n\t};\n\t/**\n\t * Sets the current transport. Disables the existing one (if any).\n\t *\n\t * @api private\n\t */\n\n\n\tSocket$1.prototype.setTransport = function (transport) {\n\t  debug$1('setting transport %s', transport.name);\n\t  var self = this;\n\n\t  if (this.transport) {\n\t    debug$1('clearing existing transport %s', this.transport.name);\n\t    this.transport.removeAllListeners();\n\t  } // set up transport\n\n\n\t  this.transport = transport; // set up transport listeners\n\n\t  transport.on('drain', function () {\n\t    self.onDrain();\n\t  }).on('packet', function (packet) {\n\t    self.onPacket(packet);\n\t  }).on('error', function (e) {\n\t    self.onError(e);\n\t  }).on('close', function () {\n\t    self.onClose('transport close');\n\t  });\n\t};\n\t/**\n\t * Probes a transport.\n\t *\n\t * @param {String} transport name\n\t * @api private\n\t */\n\n\n\tSocket$1.prototype.probe = function (name) {\n\t  debug$1('probing transport \"%s\"', name);\n\t  var transport = this.createTransport(name, {\n\t    probe: 1\n\t  });\n\t  var failed = false;\n\t  var self = this;\n\t  Socket$1.priorWebsocketSuccess = false;\n\n\t  function onTransportOpen() {\n\t    if (self.onlyBinaryUpgrades) {\n\t      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n\t      failed = failed || upgradeLosesBinary;\n\t    }\n\n\t    if (failed) return;\n\t    debug$1('probe transport \"%s\" opened', name);\n\t    transport.send([{\n\t      type: 'ping',\n\t      data: 'probe'\n\t    }]);\n\t    transport.once('packet', function (msg) {\n\t      if (failed) return;\n\n\t      if ('pong' === msg.type && 'probe' === msg.data) {\n\t        debug$1('probe transport \"%s\" pong', name);\n\t        self.upgrading = true;\n\t        self.emit('upgrading', transport);\n\t        if (!transport) return;\n\t        Socket$1.priorWebsocketSuccess = 'websocket' === transport.name;\n\t        debug$1('pausing current transport \"%s\"', self.transport.name);\n\t        self.transport.pause(function () {\n\t          if (failed) return;\n\t          if ('closed' === self.readyState) return;\n\t          debug$1('changing transport and sending upgrade packet');\n\t          cleanup();\n\t          self.setTransport(transport);\n\t          transport.send([{\n\t            type: 'upgrade'\n\t          }]);\n\t          self.emit('upgrade', transport);\n\t          transport = null;\n\t          self.upgrading = false;\n\t          self.flush();\n\t        });\n\t      } else {\n\t        debug$1('probe transport \"%s\" failed', name);\n\t        var err = new Error('probe error');\n\t        err.transport = transport.name;\n\t        self.emit('upgradeError', err);\n\t      }\n\t    });\n\t  }\n\n\t  function freezeTransport() {\n\t    if (failed) return; // Any callback called by transport should be ignored since now\n\n\t    failed = true;\n\t    cleanup();\n\t    transport.close();\n\t    transport = null;\n\t  } // Handle any error that happens while probing\n\n\n\t  function onerror(err) {\n\t    var error = new Error('probe error: ' + err);\n\t    error.transport = transport.name;\n\t    freezeTransport();\n\t    debug$1('probe transport \"%s\" failed because of error: %s', name, err);\n\t    self.emit('upgradeError', error);\n\t  }\n\n\t  function onTransportClose() {\n\t    onerror('transport closed');\n\t  } // When the socket is closed while we're probing\n\n\n\t  function onclose() {\n\t    onerror('socket closed');\n\t  } // When the socket is upgraded while we're probing\n\n\n\t  function onupgrade(to) {\n\t    if (transport && to.name !== transport.name) {\n\t      debug$1('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n\t      freezeTransport();\n\t    }\n\t  } // Remove all listeners on the transport and on self\n\n\n\t  function cleanup() {\n\t    transport.removeListener('open', onTransportOpen);\n\t    transport.removeListener('error', onerror);\n\t    transport.removeListener('close', onTransportClose);\n\t    self.removeListener('close', onclose);\n\t    self.removeListener('upgrading', onupgrade);\n\t  }\n\n\t  transport.once('open', onTransportOpen);\n\t  transport.once('error', onerror);\n\t  transport.once('close', onTransportClose);\n\t  this.once('close', onclose);\n\t  this.once('upgrading', onupgrade);\n\t  transport.open();\n\t};\n\t/**\n\t * Called when connection is deemed open.\n\t *\n\t * @api public\n\t */\n\n\n\tSocket$1.prototype.onOpen = function () {\n\t  debug$1('socket open');\n\t  this.readyState = 'open';\n\t  Socket$1.priorWebsocketSuccess = 'websocket' === this.transport.name;\n\t  this.emit('open');\n\t  this.flush(); // we check for `readyState` in case an `open`\n\t  // listener already closed the socket\n\n\t  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n\t    debug$1('starting upgrade probes');\n\n\t    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n\t      this.probe(this.upgrades[i]);\n\t    }\n\t  }\n\t};\n\t/**\n\t * Handles a packet.\n\t *\n\t * @api private\n\t */\n\n\n\tSocket$1.prototype.onPacket = function (packet) {\n\t  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n\t    debug$1('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\t    this.emit('packet', packet); // Socket is live - any packet counts\n\n\t    this.emit('heartbeat');\n\n\t    switch (packet.type) {\n\t      case 'open':\n\t        this.onHandshake(JSON.parse(packet.data));\n\t        break;\n\n\t      case 'pong':\n\t        this.setPing();\n\t        this.emit('pong');\n\t        break;\n\n\t      case 'error':\n\t        var err = new Error('server error');\n\t        err.code = packet.data;\n\t        this.onError(err);\n\t        break;\n\n\t      case 'message':\n\t        this.emit('data', packet.data);\n\t        this.emit('message', packet.data);\n\t        break;\n\t    }\n\t  } else {\n\t    debug$1('packet received with socket readyState \"%s\"', this.readyState);\n\t  }\n\t};\n\t/**\n\t * Called upon handshake completion.\n\t *\n\t * @param {Object} handshake obj\n\t * @api private\n\t */\n\n\n\tSocket$1.prototype.onHandshake = function (data) {\n\t  this.emit('handshake', data);\n\t  this.id = data.sid;\n\t  this.transport.query.sid = data.sid;\n\t  this.upgrades = this.filterUpgrades(data.upgrades);\n\t  this.pingInterval = data.pingInterval;\n\t  this.pingTimeout = data.pingTimeout;\n\t  this.onOpen(); // In case open handler closes socket\n\n\t  if ('closed' === this.readyState) return;\n\t  this.setPing(); // Prolong liveness of socket on heartbeat\n\n\t  this.removeListener('heartbeat', this.onHeartbeat);\n\t  this.on('heartbeat', this.onHeartbeat);\n\t};\n\t/**\n\t * Resets ping timeout.\n\t *\n\t * @api private\n\t */\n\n\n\tSocket$1.prototype.onHeartbeat = function (timeout) {\n\t  clearTimeout(this.pingTimeoutTimer);\n\t  var self = this;\n\t  self.pingTimeoutTimer = setTimeout(function () {\n\t    if ('closed' === self.readyState) return;\n\t    self.onClose('ping timeout');\n\t  }, timeout || self.pingInterval + self.pingTimeout);\n\t};\n\t/**\n\t * Pings server every `this.pingInterval` and expects response\n\t * within `this.pingTimeout` or closes connection.\n\t *\n\t * @api private\n\t */\n\n\n\tSocket$1.prototype.setPing = function () {\n\t  var self = this;\n\t  clearTimeout(self.pingIntervalTimer);\n\t  self.pingIntervalTimer = setTimeout(function () {\n\t    debug$1('writing ping packet - expecting pong within %sms', self.pingTimeout);\n\t    self.ping();\n\t    self.onHeartbeat(self.pingTimeout);\n\t  }, self.pingInterval);\n\t};\n\t/**\n\t* Sends a ping packet.\n\t*\n\t* @api private\n\t*/\n\n\n\tSocket$1.prototype.ping = function () {\n\t  var self = this;\n\t  this.sendPacket('ping', function () {\n\t    self.emit('ping');\n\t  });\n\t};\n\t/**\n\t * Called on `drain` event\n\t *\n\t * @api private\n\t */\n\n\n\tSocket$1.prototype.onDrain = function () {\n\t  this.writeBuffer.splice(0, this.prevBufferLen); // setting prevBufferLen = 0 is very important\n\t  // for example, when upgrading, upgrade packet is sent over,\n\t  // and a nonzero prevBufferLen could cause problems on `drain`\n\n\t  this.prevBufferLen = 0;\n\n\t  if (0 === this.writeBuffer.length) {\n\t    this.emit('drain');\n\t  } else {\n\t    this.flush();\n\t  }\n\t};\n\t/**\n\t * Flush write buffers.\n\t *\n\t * @api private\n\t */\n\n\n\tSocket$1.prototype.flush = function () {\n\t  if ('closed' !== this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length) {\n\t    debug$1('flushing %d packets in socket', this.writeBuffer.length);\n\t    this.transport.send(this.writeBuffer); // keep track of current length of writeBuffer\n\t    // splice writeBuffer and callbackBuffer on `drain`\n\n\t    this.prevBufferLen = this.writeBuffer.length;\n\t    this.emit('flush');\n\t  }\n\t};\n\t/**\n\t * Sends a message.\n\t *\n\t * @param {String} message.\n\t * @param {Function} callback function.\n\t * @param {Object} options.\n\t * @return {Socket} for chaining.\n\t * @api public\n\t */\n\n\n\tSocket$1.prototype.write = Socket$1.prototype.send = function (msg, options, fn) {\n\t  this.sendPacket('message', msg, options, fn);\n\t  return this;\n\t};\n\t/**\n\t * Sends a packet.\n\t *\n\t * @param {String} packet type.\n\t * @param {String} data.\n\t * @param {Object} options.\n\t * @param {Function} callback function.\n\t * @api private\n\t */\n\n\n\tSocket$1.prototype.sendPacket = function (type, data, options, fn) {\n\t  if ('function' === typeof data) {\n\t    fn = data;\n\t    data = undefined;\n\t  }\n\n\t  if ('function' === typeof options) {\n\t    fn = options;\n\t    options = null;\n\t  }\n\n\t  if ('closing' === this.readyState || 'closed' === this.readyState) {\n\t    return;\n\t  }\n\n\t  options = options || {};\n\t  options.compress = false !== options.compress;\n\t  var packet = {\n\t    type: type,\n\t    data: data,\n\t    options: options\n\t  };\n\t  this.emit('packetCreate', packet);\n\t  this.writeBuffer.push(packet);\n\t  if (fn) this.once('flush', fn);\n\t  this.flush();\n\t};\n\t/**\n\t * Closes the connection.\n\t *\n\t * @api private\n\t */\n\n\n\tSocket$1.prototype.close = function () {\n\t  if ('opening' === this.readyState || 'open' === this.readyState) {\n\t    this.readyState = 'closing';\n\t    var self = this;\n\n\t    if (this.writeBuffer.length) {\n\t      this.once('drain', function () {\n\t        if (this.upgrading) {\n\t          waitForUpgrade();\n\t        } else {\n\t          close();\n\t        }\n\t      });\n\t    } else if (this.upgrading) {\n\t      waitForUpgrade();\n\t    } else {\n\t      close();\n\t    }\n\t  }\n\n\t  function close() {\n\t    self.onClose('forced close');\n\t    debug$1('socket closing - telling transport to close');\n\t    self.transport.close();\n\t  }\n\n\t  function cleanupAndClose() {\n\t    self.removeListener('upgrade', cleanupAndClose);\n\t    self.removeListener('upgradeError', cleanupAndClose);\n\t    close();\n\t  }\n\n\t  function waitForUpgrade() {\n\t    // wait for upgrade to finish since we can't send packets while pausing a transport\n\t    self.once('upgrade', cleanupAndClose);\n\t    self.once('upgradeError', cleanupAndClose);\n\t  }\n\n\t  return this;\n\t};\n\t/**\n\t * Called upon transport error\n\t *\n\t * @api private\n\t */\n\n\n\tSocket$1.prototype.onError = function (err) {\n\t  debug$1('socket error %j', err);\n\t  Socket$1.priorWebsocketSuccess = false;\n\t  this.emit('error', err);\n\t  this.onClose('transport error', err);\n\t};\n\t/**\n\t * Called upon transport close.\n\t *\n\t * @api private\n\t */\n\n\n\tSocket$1.prototype.onClose = function (reason, desc) {\n\t  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n\t    debug$1('socket close with reason: \"%s\"', reason);\n\t    var self = this; // clear timers\n\n\t    clearTimeout(this.pingIntervalTimer);\n\t    clearTimeout(this.pingTimeoutTimer); // stop event from firing again for transport\n\n\t    this.transport.removeAllListeners('close'); // ensure transport won't stay open\n\n\t    this.transport.close(); // ignore further transport communication\n\n\t    this.transport.removeAllListeners(); // set ready state\n\n\t    this.readyState = 'closed'; // clear session id\n\n\t    this.id = null; // emit close event\n\n\t    this.emit('close', reason, desc); // clean buffers after, so users can still\n\t    // grab the buffers on `close` event\n\n\t    self.writeBuffer = [];\n\t    self.prevBufferLen = 0;\n\t  }\n\t};\n\t/**\n\t * Filters upgrades, returning only those matching client transports.\n\t *\n\t * @param {Array} server upgrades\n\t * @api private\n\t *\n\t */\n\n\n\tSocket$1.prototype.filterUpgrades = function (upgrades) {\n\t  var filteredUpgrades = [];\n\n\t  for (var i = 0, j = upgrades.length; i < j; i++) {\n\t    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n\t  }\n\n\t  return filteredUpgrades;\n\t};\n\n\tlib.exports = socket$1;\n\t/**\n\t * Exports parser\n\t *\n\t * @api public\n\t *\n\t */\n\n\tlib.exports.parser = browser$1;\n\n\tvar socket = {exports: {}};\n\n\tvar toArray_1 = toArray;\n\n\tfunction toArray(list, index) {\n\t  var array = [];\n\t  index = index || 0;\n\n\t  for (var i = index || 0; i < list.length; i++) {\n\t    array[i - index] = list[i];\n\t  }\n\n\t  return array;\n\t}\n\n\t/**\n\t * Module exports.\n\t */\n\n\tvar on_1 = on$1;\n\t/**\n\t * Helper for subscriptions.\n\t *\n\t * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n\t * @param {String} event name\n\t * @param {Function} callback\n\t * @api public\n\t */\n\n\tfunction on$1(obj, ev, fn) {\n\t  obj.on(ev, fn);\n\t  return {\n\t    destroy: function destroy() {\n\t      obj.removeListener(ev, fn);\n\t    }\n\t  };\n\t}\n\n\t/**\n\t * Slice reference.\n\t */\n\tvar slice = [].slice;\n\t/**\n\t * Bind `obj` to `fn`.\n\t *\n\t * @param {Object} obj\n\t * @param {Function|String} fn or string\n\t * @return {Function}\n\t * @api public\n\t */\n\n\tvar componentBind = function componentBind(obj, fn) {\n\t  if ('string' == typeof fn) fn = obj[fn];\n\t  if ('function' != typeof fn) throw new Error('bind() requires a function');\n\t  var args = slice.call(arguments, 2);\n\t  return function () {\n\t    return fn.apply(obj, args.concat(slice.call(arguments)));\n\t  };\n\t};\n\n\t(function (module, exports) {\n\t  /**\n\t   * Module dependencies.\n\t   */\n\t  var parser = socket_ioParser;\n\t  var Emitter = componentEmitter.exports;\n\t  var toArray = toArray_1;\n\t  var on = on_1;\n\t  var bind = componentBind;\n\t  var debug = browser$2.exports('socket.io-client:socket');\n\t  var parseqs = parseqs$3;\n\t  var hasBin = hasBinary2;\n\t  /**\n\t   * Module exports.\n\t   */\n\n\t  module.exports = Socket;\n\t  /**\n\t   * Internal events (blacklisted).\n\t   * These events can't be emitted by the user.\n\t   *\n\t   * @api private\n\t   */\n\n\t  var events = {\n\t    connect: 1,\n\t    connect_error: 1,\n\t    connect_timeout: 1,\n\t    connecting: 1,\n\t    disconnect: 1,\n\t    error: 1,\n\t    reconnect: 1,\n\t    reconnect_attempt: 1,\n\t    reconnect_failed: 1,\n\t    reconnect_error: 1,\n\t    reconnecting: 1,\n\t    ping: 1,\n\t    pong: 1\n\t  };\n\t  /**\n\t   * Shortcut to `Emitter#emit`.\n\t   */\n\n\t  var emit = Emitter.prototype.emit;\n\t  /**\n\t   * `Socket` constructor.\n\t   *\n\t   * @api public\n\t   */\n\n\t  function Socket(io, nsp, opts) {\n\t    this.io = io;\n\t    this.nsp = nsp;\n\t    this.json = this; // compat\n\n\t    this.ids = 0;\n\t    this.acks = {};\n\t    this.receiveBuffer = [];\n\t    this.sendBuffer = [];\n\t    this.connected = false;\n\t    this.disconnected = true;\n\t    this.flags = {};\n\n\t    if (opts && opts.query) {\n\t      this.query = opts.query;\n\t    }\n\n\t    if (this.io.autoConnect) this.open();\n\t  }\n\t  /**\n\t   * Mix in `Emitter`.\n\t   */\n\n\n\t  Emitter(Socket.prototype);\n\t  /**\n\t   * Subscribe to open, close and packet events\n\t   *\n\t   * @api private\n\t   */\n\n\t  Socket.prototype.subEvents = function () {\n\t    if (this.subs) return;\n\t    var io = this.io;\n\t    this.subs = [on(io, 'open', bind(this, 'onopen')), on(io, 'packet', bind(this, 'onpacket')), on(io, 'close', bind(this, 'onclose'))];\n\t  };\n\t  /**\n\t   * \"Opens\" the socket.\n\t   *\n\t   * @api public\n\t   */\n\n\n\t  Socket.prototype.open = Socket.prototype.connect = function () {\n\t    if (this.connected) return this;\n\t    this.subEvents();\n\t    this.io.open(); // ensure open\n\n\t    if ('open' === this.io.readyState) this.onopen();\n\t    this.emit('connecting');\n\t    return this;\n\t  };\n\t  /**\n\t   * Sends a `message` event.\n\t   *\n\t   * @return {Socket} self\n\t   * @api public\n\t   */\n\n\n\t  Socket.prototype.send = function () {\n\t    var args = toArray(arguments);\n\t    args.unshift('message');\n\t    this.emit.apply(this, args);\n\t    return this;\n\t  };\n\t  /**\n\t   * Override `emit`.\n\t   * If the event is in `events`, it's emitted normally.\n\t   *\n\t   * @param {String} event name\n\t   * @return {Socket} self\n\t   * @api public\n\t   */\n\n\n\t  Socket.prototype.emit = function (ev) {\n\t    if (events.hasOwnProperty(ev)) {\n\t      emit.apply(this, arguments);\n\t      return this;\n\t    }\n\n\t    var args = toArray(arguments);\n\t    var packet = {\n\t      type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n\t      data: args\n\t    };\n\t    packet.options = {};\n\t    packet.options.compress = !this.flags || false !== this.flags.compress; // event ack callback\n\n\t    if ('function' === typeof args[args.length - 1]) {\n\t      debug('emitting packet with ack id %d', this.ids);\n\t      this.acks[this.ids] = args.pop();\n\t      packet.id = this.ids++;\n\t    }\n\n\t    if (this.connected) {\n\t      this.packet(packet);\n\t    } else {\n\t      this.sendBuffer.push(packet);\n\t    }\n\n\t    this.flags = {};\n\t    return this;\n\t  };\n\t  /**\n\t   * Sends a packet.\n\t   *\n\t   * @param {Object} packet\n\t   * @api private\n\t   */\n\n\n\t  Socket.prototype.packet = function (packet) {\n\t    packet.nsp = this.nsp;\n\t    this.io.packet(packet);\n\t  };\n\t  /**\n\t   * Called upon engine `open`.\n\t   *\n\t   * @api private\n\t   */\n\n\n\t  Socket.prototype.onopen = function () {\n\t    debug('transport is open - connecting'); // write connect packet if necessary\n\n\t    if ('/' !== this.nsp) {\n\t      if (this.query) {\n\t        var query = _typeof(this.query) === 'object' ? parseqs.encode(this.query) : this.query;\n\t        debug('sending connect packet with query %s', query);\n\t        this.packet({\n\t          type: parser.CONNECT,\n\t          query: query\n\t        });\n\t      } else {\n\t        this.packet({\n\t          type: parser.CONNECT\n\t        });\n\t      }\n\t    }\n\t  };\n\t  /**\n\t   * Called upon engine `close`.\n\t   *\n\t   * @param {String} reason\n\t   * @api private\n\t   */\n\n\n\t  Socket.prototype.onclose = function (reason) {\n\t    debug('close (%s)', reason);\n\t    this.connected = false;\n\t    this.disconnected = true;\n\t    delete this.id;\n\t    this.emit('disconnect', reason);\n\t  };\n\t  /**\n\t   * Called with socket packet.\n\t   *\n\t   * @param {Object} packet\n\t   * @api private\n\t   */\n\n\n\t  Socket.prototype.onpacket = function (packet) {\n\t    var sameNamespace = packet.nsp === this.nsp;\n\t    var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\t    if (!sameNamespace && !rootNamespaceError) return;\n\n\t    switch (packet.type) {\n\t      case parser.CONNECT:\n\t        this.onconnect();\n\t        break;\n\n\t      case parser.EVENT:\n\t        this.onevent(packet);\n\t        break;\n\n\t      case parser.BINARY_EVENT:\n\t        this.onevent(packet);\n\t        break;\n\n\t      case parser.ACK:\n\t        this.onack(packet);\n\t        break;\n\n\t      case parser.BINARY_ACK:\n\t        this.onack(packet);\n\t        break;\n\n\t      case parser.DISCONNECT:\n\t        this.ondisconnect();\n\t        break;\n\n\t      case parser.ERROR:\n\t        this.emit('error', packet.data);\n\t        break;\n\t    }\n\t  };\n\t  /**\n\t   * Called upon a server event.\n\t   *\n\t   * @param {Object} packet\n\t   * @api private\n\t   */\n\n\n\t  Socket.prototype.onevent = function (packet) {\n\t    var args = packet.data || [];\n\t    debug('emitting event %j', args);\n\n\t    if (null != packet.id) {\n\t      debug('attaching ack callback to event');\n\t      args.push(this.ack(packet.id));\n\t    }\n\n\t    if (this.connected) {\n\t      emit.apply(this, args);\n\t    } else {\n\t      this.receiveBuffer.push(args);\n\t    }\n\t  };\n\t  /**\n\t   * Produces an ack callback to emit with an event.\n\t   *\n\t   * @api private\n\t   */\n\n\n\t  Socket.prototype.ack = function (id) {\n\t    var self = this;\n\t    var sent = false;\n\t    return function () {\n\t      // prevent double callbacks\n\t      if (sent) return;\n\t      sent = true;\n\t      var args = toArray(arguments);\n\t      debug('sending ack %j', args);\n\t      self.packet({\n\t        type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n\t        id: id,\n\t        data: args\n\t      });\n\t    };\n\t  };\n\t  /**\n\t   * Called upon a server acknowlegement.\n\t   *\n\t   * @param {Object} packet\n\t   * @api private\n\t   */\n\n\n\t  Socket.prototype.onack = function (packet) {\n\t    var ack = this.acks[packet.id];\n\n\t    if ('function' === typeof ack) {\n\t      debug('calling ack %s with %j', packet.id, packet.data);\n\t      ack.apply(this, packet.data);\n\t      delete this.acks[packet.id];\n\t    } else {\n\t      debug('bad ack %s', packet.id);\n\t    }\n\t  };\n\t  /**\n\t   * Called upon server connect.\n\t   *\n\t   * @api private\n\t   */\n\n\n\t  Socket.prototype.onconnect = function () {\n\t    this.connected = true;\n\t    this.disconnected = false;\n\t    this.emit('connect');\n\t    this.emitBuffered();\n\t  };\n\t  /**\n\t   * Emit buffered events (received and emitted).\n\t   *\n\t   * @api private\n\t   */\n\n\n\t  Socket.prototype.emitBuffered = function () {\n\t    var i;\n\n\t    for (i = 0; i < this.receiveBuffer.length; i++) {\n\t      emit.apply(this, this.receiveBuffer[i]);\n\t    }\n\n\t    this.receiveBuffer = [];\n\n\t    for (i = 0; i < this.sendBuffer.length; i++) {\n\t      this.packet(this.sendBuffer[i]);\n\t    }\n\n\t    this.sendBuffer = [];\n\t  };\n\t  /**\n\t   * Called upon server disconnect.\n\t   *\n\t   * @api private\n\t   */\n\n\n\t  Socket.prototype.ondisconnect = function () {\n\t    debug('server disconnect (%s)', this.nsp);\n\t    this.destroy();\n\t    this.onclose('io server disconnect');\n\t  };\n\t  /**\n\t   * Called upon forced client/server side disconnections,\n\t   * this method ensures the manager stops tracking us and\n\t   * that reconnections don't get triggered for this.\n\t   *\n\t   * @api private.\n\t   */\n\n\n\t  Socket.prototype.destroy = function () {\n\t    if (this.subs) {\n\t      // clean subscriptions to avoid reconnections\n\t      for (var i = 0; i < this.subs.length; i++) {\n\t        this.subs[i].destroy();\n\t      }\n\n\t      this.subs = null;\n\t    }\n\n\t    this.io.destroy(this);\n\t  };\n\t  /**\n\t   * Disconnects the socket manually.\n\t   *\n\t   * @return {Socket} self\n\t   * @api public\n\t   */\n\n\n\t  Socket.prototype.close = Socket.prototype.disconnect = function () {\n\t    if (this.connected) {\n\t      debug('performing disconnect (%s)', this.nsp);\n\t      this.packet({\n\t        type: parser.DISCONNECT\n\t      });\n\t    } // remove socket from pool\n\n\n\t    this.destroy();\n\n\t    if (this.connected) {\n\t      // fire events\n\t      this.onclose('io client disconnect');\n\t    }\n\n\t    return this;\n\t  };\n\t  /**\n\t   * Sets the compress flag.\n\t   *\n\t   * @param {Boolean} if `true`, compresses the sending data\n\t   * @return {Socket} self\n\t   * @api public\n\t   */\n\n\n\t  Socket.prototype.compress = function (compress) {\n\t    this.flags.compress = compress;\n\t    return this;\n\t  };\n\t  /**\n\t   * Sets the binary flag\n\t   *\n\t   * @param {Boolean} whether the emitted data contains binary\n\t   * @return {Socket} self\n\t   * @api public\n\t   */\n\n\n\t  Socket.prototype.binary = function (binary) {\n\t    this.flags.binary = binary;\n\t    return this;\n\t  };\n\t})(socket);\n\n\t/**\n\t * Expose `Backoff`.\n\t */\n\n\tvar backo2 = Backoff$1;\n\t/**\n\t * Initialize backoff timer with `opts`.\n\t *\n\t * - `min` initial timeout in milliseconds [100]\n\t * - `max` max timeout [10000]\n\t * - `jitter` [0]\n\t * - `factor` [2]\n\t *\n\t * @param {Object} opts\n\t * @api public\n\t */\n\n\tfunction Backoff$1(opts) {\n\t  opts = opts || {};\n\t  this.ms = opts.min || 100;\n\t  this.max = opts.max || 10000;\n\t  this.factor = opts.factor || 2;\n\t  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n\t  this.attempts = 0;\n\t}\n\t/**\n\t * Return the backoff duration.\n\t *\n\t * @return {Number}\n\t * @api public\n\t */\n\n\n\tBackoff$1.prototype.duration = function () {\n\t  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n\n\t  if (this.jitter) {\n\t    var rand = Math.random();\n\t    var deviation = Math.floor(rand * this.jitter * ms);\n\t    ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n\t  }\n\n\t  return Math.min(ms, this.max) | 0;\n\t};\n\t/**\n\t * Reset the number of attempts.\n\t *\n\t * @api public\n\t */\n\n\n\tBackoff$1.prototype.reset = function () {\n\t  this.attempts = 0;\n\t};\n\t/**\n\t * Set the minimum duration\n\t *\n\t * @api public\n\t */\n\n\n\tBackoff$1.prototype.setMin = function (min) {\n\t  this.ms = min;\n\t};\n\t/**\n\t * Set the maximum duration\n\t *\n\t * @api public\n\t */\n\n\n\tBackoff$1.prototype.setMax = function (max) {\n\t  this.max = max;\n\t};\n\t/**\n\t * Set the jitter\n\t *\n\t * @api public\n\t */\n\n\n\tBackoff$1.prototype.setJitter = function (jitter) {\n\t  this.jitter = jitter;\n\t};\n\n\tvar UniApp$1 = {};\n\n\tvar frameworkDetector = {};\n\n\tvar platformDetector = {};\n\n\t(function (exports) {\n\n\t  var __values = commonjsGlobal && commonjsGlobal.__values || function (o) {\n\t    var s = typeof Symbol === \"function\" && Symbol.iterator,\n\t        m = s && o[s],\n\t        i = 0;\n\t    if (m) return m.call(o);\n\t    if (o && typeof o.length === \"number\") return {\n\t      next: function next() {\n\t        if (o && i >= o.length) o = void 0;\n\t        return {\n\t          value: o && o[i++],\n\t          done: !o\n\t        };\n\t      }\n\t    };\n\t    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n\t  };\n\n\t  exports.__esModule = true;\n\t  exports.PlatformDetector = exports.Platform = void 0;\n\t  var Platform;\n\n\t  (function (Platform) {\n\t    Platform[\"BROWSER\"] = \"BROWSER\";\n\t    Platform[\"UNKNOWN\"] = \"UNKNOWN\"; // 因为web版的app，只能是由特定厂商打出来的，在这个生态里只有厂商的环境，髌骨不是一个通用或者独立标准的APP概念，而是依附于技术平台的APP\n\n\t    Platform[\"APP_IOS\"] = \"APP_IOS\";\n\t    Platform[\"APP_ANDROID\"] = \"APP_ANDROID\"; // 各个厂家小程序环境\n\n\t    Platform[\"APPLET_WX\"] = \"APPLET_WX\";\n\t    Platform[\"APPLET_WX_GAME\"] = \"APPLET_WX_GAME\";\n\t    Platform[\"APPLET_ALIPAY\"] = \"APPLET_ALIPAY\";\n\t    Platform[\"APPLET_BYTEDANCE\"] = \"APPLET_BYTEDANCE\"; // UNI_APP = \"Uni_App\",  //用Uniapp开发的app，强调的是app\n\t    // React_Native, : 'React-Native',//特指 react-native开发的app，RN不是框架的原因是因为他不能像taro和Uniapp为其他平台赋能，\n\t    // WEIXIN_APPLET = \"Weixin_Applet\",\n\t    // ALIPAY_APPLET = \"Alipay_Applet\",\n\t    // BAIDU_APPLET = \"Baidu_Applet\",\n\t    // BYTEDANCE_APPLET = \"Bytedance_Applet\",\n\t    // QQ_APPLET = \"QQ_Applet\",\n\t    // WEIXIN_GAME = \"Weixin_Game\",\n\t    // _360_APPLET = \"360_Applet\",\n\t    // BROWSER = \"Browser\",\n\t    // UNKNOWN = \"Unknown\",\n\t  })(Platform = exports.Platform || (exports.Platform = {}));\n\n\t  var PlatformDetector =\n\t  /** @class */\n\t  function () {\n\t    function PlatformDetector() {\n\t      var _a, e_1, _b;\n\n\t      this.platform = null;\n\t      this.methods = (_a = {}, _a[Platform.BROWSER] = this.isBrowser, _a[Platform.APP_IOS] = this.isAppiOS, _a[Platform.APP_ANDROID] = this.isAppAndroid, _a[Platform.APPLET_WX] = this.isWXApplet, _a[Platform.APPLET_WX_GAME] = this.isWXGameApplet, _a);\n\t      var methods = this.methods;\n\t      var keys = Object.keys(methods);\n\n\t      try {\n\t        for (var keys_1 = __values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\n\t          var key = keys_1_1.value;\n\t          var method = methods[key];\n\n\t          if (method()) {\n\t            this.platform = key;\n\t            break;\n\t          }\n\t        }\n\t      } catch (e_1_1) {\n\t        e_1 = {\n\t          error: e_1_1\n\t        };\n\t      } finally {\n\t        try {\n\t          if (keys_1_1 && !keys_1_1.done && (_b = keys_1[\"return\"])) _b.call(keys_1);\n\t        } finally {\n\t          if (e_1) throw e_1.error;\n\t        }\n\t      }\n\n\t      this.platform = this.platform || Platform.UNKNOWN;\n\t      console.log('PlatformDetector constructor - ', this.platform);\n\t    }\n\n\t    PlatformDetector.currentPlatform = function () {\n\t      return PlatformDetector.instance.platform;\n\t    };\n\t    /**************  detection plugin methods **************/\n\n\n\t    PlatformDetector.prototype.isBrowser = function () {\n\t      return typeof navigator !== 'undefined' && typeof document !== 'undefined' && (document.getElementById ? true : false) && typeof GameGlobal === 'undefined';\n\t    };\n\n\t    PlatformDetector.prototype.isAppiOS = function () {\n\t      return (typeof uni === \"undefined\" ? \"undefined\" : _typeof(uni)) === \"object\" && (uni.getSystemInfoSync ? true : false) && uni.getSystemInfoSync().platform === 'ios' && (typeof plus === \"undefined\" ? \"undefined\" : _typeof(plus)) === 'object';\n\t    };\n\n\t    PlatformDetector.prototype.isAppAndroid = function () {\n\t      return (typeof uni === \"undefined\" ? \"undefined\" : _typeof(uni)) === \"object\" && (uni.getSystemInfoSync ? true : false) && uni.getSystemInfoSync().platform === 'android' && (typeof plus === \"undefined\" ? \"undefined\" : _typeof(plus)) === 'object';\n\t    };\n\n\t    PlatformDetector.prototype.isWXApplet = function () {\n\t      return (typeof wx === \"undefined\" ? \"undefined\" : _typeof(wx)) === \"object\" && (wx.getSystemInfoSync ? true : false) && typeof WebSocket === 'undefined' && typeof XMLHttpRequest === 'undefined' && typeof plus === 'undefined';\n\t    };\n\n\t    PlatformDetector.prototype.isWXGameApplet = function () {\n\t      return (typeof GameGlobal === \"undefined\" ? \"undefined\" : _typeof(GameGlobal)) === 'object';\n\t    };\n\n\t    PlatformDetector.prototype.isAlipayApplet = function () {\n\t      return false;\n\t    };\n\n\t    PlatformDetector.prototype.isBytedanceApplet = function () {\n\t      return false;\n\t    };\n\n\t    PlatformDetector.prototype.isQQApplet = function () {\n\t      return false;\n\t    };\n\n\t    PlatformDetector.prototype.isBaiduApplet = function () {\n\t      return false;\n\t    };\n\n\t    PlatformDetector.instance = new PlatformDetector();\n\t    return PlatformDetector;\n\t  }();\n\n\t  exports.PlatformDetector = PlatformDetector;\n\t})(platformDetector);\n\n\t(function (exports) {\n\n\t  var __values = commonjsGlobal && commonjsGlobal.__values || function (o) {\n\t    var s = typeof Symbol === \"function\" && Symbol.iterator,\n\t        m = s && o[s],\n\t        i = 0;\n\t    if (m) return m.call(o);\n\t    if (o && typeof o.length === \"number\") return {\n\t      next: function next() {\n\t        if (o && i >= o.length) o = void 0;\n\t        return {\n\t          value: o && o[i++],\n\t          done: !o\n\t        };\n\t      }\n\t    };\n\t    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n\t  };\n\n\t  exports.__esModule = true;\n\t  exports.FrameworkDetector = exports.Framework = void 0;\n\t  var platform_detector_1 = platformDetector;\n\t  var Framework;\n\n\t  (function (Framework) {\n\t    Framework[\"UNIAPP\"] = \"UNIAPP\";\n\t    Framework[\"REACT_NATIVE\"] = \"REACT_NATIVE\";\n\t    Framework[\"TARO\"] = \"TARO\";\n\t    Framework[\"IONIC\"] = \"IONIC\"; // NATIVE APPLET\n\n\t    Framework[\"NATIVE_APPLET_WX\"] = \"NATIVE_APPLET_WX\";\n\t    Framework[\"NATIVE_APPLET_ALIPAY\"] = \"NATIVE_APPLET_ALIPAY\";\n\t    Framework[\"UNKNOWN\"] = \"UNKNOWN\";\n\t  })(Framework = exports.Framework || (exports.Framework = {}));\n\n\t  var FrameworkDetector =\n\t  /** @class */\n\t  function () {\n\t    function FrameworkDetector() {\n\t      var _a, e_1, _b;\n\n\t      this.framework = null;\n\t      this.methods = (_a = {}, _a[Framework.UNIAPP] = this.isUniApp, _a[Framework.REACT_NATIVE] = this.isReactNative, // [Framework.TARO]: this.isTaro,\n\t      _a[Framework.NATIVE_APPLET_WX] = this.isWXApplet, _a);\n\t      var methods = this.methods;\n\t      var keys = Object.keys(methods);\n\n\t      try {\n\t        for (var keys_1 = __values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\n\t          var key = keys_1_1.value;\n\t          var method = methods[key];\n\n\t          if (method()) {\n\t            this.framework = key;\n\t            break;\n\t          }\n\t        }\n\t      } catch (e_1_1) {\n\t        e_1 = {\n\t          error: e_1_1\n\t        };\n\t      } finally {\n\t        try {\n\t          if (keys_1_1 && !keys_1_1.done && (_b = keys_1[\"return\"])) _b.call(keys_1);\n\t        } finally {\n\t          if (e_1) throw e_1.error;\n\t        }\n\t      }\n\n\t      this.framework = this.framework || Framework.UNKNOWN;\n\t      console.log('FrameworkDetector constructor - ', this.framework);\n\t    }\n\n\t    FrameworkDetector.currentFramework = function () {\n\t      return this.instance.framework;\n\t    };\n\t    /**************  detection framework methods **************/\n\n\n\t    FrameworkDetector.prototype.isUniApp = function () {\n\t      return (typeof uni === \"undefined\" ? \"undefined\" : _typeof(uni)) === 'object' && (uni.getSystemInfoSync ? true : false);\n\t    };\n\n\t    FrameworkDetector.prototype.isReactNative = function () {\n\t      return typeof commonjsGlobal !== 'undefined' && commonjsGlobal.__fbGenNativeModule;\n\t    };\n\n\t    FrameworkDetector.prototype.isTaro = function () {\n\t      // typeof Taro, typeof taro   => undefined undefined\n\t      return false;\n\t    };\n\t    /**\n\t     * 首先如果是原生小程序开发的，平台肯定必须是小程序。\n\t     * 然后因为 因为不可能找到一个wx原生特有的方法，而在其他框架开发的小程序中调不了的方法，理论上其他框架开发的小程序代码，肯定也可以调用微信的所有方法\n\t     * 所以只能是排除掉已知的框架，比如现在已知的uni.\n\t     *\n\t     *\n\t     */\n\n\n\t    FrameworkDetector.prototype.isWXApplet = function () {\n\t      return platform_detector_1.PlatformDetector.currentPlatform() === platform_detector_1.Platform.APPLET_WX && typeof uni === 'undefined';\n\t    };\n\n\t    FrameworkDetector.instance = new FrameworkDetector();\n\t    return FrameworkDetector;\n\t  }();\n\n\t  exports.FrameworkDetector = FrameworkDetector;\n\t})(frameworkDetector);\n\n\tUniApp$1.__esModule = true;\n\tUniApp$1.uniApp = void 0;\n\tvar framework_detector_1$4 = frameworkDetector;\n\t/**\n\t * 监听app后台与前台切换\n\t */\n\n\tvar UniApp =\n\t/** @class */\n\tfunction () {\n\t  function UniApp() {\n\t    this.uniAppRunningBackend = false;\n\t    this.listenAppRunning();\n\t  }\n\n\t  UniApp.prototype.listenAppRunning = function () {\n\t    var _this = this;\n\n\t    var currentFramework = framework_detector_1$4.FrameworkDetector.currentFramework();\n\n\t    if (currentFramework === framework_detector_1$4.Framework.UNIAPP && (typeof plus === \"undefined\" ? \"undefined\" : _typeof(plus)) === \"object\") {\n\t      plus.globalEvent.addEventListener(\"resume\", function () {\n\t        //从后台切换到前台\n\t        _this.uniAppRunningBackend = false;\n\t        console.log(\"app running frontend...:\", _this.uniAppRunningBackend);\n\t      }, false);\n\t      plus.globalEvent.addEventListener(\"pause\", function () {\n\t        //从前台切换到后台\n\t        _this.uniAppRunningBackend = true;\n\t        console.log(\"app running background...:\", _this.uniAppRunningBackend);\n\t      }, false);\n\t    }\n\t  };\n\n\t  UniApp.prototype.runningBackend = function () {\n\t    return this.uniAppRunningBackend;\n\t  };\n\n\t  return UniApp;\n\t}();\n\n\tvar uniApp$1 = new UniApp();\n\tUniApp$1.uniApp = uniApp$1;\n\n\tvar GoEasyDomainNumber$2 = {};\n\n\tvar config = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  exports[\"default\"] = {\n\t    maxNumber: 5\n\t  };\n\t})(config);\n\n\tvar localStorageDispatcher = {};\n\n\tvar cookie = {};\n\n\tvar __values$3 = commonjsGlobal && commonjsGlobal.__values || function (o) {\n\t  var s = typeof Symbol === \"function\" && Symbol.iterator,\n\t      m = s && o[s],\n\t      i = 0;\n\t  if (m) return m.call(o);\n\t  if (o && typeof o.length === \"number\") return {\n\t    next: function next() {\n\t      if (o && i >= o.length) o = void 0;\n\t      return {\n\t        value: o && o[i++],\n\t        done: !o\n\t      };\n\t    }\n\t  };\n\t  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n\t};\n\n\tcookie.__esModule = true;\n\tcookie.Cookie = void 0;\n\n\tvar Cookie =\n\t/** @class */\n\tfunction () {\n\t  function Cookie() {}\n\n\t  Cookie.get = function (name) {\n\t    var e_1, _a;\n\n\t    var cookieName = encodeURIComponent(name) + '=';\n\t    var cookies = document.cookie.split('; ');\n\n\t    try {\n\t      for (var cookies_1 = __values$3(cookies), cookies_1_1 = cookies_1.next(); !cookies_1_1.done; cookies_1_1 = cookies_1.next()) {\n\t        var cookie = cookies_1_1.value;\n\n\t        if (cookie.startsWith(cookieName)) {\n\t          return decodeURIComponent(cookie.substring(cookieName.length));\n\t        }\n\t      }\n\t    } catch (e_1_1) {\n\t      e_1 = {\n\t        error: e_1_1\n\t      };\n\t    } finally {\n\t      try {\n\t        if (cookies_1_1 && !cookies_1_1.done && (_a = cookies_1[\"return\"])) _a.call(cookies_1);\n\t      } finally {\n\t        if (e_1) throw e_1.error;\n\t      }\n\t    }\n\n\t    return null;\n\t  };\n\t  /**\n\t   * @description 设置 Cookie\n\t   * @param name 名字\n\t   * @param value  值\n\t   * @param expires 设置过期时间，不设置过期时间为 Session cookie 关闭浏览器失效\n\t   * @param path 作用 path\n\t   * @param domain  作用 path\n\t   * @param secure    如果想在客户端即网页中通过 js 去设置Secure类型的 cookie，必须保证网页是https协议的。\n\t   *     在http协议的网页中是无法设置secure类型cookie的。\n\t   */\n\n\n\t  Cookie.set = function (name, value, expires, domain, path, secure) {\n\t    if (path === void 0) {\n\t      path = '/';\n\t    }\n\n\t    if (secure === void 0) {\n\t      secure = false;\n\t    }\n\n\t    var cookieText = encodeURIComponent(name) + '=' + encodeURIComponent(value);\n\n\t    if (expires instanceof Date) {\n\t      cookieText += '; expires=' + expires.toGMTString();\n\t    }\n\n\t    if (path) {\n\t      cookieText += '; path=' + path;\n\t    }\n\n\t    if (domain) {\n\t      cookieText += '; domain=' + domain;\n\t    }\n\n\t    if (secure) {\n\t      cookieText += '; secure';\n\t    }\n\n\t    document.cookie = cookieText;\n\t  };\n\t  /**\n\t   * @description 移除 Cookie，移除的时候 需要传递与设置时相同的 name/path/domain 才能移除成功\n\t   */\n\n\n\t  Cookie.remove = function (name, domain, path, secure) {\n\t    if (path === void 0) {\n\t      path = '/';\n\t    }\n\n\t    if (secure === void 0) {\n\t      secure = false;\n\t    }\n\n\t    Cookie.set(name, '', new Date(0), domain, path, secure);\n\t  };\n\n\t  return Cookie;\n\t}();\n\n\tcookie.Cookie = Cookie;\n\n\tvar __values$2 = commonjsGlobal && commonjsGlobal.__values || function (o) {\n\t  var s = typeof Symbol === \"function\" && Symbol.iterator,\n\t      m = s && o[s],\n\t      i = 0;\n\t  if (m) return m.call(o);\n\t  if (o && typeof o.length === \"number\") return {\n\t    next: function next() {\n\t      if (o && i >= o.length) o = void 0;\n\t      return {\n\t        value: o && o[i++],\n\t        done: !o\n\t      };\n\t    }\n\t  };\n\t  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n\t};\n\n\tlocalStorageDispatcher.__esModule = true;\n\tlocalStorageDispatcher.LocalStorageDispatcher = void 0;\n\tvar cookie_1 = cookie;\n\n\tvar CookieStorage =\n\t/** @class */\n\tfunction () {\n\t  function CookieStorage() {\n\t    this.domain = null;\n\t    var isDomain = /^(?:[A-za-z0-9-]+\\.)+[A-za-z]{2,4}(?:[\\/\\?#][\\/=\\?%\\-&~`@[\\]\\':+!\\.#\\w]*)?$/;\n\t    this.domain = typeof location !== 'undefined' && isDomain.test(location.host) ? location.host.split('.').slice(-2).join('.') : null;\n\t  }\n\n\t  CookieStorage.prototype.get = function (key) {\n\t    var result = cookie_1.Cookie.get(key) || null;\n\t    return JSON.parse(result);\n\t  };\n\n\t  CookieStorage.prototype.put = function (key, data) {\n\t    var expire = new Date(2030, 12, 31, 0, 0, 0, 0);\n\t    var domain = this.domain;\n\t    cookie_1.Cookie.set(key, JSON.stringify(data), expire, domain);\n\t  };\n\n\t  CookieStorage.prototype.remove = function (key) {\n\t    var domain = this.domain;\n\t    cookie_1.Cookie.remove(key, domain);\n\t  };\n\n\t  CookieStorage.prototype.support = function () {\n\t    return typeof navigator !== 'undefined' && navigator.cookieEnabled === true;\n\t  };\n\n\t  return CookieStorage;\n\t}();\n\n\tvar LocalStorage =\n\t/** @class */\n\tfunction () {\n\t  function LocalStorage() {}\n\n\t  LocalStorage.prototype.get = function (key) {\n\t    var result = localStorage.getItem(key);\n\t    return JSON.parse(result);\n\t  };\n\n\t  LocalStorage.prototype.put = function (key, data) {\n\t    var result = localStorage.setItem(key, JSON.stringify(data));\n\t    JSON.stringify(result);\n\t  };\n\n\t  LocalStorage.prototype.remove = function (key) {\n\t    localStorage.removeItem(key);\n\t  };\n\n\t  LocalStorage.prototype.support = function () {\n\t    return typeof GameGlobal === 'undefined' && typeof localStorage !== 'undefined' && localStorage.setItem ? true : false;\n\t  };\n\n\t  return LocalStorage;\n\t}();\n\n\tvar UniappLocalStorage =\n\t/** @class */\n\tfunction () {\n\t  function UniappLocalStorage() {}\n\n\t  UniappLocalStorage.prototype.get = function (key) {\n\t    var result = uni.getStorageSync(key) || null;\n\t    return JSON.parse(result);\n\t  };\n\n\t  UniappLocalStorage.prototype.put = function (key, data) {\n\t    uni.setStorageSync(key, JSON.stringify(data));\n\t  };\n\n\t  UniappLocalStorage.prototype.remove = function (key) {\n\t    uni.removeStorageSync(key);\n\t  };\n\n\t  UniappLocalStorage.prototype.support = function () {\n\t    return (typeof uni === \"undefined\" ? \"undefined\" : _typeof(uni)) === \"object\" && uni.getStorageSync ? true : false;\n\t  };\n\n\t  return UniappLocalStorage;\n\t}();\n\n\tvar WXLocalStorage =\n\t/** @class */\n\tfunction () {\n\t  function WXLocalStorage() {}\n\n\t  WXLocalStorage.prototype.get = function (key) {\n\t    var result = wx.getStorageSync(key) || null;\n\t    return JSON.parse(result);\n\t  };\n\n\t  WXLocalStorage.prototype.put = function (key, data) {\n\t    wx.setStorageSync(key, JSON.stringify(data));\n\t  };\n\n\t  WXLocalStorage.prototype.remove = function (key) {\n\t    wx.removeStorageSync(key);\n\t  };\n\n\t  WXLocalStorage.prototype.support = function () {\n\t    return (typeof wx === \"undefined\" ? \"undefined\" : _typeof(wx)) === \"object\" && wx.getStorageSync ? true : false;\n\t  };\n\n\t  return WXLocalStorage;\n\t}();\n\n\tvar LocalStorageDispatcher =\n\t/** @class */\n\tfunction () {\n\t  function LocalStorageDispatcher() {\n\t    this.supportedStorage = null;\n\t    var storages = LocalStorageDispatcher.storages;\n\t    storages.push(new UniappLocalStorage());\n\t    storages.push(new LocalStorage());\n\t    storages.push(new WXLocalStorage());\n\t    storages.push(new CookieStorage());\n\t    this.dispatch();\n\t    console.log('LocalStorageDispatcher constructor - ', this.supportedStorage);\n\t  }\n\n\t  LocalStorageDispatcher.localStorage = function () {\n\t    return this.instance.supportedStorage;\n\t  };\n\n\t  LocalStorageDispatcher.prototype.dispatch = function () {\n\t    var e_1, _a;\n\n\t    try {\n\t      for (var _b = __values$2(LocalStorageDispatcher.storages), _c = _b.next(); !_c.done; _c = _b.next()) {\n\t        var storage = _c.value;\n\n\t        if (storage.support()) {\n\t          this.supportedStorage = storage;\n\t          break;\n\t        }\n\t      }\n\t    } catch (e_1_1) {\n\t      e_1 = {\n\t        error: e_1_1\n\t      };\n\t    } finally {\n\t      try {\n\t        if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n\t      } finally {\n\t        if (e_1) throw e_1.error;\n\t      }\n\t    }\n\t  };\n\n\t  LocalStorageDispatcher.storages = new Array();\n\t  LocalStorageDispatcher.instance = new LocalStorageDispatcher();\n\t  return LocalStorageDispatcher;\n\t}();\n\n\tlocalStorageDispatcher.LocalStorageDispatcher = LocalStorageDispatcher;\n\n\tGoEasyDomainNumber$2.__esModule = true;\n\tGoEasyDomainNumber$2.goEasyDomainNumber = void 0;\n\tvar config_1 = config;\n\tvar local_storage_dispatcher_1$1 = localStorageDispatcher;\n\n\tvar GoEasyDomainNumber$1 =\n\t/** @class */\n\tfunction () {\n\t  function GoEasyDomainNumber() {}\n\n\t  GoEasyDomainNumber.prototype.refreshNumber = function () {\n\t    var key = GoEasyDomainNumber.GOEASY_DOMAIN_NUMBER;\n\t    var storage = local_storage_dispatcher_1$1.LocalStorageDispatcher.localStorage();\n\t    var number = Math.floor(Math.random() * (config_1[\"default\"].maxNumber - 1) + 1);\n\n\t    if (storage !== null) {\n\t      number = parseInt(storage.get(key)) || number;\n\t    }\n\n\t    if (number > 0 && number < config_1[\"default\"].maxNumber) {\n\t      number += 1;\n\t    } else if (number === config_1[\"default\"].maxNumber) {\n\t      number = 1;\n\t    }\n\n\t    if (storage !== null) {\n\t      storage.put(key, number);\n\t    }\n\n\t    return number;\n\t  };\n\n\t  GoEasyDomainNumber.GOEASY_DOMAIN_NUMBER = 'GOEASY_DOMAIN_NUMBER';\n\t  return GoEasyDomainNumber;\n\t}();\n\n\tvar goEasyDomainNumber = new GoEasyDomainNumber$1();\n\tGoEasyDomainNumber$2.goEasyDomainNumber = goEasyDomainNumber;\n\n\tvar eio = lib.exports;\n\tvar Socket = socket.exports;\n\tvar Emitter$2 = componentEmitter.exports;\n\tvar parser = socket_ioParser;\n\tvar on = on_1;\n\tvar bind = componentBind;\n\tvar debug = browser$2.exports('socket.io-client:manager');\n\tvar indexOf = indexof;\n\tvar Backoff = backo2;\n\tvar uniApp = UniApp$1.uniApp;\n\tvar GoEasyDomainNumber = GoEasyDomainNumber$2.goEasyDomainNumber;\n\t/**\n\t * IE6+ hasOwnProperty\n\t */\n\n\tvar has = Object.prototype.hasOwnProperty;\n\t/**\n\t * Module exports\n\t */\n\n\tvar manager = Manager;\n\t/**\n\t * `Manager` constructor.\n\t *\n\t * @param {String} engine instance or engine uri/opts\n\t * @param {Object} options\n\t * @api public\n\t */\n\n\tfunction Manager(uri, opts) {\n\t  if (!(this instanceof Manager)) return new Manager(uri, opts);\n\n\t  if (uri && 'object' === _typeof(uri)) {\n\t    opts = uri;\n\t    uri = undefined;\n\t  }\n\n\t  opts = opts || {};\n\t  opts.path = opts.path || '/socket.io';\n\t  this.nsps = {};\n\t  this.subs = [];\n\t  this.opts = opts;\n\t  this.reconnection(opts.reconnection !== false);\n\t  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n\t  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n\t  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n\t  this.randomizationFactor(opts.randomizationFactor || 0.5);\n\t  this.backoff = new Backoff({\n\t    min: this.reconnectionDelay(),\n\t    max: this.reconnectionDelayMax(),\n\t    jitter: this.randomizationFactor()\n\t  });\n\t  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n\t  this.readyState = 'closed';\n\t  this.uri = uri;\n\t  this.connecting = [];\n\t  this.lastPing = null;\n\t  this.encoding = false;\n\t  this.packetBuffer = [];\n\n\t  var _parser = opts.parser || parser;\n\n\t  this.encoder = new _parser.Encoder();\n\t  this.decoder = new _parser.Decoder();\n\t  this.autoConnect = opts.autoConnect !== false;\n\t  if (this.autoConnect) this.open();\n\t}\n\t/**\n\t * Propagate given event to sockets and emit on `this`\n\t *\n\t * @api private\n\t */\n\n\n\tManager.prototype.emitAll = function () {\n\t  this.emit.apply(this, arguments);\n\n\t  for (var nsp in this.nsps) {\n\t    if (has.call(this.nsps, nsp)) {\n\t      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n\t    }\n\t  }\n\t};\n\t/**\n\t * Update `socket.id` of all sockets\n\t *\n\t * @api private\n\t */\n\n\n\tManager.prototype.updateSocketIds = function () {\n\t  for (var nsp in this.nsps) {\n\t    if (has.call(this.nsps, nsp)) {\n\t      this.nsps[nsp].id = this.generateId(nsp);\n\t    }\n\t  }\n\t};\n\t/**\n\t * generate `socket.id` for the given `nsp`\n\t *\n\t * @param {String} nsp\n\t * @return {String}\n\t * @api private\n\t */\n\n\n\tManager.prototype.generateId = function (nsp) {\n\t  return (nsp === '/' ? '' : nsp + '#') + this.engine.id;\n\t};\n\t/**\n\t * Mix in `Emitter`.\n\t */\n\n\n\tEmitter$2(Manager.prototype);\n\t/**\n\t * Sets the `reconnection` config.\n\t *\n\t * @param {Boolean} true/false if it should automatically reconnect\n\t * @return {Manager} self or value\n\t * @api public\n\t */\n\n\tManager.prototype.reconnection = function (v) {\n\t  if (!arguments.length) return this._reconnection;\n\t  this._reconnection = !!v;\n\t  return this;\n\t};\n\t/**\n\t * Sets the reconnection attempts config.\n\t *\n\t * @param {Number} max reconnection attempts before giving up\n\t * @return {Manager} self or value\n\t * @api public\n\t */\n\n\n\tManager.prototype.reconnectionAttempts = function (v) {\n\t  if (!arguments.length) return this._reconnectionAttempts;\n\t  this._reconnectionAttempts = v;\n\t  return this;\n\t};\n\t/**\n\t * Sets the delay between reconnections.\n\t *\n\t * @param {Number} delay\n\t * @return {Manager} self or value\n\t * @api public\n\t */\n\n\n\tManager.prototype.reconnectionDelay = function (v) {\n\t  if (!arguments.length) return this._reconnectionDelay;\n\t  this._reconnectionDelay = v;\n\t  this.backoff && this.backoff.setMin(v);\n\t  return this;\n\t};\n\n\tManager.prototype.randomizationFactor = function (v) {\n\t  if (!arguments.length) return this._randomizationFactor;\n\t  this._randomizationFactor = v;\n\t  this.backoff && this.backoff.setJitter(v);\n\t  return this;\n\t};\n\t/**\n\t * Sets the maximum delay between reconnections.\n\t *\n\t * @param {Number} delay\n\t * @return {Manager} self or value\n\t * @api public\n\t */\n\n\n\tManager.prototype.reconnectionDelayMax = function (v) {\n\t  if (!arguments.length) return this._reconnectionDelayMax;\n\t  this._reconnectionDelayMax = v;\n\t  this.backoff && this.backoff.setMax(v);\n\t  return this;\n\t};\n\t/**\n\t * Sets the connection timeout. `false` to disable\n\t *\n\t * @return {Manager} self or value\n\t * @api public\n\t */\n\n\n\tManager.prototype.timeout = function (v) {\n\t  if (!arguments.length) return this._timeout;\n\t  this._timeout = v;\n\t  return this;\n\t};\n\t/**\n\t * Starts trying to reconnect if reconnection is enabled and we have not\n\t * started reconnecting yet\n\t *\n\t * @api private\n\t */\n\n\n\tManager.prototype.maybeReconnectOnOpen = function () {\n\t  // Only try to reconnect if it's the first time we're connecting\n\t  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n\t    // keeps reconnection from firing twice for the same reconnection loop\n\t    this.reconnect();\n\t  }\n\t};\n\t/**\n\t * Sets the current transport `socket`.\n\t *\n\t * @param {Function} optional, callback\n\t * @return {Manager} self\n\t * @api public\n\t */\n\n\n\tManager.prototype.open = Manager.prototype.connect = function (fn, opts) {\n\t  debug('readyState %s', this.readyState);\n\t  if (~this.readyState.indexOf('open')) return this;\n\t  debug('opening %s', this.uri);\n\t  this.engine = eio(this.uri, this.opts);\n\t  var socket = this.engine;\n\t  var self = this;\n\t  this.readyState = 'opening';\n\t  this.skipReconnect = false; // emit `open`\n\n\t  var openSub = on(socket, 'open', function () {\n\t    self.onopen();\n\t    fn && fn();\n\t  }); // emit `connect_error`\n\n\t  var errorSub = on(socket, 'error', function (data) {\n\t    if (typeof window !== 'undefined') {\n\t      var reg = /[1-9][0-9]*/g;\n\t      var index = parseInt(self.uri.match(reg)[0]);\n\t      var nextIndex = GoEasyDomainNumber.refreshNumber();\n\t      self.uri = self.uri.replace(index, nextIndex);\n\t    }\n\n\t    debug('connect_error');\n\t    self.cleanup();\n\t    self.readyState = 'closed';\n\t    self.emitAll('connect_error', data);\n\n\t    if (fn) {\n\t      var err = new Error('Connection error');\n\t      err.data = data;\n\t      fn(err);\n\t    } else {\n\t      // Only do this if there is no fn to handle the error\n\t      self.maybeReconnectOnOpen();\n\t    }\n\t  }); // emit `connect_timeout`\n\n\t  if (false !== this._timeout) {\n\t    var timeout = this._timeout;\n\t    debug('connect attempt will timeout after %d', timeout); // set timer\n\n\t    var timer = setTimeout(function () {\n\t      debug('connect attempt timed out after %d', timeout);\n\t      openSub.destroy();\n\t      socket.close();\n\t      socket.emit('error', 'timeout');\n\t      self.emitAll('connect_timeout', timeout);\n\t    }, timeout);\n\t    this.subs.push({\n\t      destroy: function destroy() {\n\t        clearTimeout(timer);\n\t      }\n\t    });\n\t  }\n\n\t  this.subs.push(openSub);\n\t  this.subs.push(errorSub);\n\t  return this;\n\t};\n\t/**\n\t * Called upon transport open.\n\t *\n\t * @api private\n\t */\n\n\n\tManager.prototype.onopen = function () {\n\t  debug('open'); // clear old subs\n\n\t  this.cleanup(); // mark as open\n\n\t  this.readyState = 'open';\n\t  this.emit('open'); // add new subs\n\n\t  var socket = this.engine;\n\t  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n\t  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n\t  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n\t  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n\t  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n\t  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n\t};\n\t/**\n\t * Called upon a ping.\n\t *\n\t * @api private\n\t */\n\n\n\tManager.prototype.onping = function () {\n\t  this.lastPing = new Date();\n\t  this.emitAll('ping');\n\t};\n\t/**\n\t * Called upon a packet.\n\t *\n\t * @api private\n\t */\n\n\n\tManager.prototype.onpong = function () {\n\t  this.emitAll('pong', new Date() - this.lastPing);\n\t};\n\t/**\n\t * Called with data.\n\t *\n\t * @api private\n\t */\n\n\n\tManager.prototype.ondata = function (data) {\n\t  this.decoder.add(data);\n\t};\n\t/**\n\t * Called when parser fully decodes a packet.\n\t *\n\t * @api private\n\t */\n\n\n\tManager.prototype.ondecoded = function (packet) {\n\t  this.emit('packet', packet);\n\t};\n\t/**\n\t * Called upon socket error.\n\t *\n\t * @api private\n\t */\n\n\n\tManager.prototype.onerror = function (err) {\n\t  debug('error', err);\n\t  this.emitAll('error', err);\n\t};\n\t/**\n\t * Creates a new socket for the given `nsp`.\n\t *\n\t * @return {Socket}\n\t * @api public\n\t */\n\n\n\tManager.prototype.socket = function (nsp, opts) {\n\t  var socket = this.nsps[nsp];\n\n\t  if (!socket) {\n\t    socket = new Socket(this, nsp, opts);\n\t    this.nsps[nsp] = socket;\n\t    var self = this;\n\t    socket.on('connecting', onConnecting);\n\t    socket.on('connect', function () {\n\t      socket.id = self.generateId(nsp);\n\t    });\n\n\t    if (this.autoConnect) {\n\t      // manually call here since connecting event is fired before listening\n\t      onConnecting();\n\t    }\n\t  }\n\n\t  function onConnecting() {\n\t    if (!~indexOf(self.connecting, socket)) {\n\t      self.connecting.push(socket);\n\t    }\n\t  }\n\n\t  return socket;\n\t};\n\t/**\n\t * Called upon a socket close.\n\t *\n\t * @param {Socket} socket\n\t */\n\n\n\tManager.prototype.destroy = function (socket) {\n\t  var index = indexOf(this.connecting, socket);\n\t  if (~index) this.connecting.splice(index, 1);\n\t  if (this.connecting.length) return;\n\t  this.close();\n\t};\n\t/**\n\t * Writes a packet.\n\t *\n\t * @param {Object} packet\n\t * @api private\n\t */\n\n\n\tManager.prototype.packet = function (packet) {\n\t  debug('writing packet %j', packet);\n\t  var self = this;\n\t  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n\t  if (!self.encoding) {\n\t    // encode, then write to engine with result\n\t    self.encoding = true;\n\t    this.encoder.encode(packet, function (encodedPackets) {\n\t      for (var i = 0; i < encodedPackets.length; i++) {\n\t        self.engine.write(encodedPackets[i], packet.options);\n\t      }\n\n\t      self.encoding = false;\n\t      self.processPacketQueue();\n\t    });\n\t  } else {\n\t    // add packet to the queue\n\t    self.packetBuffer.push(packet);\n\t  }\n\t};\n\t/**\n\t * If packet buffer is non-empty, begins encoding the\n\t * next packet in line.\n\t *\n\t * @api private\n\t */\n\n\n\tManager.prototype.processPacketQueue = function () {\n\t  if (this.packetBuffer.length > 0 && !this.encoding) {\n\t    var pack = this.packetBuffer.shift();\n\t    this.packet(pack);\n\t  }\n\t};\n\t/**\n\t * Clean up transport subscriptions and packet buffer.\n\t *\n\t * @api private\n\t */\n\n\n\tManager.prototype.cleanup = function () {\n\t  debug('cleanup');\n\t  var subsLength = this.subs.length;\n\n\t  for (var i = 0; i < subsLength; i++) {\n\t    var sub = this.subs.shift();\n\t    sub.destroy();\n\t  }\n\n\t  this.packetBuffer = [];\n\t  this.encoding = false;\n\t  this.lastPing = null;\n\t  this.decoder.destroy();\n\t};\n\t/**\n\t * Close the current socket.\n\t *\n\t * @api private\n\t */\n\n\n\tManager.prototype.close = Manager.prototype.disconnect = function () {\n\t  debug('disconnect');\n\t  this.skipReconnect = true;\n\t  this.reconnecting = false;\n\n\t  if ('opening' === this.readyState) {\n\t    // `onclose` will not fire because\n\t    // an open event never happened\n\t    this.cleanup();\n\t  }\n\n\t  this.backoff.reset();\n\t  this.readyState = 'closed';\n\t  if (this.engine) this.engine.close();\n\t};\n\t/**\n\t * Called upon engine close.\n\t *\n\t * @api private\n\t */\n\n\n\tManager.prototype.onclose = function (reason) {\n\t  debug('onclose');\n\t  this.cleanup();\n\t  this.backoff.reset();\n\t  this.readyState = 'closed';\n\t  this.emit('close', reason);\n\n\t  if (this._reconnection && !this.skipReconnect) {\n\t    this.reconnect();\n\t  }\n\t};\n\t/**\n\t * Attempt a reconnection.\n\t *\n\t * @api private\n\t */\n\n\n\tfunction isUniRunningBackend() {\n\t  var isUni = false;\n\n\t  if ((typeof uni === \"undefined\" ? \"undefined\" : _typeof(uni)) === \"object\" && uni.getSystemInfo) {\n\t    isUni = true;\n\t  }\n\n\t  return isUni && uniApp.runningBackend();\n\t}\n\n\tManager.prototype.reconnect = function () {\n\t  debug(\"isUniRunningBackend() :\" + isUniRunningBackend());\n\t  if (this.reconnecting || this.skipReconnect) return this;\n\t  var self = this;\n\n\t  if (this.backoff.attempts >= this._reconnectionAttempts) {\n\t    debug('reconnect failed');\n\t    this.backoff.reset();\n\t    this.emitAll('reconnect_failed');\n\t    this.reconnecting = false;\n\t  } else {\n\t    var delay = this.backoff.duration();\n\t    debug('will wait %dms before reconnect attempt', delay);\n\t    this.reconnecting = true;\n\t    var timer = setTimeout(function () {\n\t      if (self.skipReconnect) return;\n\t      debug('attempting reconnect');\n\t      self.emitAll('reconnect_attempt', self.backoff.attempts);\n\t      self.emitAll('reconnecting', self.backoff.attempts); // check again for the case socket closed in above events\n\n\t      if (self.skipReconnect) return;\n\n\t      if (isUniRunningBackend()) {\n\t        debug('Uniapp running backend, skipped reconnect...');\n\t        self.reconnecting = false;\n\t        self.reconnect();\n\t        self.emitAll('reconnect_error', 'Uniapp running backend, skipped reconnect...');\n\t      } else {\n\t        self.open(function (err) {\n\t          if (err) {\n\t            debug('reconnect attempt error');\n\t            self.reconnecting = false;\n\t            self.reconnect();\n\t            self.emitAll('reconnect_error', err.data);\n\t          } else {\n\t            debug('reconnect success');\n\t            self.onreconnect();\n\t          }\n\t        });\n\t      }\n\t    }, delay);\n\t    this.subs.push({\n\t      destroy: function destroy() {\n\t        clearTimeout(timer);\n\t      }\n\t    });\n\t  }\n\t};\n\t/**\n\t * Called upon successful reconnect.\n\t *\n\t * @api private\n\t */\n\n\n\tManager.prototype.onreconnect = function () {\n\t  var attempt = this.backoff.attempts;\n\t  this.reconnecting = false;\n\t  this.backoff.reset();\n\t  this.updateSocketIds();\n\t  this.emitAll('reconnect', attempt);\n\t};\n\n\t(function (module, exports) {\n\t  /**\n\t   * Module dependencies.\n\t   */\n\t  var url = url_1;\n\t  var parser = socket_ioParser;\n\t  var Manager = manager;\n\t  var debug = browser$2.exports('socket.io-client');\n\t  /**\n\t   * Module exports.\n\t   */\n\n\t  module.exports = exports = lookup;\n\t  /**\n\t   * Managers cache.\n\t   */\n\n\t  var cache = exports.managers = {};\n\t  /**\n\t   * Looks up an existing `Manager` for multiplexing.\n\t   * If the user summons:\n\t   *\n\t   *   `io('http://localhost/a');`\n\t   *   `io('http://localhost/b');`\n\t   *\n\t   * We reuse the existing instance based on same scheme/port/host,\n\t   * and we initialize sockets for each namespace.\n\t   *\n\t   * @api public\n\t   */\n\n\t  function lookup(uri, opts) {\n\t    if (_typeof(uri) === 'object') {\n\t      opts = uri;\n\t      uri = undefined;\n\t    }\n\n\t    opts = opts || {};\n\t    var parsed = url(uri);\n\t    var source = parsed.source;\n\t    var id = parsed.id;\n\t    var path = parsed.path;\n\t    var sameNamespace = cache[id] && path in cache[id].nsps;\n\t    var newConnection = opts.forceNew || opts['force new connection'] || false === opts.multiplex || sameNamespace;\n\t    var io;\n\n\t    if (newConnection) {\n\t      debug('ignoring socket cache for %s', source);\n\t      io = Manager(source, opts);\n\t    } else {\n\t      if (!cache[id]) {\n\t        debug('new io instance for %s', source);\n\t        cache[id] = Manager(source, opts);\n\t      }\n\n\t      io = cache[id];\n\t    }\n\n\t    if (parsed.query && !opts.query) {\n\t      opts.query = parsed.query;\n\t    }\n\n\t    return io.socket(parsed.path, opts);\n\t  }\n\t  /**\n\t   * Protocol version.\n\t   *\n\t   * @api public\n\t   */\n\n\n\t  exports.protocol = parser.protocol;\n\t  /**\n\t   * `connect`.\n\t   *\n\t   * @param {String} uri\n\t   * @api public\n\t   */\n\n\t  exports.connect = lookup;\n\t  /**\n\t   * Expose constructors for standalone build.\n\t   *\n\t   * @api public\n\t   */\n\n\t  exports.Manager = manager;\n\t  exports.Socket = socket.exports;\n\t})(lib$1, lib$1.exports);\n\n\tvar Calibrator = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\n\t  var Calibrator =\n\t  /** @class */\n\t  function () {\n\t    function Calibrator() {}\n\n\t    Calibrator.prototype.isDef = function (v) {\n\t      return !this.isUndef(v);\n\t    };\n\n\t    Calibrator.prototype.isUndef = function (v) {\n\t      return v === undefined || v === null;\n\t    };\n\n\t    Calibrator.prototype.isPrimitive = function (value) {\n\t      return typeof value === 'string' || typeof value === 'number' || _typeof(value) === 'symbol' || typeof value === 'boolean';\n\t    };\n\n\t    Calibrator.prototype.isObject = function (obj) {\n\t      return obj !== null && _typeof(obj) === 'object';\n\t    };\n\n\t    Calibrator.prototype.isPlainObject = function (obj) {\n\t      return Object.prototype.toString.call(obj) === '[object Object]';\n\t    };\n\n\t    Calibrator.prototype.isRegExp = function (v) {\n\t      return Object.prototype.toString.call(v) === '[object RegExp]';\n\t    };\n\n\t    Calibrator.prototype.isValidArrayIndex = function (val) {\n\t      var n = parseFloat(String(val));\n\t      return n >= 0 && Math.floor(n) === n && isFinite(val);\n\t    };\n\n\t    Calibrator.prototype.isString = function (v) {\n\t      return typeof v === 'string';\n\t    };\n\n\t    Calibrator.prototype.isNumber = function (v) {\n\t      return typeof v === 'number';\n\t    };\n\n\t    Calibrator.prototype.isStringOrNumber = function (v) {\n\t      return this.isString(v) || this.isNumber(v);\n\t    };\n\n\t    Calibrator.prototype.isArray = function (v) {\n\t      return Object.prototype.toString.call(v) === \"[object Array]\";\n\t    };\n\n\t    Calibrator.prototype.isEmpty = function (v) {\n\t      if (this.isArray(v)) {\n\t        return v.length === 0;\n\t      }\n\n\t      if (this.isObject(v)) {\n\t        return !this.isDef(v);\n\t      }\n\n\t      if (this.isNumber(v)) {\n\t        return false;\n\t      }\n\n\t      if (this.isString(v)) {\n\t        return v.trim() === '';\n\t      }\n\n\t      return !this.isDef(v);\n\t    };\n\n\t    Calibrator.prototype.isNative = function (Ctor) {\n\t      return typeof Ctor === 'function' && /native code/.test(Ctor.toString());\n\t    };\n\n\t    Calibrator.prototype.isFunction = function (fn) {\n\t      return typeof fn === 'function';\n\t    };\n\n\t    Calibrator.prototype.isBoolean = function (v) {\n\t      return typeof v === 'boolean';\n\t    };\n\n\t    Calibrator.prototype.isTrue = function (v) {\n\t      return v === true;\n\t    };\n\n\t    Calibrator.prototype.isFalse = function (v) {\n\t      return v === false;\n\t    };\n\n\t    return Calibrator;\n\t  }();\n\n\t  var calibrator = new Calibrator();\n\t  exports[\"default\"] = calibrator;\n\t})(Calibrator);\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var NetworkStatus_1 = NetworkStatus;\n\t  var Permission_1 = Permission;\n\t  var Emitter_1 = Emitter$6;\n\t  var io = lib$1.exports;\n\t  var Calibrator_1 = Calibrator;\n\n\t  var AbstractSocket =\n\t  /** @class */\n\t  function () {\n\t    function AbstractSocket() {\n\t      this.io = io;\n\t      this.status = NetworkStatus_1.NetworkStatus.DISCONNECTED;\n\t      this.permissions = [Permission_1.Permission.NONE];\n\t      this.connectedObservers = []; // todo: callback?\n\n\t      this.disconnectedObservers = [];\n\t      this.emitter = new Emitter_1.Emitter(this);\n\t    }\n\n\t    AbstractSocket.prototype.connect = function () {\n\t      this.status = NetworkStatus_1.NetworkStatus.CONNECTING;\n\t    };\n\n\t    AbstractSocket.prototype.emit = function (rocket) {\n\t      this.emitter.emit(rocket);\n\t    };\n\n\t    AbstractSocket.prototype.doEmit = function (name, params, ack) {};\n\n\t    AbstractSocket.prototype.on = function (name, listener) {\n\t      this.io.on(name, listener);\n\t    };\n\n\t    AbstractSocket.prototype.disconnect = function () {\n\t      this.io.disconnect();\n\t    };\n\n\t    AbstractSocket.prototype.getStatus = function () {\n\t      return this.status;\n\t    };\n\n\t    AbstractSocket.prototype.addConnectedObserver = function (callback) {\n\t      if (!Calibrator_1[\"default\"].isFunction(callback)) return;\n\t      this.connectedObservers.push(callback);\n\t    };\n\n\t    AbstractSocket.prototype.addDisconnectedObserver = function (callback) {\n\t      if (!Calibrator_1[\"default\"].isFunction(callback)) return;\n\t      this.disconnectedObservers.push(callback);\n\t    };\n\n\t    AbstractSocket.prototype.notify = function (list, response) {\n\t      for (var i = 0; i < list.length; i++) {\n\t        list[i](response);\n\t      }\n\t    };\n\n\t    return AbstractSocket;\n\t  }();\n\n\t  exports[\"default\"] = AbstractSocket;\n\t})(AbstractSocket);\n\n\tvar IOSocket = {};\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var AbstractSocket_1 = AbstractSocket;\n\t  var NetworkStatus_1 = NetworkStatus;\n\n\t  var IOSocket =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(IOSocket, _super);\n\n\t    function IOSocket(options) {\n\t      var _this = _super.call(this) || this;\n\n\t      _this.reconnectingObservers = [];\n\n\t      _this.addReconnectingObserver(options.onReconnecting);\n\n\t      _this.addDisconnectedObserver(options.onDisconnected);\n\n\t      return _this;\n\t    }\n\n\t    IOSocket.prototype.connect = function (options) {\n\t      _super.prototype.connect.call(this); //连接\n\n\n\t      this.io = this.io.connect(options.uri, options.opts);\n\t      this.initListener();\n\t    };\n\n\t    IOSocket.prototype.doEmit = function (name, params, ack) {\n\t      this.io.emit(name, params, ack);\n\t    };\n\n\t    IOSocket.prototype.initListener = function () {\n\t      var _this = this; //监听重连\n\n\n\t      this.io.on('reconnecting', function (ack) {\n\t        _this.status = NetworkStatus_1.NetworkStatus.CONNECTING;\n\n\t        _this.notify(_this.reconnectingObservers, ack);\n\t      }); //连接成功\n\n\t      this.io.on('connect', function () {\n\t        _this.status = NetworkStatus_1.NetworkStatus.CONNECTED;\n\n\t        _this.notify(_this.connectedObservers);\n\t      }); //断连\n\n\t      this.io.on('disconnect', function () {\n\t        _this.status = NetworkStatus_1.NetworkStatus.DISCONNECTED;\n\n\t        _this.notify(_this.disconnectedObservers);\n\t      }); //连接错误\n\n\t      this.io.on('connect_error', function (ack) {// todo: 暂时不用，因为这个错误，貌似在重连中也会出现，会影响使用\n\t        // this.status = NetworkStatus.CONNECT_FAILED;\n\t        // console.log(ack)\n\t        //保留\n\t      });\n\t    };\n\n\t    IOSocket.prototype.addReconnectingObserver = function (event) {\n\t      this.reconnectingObservers.push(event);\n\t    };\n\n\t    return IOSocket;\n\t  }(AbstractSocket_1[\"default\"]);\n\n\t  exports[\"default\"] = IOSocket;\n\t})(IOSocket);\n\n\tvar Rocket = {};\n\n\tvar UUID = {};\n\n\tvar rngBrowser = {exports: {}};\n\n\t// browser this is a little complicated due to unknown quality of Math.random()\n\t// and inconsistent support for the `crypto` API.  We do the best we can via\n\t// feature-detection\n\t// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n\t// implementation. Also, find the complete implementation of crypto on IE11.\n\n\tvar getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n\tif (getRandomValues) {\n\t  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n\t  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n\t  rngBrowser.exports = function whatwgRNG() {\n\t    getRandomValues(rnds8);\n\t    return rnds8;\n\t  };\n\t} else {\n\t  // Math.random()-based (RNG)\n\t  //\n\t  // If all else fails, use Math.random().  It's fast, but is of unspecified\n\t  // quality.\n\t  var rnds = new Array(16);\n\n\t  rngBrowser.exports = function mathRNG() {\n\t    for (var i = 0, r; i < 16; i++) {\n\t      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n\t      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n\t    }\n\n\t    return rnds;\n\t  };\n\t}\n\n\t/**\n\t * Convert array of 16 byte values to UUID string format of the form:\n\t * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n\t */\n\tvar byteToHex = [];\n\n\tfor (var i = 0; i < 256; ++i) {\n\t  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n\t}\n\n\tfunction bytesToUuid$2(buf, offset) {\n\t  var i = offset || 0;\n\t  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n\t  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n\t}\n\n\tvar bytesToUuid_1 = bytesToUuid$2;\n\n\tvar rng$1 = rngBrowser.exports;\n\tvar bytesToUuid$1 = bytesToUuid_1; // **`v1()` - Generate time-based UUID**\n\t//\n\t// Inspired by https://github.com/LiosK/UUID.js\n\t// and http://docs.python.org/library/uuid.html\n\n\tvar _nodeId;\n\n\tvar _clockseq; // Previous uuid creation time\n\n\n\tvar _lastMSecs = 0;\n\tvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\n\tfunction v1$1(options, buf, offset) {\n\t  var i = buf && offset || 0;\n\t  var b = buf || [];\n\t  options = options || {};\n\t  var node = options.node || _nodeId;\n\t  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n\t  // specified.  We do this lazily to minimize issues related to insufficient\n\t  // system entropy.  See #189\n\n\t  if (node == null || clockseq == null) {\n\t    var seedBytes = rng$1();\n\n\t    if (node == null) {\n\t      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n\t      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n\t    }\n\n\t    if (clockseq == null) {\n\t      // Per 4.2.2, randomize (14 bit) clockseq\n\t      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n\t    }\n\t  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n\t  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n\t  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n\t  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n\t  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n\t  // cycle to simulate higher resolution clock\n\n\t  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n\t  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n\t  if (dt < 0 && options.clockseq === undefined) {\n\t    clockseq = clockseq + 1 & 0x3fff;\n\t  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n\t  // time interval\n\n\n\t  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n\t    nsecs = 0;\n\t  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n\t  if (nsecs >= 10000) {\n\t    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n\t  }\n\n\t  _lastMSecs = msecs;\n\t  _lastNSecs = nsecs;\n\t  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n\t  msecs += 12219292800000; // `time_low`\n\n\t  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n\t  b[i++] = tl >>> 24 & 0xff;\n\t  b[i++] = tl >>> 16 & 0xff;\n\t  b[i++] = tl >>> 8 & 0xff;\n\t  b[i++] = tl & 0xff; // `time_mid`\n\n\t  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n\t  b[i++] = tmh >>> 8 & 0xff;\n\t  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n\t  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n\t  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n\t  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n\t  b[i++] = clockseq & 0xff; // `node`\n\n\t  for (var n = 0; n < 6; ++n) {\n\t    b[i + n] = node[n];\n\t  }\n\n\t  return buf ? buf : bytesToUuid$1(b);\n\t}\n\n\tvar v1_1 = v1$1;\n\n\tvar rng = rngBrowser.exports;\n\tvar bytesToUuid = bytesToUuid_1;\n\n\tfunction v4$1(options, buf, offset) {\n\t  var i = buf && offset || 0;\n\n\t  if (typeof options == 'string') {\n\t    buf = options === 'binary' ? new Array(16) : null;\n\t    options = null;\n\t  }\n\n\t  options = options || {};\n\t  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n\t  rnds[6] = rnds[6] & 0x0f | 0x40;\n\t  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n\t  if (buf) {\n\t    for (var ii = 0; ii < 16; ++ii) {\n\t      buf[i + ii] = rnds[ii];\n\t    }\n\t  }\n\n\t  return buf || bytesToUuid(rnds);\n\t}\n\n\tvar v4_1 = v4$1;\n\n\tvar v1 = v1_1;\n\tvar v4 = v4_1;\n\tvar uuid = v4;\n\tuuid.v1 = v1;\n\tuuid.v4 = v4;\n\tvar uuid_1 = uuid;\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var uuid = uuid_1;\n\n\t  var UUID =\n\t  /** @class */\n\t  function () {\n\t    function UUID() {}\n\n\t    UUID.get = function () {\n\t      var guid = uuid.v1();\n\t      return guid.replace(/-/g, \"\");\n\t    };\n\n\t    return UUID;\n\t  }();\n\n\t  exports[\"default\"] = UUID;\n\t})(UUID);\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var UUID_1 = UUID;\n\t  var Permission_1 = Permission;\n\n\t  var Rocket =\n\t  /** @class */\n\t  function () {\n\t    function Rocket(options) {\n\t      var _this = this;\n\n\t      this.permission = Permission_1.Permission.NONE;\n\t      this.singleTimeout = 0;\n\t      this.totalTimeout = 0;\n\t      this.startTime = 0;\n\t      this.complete = false;\n\t      this.retried = 0;\n\t      this.unique = false;\n\t      this.uuid = UUID_1[\"default\"].get();\n\t      this.name = options.name;\n\t      this.params = options.params;\n\t      this.permission = options.permission;\n\t      this.totalTimeout = options.totalTimeout;\n\t      this.singleTimeout = options.singleTimeout;\n\n\t      if (options.unique) {\n\t        this.unique = options.unique;\n\t      }\n\n\t      this.success = function (ack) {\n\t        if (!_this.complete) {\n\t          _this.complete = true;\n\t          options.success(ack);\n\t        }\n\t      };\n\n\t      this.fail = function (ack) {\n\t        if (!_this.complete) {\n\t          _this.complete = true;\n\t          options.fail(ack);\n\t        }\n\t      };\n\t    }\n\n\t    Rocket.prototype.start = function () {\n\t      this.startTime = Date.now();\n\t    };\n\n\t    Rocket.prototype.isTimeout = function () {\n\t      var expiredTime = this.startTime + this.totalTimeout;\n\t      return expiredTime < Date.now();\n\t    };\n\n\t    return Rocket;\n\t  }();\n\n\t  exports[\"default\"] = Rocket;\n\t})(Rocket);\n\n\tvar MessageObserver$1 = {};\n\n\tvar noop = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\n\t  function noop() {\n\t    var params = [];\n\n\t    for (var _i = 0; _i < arguments.length; _i++) {\n\t      params[_i] = arguments[_i];\n\t    }\n\t  }\n\n\t  exports[\"default\"] = noop;\n\t})(noop);\n\n\tMessageObserver$1.__esModule = true;\n\tMessageObserver$1.MessageObserver = void 0;\n\tvar noop_1$4 = noop;\n\n\tvar MessageObserver =\n\t/** @class */\n\tfunction () {\n\t  function MessageObserver(callback) {\n\t    this.callback = noop_1$4[\"default\"];\n\t    this.guidList = [];\n\t    this.callback = callback;\n\t  }\n\n\t  MessageObserver.prototype.onMessage = function (key, message) {\n\t    if (typeof message == \"string\") {\n\t      message = JSON.parse(message);\n\t    }\n\n\t    if (message.i) {\n\t      var index = this.guidList.findIndex(function (item) {\n\t        return item === message.i;\n\t      });\n\n\t      if (index > -1) {\n\t        return;\n\t      }\n\n\t      this.guidList.unshift(message.i);\n\n\t      if (this.guidList.length > 300) {\n\t        this.guidList.pop();\n\t      }\n\t    }\n\n\t    this.callback(message);\n\t  };\n\n\t  return MessageObserver;\n\t}();\n\n\tMessageObserver$1.MessageObserver = MessageObserver;\n\n\tvar SocketTimeout = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  exports.SocketTimeout = void 0;\n\n\t  (function (SocketTimeout) {\n\t    SocketTimeout[SocketTimeout[\"connect\"] = 1500] = \"connect\";\n\t    SocketTimeout[SocketTimeout[\"reconnectionDelayMax\"] = 3000] = \"reconnectionDelayMax\";\n\t    SocketTimeout[SocketTimeout[\"commonQuerySingle\"] = 2500] = \"commonQuerySingle\";\n\t    SocketTimeout[SocketTimeout[\"commonQueryTotal\"] = 12000] = \"commonQueryTotal\";\n\t    SocketTimeout[SocketTimeout[\"commonRequestSingle\"] = 1700] = \"commonRequestSingle\";\n\t    SocketTimeout[SocketTimeout[\"commonRequestTotal\"] = 12000] = \"commonRequestTotal\";\n\t    SocketTimeout[SocketTimeout[\"commonInfiniteSingle\"] = 1700] = \"commonInfiniteSingle\";\n\t    SocketTimeout[SocketTimeout[\"commonInfiniteTotal\"] = 86400000] = \"commonInfiniteTotal\";\n\t  })(exports.SocketTimeout || (exports.SocketTimeout = {}));\n\t})(SocketTimeout);\n\n\tvar anonymousUserIdRepository = {};\n\n\tanonymousUserIdRepository.__esModule = true;\n\tanonymousUserIdRepository.AnonymousUserIdRepository = void 0;\n\tvar Calibrator_1$i = Calibrator;\n\tvar local_storage_dispatcher_1 = localStorageDispatcher;\n\n\tvar AnonymousUserIdRepository =\n\t/** @class */\n\tfunction () {\n\t  function AnonymousUserIdRepository() {}\n\n\t  AnonymousUserIdRepository.get = function () {\n\t    var storage = AnonymousUserIdRepository.storage;\n\n\t    if (storage !== null) {\n\t      var userId = storage.get(AnonymousUserIdRepository.ANONYMOUS_USER_ID_KEY);\n\n\t      if (!Calibrator_1$i[\"default\"].isEmpty(userId)) {\n\t        return userId.toString();\n\t      }\n\t    }\n\n\t    return null;\n\t  };\n\n\t  AnonymousUserIdRepository.put = function (userId) {\n\t    var storage = AnonymousUserIdRepository.storage;\n\n\t    if (storage !== null) {\n\t      storage.put(AnonymousUserIdRepository.ANONYMOUS_USER_ID_KEY, userId.toString());\n\t    }\n\t  };\n\n\t  AnonymousUserIdRepository.storage = local_storage_dispatcher_1.LocalStorageDispatcher.localStorage();\n\t  AnonymousUserIdRepository.ANONYMOUS_USER_ID_KEY = \"goeasy-anonymous-user-id\";\n\t  return AnonymousUserIdRepository;\n\t}();\n\n\tanonymousUserIdRepository.AnonymousUserIdRepository = AnonymousUserIdRepository;\n\n\tvar ClientInfo$1 = {};\n\n\tClientInfo$1.__esModule = true;\n\tClientInfo$1.clientInfo = void 0;\n\tvar platform_detector_1$1 = platformDetector;\n\tvar framework_detector_1$3 = frameworkDetector;\n\n\tvar ClientInfo =\n\t/** @class */\n\tfunction () {\n\t  function ClientInfo() {\n\t    this.platform = platform_detector_1$1.PlatformDetector.currentPlatform();\n\t    this.framework = framework_detector_1$3.FrameworkDetector.currentFramework();\n\t    this.z = this.toZ();\n\t  }\n\n\t  ClientInfo.prototype.toZ = function () {\n\t    var thisAsString = JSON.stringify({\n\t      platform: this.platform,\n\t      framework: this.framework\n\t    });\n\t    var z = \"\";\n\n\t    for (var i = 0; i < thisAsString.length; i++) {\n\t      var _char = thisAsString.charCodeAt(i);\n\n\t      z = z + String.fromCharCode(_char + 5);\n\t    }\n\n\t    return z;\n\t  };\n\n\t  return ClientInfo;\n\t}();\n\n\tvar clientInfo = new ClientInfo();\n\tClientInfo$1.clientInfo = clientInfo;\n\n\tvar RocketTypes = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  exports.RocketTypes = void 0;\n\n\t  (function (RocketTypes) {\n\t    RocketTypes[\"authorize\"] = \"authorize\";\n\t    RocketTypes[\"manualDisconnect\"] = \"manualDisconnect\"; // pubsub\n\n\t    RocketTypes[\"subscribe\"] = \"subscribe\";\n\t    RocketTypes[\"unsubscribe\"] = \"unsubscribe\";\n\t    RocketTypes[\"publish\"] = \"publish\";\n\t    RocketTypes[\"ack\"] = \"ack\";\n\t    RocketTypes[\"historyMessages\"] = \"historyMessages\";\n\t    RocketTypes[\"hereNow\"] = \"hereNow\";\n\t    RocketTypes[\"hereNowByUserIds\"] = \"hereNowByUserIds\"; //im\n\n\t    RocketTypes[\"imLastConversations\"] = \"imLastConversations\";\n\t    RocketTypes[\"markPrivateMessageAsRead\"] = \"markPrivateMessageAsRead\";\n\t    RocketTypes[\"markGroupMessageAsRead\"] = \"markGroupMessageAsRead\";\n\t    RocketTypes[\"imGroupOnlineCount\"] = \"imGroupOnlineCount\";\n\t    RocketTypes[\"imHereNow\"] = \"imHereNow\";\n\t    RocketTypes[\"imGroupHereNow\"] = \"imGroupHereNow\";\n\t    RocketTypes[\"publishIM\"] = \"publishIM\";\n\t    RocketTypes[\"subscribeUserPresence\"] = \"subscribeUserPresence\";\n\t    RocketTypes[\"unsubscribeUserPresence\"] = \"unsubscribeUserPresence\";\n\t    RocketTypes[\"subscribeGroupPresence\"] = \"subscribeGroupPresence\";\n\t    RocketTypes[\"unsubscribeGroupPresence\"] = \"unsubscribeGroupPresence\";\n\t    RocketTypes[\"removeConversation\"] = \"removeConversation\";\n\t    RocketTypes[\"topConversation\"] = \"topConversation\";\n\t    RocketTypes[\"imData\"] = \"imData\";\n\t    RocketTypes[\"subscribeGroups\"] = \"subscribeGroups\";\n\t    RocketTypes[\"unsubscribeGroup\"] = \"unsubscribeGroup\";\n\t    RocketTypes[\"IM_DELETE_MESSAGE\"] = \"IM_DELETE_MESSAGE\";\n\t    RocketTypes[\"IM_HISTORY\"] = \"IM_HISTORY\";\n\t    RocketTypes[\"IM_HISTORY_CHANGE\"] = \"IM_HISTORY_CHANGE\";\n\t    RocketTypes[\"IM_RECALL_MESSAGE\"] = \"IM_RECALL_MESSAGE\";\n\t    RocketTypes[\"IM_MARK_AS_READ\"] = \"IM_MARK_AS_READ\";\n\t    RocketTypes[\"RTC_ASK_NEW_TOKEN\"] = \"RTC_ASK_NEW_TOKEN\";\n\t    RocketTypes[\"RTC_DIAL\"] = \"RTC_DIAL\";\n\t    RocketTypes[\"RTC_ACCEPT\"] = \"RTC_ACCEPT\";\n\t    RocketTypes[\"RTC_ACCEPT_FAILED\"] = \"RTC_ACCEPT_FAILED\";\n\t    RocketTypes[\"RTC_MANUAL_END\"] = \"RTC_MANUAL_END\";\n\t    RocketTypes[\"RTC_CLIENT_BUSY\"] = \"RTC_CLIENT_BUSY\";\n\t    RocketTypes[\"RTC_TIMEOUT\"] = \"RTC_TIMEOUT\";\n\t    RocketTypes[\"RTC_CALL_DATA\"] = \"RTC_CALL_DATA\";\n\t    RocketTypes[\"CS_PENDING_CONVERSATION\"] = \"CS_PENDING_CONVERSATION\";\n\t    RocketTypes[\"CS_ACCEPT\"] = \"CS_ACCEPT\";\n\t    RocketTypes[\"CS_END\"] = \"CS_END\";\n\t    RocketTypes[\"CS_TRANSFER\"] = \"CS_TRANSFER\";\n\t    RocketTypes[\"CS_AGENTS\"] = \"CS_AGENTS\";\n\t    RocketTypes[\"CS_CUSTOMER_STATUS\"] = \"CS_CUSTOMER_STATUS\";\n\t    RocketTypes[\"CS_MY_TEAMS\"] = \"CS_MY_TEAMS\";\n\t    RocketTypes[\"CS_ONLINE\"] = \"CS_ONLINE\";\n\t    RocketTypes[\"CS_OFFLINE\"] = \"CS_OFFLINE\";\n\t    RocketTypes[\"CS_LIVE_SESSION\"] = \"CS_LIVE_SESSION\";\n\t    RocketTypes[\"CS_QUIT_LIVE\"] = \"CS_QUIT_LIVE\";\n\t  })(exports.RocketTypes || (exports.RocketTypes = {}));\n\t})(RocketTypes);\n\n\tvar GNS$1 = {};\n\n\tGNS$1.__esModule = true;\n\tGNS$1.GNS = void 0;\n\tvar Calibrator_1$h = Calibrator;\n\tvar framework_detector_1$2 = frameworkDetector;\n\tvar platform_detector_1 = platformDetector;\n\tvar UniApp_1 = UniApp$1; // TODO:\n\t// 2. 各个事件类型是否应该集中生命诚常量或枚举？  DONE\n\t//      TS化后老类没有删？会不会增加打包后的体积？\n\t//      TS化后, goeasy.ts和Im.js有两个外层代码\n\t// 1  增加日志分级机制\n\t// 8. 如果客户也写了plus监听，会不会冲突\n\n\tvar GNS =\n\t/** @class */\n\tfunction () {\n\t  function GNS(allowNotification) {\n\t    this.uniappPlugin = null;\n\t    this.regIdPromise = null;\n\t    this.onClickNotificationCallback = null;\n\t    this.payloadAssemblers = new Array();\n\t    this.allowNotification = allowNotification;\n\n\t    if (this.supportNotification()) {\n\t      this.uniappPlugin = uni.requireNativePlugin('GoEasy-Uniapp');\n\n\t      if (this.uniappPlugin) {\n\t        this.regIdPromise = this.askRegId();\n\t      } else {\n\t        //没有安装原生插件，plus的notification的click和create也可以让用户体验到手机notification\n\t        console.warn('No GoEasy-Uniapp Native Plugin.');\n\t      }\n\t    }\n\t  }\n\n\t  GNS.init = function (allow) {\n\t    this.instance = new GNS(allow);\n\t  };\n\n\t  GNS.prototype.addAssembler = function (assembler) {\n\t    this.payloadAssemblers.push(assembler);\n\t  };\n\n\t  GNS.prototype.assemblePayload = function (payload) {\n\t    var assembler = this.payloadAssemblers.find(function (assembler) {\n\t      return assembler.support(payload);\n\t    });\n\t    return assembler ? assembler.assemble(payload) : payload;\n\t  };\n\n\t  GNS.prototype.createLocalNotification = function (title, body, data) {\n\t    if (!UniApp_1.uniApp.runningBackend()) {\n\t      return;\n\t    }\n\n\t    data.g = 1;\n\n\t    if (typeof plus !== 'undefined') {\n\t      plus.push.createMessage(body, JSON.stringify(data), {\n\t        title: title\n\t      });\n\t    }\n\t  };\n\n\t  GNS.prototype.askRegId = function () {\n\t    var _this = this;\n\n\t    var timerId = null;\n\t    var repeatCount = 0;\n\n\t    var askRegIdPromise = function askRegIdPromise() {\n\t      return new Promise(function (resolve, reject) {\n\t        _this.uniappPlugin.regId(function (result) {\n\t          console.log('askRegId - ', result);\n\t          resolve(result);\n\t        }, function (e) {\n\t          /***\n\t           * 如果是魅族或苹果的网络不好，不会返回这里，不需要，也没有重试的机会\n\t           *来到这里，只有两种情况：\n\t           * 1. 网络问题超时(1000000)，3.5秒后再尝试， 失败5次后，放弃厂商推送，直接连接GoEasy\n\t           * 2. 网络问题以外的其他问题，这些情况，没必要重试，放弃厂商，直接连接GoEasy\n\t           */\n\t          console.log('askRegId error - ', e);\n\n\t          if (e.data.code === 1000000 && repeatCount <= 10) {\n\t            // clearTimeout(timerId); todo是不是不必要？\n\t            timerId = setTimeout(function () {\n\t              repeatCount++;\n\t              console.log('setTimeout askRegId - ', timerId);\n\t              _this.regIdPromise = askRegIdPromise();\n\t            }, 3500);\n\t          } else {\n\t            //不是网络问题，才会停止尝试\n\t            console.log('regId reject - ', e);\n\t            clearTimeout(timerId);\n\t            return reject(e);\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    var regIdPromise = askRegIdPromise();\n\t    return regIdPromise;\n\t  };\n\n\t  GNS.prototype.getRegIdPromise = function () {\n\t    return this.regIdPromise;\n\t  };\n\n\t  GNS.prototype.supportNotification = function () {\n\t    var platform = platform_detector_1.PlatformDetector.currentPlatform();\n\t    var framework = framework_detector_1$2.FrameworkDetector.currentFramework();\n\t    return this.allowNotification && framework === framework_detector_1$2.Framework.UNIAPP && (platform === platform_detector_1.Platform.APP_ANDROID || platform === platform_detector_1.Platform.APP_IOS);\n\t  };\n\n\t  GNS.prototype.listenPlusClickNotification = function () {\n\t    var _this = this;\n\n\t    console.log('push.addEventListener click');\n\t    plus.push.addEventListener('click', function (message) {\n\t      if (!message || !_this.availableIntent(message.payload)) {\n\t        return;\n\t      }\n\n\t      try {\n\t        var content = typeof message.payload === 'string' ? JSON.parse(message.payload) : message.payload;\n\n\t        var payload = _this.assemblePayload(content);\n\n\t        console.log('push parsedMessage - ', payload);\n\t        plus.push.clear();\n\n\t        _this.onClickNotificationCallback(payload);\n\t      } catch (e) {\n\t        console.log('JSON parse error.', e);\n\t      }\n\t    });\n\t  };\n\n\t  GNS.prototype.availableIntent = function (intent) {\n\t    return intent && Object.keys(intent).length && intent.g && parseInt(intent.g) === 1;\n\t  };\n\t  /**\n\t   * @description * 只在死进程首次被点击notification时使用，ios和android均需要\n\t   */\n\n\n\t  GNS.prototype.getIntentData = function () {\n\t    var _this = this;\n\n\t    this.uniappPlugin.getIntentData(function (intentData) {\n\t      console.log('getIntentData - ', intentData);\n\n\t      if (!_this.availableIntent(intentData)) {\n\t        return;\n\t      }\n\n\t      var payload = _this.assemblePayload(intentData);\n\n\t      var platform = platform_detector_1.PlatformDetector.currentPlatform();\n\t      plus.push.clear();\n\n\t      if (platform === platform_detector_1.Platform.APP_ANDROID) {\n\t        _this.uniappPlugin.clearAll();\n\t      }\n\n\t      _this.onClickNotificationCallback(payload);\n\t    });\n\t  };\n\n\t  GNS.prototype.listenClick = function () {\n\t    this.listenPlusClickNotification();\n\t    var platform = platform_detector_1.PlatformDetector.currentPlatform();\n\n\t    if (this.uniappPlugin && platform === platform_detector_1.Platform.APP_ANDROID) {\n\t      this.getIntentData();\n\t    }\n\t  };\n\t  /**\n\t   * @description TODO: 注册多次，可能会导致多次触发\n\t   * @param clickHandler\n\t   */\n\n\n\t  GNS.prototype.onClickNotification = function (clickHandler) {\n\t    if (!this.supportNotification()) {\n\t      console.warn('The current environment doesn\\'t support or allowNotification is false.');\n\t      return;\n\t    }\n\n\t    if (!Calibrator_1$h[\"default\"].isFunction(clickHandler)) {\n\t      throw new Error('The arguments must be a function.');\n\t    }\n\n\t    if (this.onClickNotificationCallback !== null) {\n\t      console.warn('The onClickNotification event has been listened on. Please do not listen to it more than once.');\n\t      return;\n\t    } //只能监听一次，第一次为准\n\n\n\t    this.onClickNotificationCallback = clickHandler;\n\t    this.listenClick();\n\t  };\n\n\t  return GNS;\n\t}();\n\n\tGNS$1.GNS = GNS;\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var AbstractSocket_1 = AbstractSocket;\n\t  var IOSocket_1 = IOSocket;\n\t  var Rocket_1 = Rocket;\n\t  var Permission_1 = Permission;\n\t  var NetworkStatus_1 = NetworkStatus;\n\t  var MessageObserver_1 = MessageObserver$1;\n\t  var noop_1 = noop;\n\t  var Calibrator_1 = Calibrator;\n\t  var GoEasyDomainNumber_1 = GoEasyDomainNumber$2;\n\t  var SocketTimeout_1 = SocketTimeout;\n\t  var GoEasy_1 = GoEasy$1;\n\t  var platform_detector_1 = platformDetector;\n\t  var anonymous_user_id_repository_1 = anonymousUserIdRepository;\n\t  var ClientInfo_1 = ClientInfo$1;\n\t  var RocketTypes_1 = RocketTypes;\n\t  var GNS_1 = GNS$1;\n\n\t  var GoEasySocket =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(GoEasySocket, _super);\n\n\t    function GoEasySocket(goEasyOptions, connectOptions) {\n\t      var _this = _super.call(this) || this;\n\n\t      _this.ioSocket = null; //连接参数\n\n\t      _this.sid = null;\n\t      _this.appKey = null;\n\t      _this.anonymous = false;\n\t      _this.userId = null;\n\t      _this.userData = null;\n\t      _this.otp = null;\n\t      _this.artifactVersion = '0.0.0';\n\t      _this.uri = null;\n\t      _this.ioOpts = null;\n\t      _this.allowNotification = false; //业务数据\n\n\t      _this.reconnectingTimes = 0; //观察者\n\n\t      _this.messageObservers = {};\n\t      _this.connectFailedObservers = [];\n\t      _this.connectingObservers = [];\n\t      _this.expiredReconnectedObservers = [];\n\t      _this.onConnectSuccess = noop_1[\"default\"];\n\t      _this.onConnectFailed = noop_1[\"default\"];\n\t      _this.onConnectProgress = noop_1[\"default\"];\n\n\t      _this.setUriAndOpts(goEasyOptions);\n\n\t      _this.extendOptions(connectOptions); //初始化ioSocket 添加监听器\n\n\n\t      _this.ioSocket = new IOSocket_1[\"default\"]({\n\t        onDisconnected: _this.onIoDisconnected.bind(_this),\n\t        onReconnecting: _this.onIoReconnecting.bind(_this)\n\t      });\n\n\t      _this.ioSocket.addConnectedObserver(_this.onIoReconnected.bind(_this)); //初始化连接参数\n\n\n\t      _this.appKey = goEasyOptions.appkey;\n\t      _this.allowNotification = goEasyOptions.allowNotification;\n\t      _this.modules = goEasyOptions.modules;\n\n\t      if (Calibrator_1[\"default\"].isEmpty(connectOptions.id)) {\n\t        _this.anonymous = true;\n\t        _this.userId = anonymous_user_id_repository_1.AnonymousUserIdRepository.get();\n\t      } else {\n\t        _this.userId = connectOptions.id.toString();\n\t      }\n\n\t      _this.artifactVersion = GoEasy_1[\"default\"].version; //注册监听器\n\n\t      _this.addConnectedObserver(_this.onConnectSuccess);\n\n\t      _this.addConnectFailedObserver(_this.onConnectFailed);\n\n\t      _this.addConnectingObserver(_this.onConnectProgress);\n\n\t      return _this;\n\t    }\n\n\t    GoEasySocket.prototype.extendOptions = function (options) {\n\t      if (Calibrator_1[\"default\"].isFunction(options.onSuccess)) {\n\t        this.onConnectSuccess = options.onSuccess;\n\t      }\n\n\t      if (Calibrator_1[\"default\"].isFunction(options.onFailed)) {\n\t        this.onConnectFailed = options.onFailed;\n\t      }\n\n\t      if (Calibrator_1[\"default\"].isFunction(options.onProgress)) {\n\t        this.onConnectProgress = options.onProgress;\n\t      }\n\n\t      if (Calibrator_1[\"default\"].isDef(options.data) && !Calibrator_1[\"default\"].isObject(options.data)) {\n\t        throw {\n\t          code: 400,\n\t          content: 'TypeError: data requires an object.'\n\t        };\n\t      }\n\n\t      var len = Calibrator_1[\"default\"].isDef(options.data) ? String(options.data).length : 0;\n\n\t      if (len > 300) {\n\t        if (Calibrator_1[\"default\"].isObject(options) && Calibrator_1[\"default\"].isFunction(options.onFailed)) {\n\t          throw {\n\t            code: 400,\n\t            content: 'user.data-length limit 300 byte.'\n\t          };\n\t        }\n\t      } else {\n\t        this.userData = options.data;\n\t      }\n\n\t      if (Calibrator_1[\"default\"].isObject(options.wxmpId)) {\n\t        if (Calibrator_1[\"default\"].isEmpty(options.wxmpId.appid)) {\n\t          throw {\n\t            code: 400,\n\t            content: 'wxmpId.appid is required.'\n\t          };\n\t        }\n\n\t        if (Calibrator_1[\"default\"].isEmpty(options.wxmpId.openid)) {\n\t          throw {\n\t            code: 400,\n\t            content: 'wxmpId.openid is required. requires string.'\n\t          };\n\t        }\n\t      } else if (Calibrator_1[\"default\"].isPrimitive(options.wxmpId)) {\n\t        throw {\n\t          code: 400,\n\t          content: 'TypeError: wxmpId requires an object.'\n\t        };\n\t      }\n\n\t      if (Calibrator_1[\"default\"].isDef(options.wxmpId)) {\n\t        this.wxmpId = options.wxmpId;\n\t      }\n\n\t      this.otp = options.otp || null;\n\t    };\n\n\t    GoEasySocket.prototype.setUriAndOpts = function (options) {\n\t      var supportTLS = true;\n\n\t      if (platform_detector_1.PlatformDetector.currentPlatform() === platform_detector_1.Platform.BROWSER) {\n\t        var host = '://' + GoEasyDomainNumber_1.goEasyDomainNumber.refreshNumber() + options.host;\n\t        var transports = void 0;\n\n\t        if (options.supportOldBrowser === true) {\n\t          transports = ['polling', 'websocket'];\n\t          supportTLS = false;\n\t        } else {\n\t          transports = ['websocket'];\n\t        }\n\n\t        if (options.forceTLS === false || !supportTLS) {\n\t          this.uri = 'http' + host + ':80';\n\t        } else {\n\t          this.uri = 'https' + host + ':443';\n\t        }\n\n\t        this.ioOpts = {\n\t          transports: transports,\n\t          timeout: SocketTimeout_1.SocketTimeout.connect\n\t        };\n\t      } else {\n\t        this.uri = 'https://wx-' + options.host + ':443';\n\t        this.ioOpts = {\n\t          transports: ['websocket'],\n\t          reconnectionDelayMax: SocketTimeout_1.SocketTimeout.reconnectionDelayMax\n\t        };\n\t      }\n\t    };\n\n\t    GoEasySocket.prototype.onIoReconnected = function () {\n\t      if (this.status === NetworkStatus_1.NetworkStatus.RECONNECTING) {\n\t        this.authorize();\n\t      }\n\t    };\n\n\t    GoEasySocket.prototype.emit = function (rocket) {\n\t      _super.prototype.emit.call(this, rocket);\n\t    };\n\n\t    GoEasySocket.prototype.doEmit = function (name, params, ack) {\n\t      params.sid = this.sid;\n\t      this.ioSocket.doEmit(name, params, ack);\n\t    };\n\n\t    GoEasySocket.prototype.sendAck = function (name, data) {\n\t      this.ioSocket.io.emit(name, data);\n\t    }; //连接\n\n\n\t    GoEasySocket.prototype.connect = function () {\n\t      var _this = this; //触发 连接中\n\n\n\t      _super.prototype.connect.call(this);\n\n\t      this.onConnecting();\n\t      this.ioSocket.connect({\n\t        uri: this.uri,\n\t        opts: this.ioOpts\n\t      });\n\t      var gns = GNS_1.GNS.instance;\n\n\t      if (gns && gns.supportNotification() && gns.getRegIdPromise()) {\n\t        gns.getRegIdPromise().then(function (result) {\n\t          console.log('Reg id is resolved: ', result);\n\t          _this.regId = result;\n\n\t          _this.authorize();\n\t        })[\"catch\"](function (e) {\n\t          console.warn(\"Failed to register the Manufacturers Push service:\" + JSON.stringify(e));\n\n\t          _this.authorize();\n\t        });\n\t      } else {\n\t        this.authorize();\n\t      }\n\t    }; //断连\n\n\n\t    GoEasySocket.prototype.disconnect = function () {\n\t      var _this = this;\n\n\t      return new Promise(function (resolve, reject) {\n\t        var success = function success() {\n\t          _this.status = NetworkStatus_1.NetworkStatus.DISCONNECTED;\n\n\t          _this.ioSocket.disconnect();\n\n\t          resolve();\n\t        };\n\n\t        if (_this.allowNotification) {\n\t          var fail = function fail(e) {\n\t            reject(e);\n\t          };\n\n\t          var rocket = new Rocket_1[\"default\"]({\n\t            name: RocketTypes_1.RocketTypes.manualDisconnect,\n\t            params: {},\n\t            permission: Permission_1.Permission.READ,\n\t            singleTimeout: SocketTimeout_1.SocketTimeout.commonRequestSingle,\n\t            totalTimeout: SocketTimeout_1.SocketTimeout.commonRequestTotal,\n\t            fail: fail,\n\t            success: success\n\t          });\n\n\t          _this.emit(rocket);\n\t        } else {\n\t          success();\n\t        }\n\t      });\n\t    }; //认证\n\n\n\t    GoEasySocket.prototype.authorize = function () {\n\t      var params = {\n\t        appkey: this.appKey,\n\t        userId: this.userId,\n\t        userData: JSON.stringify(this.userData),\n\t        otp: this.otp,\n\t        artifactVersion: this.artifactVersion,\n\t        // type: this.type,\n\t        sid: this.sid,\n\t        // imVersion : this.imVersion,\n\t        allowNT: this.allowNotification,\n\t        regId: this.regId,\n\t        wxmpId: this.wxmpId,\n\t        modules: this.modules,\n\t        a: this.anonymous,\n\t        z: ClientInfo_1.clientInfo.z\n\t      };\n\t      console.log(\"authorize params: \", JSON.stringify(params));\n\t      var rocket = new Rocket_1[\"default\"]({\n\t        name: RocketTypes_1.RocketTypes.authorize,\n\t        params: params,\n\t        permission: Permission_1.Permission.NONE,\n\t        singleTimeout: SocketTimeout_1.SocketTimeout.commonInfiniteSingle,\n\t        totalTimeout: SocketTimeout_1.SocketTimeout.commonInfiniteTotal,\n\t        success: this.onAuthorizeSuccess.bind(this),\n\t        fail: this.onAuthorizeFailed.bind(this)\n\t      });\n\t      this.ioSocket.emit(rocket);\n\t    }; //连接中\n\n\n\t    GoEasySocket.prototype.onConnecting = function () {\n\t      this.notify(this.connectingObservers, this.reconnectingTimes);\n\t    }; //重连中\n\n\n\t    GoEasySocket.prototype.onIoReconnecting = function () {\n\t      this.reconnectingTimes++;\n\n\t      if (this.status == NetworkStatus_1.NetworkStatus.CONNECTED || this.status == NetworkStatus_1.NetworkStatus.EXPIRED_RECONNECTED || this.status == NetworkStatus_1.NetworkStatus.RECONNECTING) {\n\t        this.status = NetworkStatus_1.NetworkStatus.RECONNECTING;\n\t      } else {\n\t        this.status = NetworkStatus_1.NetworkStatus.CONNECTING;\n\t      }\n\n\t      this.onConnecting();\n\t    }; //断连\n\n\n\t    GoEasySocket.prototype.onIoDisconnected = function () {\n\t      if (this.status == NetworkStatus_1.NetworkStatus.DISCONNECTING) {\n\t        this.status = NetworkStatus_1.NetworkStatus.DISCONNECTED;\n\t        this.notify(this.disconnectedObservers);\n\t      } //如果不是disconnecting的，我们就认为是断网重连，忽略掉\n\n\n\t      this.notify(this.disconnectedObservers);\n\t    }; //连接成功\n\n\n\t    GoEasySocket.prototype.onAuthorizeSuccess = function (authorizeAck) {\n\t      if (this.anonymous === true && authorizeAck.u) {\n\t        anonymous_user_id_repository_1.AnonymousUserIdRepository.put(authorizeAck.u);\n\t        this.userId = authorizeAck.u;\n\t      }\n\n\t      if (this.status === NetworkStatus_1.NetworkStatus.RECONNECTING) {\n\t        var expiredClient = this.sid !== authorizeAck.sid;\n\n\t        if (expiredClient) {\n\t          this.status = NetworkStatus_1.NetworkStatus.EXPIRED_RECONNECTED;\n\t          this.notify(this.expiredReconnectedObservers);\n\t        } else {\n\t          this.status = NetworkStatus_1.NetworkStatus.RECONNECTED;\n\t        }\n\t      } else {\n\t        this.status = NetworkStatus_1.NetworkStatus.CONNECTED;\n\t        this.sid = authorizeAck.sid;\n\t      } //设置权限\n\n\n\t      if (authorizeAck.enablePublish) {\n\t        if (!this.permissions.find(function (item) {\n\t          return item == Permission_1.Permission.WRITE;\n\t        })) {\n\t          this.permissions.push(Permission_1.Permission.WRITE);\n\t        }\n\t      }\n\n\t      if (authorizeAck.enableSubscribe) {\n\t        if (!this.permissions.find(function (item) {\n\t          return item == Permission_1.Permission.READ;\n\t        })) {\n\t          this.permissions.push(Permission_1.Permission.READ);\n\t        }\n\t      }\n\n\t      this.reconnectingTimes = 0;\n\t      this.notify(this.connectedObservers);\n\t    }; //连接失败\n\n\n\t    GoEasySocket.prototype.onAuthorizeFailed = function (authorizeAck) {\n\t      this.ioSocket.disconnect();\n\t      this.status = NetworkStatus_1.NetworkStatus.CONNECT_FAILED;\n\t      var response = {\n\t        code: authorizeAck.resultCode || 408,\n\t        content: authorizeAck.content || 'Host unreachable or timeout'\n\t      };\n\t      this.notify(this.connectFailedObservers, response);\n\t    };\n\n\t    GoEasySocket.prototype.addConnectingObserver = function (callback) {\n\t      if (!Calibrator_1[\"default\"].isFunction(callback)) return;\n\t      this.connectingObservers.push(callback);\n\t    };\n\n\t    GoEasySocket.prototype.addConnectFailedObserver = function (callback) {\n\t      if (!Calibrator_1[\"default\"].isFunction(callback)) return;\n\t      this.connectFailedObservers.push(callback);\n\t    };\n\n\t    GoEasySocket.prototype.addExpiredReconnectedObserver = function (callback) {\n\t      if (!Calibrator_1[\"default\"].isFunction(callback)) return;\n\t      this.expiredReconnectedObservers.push(callback);\n\t    };\n\n\t    GoEasySocket.prototype.addMessageObserver = function (key, callback) {\n\t      var _this = this;\n\n\t      if (!this.messageObservers[key]) {\n\t        this.messageObservers[key] = [];\n\t        this.ioSocket.io.on(key, function (message) {\n\t          _this.notifyMessageObservers(key, message);\n\t        });\n\t      }\n\n\t      this.messageObservers[key].push(new MessageObserver_1.MessageObserver(callback));\n\t    };\n\n\t    GoEasySocket.prototype.notifyMessageObservers = function (key, message) {\n\t      var observers = this.messageObservers[key];\n\n\t      for (var i = 0; i < observers.length; i++) {\n\t        observers[i].onMessage(key, message);\n\t      }\n\t    };\n\n\t    return GoEasySocket;\n\t  }(AbstractSocket_1[\"default\"]);\n\n\t  exports[\"default\"] = GoEasySocket;\n\t})(GoEasySocket);\n\n\tvar ModuleTypes = {};\n\n\tModuleTypes.__esModule = true;\n\tModuleTypes.ModuleTypes = void 0;\n\tModuleTypes.ModuleTypes = {\n\t  IM: 'IM',\n\t  PUBSUB: 'PUBSUB'\n\t};\n\n\tvar pubsub = {};\n\n\tvar Publisher = {};\n\n\tvar validatorUtils = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var Calibrator_1 = Calibrator;\n\n\t  var ValidatorUtils =\n\t  /** @class */\n\t  function () {\n\t    function ValidatorUtils() {}\n\t    /**\n\t     *\n\t     * @param id  userId or groupId\n\t     */\n\n\n\t    ValidatorUtils.prototype.validateId = function (id, key) {\n\t      if (Calibrator_1[\"default\"].isEmpty(id)) {\n\t        throw {\n\t          code: 400,\n\t          content: \" \".concat(key, \" is required.\")\n\t        };\n\t      }\n\n\t      if (!Calibrator_1[\"default\"].isStringOrNumber(id)) {\n\t        throw {\n\t          code: 400,\n\t          content: \"TypeError: \".concat(key, \" require string or number.\")\n\t        };\n\t      }\n\t    };\n\n\t    ValidatorUtils.prototype.validateIdArray = function (ids, key) {\n\t      if (!Array.isArray(ids) || ids.length === 0) {\n\t        throw {\n\t          code: 400,\n\t          content: \"TypeError: \".concat(key, \" require array.\")\n\t        };\n\t      }\n\n\t      if (ids.length > 300) {\n\t        throw {\n\t          code: 400,\n\t          content: \"\".concat(key, \" is over max length 500.\")\n\t        };\n\t      }\n\n\t      for (var i = 0; i < ids.length; i++) {\n\t        if (!Calibrator_1[\"default\"].isStringOrNumber(ids[i])) {\n\t          throw {\n\t            code: 400,\n\t            content: \"TypeError: \".concat(key, \" item require string or number.\")\n\t          };\n\t        }\n\n\t        if (Calibrator_1[\"default\"].isNumber(ids[i])) {\n\t          ids[i] = ids[i].toString();\n\t        }\n\n\t        if (ids[i].length == 0) {\n\t          throw {\n\t            code: 400,\n\t            content: \"\".concat(key, \" has empty item.\")\n\t          };\n\t        }\n\t      }\n\n\t      if (Array.from(new Set(ids)).length < ids.length) {\n\t        throw {\n\t          code: 400,\n\t          content: \"Duplicate element in \".concat(key)\n\t        };\n\t      }\n\t    };\n\n\t    ValidatorUtils.prototype.validateChannel = function (channel, key) {\n\t      this.validateId(channel, key);\n\t    };\n\n\t    ValidatorUtils.prototype.validateChannelArray = function (channels, key) {\n\t      this.validateIdArray(channels, key);\n\t    };\n\n\t    ValidatorUtils.prototype.validateChannelAndChannels = function (channel, channels) {\n\t      var hasChannel = !Calibrator_1[\"default\"].isEmpty(channel);\n\t      var hasChannels = !Calibrator_1[\"default\"].isEmpty(channels);\n\n\t      if (!hasChannel && !hasChannels) {\n\t        throw {\n\t          code: 400,\n\t          content: \"channel is required.\"\n\t        };\n\t      }\n\n\t      if (hasChannel && hasChannels) {\n\t        throw {\n\t          code: 400,\n\t          content: \"subscribe to either channel or channels, not both.\"\n\t        };\n\t      }\n\n\t      if (hasChannel) {\n\t        this.validateId(channel, 'channel');\n\t      }\n\n\t      if (hasChannels) {\n\t        this.validateIdArray(channels, 'channels');\n\t      }\n\t    };\n\n\t    ValidatorUtils.prototype.validateCallbackOptions = function (callbackOptions) {\n\t      if (!Calibrator_1[\"default\"].isObject(callbackOptions)) {\n\t        throw {\n\t          code: 400,\n\t          content: \"bad parameters\" //todo: 更好的错误提示\n\n\t        };\n\t      }\n\t    };\n\n\t    ValidatorUtils.prototype.validateNotification = function (notification) {\n\t      if (Calibrator_1[\"default\"].isObject(notification)) {\n\t        if (Calibrator_1[\"default\"].isEmpty(notification.title)) {\n\t          throw {\n\t            code: 400,\n\t            content: 'notification.title is required.'\n\t          };\n\t        } else if (!Calibrator_1[\"default\"].isString(notification.title)) {\n\t          throw {\n\t            code: 400,\n\t            content: 'TypeError: notification.title requires string.'\n\t          };\n\t        } else if (notification.title.length > 32) {\n\t          throw {\n\t            code: 400,\n\t            content: 'TypeError: notification.title over max length 32.'\n\t          };\n\t        }\n\n\t        if (Calibrator_1[\"default\"].isEmpty(notification.body)) {\n\t          throw {\n\t            code: 400,\n\t            content: 'notification.body is required.'\n\t          };\n\t        } else if (!Calibrator_1[\"default\"].isString(notification.body)) {\n\t          throw {\n\t            code: 400,\n\t            content: 'TypeError: notification.body must be string.'\n\t          };\n\t        } else if (notification.body.length > 50) {\n\t          throw {\n\t            code: 400,\n\t            content: 'notification.body over max length 50.'\n\t          };\n\t        }\n\t      } else if (Calibrator_1[\"default\"].isPrimitive(notification)) {\n\t        throw {\n\t          code: 400,\n\t          content: 'TypeError: notification requires an object.'\n\t        };\n\t      }\n\t    };\n\n\t    ValidatorUtils.prototype.validateValIsEmpty = function (val, key) {\n\t      if (Calibrator_1[\"default\"].isUndef(val) || Calibrator_1[\"default\"].isEmpty(val)) {\n\t        throw {\n\t          code: 400,\n\t          content: \"\".concat(key, \" is empty\")\n\t        };\n\t      }\n\t    };\n\n\t    ValidatorUtils.prototype.validateWXMPTemplateMsg = function (wxmpTemplateMsg) {\n\t      if (Calibrator_1[\"default\"].isObject(wxmpTemplateMsg)) {\n\t        if (!Calibrator_1[\"default\"].isString(wxmpTemplateMsg.template_id)) {\n\t          throw {\n\t            code: 400,\n\t            content: 'template_id must be string.'\n\t          };\n\t        }\n\n\t        if (!Calibrator_1[\"default\"].isEmpty(wxmpTemplateMsg.url) && !Calibrator_1[\"default\"].isString(wxmpTemplateMsg.url)) {\n\t          throw {\n\t            code: 400,\n\t            content: 'url must be string'\n\t          };\n\t        }\n\n\t        if (!Calibrator_1[\"default\"].isEmpty(wxmpTemplateMsg.miniprogram)) {\n\t          if (!Calibrator_1[\"default\"].isString(wxmpTemplateMsg.miniprogram.appid) || !Calibrator_1[\"default\"].isString(wxmpTemplateMsg.miniprogram.pagepath)) {\n\t            throw {\n\t              code: 400,\n\t              content: 'miniprogram.appid and miniprogram.pagepath must be strings.'\n\t            };\n\t          }\n\t        }\n\n\t        if (!Calibrator_1[\"default\"].isObject(wxmpTemplateMsg.data)) {\n\t          throw {\n\t            code: 400,\n\t            content: 'data requires an object.'\n\t          };\n\t        }\n\t      } else if (Calibrator_1[\"default\"].isPrimitive(wxmpTemplateMsg)) {\n\t        throw {\n\t          code: 400,\n\t          content: 'wxmpTemplateMsg must be an object.'\n\t        };\n\t      }\n\t    };\n\n\t    return ValidatorUtils;\n\t  }();\n\n\t  var validatorUtils = new ValidatorUtils();\n\t  exports[\"default\"] = validatorUtils;\n\t})(validatorUtils);\n\n\tvar g = {};\n\n\tg.__esModule = true;\n\tg.G = void 0;\n\n\tvar G =\n\t/** @class */\n\tfunction () {\n\t  function G() {}\n\n\t  G.i = function (socket) {\n\t    this.socket = socket;\n\t  };\n\n\t  G.s = function () {\n\t    if (this.socket) {\n\t      return this.socket;\n\t    }\n\n\t    throw new Error('Please connect first.');\n\t  };\n\n\t  G.u = function () {\n\t    return this.s().userId;\n\t  };\n\n\t  G.ud = function () {\n\t    return this.s().userData;\n\t  };\n\n\t  return G;\n\t}();\n\n\tg.G = G;\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var noop_1 = noop;\n\t  var Calibrator_1 = Calibrator;\n\t  var UUID_1 = UUID;\n\t  var Rocket_1 = Rocket;\n\t  var Permission_1 = Permission;\n\t  var SocketTimeout_1 = SocketTimeout;\n\t  var RocketTypes_1 = RocketTypes;\n\t  var validator_utils_1 = validatorUtils;\n\t  var g_1 = g;\n\n\t  var Publisher =\n\t  /** @class */\n\t  function () {\n\t    function Publisher() {}\n\n\t    Publisher.prototype.publish = function (options) {\n\t      if (!Calibrator_1[\"default\"].isFunction(options.onFailed)) {\n\t        options.onFailed = noop_1[\"default\"];\n\t      }\n\n\t      if (!Calibrator_1[\"default\"].isFunction(options.onSuccess)) {\n\t        options.onSuccess = noop_1[\"default\"];\n\t      }\n\n\t      this.validate(options);\n\t      options.channel = options.channel.toString();\n\t      var params = {\n\t        channel: options.channel,\n\t        content: options.message,\n\t        nt: options.notification,\n\t        at: options.accessToken,\n\t        guid: UUID_1[\"default\"].get()\n\t      };\n\n\t      if (options.wxmpTemplateMsg) {\n\t        params.wxmpTemplateMsg = options.wxmpTemplateMsg;\n\t        params.wxmpTemplateMsg.data = JSON.stringify(params.wxmpTemplateMsg.data); // todo:这个data需要转换成字符串吗?\n\t      }\n\n\t      var success = function success(ack) {\n\t        options.onSuccess({\n\t          code: 200,\n\t          content: 'ok'\n\t        });\n\t      };\n\n\t      var fail = function fail(ack) {\n\t        options.onFailed({\n\t          code: ack.resultCode,\n\t          content: ack.content\n\t        });\n\t      };\n\n\t      var rocket = new Rocket_1[\"default\"]({\n\t        name: RocketTypes_1.RocketTypes.publish,\n\t        params: params,\n\t        unique: true,\n\t        singleTimeout: SocketTimeout_1.SocketTimeout.commonRequestSingle,\n\t        totalTimeout: SocketTimeout_1.SocketTimeout.commonRequestTotal,\n\t        permission: Permission_1.Permission.WRITE,\n\t        success: success,\n\t        fail: fail\n\t      });\n\t      g_1.G.s().emit(rocket);\n\t    };\n\n\t    Publisher.prototype.validate = function (options) {\n\t      validator_utils_1[\"default\"].validateChannel(options.channel, 'channel');\n\n\t      if (Calibrator_1[\"default\"].isEmpty(options.message)) {\n\t        throw {\n\t          code: 400,\n\t          content: 'message is required.'\n\t        };\n\t      }\n\n\t      if (!Calibrator_1[\"default\"].isString(options.message)) {\n\t        throw {\n\t          code: 400,\n\t          content: 'TypeError: message requires string.'\n\t        };\n\t      } else if (options.message.length > 2500) {\n\t        throw {\n\t          code: 400,\n\t          content: 'Message over max length 2500.'\n\t        };\n\t      }\n\n\t      if (options.wxmpTemplateMsg) {\n\t        validator_utils_1[\"default\"].validateWXMPTemplateMsg(options.wxmpTemplateMsg);\n\t      }\n\n\t      if (options.notification) {\n\t        validator_utils_1[\"default\"].validateNotification(options.notification);\n\t      }\n\t    };\n\n\t    return Publisher;\n\t  }();\n\n\t  exports[\"default\"] = Publisher;\n\t})(Publisher);\n\n\tvar Subscriber$1 = {};\n\n\tvar Subscription$1 = {};\n\n\tSubscription$1.__esModule = true;\n\tSubscription$1.Subscription = void 0;\n\n\tvar Subscription =\n\t/** @class */\n\tfunction () {\n\t  function Subscription(options) {\n\t    this.channels = options.channels;\n\t    this.accessToken = options.accessToken;\n\t    this.onSuccess = options.onSuccess;\n\t    this.onFailed = options.onFailed;\n\t    this.onMessage = options.onMessage;\n\t  }\n\n\t  Subscription.prototype.empty = function () {};\n\n\t  return Subscription;\n\t}();\n\n\tSubscription$1.Subscription = Subscription;\n\n\tvar RemoteEvents = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  exports.RemoteEvents = void 0;\n\n\t  (function (RemoteEvents) {\n\t    RemoteEvents[\"message\"] = \"message\";\n\t    RemoteEvents[\"imMessage\"] = \"imMessage\";\n\t    RemoteEvents[\"userPresence\"] = \"userPresence\";\n\t    RemoteEvents[\"groupPresence\"] = \"groupPresence\";\n\t    RemoteEvents[\"IM_MSG_READ\"] = \"IM_MSG_READ\";\n\t    RemoteEvents[\"IM_MSG_DELETED\"] = \"IM_MSG_DELETED\";\n\t    RemoteEvents[\"IM_MSG_RECALLED\"] = \"IM_MSG_RECALLED\";\n\t    RemoteEvents[\"RTC_RING_EVENT\"] = \"RTC_RING_EVENT\";\n\t    RemoteEvents[\"RTC_CANCEL_RING\"] = \"RTC_CANCEL_RING\";\n\t    RemoteEvents[\"RTC_REMOTE_USER_LEFT\"] = \"RTC_REMOTE_USER_LEFT\";\n\t    RemoteEvents[\"RTC_CALL_END\"] = \"RTC_CALL_END\";\n\t    RemoteEvents[\"CS_ONLINE_CHANGED\"] = \"CS_ONLINE_CHANGED\";\n\t  })(exports.RemoteEvents || (exports.RemoteEvents = {}));\n\t})(RemoteEvents);\n\n\tSubscriber$1.__esModule = true;\n\tSubscriber$1.Subscriber = void 0;\n\tvar noop_1$3 = noop;\n\tvar Calibrator_1$g = Calibrator;\n\tvar Rocket_1$7 = Rocket;\n\tvar Permission_1$7 = Permission;\n\tvar Subscription_1 = Subscription$1;\n\tvar SocketTimeout_1$7 = SocketTimeout;\n\tvar RocketTypes_1$9 = RocketTypes;\n\tvar RemoteEvents_1$2 = RemoteEvents;\n\tvar validator_utils_1$9 = validatorUtils;\n\tvar GNS_1 = GNS$1;\n\tvar g_1$i = g;\n\n\tvar Subscriber =\n\t/** @class */\n\tfunction () {\n\t  function Subscriber() {\n\t    this.subscriptions = [];\n\t    GNS_1.GNS.instance.addAssembler(new (\n\t    /** @class */\n\t    function () {\n\t      function class_1() {}\n\n\t      class_1.prototype.assemble = function (oldPayload) {\n\t        return {\n\t          channel: oldPayload.ch,\n\t          content: oldPayload.ctt\n\t        };\n\t      };\n\n\t      class_1.prototype.support = function (oldPayload) {\n\t        return !!oldPayload.ch;\n\t      };\n\n\t      return class_1;\n\t    }())());\n\t  }\n\n\t  Subscriber.prototype.initialGoEasySocket = function () {\n\t    g_1$i.G.s().addMessageObserver(RemoteEvents_1$2.RemoteEvents.message, this.onNewMessage.bind(this));\n\t    g_1$i.G.s().addExpiredReconnectedObserver(this.onExpiredReconnected.bind(this));\n\t  };\n\n\t  Subscriber.prototype.resubscribe = function () {\n\t    var arr = this.subscriptions.slice(0);\n\t    this.subscriptions = [];\n\n\t    for (var i = 0; i < arr.length; i++) {\n\t      if (arr[i].channels.length != 0) {\n\t        this.subscribe(arr[i]);\n\t      }\n\t    }\n\t  };\n\n\t  Subscriber.prototype.clearSubscriptions = function () {\n\t    this.subscriptions = [];\n\t  };\n\n\t  Subscriber.prototype.onExpiredReconnected = function () {\n\t    this.resubscribe();\n\t  }; //收到消息分发\n\n\n\t  Subscriber.prototype.onNewMessage = function (message) {\n\t    //todo 临时处理方法，本应该在不同的消息中判断\n\t    if (message.n.indexOf('_presence') > -1) return;\n\t    console.log('Subscriber -> onNewMessage: ', message); //收到消息\n\n\t    if (message.a) {\n\t      g_1$i.G.s().sendAck('ack', {\n\t        \"publishGuid\": message.i\n\t      });\n\t    }\n\n\t    var neMessage = {\n\t      time: message.t,\n\t      channel: message.n,\n\t      content: message.c\n\t    };\n\t    this.createNotification(message);\n\t    var subscription = this.findSubscriptionByChannel(neMessage.channel);\n\t    subscription.onMessage(neMessage);\n\t  };\n\n\t  Subscriber.prototype.createNotification = function (message) {\n\t    var supportGNS = GNS_1.GNS.instance.supportNotification();\n\n\t    if (!Calibrator_1$g[\"default\"].isObject(message.nt) || !supportGNS) {\n\t      return;\n\t    }\n\n\t    var data = {\n\t      ch: message.n,\n\t      ctt: message.c\n\t    };\n\t    GNS_1.GNS.instance.createLocalNotification(message.nt.t, message.nt.c, data);\n\t  };\n\n\t  Subscriber.prototype.formatOptions = function (options) {\n\t    this.formatCallback(options);\n\n\t    if (!Calibrator_1$g[\"default\"].isFunction(options.onMessage)) {\n\t      options.onMessage = noop_1$3[\"default\"];\n\t    }\n\n\t    if (options.channel) {\n\t      options.channel = options.channel.toString();\n\t      options.channels = [options.channel];\n\t    }\n\n\t    if (options.channels) {\n\t      options.channels = options.channels.toString().split(',');\n\t    }\n\t  };\n\n\t  Subscriber.prototype.formatCallback = function (options) {\n\t    if (!Calibrator_1$g[\"default\"].isFunction(options.onSuccess)) {\n\t      options.onSuccess = noop_1$3[\"default\"];\n\t    }\n\n\t    if (!Calibrator_1$g[\"default\"].isFunction(options.onFailed)) {\n\t      options.onFailed = noop_1$3[\"default\"];\n\t    }\n\t  }; //订阅\n\n\n\t  Subscriber.prototype.subscribe = function (options) {\n\t    var _this = this;\n\n\t    validator_utils_1$9[\"default\"].validateChannelAndChannels(options.channel, options.channels);\n\t    this.formatOptions(options);\n\n\t    var success = function success() {\n\t      var subscription = new Subscription_1.Subscription({\n\t        channels: options.channels,\n\t        accessToken: options.accessToken,\n\t        onSuccess: options.onSuccess,\n\t        onFailed: options.onFailed,\n\t        onMessage: options.onMessage\n\t      });\n\n\t      _this.subscriptions.push(subscription);\n\n\t      options.onSuccess({\n\t        code: 200,\n\t        content: 'ok'\n\t      });\n\t    };\n\n\t    var fail = function fail(ack) {\n\t      options.onFailed({\n\t        code: ack.resultCode,\n\t        content: ack.content\n\t      });\n\t    };\n\n\t    var rocket = new Rocket_1$7[\"default\"]({\n\t      name: RocketTypes_1$9.RocketTypes.subscribe,\n\t      permission: Permission_1$7.Permission.READ,\n\t      singleTimeout: SocketTimeout_1$7.SocketTimeout.commonInfiniteSingle,\n\t      totalTimeout: SocketTimeout_1$7.SocketTimeout.commonInfiniteTotal,\n\t      params: {\n\t        channels: options.channels,\n\t        accessToken: options.accessToken\n\t      },\n\t      success: success,\n\t      fail: fail\n\t    });\n\t    g_1$i.G.s().emit(rocket);\n\t  }; //取消订阅\n\n\n\t  Subscriber.prototype.unsubscribe = function (options) {\n\t    var _this = this;\n\n\t    validator_utils_1$9[\"default\"].validateChannel(options.channel, 'channel');\n\t    options.channel = options.channel.toString();\n\n\t    if (!this.findSubscriptionByChannel(options.channel)) {\n\t      options.onFailed({\n\t        code: 400,\n\t        content: 'channel[' + options.channel + '] is not subscribed'\n\t      });\n\t      return;\n\t    }\n\n\t    var success = function success() {\n\t      options.onSuccess({\n\t        code: 200,\n\t        content: 'ok'\n\t      });\n\n\t      _this.removeChannel(options.channel);\n\t    };\n\n\t    var fail = function fail(ack) {\n\t      options.onFailed({\n\t        code: ack.resultCode,\n\t        content: ack.content\n\t      });\n\t    };\n\n\t    var rocket = new Rocket_1$7[\"default\"]({\n\t      name: RocketTypes_1$9.RocketTypes.unsubscribe,\n\t      params: {\n\t        channel: options.channel\n\t      },\n\t      permission: Permission_1$7.Permission.READ,\n\t      singleTimeout: SocketTimeout_1$7.SocketTimeout.commonRequestSingle,\n\t      totalTimeout: SocketTimeout_1$7.SocketTimeout.commonRequestTotal,\n\t      success: success,\n\t      fail: fail\n\t    });\n\t    g_1$i.G.s().emit(rocket);\n\t  };\n\n\t  Subscriber.prototype.removeChannel = function (channel) {\n\t    for (var i = 0; i < this.subscriptions.length; i++) {\n\t      var channels = this.subscriptions[i].channels;\n\n\t      for (var j = 0; j < channels.length; j++) {\n\t        if (channels[j] == channel) {\n\t          this.subscriptions[i].channels.splice(j, 1);\n\t          break;\n\t        }\n\t      }\n\t    }\n\t  };\n\n\t  Subscriber.prototype.findSubscriptionByChannel = function (channel) {\n\t    var exist = false;\n\t    var subscription = null;\n\n\t    for (var i = this.subscriptions.length - 1; i >= 0; i--) {\n\t      var channels = this.subscriptions[i].channels;\n\n\t      for (var j = 0; j < channels.length; j++) {\n\t        if (channels[j] == channel) {\n\t          exist = true;\n\t          subscription = this.subscriptions[i];\n\t          break;\n\t        }\n\t      }\n\n\t      if (exist) break;\n\t    }\n\n\t    return subscription;\n\t  };\n\n\t  return Subscriber;\n\t}();\n\n\tSubscriber$1.Subscriber = Subscriber;\n\n\tvar History$2 = {};\n\n\tHistory$2.__esModule = true;\n\tHistory$2.History = void 0;\n\tvar noop_1$2 = noop;\n\tvar Calibrator_1$f = Calibrator;\n\tvar Rocket_1$6 = Rocket;\n\tvar Permission_1$6 = Permission;\n\tvar SocketTimeout_1$6 = SocketTimeout;\n\tvar RocketTypes_1$8 = RocketTypes;\n\tvar validator_utils_1$8 = validatorUtils;\n\tvar g_1$h = g;\n\n\tvar History$1 =\n\t/** @class */\n\tfunction () {\n\t  function History() {}\n\n\t  History.prototype.get = function (options) {\n\t    if (!Calibrator_1$f[\"default\"].isFunction(options.onSuccess)) {\n\t      options.onSuccess = noop_1$2[\"default\"];\n\t    }\n\n\t    if (!Calibrator_1$f[\"default\"].isFunction(options.onFailed)) {\n\t      options.onFailed = noop_1$2[\"default\"];\n\t    }\n\n\t    validator_utils_1$8[\"default\"].validateChannel(options.channel, 'channel');\n\t    options.channel = options.channel.toString();\n\n\t    var ackCallback = function ackCallback(ack) {\n\t      options.onSuccess({\n\t        code: ack.resultCode || ack.code || 200,\n\t        content: ack.content\n\t      });\n\t    };\n\n\t    var failCallback = function failCallback(ack) {\n\t      options.onFailed({\n\t        code: ack.resultCode || ack.code,\n\t        content: ack.content\n\t      });\n\t    };\n\n\t    var rocket = new Rocket_1$6[\"default\"]({\n\t      name: RocketTypes_1$8.RocketTypes.historyMessages,\n\t      permission: Permission_1$6.Permission.READ,\n\t      params: options,\n\t      singleTimeout: SocketTimeout_1$6.SocketTimeout.commonQuerySingle,\n\t      totalTimeout: SocketTimeout_1$6.SocketTimeout.commonQueryTotal,\n\t      success: ackCallback,\n\t      fail: failCallback\n\t    });\n\t    g_1$h.G.s().emit(rocket);\n\t  };\n\n\t  return History;\n\t}();\n\n\tHistory$2.History = History$1;\n\n\tvar PresenceSubscriber$1 = {};\n\n\tvar PresenceSubscription$1 = {};\n\n\tPresenceSubscription$1.__esModule = true;\n\tPresenceSubscription$1.PresenceSubscription = void 0;\n\n\tvar PresenceSubscription =\n\t/** @class */\n\tfunction () {\n\t  function PresenceSubscription(options) {\n\t    this.channels = options.channels;\n\t    this.onSuccess = options.onSuccess;\n\t    this.onFailed = options.onFailed;\n\t    this.onPresence = options.onPresence;\n\t  }\n\n\t  return PresenceSubscription;\n\t}();\n\n\tPresenceSubscription$1.PresenceSubscription = PresenceSubscription;\n\n\tPresenceSubscriber$1.__esModule = true;\n\tPresenceSubscriber$1.PresenceSubscriber = void 0;\n\tvar noop_1$1 = noop;\n\tvar Calibrator_1$e = Calibrator;\n\tvar Rocket_1$5 = Rocket;\n\tvar Permission_1$5 = Permission;\n\tvar SocketTimeout_1$5 = SocketTimeout;\n\tvar PresenceSubscription_1 = PresenceSubscription$1;\n\tvar RocketTypes_1$7 = RocketTypes;\n\tvar RemoteEvents_1$1 = RemoteEvents;\n\tvar validator_utils_1$7 = validatorUtils;\n\tvar g_1$g = g;\n\n\tvar PresenceSubscriber =\n\t/** @class */\n\tfunction () {\n\t  function PresenceSubscriber() {\n\t    this.presenters = [];\n\t  }\n\n\t  PresenceSubscriber.prototype.initialGoEasySocket = function () {\n\t    g_1$g.G.s().addMessageObserver(RemoteEvents_1$1.RemoteEvents.message, this.onNewMessage.bind(this));\n\t    g_1$g.G.s().addExpiredReconnectedObserver(this.onExpiredReconnected.bind(this));\n\t  };\n\n\t  PresenceSubscriber.prototype.resubscribe = function () {\n\t    var arr = this.presenters.slice(0);\n\t    this.presenters = [];\n\n\t    for (var i = 0; i < arr.length; i++) {\n\t      for (var j = 0; j < arr[i].channels.length; j++) {\n\t        var channelSplitArr = arr[i].channels[j].split('_presence');\n\t        arr[i].channels[j] = channelSplitArr[0];\n\t      }\n\n\t      if (arr[i].channels.length != 0) {\n\t        this.subscribePresence(arr[i]);\n\t      }\n\t    }\n\t  };\n\n\t  PresenceSubscriber.prototype.onExpiredReconnected = function () {\n\t    this.resubscribe();\n\t  }; //收到消息分发\n\n\n\t  PresenceSubscriber.prototype.onNewMessage = function (message) {\n\t    //todo 临时处理方法，本应该在不同的消息中判断\n\t    if (message.n.indexOf('_presence') == -1) return; //收到消息 通知channel\n\n\t    var presenceSubscription = this.findPresenceByChannel(message.n);\n\n\t    if (presenceSubscription) {\n\t      var content = JSON.parse(message.c);\n\t      content.events = content.events.map(function (item) {\n\t        var data = item.userData ? JSON.parse(item.userData) : {};\n\t        return {\n\t          time: item.time,\n\t          action: item.action,\n\t          id: item.userId,\n\t          data: data\n\t        };\n\t      });\n\t      presenceSubscription.onPresence(content);\n\t    }\n\t  };\n\n\t  PresenceSubscriber.prototype.formatOptions = function (options) {\n\t    this.formatCallback(options);\n\n\t    if (!Calibrator_1$e[\"default\"].isFunction(options.onPresence)) {\n\t      options.onPresence = noop_1$1[\"default\"];\n\t    }\n\n\t    if (options.channel) {\n\t      options.channel = options.channel.toString();\n\t      options.channels = [options.channel];\n\t    }\n\n\t    if (options.channels) {\n\t      options.channels = options.channels.toString().split(',');\n\t    }\n\t  };\n\n\t  PresenceSubscriber.prototype.formatCallback = function (options) {\n\t    if (!Calibrator_1$e[\"default\"].isFunction(options.onSuccess)) {\n\t      options.onSuccess = noop_1$1[\"default\"];\n\t    }\n\n\t    if (!Calibrator_1$e[\"default\"].isFunction(options.onFailed)) {\n\t      options.onFailed = noop_1$1[\"default\"];\n\t    }\n\t  };\n\n\t  PresenceSubscriber.prototype.subscribePresence = function (options) {\n\t    var _this = this;\n\n\t    validator_utils_1$7[\"default\"].validateChannelAndChannels(options.channel, options.channels);\n\t    this.formatOptions(options);\n\n\t    if (Array.isArray(options.channels)) {\n\t      options.channels = options.channels.map(function (item) {\n\t        item += '_presence';\n\t        return item;\n\t      });\n\t    }\n\n\t    var success = function success() {\n\t      var presenter = new PresenceSubscription_1.PresenceSubscription({\n\t        channels: options.channels,\n\t        onSuccess: options.onSuccess,\n\t        onFailed: options.onFailed,\n\t        onPresence: options.onPresence\n\t      });\n\n\t      _this.presenters.push(presenter);\n\n\t      options.onSuccess({\n\t        code: 200,\n\t        content: 'ok'\n\t      });\n\t    };\n\n\t    var fail = function fail(ack) {\n\t      options.onFailed({\n\t        code: ack.resultCode,\n\t        content: ack.content\n\t      });\n\t    };\n\n\t    var rocket = new Rocket_1$5[\"default\"]({\n\t      name: RocketTypes_1$7.RocketTypes.subscribe,\n\t      permission: Permission_1$5.Permission.READ,\n\t      singleTimeout: SocketTimeout_1$5.SocketTimeout.commonInfiniteSingle,\n\t      totalTimeout: SocketTimeout_1$5.SocketTimeout.commonInfiniteTotal,\n\t      params: {\n\t        channels: options.channels\n\t      },\n\t      success: success,\n\t      fail: fail\n\t    });\n\t    g_1$g.G.s().emit(rocket);\n\t  };\n\n\t  PresenceSubscriber.prototype.unsubscribePresence = function (options) {\n\t    var _this = this;\n\n\t    this.formatCallback(options);\n\n\t    if (!Calibrator_1$e[\"default\"].isDef(options.channel)) {\n\t      options.onFailed({\n\t        code: 400,\n\t        content: 'channel is required'\n\t      });\n\t      return;\n\t    }\n\n\t    options.channel += '_presence';\n\n\t    if (!this.findPresenceByChannel(options.channel)) {\n\t      options.onFailed({\n\t        code: 400,\n\t        content: 'channel[' + options.channel + '] is not subscribed'\n\t      });\n\t      return;\n\t    }\n\n\t    var rocket = new Rocket_1$5[\"default\"]({\n\t      name: RocketTypes_1$7.RocketTypes.unsubscribe,\n\t      params: {\n\t        channel: options.channel\n\t      },\n\t      permission: Permission_1$5.Permission.READ,\n\t      singleTimeout: SocketTimeout_1$5.SocketTimeout.commonRequestSingle,\n\t      totalTimeout: SocketTimeout_1$5.SocketTimeout.commonRequestTotal,\n\t      success: function success() {\n\t        options.onSuccess({\n\t          code: 200,\n\t          content: 'ok'\n\t        });\n\n\t        _this.removeChannel(options.channel);\n\t      },\n\t      fail: function fail(ack) {\n\t        options.onFailed({\n\t          code: ack.resultCode,\n\t          content: ack.content\n\t        });\n\t      }\n\t    });\n\t    g_1$g.G.s().emit(rocket);\n\t  };\n\n\t  PresenceSubscriber.prototype.removeChannel = function (channel) {\n\t    for (var i = 0; i < this.presenters.length; i++) {\n\t      var channels = this.presenters[i].channels;\n\n\t      for (var j = 0; j < channels.length; j++) {\n\t        if (channels[j] == channel) {\n\t          this.presenters[i].channels.splice(j, 1);\n\t          break;\n\t        }\n\t      }\n\t    }\n\t  };\n\n\t  PresenceSubscriber.prototype.findPresenceByChannel = function (channel) {\n\t    var exist = false;\n\t    var presenceSubscription = null;\n\n\t    for (var i = this.presenters.length - 1; i >= 0; i--) {\n\t      var channels = this.presenters[i].channels;\n\n\t      for (var j = 0; j < channels.length; j++) {\n\t        if (channels[j] == channel) {\n\t          exist = true;\n\t          presenceSubscription = this.presenters[i];\n\t          break;\n\t        }\n\t      }\n\n\t      if (exist) break;\n\t    }\n\n\t    return presenceSubscription;\n\t  };\n\n\t  return PresenceSubscriber;\n\t}();\n\n\tPresenceSubscriber$1.PresenceSubscriber = PresenceSubscriber;\n\n\tvar HereNow$1 = {};\n\n\tHereNow$1.__esModule = true;\n\tHereNow$1.HereNow = void 0;\n\tvar noop_1 = noop;\n\tvar Calibrator_1$d = Calibrator;\n\tvar Rocket_1$4 = Rocket;\n\tvar Permission_1$4 = Permission;\n\tvar SocketTimeout_1$4 = SocketTimeout;\n\tvar RocketTypes_1$6 = RocketTypes;\n\tvar validator_utils_1$6 = validatorUtils;\n\tvar g_1$f = g;\n\n\tvar HereNow =\n\t/** @class */\n\tfunction () {\n\t  function HereNow() {}\n\n\t  HereNow.prototype.byChannel = function (options) {\n\t    var params = {\n\t      channels: [],\n\t      includeUsers: false,\n\t      distinct: false\n\t    };\n\n\t    if (!Calibrator_1$d[\"default\"].isFunction(options.onSuccess)) {\n\t      options.onSuccess = noop_1[\"default\"];\n\t    }\n\n\t    if (!Calibrator_1$d[\"default\"].isFunction(options.onFailed)) {\n\t      options.onFailed = noop_1[\"default\"];\n\t    }\n\n\t    validator_utils_1$6[\"default\"].validateChannelArray(options.channels, 'channels');\n\t    params.channels = options.channels.toString().split(','); // 转换为字符串数组\n\n\t    params.includeUsers = options.includeUsers || false;\n\t    params.distinct = options.distinct || false;\n\n\t    var ackCallback = function ackCallback(ack) {\n\t      var content = ack.content;\n\t      var channels = content.channels;\n\n\t      for (var channel in channels) {\n\t        if (channels.hasOwnProperty(channel)) {\n\t          var channelVal = channels[channel];\n\n\t          if (channelVal.users) {\n\t            channelVal.users = channelVal.users.map(function (user) {\n\t              user.data = user.data ? JSON.parse(user.data) : {};\n\t              return user;\n\t            });\n\t          }\n\t        }\n\t      }\n\n\t      options.onSuccess({\n\t        code: ack.resultCode || ack.code || 200,\n\t        content: content\n\t      });\n\t    };\n\n\t    var failCallback = function failCallback(ack) {\n\t      options.onFailed({\n\t        code: ack.resultCode || ack.code || 200,\n\t        content: ack.content\n\t      });\n\t    };\n\n\t    var rocket = new Rocket_1$4[\"default\"]({\n\t      name: RocketTypes_1$6.RocketTypes.hereNow,\n\t      permission: Permission_1$4.Permission.READ,\n\t      params: params,\n\t      singleTimeout: SocketTimeout_1$4.SocketTimeout.commonQuerySingle,\n\t      totalTimeout: SocketTimeout_1$4.SocketTimeout.commonQueryTotal,\n\t      success: ackCallback,\n\t      fail: failCallback\n\t    });\n\t    g_1$f.G.s().emit(rocket);\n\t  };\n\n\t  HereNow.prototype.byUserId = function (options) {\n\t    var params = {\n\t      userIds: [],\n\t      distinct: true\n\t    };\n\n\t    if (!Calibrator_1$d[\"default\"].isFunction(options.onSuccess)) {\n\t      options.onSuccess = noop_1[\"default\"];\n\t    }\n\n\t    if (!Calibrator_1$d[\"default\"].isFunction(options.onFailed)) {\n\t      options.onFailed = noop_1[\"default\"];\n\t    }\n\n\t    validator_utils_1$6[\"default\"].validateIdArray(options.userIds, 'userIds');\n\t    params.userIds = options.userIds.toString().split(',');\n\n\t    if (options.distinct == false) {\n\t      params.distinct = false;\n\t    }\n\n\t    var ackCallback = function ackCallback(ack) {\n\t      var content = ack.content;\n\t      content = content.map(function (user) {\n\t        var newUser = {\n\t          id: user.userId,\n\t          data: user.userData ? JSON.parse(user.userData) : {}\n\t        };\n\t        return newUser;\n\t      });\n\t      options.onSuccess({\n\t        code: ack.resultCode || ack.code || 200,\n\t        content: content\n\t      });\n\t    };\n\n\t    var failCallback = function failCallback(ack) {\n\t      options.onFailed({\n\t        code: ack.resultCode || ack.code || 200,\n\t        content: ack.content\n\t      });\n\t    };\n\n\t    var rocket = new Rocket_1$4[\"default\"]({\n\t      name: RocketTypes_1$6.RocketTypes.hereNowByUserIds,\n\t      permission: Permission_1$4.Permission.READ,\n\t      params: params,\n\t      singleTimeout: SocketTimeout_1$4.SocketTimeout.commonQuerySingle,\n\t      totalTimeout: SocketTimeout_1$4.SocketTimeout.commonQueryTotal,\n\t      success: ackCallback,\n\t      fail: failCallback\n\t    });\n\t    g_1$f.G.s().emit(rocket);\n\t  };\n\n\t  return HereNow;\n\t}();\n\n\tHereNow$1.HereNow = HereNow;\n\n\tvar callbackUtils = {};\n\n\tcallbackUtils.__esModule = true;\n\tcallbackUtils.CallbackUtils = void 0;\n\tvar Calibrator_1$c = Calibrator;\n\n\tvar CallbackUtils =\n\t/** @class */\n\tfunction () {\n\t  function CallbackUtils() {}\n\n\t  CallbackUtils.onSuccess = function (callbackOptions, result) {\n\t    if (Calibrator_1$c[\"default\"].isFunction(callbackOptions.onSuccess)) {\n\t      callbackOptions.onSuccess(result);\n\t    }\n\t  };\n\n\t  CallbackUtils.onFailed = function (callbackOptions, error) {\n\t    if (Calibrator_1$c[\"default\"].isObject(callbackOptions) && Calibrator_1$c[\"default\"].isFunction(callbackOptions.onFailed)) {\n\t      callbackOptions.onFailed(error);\n\t    } else {\n\t      throw error;\n\t    }\n\t  };\n\n\t  return CallbackUtils;\n\t}();\n\n\tcallbackUtils.CallbackUtils = CallbackUtils;\n\n\tpubsub.__esModule = true;\n\tpubsub.PubSub = void 0;\n\tvar Publisher_1 = Publisher;\n\tvar Subscriber_1 = Subscriber$1;\n\tvar History_1 = History$2;\n\tvar PresenceSubscriber_1 = PresenceSubscriber$1;\n\tvar HereNow_1 = HereNow$1;\n\tvar callback_utils_1$7 = callbackUtils;\n\tvar NetworkStatus_1 = NetworkStatus;\n\tvar ModuleTypes_1$1 = ModuleTypes;\n\tvar g_1$e = g;\n\n\tvar PubSub =\n\t/** @class */\n\tfunction () {\n\t  function PubSub(options) {\n\t    this.subscriber = new Subscriber_1.Subscriber();\n\t    this.options = options;\n\t  }\n\n\t  PubSub.init = function (options) {\n\t    PubSub.instance = new PubSub(options);\n\t  };\n\n\t  PubSub.prototype.initialGoEasySocket = function () {\n\t    this.publisher = new Publisher_1[\"default\"]();\n\t    this.histories = new History_1.History();\n\t    this.presence = new PresenceSubscriber_1.PresenceSubscriber();\n\t    this.hereNows = new HereNow_1.HereNow();\n\t    this.subscriber.initialGoEasySocket();\n\t    this.presence.initialGoEasySocket();\n\t  };\n\n\t  PubSub.prototype.initialBeforeConnect = function () {\n\t    this.subscriber.clearSubscriptions();\n\t  };\n\n\t  PubSub.prototype[\"catch\"] = function (functionObj, callbackOptions) {\n\t    try {\n\t      this.validateOptions();\n\t      functionObj();\n\t    } catch (err) {\n\t      callback_utils_1$7.CallbackUtils.onFailed(callbackOptions, err);\n\t    }\n\t  }; // todo: 方法名\n\n\n\t  PubSub.prototype.validateOptions = function () {\n\t    if (!g_1$e.G.s() || g_1$e.G.s().getStatus() !== NetworkStatus_1.NetworkStatus.CONNECTED) {\n\t      throw Error('Please call connect() first.');\n\t    }\n\n\t    if (!this.options.modules || !this.options.modules.includes(ModuleTypes_1$1.ModuleTypes.PUBSUB)) {\n\t      throw {\n\t        code: 400,\n\t        content: \"Invalid options: module '\".concat(ModuleTypes_1$1.ModuleTypes.PUBSUB, \"' is not enabled\")\n\t      };\n\t    }\n\t  };\n\n\t  PubSub.prototype.publish = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.publisher.publish(options);\n\t    }, options);\n\t  };\n\n\t  PubSub.prototype.subscribe = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.subscriber.subscribe(options);\n\t    }, options);\n\t  };\n\n\t  PubSub.prototype.unsubscribe = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.subscriber.unsubscribe(options);\n\t    }, options);\n\t  };\n\n\t  PubSub.prototype.subscribePresence = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.presence.subscribePresence(options);\n\t    }, options);\n\t  };\n\n\t  PubSub.prototype.unsubscribePresence = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.presence.unsubscribePresence(options);\n\t    }, options);\n\t  };\n\n\t  PubSub.prototype.history = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.histories.get(options);\n\t    }, options);\n\t  };\n\n\t  PubSub.prototype.hereNow = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.hereNows.byChannel(options);\n\t    }, options);\n\t  };\n\n\t  PubSub.prototype.hereNowByUserIds = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.hereNows.byUserId(options);\n\t    }, options);\n\t  };\n\n\t  return PubSub;\n\t}();\n\n\tpubsub.PubSub = PubSub;\n\n\tvar im = {};\n\n\tvar apiEventCenter = {};\n\n\tvar imApiEvents = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  exports.ImApiEvents = void 0;\n\n\t  (function (ImApiEvents) {\n\t    ImApiEvents[\"PRIVATE_MESSAGE_RECEIVED\"] = \"PRIVATE_MESSAGE_RECEIVED\";\n\t    ImApiEvents[\"GROUP_MESSAGE_RECEIVED\"] = \"GROUP_MESSAGE_RECEIVED\";\n\t    ImApiEvents[\"SYSTEM_MESSAGE_RECEIVED\"] = \"SYSTEM_MESSAGE_RECEIVED\";\n\t    ImApiEvents[\"CONVERSATIONS_UPDATED\"] = \"CONVERSATIONS_UPDATED\";\n\t    ImApiEvents[\"USER_PRESENCE\"] = \"USER_PRESENCE\";\n\t    ImApiEvents[\"GROUP_PRESENCE\"] = \"GROUP_PRESENCE\";\n\t    ImApiEvents[\"MESSAGE_DELETED\"] = \"MESSAGE_DELETED\";\n\t    ImApiEvents[\"MESSAGE_READ\"] = \"MESSAGE_READ\";\n\t    ImApiEvents[\"MESSAGE_RECALLED\"] = \"MESSAGE_RECALLED\";\n\t    ImApiEvents[\"CS_MESSAGE_RECEIVED\"] = \"CS_MESSAGE_RECEIVED\";\n\t    ImApiEvents[\"PENDING_CONVERSATIONS_UPDATED\"] = \"PENDING_CONVERSATIONS_UPDATED\";\n\t  })(exports.ImApiEvents || (exports.ImApiEvents = {}));\n\t})(imApiEvents);\n\n\tvar rtcApiEvents = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  exports.RTCApiEvents = void 0;\n\n\t  (function (RTCApiEvents) {\n\t    RTCApiEvents[\"RING\"] = \"RING\";\n\t    RTCApiEvents[\"USER_ACCEPTED\"] = \"USER_ACCEPTED\";\n\t    RTCApiEvents[\"CALL_ENDED\"] = \"CALL_ENDED\";\n\t    RTCApiEvents[\"USER_QUITED\"] = \"USER_QUITED\";\n\t  })(exports.RTCApiEvents || (exports.RTCApiEvents = {}));\n\t})(rtcApiEvents);\n\n\tapiEventCenter.__esModule = true;\n\tapiEventCenter.ApiEventCenter = void 0;\n\tvar im_api_events_1$3 = imApiEvents;\n\tvar rtc_api_events_1 = rtcApiEvents;\n\tvar Emitter$1 = componentEmitter.exports;\n\tvar Calibrator_1$b = Calibrator;\n\n\tvar ApiEventCenter =\n\t/** @class */\n\tfunction () {\n\t  function ApiEventCenter() {\n\t    this.emitter = new Emitter$1();\n\t  } //todo： 考虑是否要在连接断开的时候清空？ 但因为考虑到用户在连接前都可以监听，所以目前考虑客户自己维护\n\n\n\t  ApiEventCenter.prototype.on = function (apiEvent, callback) {\n\t    if (!Calibrator_1$b[\"default\"].isString(apiEvent)) {\n\t      throw Error('event require a string.');\n\t    }\n\n\t    if (!Calibrator_1$b[\"default\"].isDef(im_api_events_1$3.ImApiEvents[apiEvent]) && !Calibrator_1$b[\"default\"].isDef(rtc_api_events_1.RTCApiEvents[apiEvent])) {\n\t      throw Error('An event that is not defined');\n\t    }\n\n\t    if (!Calibrator_1$b[\"default\"].isFunction(callback)) {\n\t      throw Error('callback must be a function');\n\t    }\n\n\t    this.emitter.on(apiEvent, callback);\n\t  };\n\n\t  ApiEventCenter.prototype.fire = function (apiEvent, data) {\n\t    this.emitter.emit(apiEvent, data);\n\t  };\n\n\t  ApiEventCenter.prototype.off = function (apiEvent, callback) {\n\t    this.emitter.off(apiEvent, callback);\n\t  };\n\n\t  return ApiEventCenter;\n\t}();\n\n\tapiEventCenter.ApiEventCenter = ApiEventCenter;\n\n\tvar GoEasyUploader$1 = {};\n\n\tvar FileUploader$1 = {};\n\n\tvar UniAppFileUploader$1 = {};\n\n\tvar AbstractFileUploader = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\n\t  var AbstractFileUploader =\n\t  /** @class */\n\t  function () {\n\t    function AbstractFileUploader() {}\n\n\t    AbstractFileUploader.prototype.upload = function (uploadRequest, onProgress) {\n\t      throw Error('Not implementation yet.');\n\t    };\n\n\t    return AbstractFileUploader;\n\t  }();\n\n\t  exports[\"default\"] = AbstractFileUploader;\n\t})(AbstractFileUploader);\n\n\tvar __extends$k = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tUniAppFileUploader$1.__esModule = true;\n\tUniAppFileUploader$1.uniAppFileUploader = void 0;\n\tvar AbstractFileUploader_1$2 = AbstractFileUploader;\n\n\tvar UniAppFileUploader =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$k(UniAppFileUploader, _super);\n\n\t  function UniAppFileUploader() {\n\t    return _super.call(this) || this;\n\t  }\n\n\t  UniAppFileUploader.prototype.upload = function (uploadRequest, onprogress) {\n\t    var _this = this;\n\n\t    try {\n\t      return new Promise(function (resolve, reject) {\n\t        var uploadTask = uni.uploadFile({\n\t          url: uploadRequest.host,\n\t          filePath: _this.getTempFilePath(uploadRequest),\n\t          name: 'file',\n\t          formData: uploadRequest.parameters,\n\t          success: function success(res) {\n\t            if (res.statusCode === 200) {\n\t              var content = uploadRequest.payload;\n\t              content.message = res.errMsg;\n\t              resolve({\n\t                code: 200,\n\t                content: content\n\t              });\n\t            } else {\n\t              reject({\n\t                code: res.statusCode,\n\t                content: res.errMsg\n\t              });\n\t            }\n\t          },\n\t          fail: function fail(err) {\n\t            reject({\n\t              code: 500,\n\t              content: err.errMsg\n\t            });\n\t          }\n\t        });\n\t        uploadTask.onProgressUpdate(function (res) {\n\t          onprogress && onprogress(res);\n\t        });\n\t      });\n\t    } catch (e) {\n\t      return new Promise(function (resolve, reject) {\n\t        reject({\n\t          code: 500,\n\t          content: e\n\t        });\n\t      });\n\t    }\n\t  };\n\n\t  UniAppFileUploader.prototype.getTempFilePath = function (uploadRequest) {\n\t    console.log('uploadRequest', uploadRequest);\n\t    var file = uploadRequest.file; //tempFilePath-->语音消息 fullPath-->安卓文件消息  path-->H5、wx文件消息\n\n\t    var tempFilePath = file.tempFilePath || file.fullPath || file.path;\n\t    return tempFilePath;\n\t  };\n\n\t  return UniAppFileUploader;\n\t}(AbstractFileUploader_1$2[\"default\"]);\n\n\tvar uniAppFileUploader = new UniAppFileUploader();\n\tUniAppFileUploader$1.uniAppFileUploader = uniAppFileUploader;\n\n\tvar WXFileUploader$1 = {};\n\n\tvar __extends$j = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tWXFileUploader$1.__esModule = true;\n\tWXFileUploader$1.wxFileUploader = void 0;\n\tvar AbstractFileUploader_1$1 = AbstractFileUploader;\n\n\tvar WXFileUploader =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$j(WXFileUploader, _super);\n\n\t  function WXFileUploader() {\n\t    return _super !== null && _super.apply(this, arguments) || this;\n\t  }\n\n\t  WXFileUploader.prototype.upload = function (uploadRequest, onprogress) {\n\t    var _this = this;\n\n\t    try {\n\t      return new Promise(function (resolve, reject) {\n\t        var uploadTask = wx.uploadFile({\n\t          url: uploadRequest.host,\n\t          filePath: _this.getTempFilePath(uploadRequest),\n\t          name: 'file',\n\t          formData: uploadRequest.parameters,\n\t          success: function success(res) {\n\t            if (res.statusCode === 200) {\n\t              var content = uploadRequest.payload;\n\t              content.message = res.errMsg;\n\t              resolve({\n\t                code: 200,\n\t                content: content\n\t              });\n\t            } else {\n\t              reject({\n\t                code: res.statusCode,\n\t                content: res.errMsg\n\t              });\n\t            }\n\t          },\n\t          fail: function fail(err) {\n\t            reject({\n\t              code: 500,\n\t              content: err.errMsg\n\t            });\n\t          }\n\t        });\n\t        uploadTask.onProgressUpdate(function (res) {\n\t          onprogress && onprogress(res);\n\t        });\n\t      });\n\t    } catch (e) {\n\t      return new Promise(function (resolve, reject) {\n\t        reject({\n\t          code: 500,\n\t          content: e\n\t        });\n\t      });\n\t    }\n\t  };\n\n\t  WXFileUploader.prototype.getTempFilePath = function (uploadRequest) {\n\t    var file = uploadRequest.file || uploadRequest.fileRes; // path-->图片、文件 tempFilePath-->视频、语音\n\n\t    return file.path || file.tempFilePath;\n\t  };\n\n\t  return WXFileUploader;\n\t}(AbstractFileUploader_1$1[\"default\"]);\n\n\tvar wxFileUploader = new WXFileUploader();\n\tWXFileUploader$1.wxFileUploader = wxFileUploader;\n\n\tvar HtmlFileUploader$1 = {};\n\n\tvar __extends$i = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tHtmlFileUploader$1.__esModule = true;\n\tHtmlFileUploader$1.htmlFileUploader = void 0;\n\tvar AbstractFileUploader_1 = AbstractFileUploader;\n\n\tvar HtmlFileUploader =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$i(HtmlFileUploader, _super);\n\n\t  function HtmlFileUploader() {\n\t    return _super.call(this) || this;\n\t  }\n\n\t  HtmlFileUploader.prototype.upload = function (uploadRequest, onprogress) {\n\t    try {\n\t      return new Promise(function (resolve, reject) {\n\t        var xhr = new XMLHttpRequest();\n\t        xhr.open('post', uploadRequest.host, true);\n\n\t        for (var key in uploadRequest.headers) {\n\t          xhr.setRequestHeader(key, uploadRequest.headers[key]);\n\t        }\n\n\t        xhr.upload.onprogress = function (progress) {\n\t          onprogress && onprogress(progress);\n\t        };\n\n\t        xhr.upload.onloadstart = function (progress) {\n\t          onprogress && onprogress(progress);\n\t        };\n\n\t        xhr.upload.onloadend = function (progress) {\n\t          onprogress && onprogress(progress);\n\t        }; //构建formData\n\n\n\t        var formData = new FormData();\n\n\t        for (var fd in uploadRequest.parameters) {\n\t          if (fd == 'fileRes') {\n\t            formData.append('file', uploadRequest.parameters[fd]);\n\t          } else {\n\t            formData.append(fd, uploadRequest.parameters[fd]);\n\t          }\n\t        }\n\n\t        xhr.send(formData);\n\n\t        xhr.onreadystatechange = function () {\n\t          if (xhr.readyState == 4) {\n\t            if (xhr.status >= 200 && xhr.status < 300 || xhr.status == 304) {\n\t              var content = uploadRequest.payload;\n\t              content.message = xhr.responseText;\n\t              resolve({\n\t                code: 200,\n\t                content: content\n\t              });\n\t            } else {\n\t              reject({\n\t                code: xhr.status,\n\t                content: xhr.responseText\n\t              });\n\t            }\n\t          }\n\t        };\n\t      });\n\t    } catch (e) {\n\t      return new Promise(function (resolve, reject) {\n\t        reject({\n\t          code: 500,\n\t          content: e\n\t        });\n\t      });\n\t    }\n\t  };\n\n\t  return HtmlFileUploader;\n\t}(AbstractFileUploader_1[\"default\"]);\n\n\tvar htmlFileUploader = new HtmlFileUploader();\n\tHtmlFileUploader$1.htmlFileUploader = htmlFileUploader;\n\n\tFileUploader$1.__esModule = true;\n\tFileUploader$1.fileUploader = FileUploader$1.FileUploader = void 0;\n\tvar UniAppFileUploader_1 = UniAppFileUploader$1;\n\tvar WXFileUploader_1 = WXFileUploader$1;\n\tvar HtmlFileUploader_1 = HtmlFileUploader$1;\n\tvar framework_detector_1$1 = frameworkDetector;\n\n\tvar FileUploader =\n\t/** @class */\n\tfunction () {\n\t  function FileUploader() {\n\t    var _a;\n\n\t    this.uploader = (_a = {}, _a[framework_detector_1$1.Framework.UNIAPP] = UniAppFileUploader_1.uniAppFileUploader, _a[framework_detector_1$1.Framework.NATIVE_APPLET_WX] = WXFileUploader_1.wxFileUploader, _a[framework_detector_1$1.Framework.UNKNOWN] = HtmlFileUploader_1.htmlFileUploader, _a);\n\t  }\n\n\t  FileUploader.prototype.upload = function (uploadRequest, onProgress) {\n\t    var framework = framework_detector_1$1.FrameworkDetector.currentFramework();\n\t    console.log('upload', framework);\n\t    return this.uploader[framework].upload(uploadRequest, onProgress);\n\t  };\n\n\t  return FileUploader;\n\t}();\n\n\tFileUploader$1.FileUploader = FileUploader;\n\tvar fileUploader = new FileUploader();\n\tFileUploader$1.fileUploader = fileUploader;\n\n\tvar RequestBuilder = {};\n\n\tvar OSSRequestFactory$1 = {};\n\n\tvar OssType = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  exports.OssType = void 0;\n\n\t  (function (OssType) {\n\t    OssType[\"aliYun\"] = \"ALI\";\n\t    OssType[\"qiNiu\"] = \"QN\";\n\t  })(exports.OssType || (exports.OssType = {}));\n\t})(OssType);\n\n\tvar AliyunOSSRequestBuilder = {};\n\n\tvar FileUploadRequest = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\n\t  var FileUploadRequest =\n\t  /** @class */\n\t  function () {\n\t    function FileUploadRequest(host, headers, parameters, file, payload) {\n\t      this.host = host;\n\t      this.headers = headers;\n\t      this.parameters = parameters;\n\t      this.file = file;\n\t      this.payload = payload;\n\t    }\n\n\t    return FileUploadRequest;\n\t  }();\n\n\t  exports[\"default\"] = FileUploadRequest;\n\t})(FileUploadRequest);\n\n\tvar AbstractOSSRequestBuilder = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\n\t  var AbstractOSSRequestBuilder =\n\t  /** @class */\n\t  function () {\n\t    function AbstractOSSRequestBuilder() {}\n\n\t    AbstractOSSRequestBuilder.prototype.build = function (token, file, messageType) {};\n\n\t    AbstractOSSRequestBuilder.prototype.newFileName = function (token) {\n\t      return token && token.newFilename || '';\n\t    };\n\n\t    return AbstractOSSRequestBuilder;\n\t  }();\n\n\t  exports[\"default\"] = AbstractOSSRequestBuilder;\n\t})(AbstractOSSRequestBuilder);\n\n\tvar MessageType = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  exports.MessageType = void 0;\n\n\t  (function (MessageType) {\n\t    MessageType[\"TEXT\"] = \"text\";\n\t    MessageType[\"IMAGE\"] = \"image\";\n\t    MessageType[\"FILE\"] = \"file\";\n\t    MessageType[\"VIDEO\"] = \"video\";\n\t    MessageType[\"AUDIO\"] = \"audio\";\n\t  })(exports.MessageType || (exports.MessageType = {}));\n\t})(MessageType);\n\n\tvar __extends$h = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tAliyunOSSRequestBuilder.__esModule = true;\n\tAliyunOSSRequestBuilder.aliYunOSSRequestBuilder = AliyunOSSRequestBuilder.AliYunOSSRequestBuilder = void 0;\n\tvar FileUploadRequest_1$1 = FileUploadRequest;\n\tvar AbstractOSSRequestBuilder_1$1 = AbstractOSSRequestBuilder;\n\tvar MessageType_1$3 = MessageType;\n\n\tvar AliYunOSSRequestBuilder =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$h(AliYunOSSRequestBuilder, _super);\n\n\t  function AliYunOSSRequestBuilder() {\n\t    return _super.call(this) || this;\n\t  }\n\n\t  AliYunOSSRequestBuilder.prototype.url = function (token) {\n\t    return token.host + '/' + token.dir + '/' + this.newFileName(token);\n\t  };\n\n\t  AliYunOSSRequestBuilder.prototype.build = function (token, file, messageType) {\n\t    var parameters;\n\t    parameters = {\n\t      key: token.dir + \"/\" + this.newFileName(token),\n\t      'OSSAccessKeyId': token.accessKeyId,\n\t      'policy': token.policy,\n\t      'signature': token.signature,\n\t      success_action_status: '200',\n\t      fileRes: file\n\t    };\n\n\t    if (MessageType_1$3.MessageType.FILE === messageType) {\n\t      parameters = {\n\t        key: token.dir + \"/\" + this.newFileName(token),\n\t        'OSSAccessKeyId': token.accessKeyId,\n\t        'policy': token.policy,\n\t        'signature': token.signature,\n\t        success_action_status: '200',\n\t        'Content-Disposition': 'attachment;filename=' + file.name,\n\t        fileRes: file\n\t      };\n\t    }\n\n\t    var payload = {\n\t      newFileName: this.newFileName(token),\n\t      url: this.url(token)\n\t    };\n\t    return new FileUploadRequest_1$1[\"default\"](token.host, null, parameters, file, payload);\n\t  };\n\n\t  return AliYunOSSRequestBuilder;\n\t}(AbstractOSSRequestBuilder_1$1[\"default\"]);\n\n\tAliyunOSSRequestBuilder.AliYunOSSRequestBuilder = AliYunOSSRequestBuilder;\n\tvar aliYunOSSRequestBuilder = new AliYunOSSRequestBuilder();\n\tAliyunOSSRequestBuilder.aliYunOSSRequestBuilder = aliYunOSSRequestBuilder;\n\n\tvar QiNiuYunOSSRequestBuilder$1 = {};\n\n\tvar __extends$g = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tQiNiuYunOSSRequestBuilder$1.__esModule = true;\n\tQiNiuYunOSSRequestBuilder$1.qiNiuYunOSSRequestBuilder = void 0;\n\tvar AbstractOSSRequestBuilder_1 = AbstractOSSRequestBuilder;\n\tvar FileUploadRequest_1 = FileUploadRequest;\n\n\tvar QiNiuYunOSSRequestBuilder =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$g(QiNiuYunOSSRequestBuilder, _super);\n\n\t  function QiNiuYunOSSRequestBuilder() {\n\t    return _super.call(this) || this;\n\t  }\n\n\t  QiNiuYunOSSRequestBuilder.prototype.url = function (token) {\n\t    return token.downloadUrl;\n\t  };\n\n\t  QiNiuYunOSSRequestBuilder.prototype.build = function (token, file) {\n\t    var parameters = {\n\t      key: this.newFileName(token),\n\t      token: token.token,\n\t      file: file\n\t    };\n\t    var payload = {\n\t      newFileName: this.newFileName(token),\n\t      url: this.url(token)\n\t    };\n\t    return new FileUploadRequest_1[\"default\"](token.host, null, parameters, file, payload);\n\t  };\n\n\t  return QiNiuYunOSSRequestBuilder;\n\t}(AbstractOSSRequestBuilder_1[\"default\"]);\n\n\tvar qiNiuYunOSSRequestBuilder = new QiNiuYunOSSRequestBuilder();\n\tQiNiuYunOSSRequestBuilder$1.qiNiuYunOSSRequestBuilder = qiNiuYunOSSRequestBuilder;\n\n\tOSSRequestFactory$1.__esModule = true;\n\tOSSRequestFactory$1.OSSRequestFactory = void 0;\n\tvar OssType_1 = OssType;\n\tvar AliyunOSSRequestBuilder_1 = AliyunOSSRequestBuilder;\n\tvar QiNiuYunOSSRequestBuilder_1 = QiNiuYunOSSRequestBuilder$1;\n\n\tvar OSSRequestFactory =\n\t/** @class */\n\tfunction () {\n\t  function OSSRequestFactory(type) {\n\t    if (type === OssType_1.OssType.aliYun) {\n\t      return AliyunOSSRequestBuilder_1.aliYunOSSRequestBuilder;\n\t    } else {\n\t      return QiNiuYunOSSRequestBuilder_1.qiNiuYunOSSRequestBuilder;\n\t    }\n\t  }\n\n\t  OSSRequestFactory.prototype.build = function (token, file, messageType) {};\n\n\t  return OSSRequestFactory;\n\t}();\n\n\tOSSRequestFactory$1.OSSRequestFactory = OSSRequestFactory;\n\n\tvar UploadTokenResolver = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var Rocket_1 = Rocket;\n\t  var Permission_1 = Permission;\n\t  var SocketTimeout_1 = SocketTimeout;\n\t  var g_1 = g;\n\n\t  var UploadTokenResolver =\n\t  /** @class */\n\t  function () {\n\t    function UploadTokenResolver() {}\n\n\t    UploadTokenResolver.prototype.resolve = function (name) {\n\t      return new Promise(function (resolve, reject) {\n\t        var rocket = new Rocket_1[\"default\"]({\n\t          name: 'uploadToken',\n\t          params: {\n\t            filename: name\n\t          },\n\t          permission: Permission_1.Permission.WRITE,\n\t          singleTimeout: SocketTimeout_1.SocketTimeout.commonRequestSingle,\n\t          totalTimeout: SocketTimeout_1.SocketTimeout.commonRequestTotal,\n\t          fail: function fail(e) {\n\t            reject(e);\n\t          },\n\t          success: function success(result) {\n\t            if (result.code === 200) {\n\t              resolve(result);\n\t            } else {\n\t              reject(result);\n\t            }\n\t          }\n\t        });\n\t        g_1.G.s().emit(rocket);\n\t      });\n\t    };\n\n\t    return UploadTokenResolver;\n\t  }();\n\n\t  exports[\"default\"] = UploadTokenResolver;\n\t})(UploadTokenResolver);\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var OSSRequestFactory_1 = OSSRequestFactory$1;\n\t  var UploadTokenResolver_1 = UploadTokenResolver;\n\n\t  var RequestBuilder =\n\t  /** @class */\n\t  function () {\n\t    function RequestBuilder() {\n\t      this.uploadTokenResolver = new UploadTokenResolver_1[\"default\"]();\n\t    }\n\n\t    RequestBuilder.prototype.build = function (file, name, messageType) {\n\t      var _this = this;\n\n\t      return new Promise(function (resolve, reject) {\n\t        _this.uploadTokenResolver.resolve(name).then(function (result) {\n\t          var token = result.content;\n\t          resolve(new OSSRequestFactory_1.OSSRequestFactory(token.vendor).build(token, file, messageType));\n\t        })[\"catch\"](function (e) {\n\t          reject(e);\n\t        });\n\t      });\n\t    };\n\n\t    return RequestBuilder;\n\t  }();\n\n\t  exports[\"default\"] = RequestBuilder;\n\t})(RequestBuilder);\n\n\tGoEasyUploader$1.__esModule = true;\n\tGoEasyUploader$1.GoEasyUploader = void 0;\n\tvar FileUploader_1 = FileUploader$1;\n\tvar RequestBuilder_1 = RequestBuilder;\n\n\tvar GoEasyUploader =\n\t/** @class */\n\tfunction () {\n\t  function GoEasyUploader() {\n\t    this.requestBuilder = new RequestBuilder_1[\"default\"]();\n\t    this.fileUploader = FileUploader_1.fileUploader;\n\t  }\n\n\t  GoEasyUploader.prototype.upload = function (file, name, onProgress, messageType) {\n\t    var _this = this;\n\n\t    return new Promise(function (resolve, reject) {\n\t      var promise = _this.requestBuilder.build(file, name, messageType);\n\n\t      promise.then(function (uploadRequest) {\n\t        resolve(_this.doUpload(uploadRequest, onProgress));\n\t      })[\"catch\"](function (e) {\n\t        reject(e);\n\t      });\n\t    });\n\t  };\n\n\t  GoEasyUploader.prototype.customizeUpload = function (uploadRequest, onProgress) {\n\t    this.doUpload(uploadRequest, onProgress);\n\t  };\n\n\t  GoEasyUploader.prototype.doUpload = function (uploadRequest, onProgress) {\n\t    return this.fileUploader.upload(uploadRequest, onProgress);\n\t  };\n\n\t  return GoEasyUploader;\n\t}();\n\n\tGoEasyUploader$1.GoEasyUploader = GoEasyUploader;\n\n\tvar IMMessageSender = {};\n\n\tvar PayloadImprover$1 = {};\n\n\tvar FileMessagePayloadImprover$1 = {};\n\n\tvar AbstractPayloadImprover$1 = {};\n\n\tAbstractPayloadImprover$1.__esModule = true;\n\tAbstractPayloadImprover$1.AbstractPayloadImprover = void 0;\n\n\tvar AbstractPayloadImprover =\n\t/** @class */\n\tfunction () {\n\t  function AbstractPayloadImprover() {}\n\n\t  return AbstractPayloadImprover;\n\t}();\n\n\tAbstractPayloadImprover$1.AbstractPayloadImprover = AbstractPayloadImprover;\n\n\tvar __extends$f = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tFileMessagePayloadImprover$1.__esModule = true;\n\tFileMessagePayloadImprover$1.FileMessagePayloadImprover = void 0;\n\tvar AbstractPayloadImprover_1 = AbstractPayloadImprover$1;\n\tvar GoEasyUploader_1$1 = GoEasyUploader$1;\n\tvar MessageType_1$2 = MessageType;\n\n\tvar FileMessagePayloadImprover =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$f(FileMessagePayloadImprover, _super);\n\n\t  function FileMessagePayloadImprover() {\n\t    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n\t    _this.goEasyUploader = new GoEasyUploader_1$1.GoEasyUploader();\n\t    return _this;\n\t  }\n\n\t  FileMessagePayloadImprover.prototype.improve = function (options) {\n\t    var _this = this;\n\n\t    var message = options.message;\n\t    return new Promise(function (resolve, reject) {\n\t      var name;\n\t      var payload;\n\t      var buildOptions = message.buildOptions;\n\t      var createOptions = buildOptions.createOptions;\n\n\t      if (message.type === MessageType_1$2.MessageType.VIDEO) {\n\t        payload = message.payload;\n\t        name = payload.video.name;\n\t      } else {\n\t        payload = message.payload;\n\t        name = payload.name;\n\t      }\n\n\t      var uploadPromise = _this.goEasyUploader.upload(createOptions.file, name, createOptions.onProgress, message.type);\n\n\t      uploadPromise.then(function (uploadResponse) {\n\t        _this.setPayload(uploadResponse, message);\n\n\t        resolve();\n\t      })[\"catch\"](function (e) {\n\t        reject(e);\n\t      });\n\t    });\n\t  };\n\n\t  FileMessagePayloadImprover.prototype.setPayload = function (uploadResponse, message) {\n\t    var _a = uploadResponse.content,\n\t        content = _a === void 0 ? {} : _a;\n\t    var payload = message.payload;\n\t    payload.url = content.url;\n\t  };\n\n\t  return FileMessagePayloadImprover;\n\t}(AbstractPayloadImprover_1.AbstractPayloadImprover);\n\n\tFileMessagePayloadImprover$1.FileMessagePayloadImprover = FileMessagePayloadImprover;\n\n\tvar VideoMessagePayloadImprover$1 = {};\n\n\tvar __extends$e = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tVideoMessagePayloadImprover$1.__esModule = true;\n\tVideoMessagePayloadImprover$1.VideoMessagePayloadImprover = void 0;\n\tvar FileMessagePayloadImprover_1$1 = FileMessagePayloadImprover$1;\n\n\tvar VideoMessagePayloadImprover =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$e(VideoMessagePayloadImprover, _super);\n\n\t  function VideoMessagePayloadImprover() {\n\t    return _super !== null && _super.apply(this, arguments) || this;\n\t  }\n\n\t  VideoMessagePayloadImprover.prototype.setPayload = function (uploadResponse, message) {\n\t    uploadResponse.content;\n\t    var payload = message.payload;\n\t    var rule = '?x-oss-process=video/snapshot,t_0000,f_jpg,w_' + payload.video.width + ',m_fast,ar_auto';\n\t    payload.video.url = uploadResponse.content.url;\n\t    payload.thumbnail.url = uploadResponse.content.url + rule;\n\t    payload.video.name = uploadResponse.content.newFileName;\n\t  };\n\n\t  return VideoMessagePayloadImprover;\n\t}(FileMessagePayloadImprover_1$1.FileMessagePayloadImprover);\n\n\tVideoMessagePayloadImprover$1.VideoMessagePayloadImprover = VideoMessagePayloadImprover;\n\n\tPayloadImprover$1.__esModule = true;\n\tPayloadImprover$1.PayloadImprover = void 0;\n\tvar FileMessagePayloadImprover_1 = FileMessagePayloadImprover$1;\n\tvar VideoMessagePayloadImprover_1 = VideoMessagePayloadImprover$1;\n\tvar MessageType_1$1 = MessageType;\n\n\tvar PayloadImprover =\n\t/** @class */\n\tfunction () {\n\t  function PayloadImprover() {\n\t    var _a;\n\n\t    this.improvers = (_a = {}, _a[MessageType_1$1.MessageType.FILE] = new FileMessagePayloadImprover_1.FileMessagePayloadImprover(), _a[MessageType_1$1.MessageType.AUDIO] = new FileMessagePayloadImprover_1.FileMessagePayloadImprover(), _a[MessageType_1$1.MessageType.IMAGE] = new FileMessagePayloadImprover_1.FileMessagePayloadImprover(), _a[MessageType_1$1.MessageType.VIDEO] = new VideoMessagePayloadImprover_1.VideoMessagePayloadImprover(), _a);\n\t  }\n\n\t  PayloadImprover.prototype.improve = function (options) {\n\t    var payloadImprover = this.improvers[options.message.type];\n\n\t    if (payloadImprover) {\n\t      return payloadImprover.improve(options);\n\t    }\n\n\t    return Promise.resolve();\n\t  };\n\n\t  return PayloadImprover;\n\t}();\n\n\tPayloadImprover$1.PayloadImprover = PayloadImprover;\n\n\tvar BulletMessage = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var MessageType_1 = MessageType;\n\t  var GoEasy_1 = GoEasy$1;\n\n\t  var BulletMessage =\n\t  /** @class */\n\t  function () {\n\t    function BulletMessage(message, to, notification, wxmpTemplateMsg, accessToken) {\n\t      this.validate(message);\n\t      this.mt = message.type;\n\t      this.to = to.id.toString();\n\t      this.d = JSON.stringify(to.data);\n\t      this.p = JSON.stringify(message.payload);\n\n\t      if (notification) {\n\t        this.nt = notification;\n\t      }\n\n\t      if (accessToken) {\n\t        this.at = accessToken;\n\t      }\n\n\t      if (wxmpTemplateMsg) {\n\t        // @ts-ignore /todo：暂时先这样\n\t        wxmpTemplateMsg.data = JSON.stringify(wxmpTemplateMsg.data);\n\t        this.wxmpTemplateMsg = wxmpTemplateMsg;\n\t      }\n\n\t      var scene = to.type;\n\t      this.t = scene;\n\n\t      if (scene === GoEasy_1.Scene.CS) {\n\t        var csMessage = message;\n\t        this.tid = csMessage.teamId;\n\t      }\n\n\t      this.guid = message.messageId;\n\t    }\n\n\t    BulletMessage.prototype.validate = function (message) {\n\t      if (message.type === MessageType_1.MessageType.TEXT) {\n\t        var len = JSON.stringify(message.payload).length;\n\n\t        if (len > 3 * 1024) {\n\t          throw Error('message-length limit 3kb');\n\t        }\n\t      }\n\t    };\n\n\t    return BulletMessage;\n\t  }();\n\n\t  exports[\"default\"] = BulletMessage;\n\t})(BulletMessage);\n\n\tvar goeasyEventCenter = {};\n\n\tvar EmitterEventDriver$1 = {};\n\n\tEmitterEventDriver$1.__esModule = true;\n\tEmitterEventDriver$1.EmitterEventDriver = void 0;\n\tvar Emitter = componentEmitter.exports;\n\n\tvar EmitterEventDriver =\n\t/** @class */\n\tfunction () {\n\t  function EmitterEventDriver() {\n\t    this.emitter = new Emitter();\n\t  }\n\n\t  EmitterEventDriver.prototype.on = function (name, callback) {\n\t    this.emitter.on(name, callback);\n\t    return this;\n\t  };\n\n\t  EmitterEventDriver.prototype.once = function (name, callback) {\n\t    this.emitter.once(name, callback);\n\t    return this;\n\t  };\n\n\t  EmitterEventDriver.prototype.off = function (name, callback) {\n\t    this.emitter.off(name, callback);\n\t    return this;\n\t  };\n\n\t  EmitterEventDriver.prototype.fire = function (name, data) {\n\t    this.emitter.emit(name, data);\n\t    return this;\n\t  };\n\n\t  return EmitterEventDriver;\n\t}();\n\n\tEmitterEventDriver$1.EmitterEventDriver = EmitterEventDriver;\n\n\tgoeasyEventCenter.__esModule = true;\n\tgoeasyEventCenter.GoEasyEventCenter = void 0;\n\tvar EmitterEventDriver_1 = EmitterEventDriver$1;\n\n\tvar GoEasyEventCenter =\n\t/** @class */\n\tfunction () {\n\t  function GoEasyEventCenter() {}\n\n\t  GoEasyEventCenter.initial = function () {\n\t    this.eventDriver = new EmitterEventDriver_1.EmitterEventDriver();\n\t  };\n\n\t  GoEasyEventCenter.on = function (eventname, callback) {\n\t    this.eventDriver.on(eventname, callback);\n\t  };\n\n\t  GoEasyEventCenter.off = function (eventname, callback) {\n\t    this.eventDriver.off(eventname, callback);\n\t  };\n\n\t  GoEasyEventCenter.once = function (eventname, callback) {\n\t    this.eventDriver.once(eventname, callback);\n\t  };\n\n\t  GoEasyEventCenter.fire = function (eventname, data) {\n\t    this.eventDriver.fire(eventname, data);\n\t  };\n\n\t  return GoEasyEventCenter;\n\t}();\n\n\tgoeasyEventCenter.GoEasyEventCenter = GoEasyEventCenter;\n\n\tvar internalEvents = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  exports.IM_INTERNAL_EVENTS = void 0;\n\n\t  (function (IM_INTERNAL_EVENTS) {\n\t    IM_INTERNAL_EVENTS[\"MESSAGE_SENDING\"] = \"IM_INTERNAL_MESSAGE_SENDING\";\n\t    IM_INTERNAL_EVENTS[\"MESSAGE_SEND_SUCCESS\"] = \"IM_INTERNAL_MESSAGE_SEND_SUCCESS\";\n\t    IM_INTERNAL_EVENTS[\"MESSAGE_SEND_FAILED\"] = \"IM_INTERNAL_MESSAGE_SEND_FAILED\";\n\t    IM_INTERNAL_EVENTS[\"MESSAGE_RECEIVED\"] = \"IM_INTERNAL_MESSAGE_RECEIVED\";\n\t    IM_INTERNAL_EVENTS[\"MAX_MESSAGE_CHANGED\"] = \"IM_INTERNAL_MAX_MESSAGE_CHANGED\";\n\t    IM_INTERNAL_EVENTS[\"UNREAD_AMOUNT_CHANGED\"] = \"IM_INTERNAL_UNREAD_MESSAGE_CHANGED\";\n\t    IM_INTERNAL_EVENTS[\"CS_ONLINE_SUCCESS\"] = \"CS_ONLINE_SUCCESS\";\n\t    IM_INTERNAL_EVENTS[\"CS_OFFLINE_SUCCESS\"] = \"CS_OFFLINE_SUCCESS\";\n\t    IM_INTERNAL_EVENTS[\"CS_ACCEPTED\"] = \"CS_ACCEPTED\";\n\t    IM_INTERNAL_EVENTS[\"CS_ENDED\"] = \"CS_ENDED\";\n\t    IM_INTERNAL_EVENTS[\"CS_TRANSFER\"] = \"CS_TRANSFER\";\n\t    IM_INTERNAL_EVENTS[\"CS_AGENT_MESSAGE_RECEIVED\"] = \"CS_AGENT_MESSAGE_RECEIVED\";\n\t  })(exports.IM_INTERNAL_EVENTS || (exports.IM_INTERNAL_EVENTS = {}));\n\t})(internalEvents);\n\n\tvar AbstractMessage$1 = {};\n\n\tAbstractMessage$1.__esModule = true;\n\tAbstractMessage$1.AbstractMessage = void 0;\n\tvar g_1$d = g;\n\n\tvar AbstractMessage =\n\t/** @class */\n\tfunction () {\n\t  function AbstractMessage() {}\n\n\t  AbstractMessage.prototype.clearUseLessAttribute = function () {\n\t    delete this.buildOptions;\n\t  };\n\n\t  AbstractMessage.prototype.isOtherSent = function () {\n\t    return this.senderId !== g_1$d.G.u();\n\t  };\n\n\t  AbstractMessage.prototype.getToData = function () {\n\t    var buildOptions = this.buildOptions;\n\t    var createOptions = buildOptions.createOptions;\n\t    return createOptions.to.data;\n\t  };\n\n\t  return AbstractMessage;\n\t}();\n\n\tAbstractMessage$1.AbstractMessage = AbstractMessage;\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var Rocket_1 = Rocket;\n\t  var Permission_1 = Permission;\n\t  var SocketTimeout_1 = SocketTimeout;\n\t  var PayloadImprover_1 = PayloadImprover$1;\n\t  var BulletMessage_1 = BulletMessage;\n\t  var goeasy_event_center_1 = goeasyEventCenter;\n\t  var internal_events_1 = internalEvents;\n\t  var GoEasy_1 = GoEasy$1;\n\t  var AbstractMessage_1 = AbstractMessage$1;\n\t  var RocketTypes_1 = RocketTypes;\n\t  var g_1 = g;\n\t  var callback_utils_1 = callbackUtils;\n\n\t  var IMMessageSender =\n\t  /** @class */\n\t  function () {\n\t    function IMMessageSender() {\n\t      this.payloadImprover = new PayloadImprover_1.PayloadImprover();\n\t    }\n\n\t    IMMessageSender.prototype.send = function (sendOptions) {\n\t      var _this = this;\n\n\t      this.validate(sendOptions);\n\t      var message = sendOptions.message;\n\t      var accessToken = sendOptions.accessToken;\n\t      var buildOptions = message.buildOptions;\n\t      var createOptions = buildOptions.createOptions;\n\t      var notification = createOptions.notification;\n\t      var wxmpTemplateMsg = createOptions.wxmpTemplateMsg;\n\t      var to = createOptions.to;\n\n\t      if (!to.data) {\n\t        to.data = {};\n\t      }\n\n\t      message.status = GoEasy_1.MessageStatus.SENDING;\n\t      var buildPromise = buildOptions.complete;\n\t      var improvePromise = this.payloadImprover.improve(sendOptions);\n\t      Promise.all([buildPromise, improvePromise]).then(function () {\n\t        _this.doSend(message, to, notification, wxmpTemplateMsg, accessToken, sendOptions);\n\t      })[\"catch\"](function (error) {\n\t        message.status = GoEasy_1.MessageStatus.FAIL;\n\t        callback_utils_1.CallbackUtils.onFailed(sendOptions, {\n\t          code: error.code || 400,\n\t          content: error.content || error\n\t        });\n\t      });\n\t    };\n\n\t    IMMessageSender.prototype.doSend = function (message, to, notification, wxmpTemplateMsg, accessToken, options) {\n\t      var bulletMessage = new BulletMessage_1[\"default\"](message, to, notification, wxmpTemplateMsg, accessToken);\n\t      goeasy_event_center_1.GoEasyEventCenter.fire(internal_events_1.IM_INTERNAL_EVENTS.MESSAGE_SENDING, message);\n\t      var rocket = new Rocket_1[\"default\"]({\n\t        name: RocketTypes_1.RocketTypes.publishIM,\n\t        params: bulletMessage,\n\t        unique: true,\n\t        permission: Permission_1.Permission.WRITE,\n\t        singleTimeout: SocketTimeout_1.SocketTimeout.commonRequestSingle,\n\t        totalTimeout: SocketTimeout_1.SocketTimeout.commonRequestTotal,\n\t        fail: function fail(error) {\n\t          message.status = GoEasy_1.MessageStatus.FAIL;\n\t          goeasy_event_center_1.GoEasyEventCenter.fire(internal_events_1.IM_INTERNAL_EVENTS.MESSAGE_SEND_FAILED, message);\n\t          callback_utils_1.CallbackUtils.onFailed(options, {\n\t            code: error.resultCode,\n\t            content: error.content\n\t          });\n\t        },\n\t        success: function success(result) {\n\t          message.status = GoEasy_1.MessageStatus.SUCCESS;\n\t          message.timestamp = result.content.timestamp;\n\n\t          if (message.scene() === GoEasy_1.Scene.CS) {\n\t            var csMessage = message;\n\n\t            if (csMessage.customerId() !== g_1.G.u()) {\n\t              csMessage.sessionId = result.content.sessionId;\n\t            }\n\t          }\n\n\t          message.clearUseLessAttribute();\n\t          goeasy_event_center_1.GoEasyEventCenter.fire(internal_events_1.IM_INTERNAL_EVENTS.MESSAGE_SEND_SUCCESS, message);\n\t          callback_utils_1.CallbackUtils.onSuccess(options, message);\n\t        }\n\t      });\n\t      g_1.G.s().emit(rocket);\n\t    };\n\n\t    IMMessageSender.prototype.validate = function (options) {\n\t      var message = options.message;\n\n\t      if (!(message instanceof AbstractMessage_1.AbstractMessage)) {\n\t        throw new Error(\"it is invalid message\");\n\t      }\n\n\t      if (message.status !== GoEasy_1.MessageStatus.NEW) {\n\t        throw new Error(\"Please create a new message, a message can only be sent once\");\n\t      }\n\t    };\n\n\t    return IMMessageSender;\n\t  }();\n\n\t  exports[\"default\"] = IMMessageSender;\n\t})(IMMessageSender);\n\n\tvar conversationList = {};\n\n\tvar Conversations$1 = {};\n\n\tvar Conversation$1 = {};\n\n\tvar histories = {};\n\n\tvar History = {};\n\n\tvar MessageCache = {};\n\n\tvar sortedInserter = {};\n\n\tsortedInserter.__esModule = true;\n\tsortedInserter.SortedInserter = void 0;\n\n\tvar SortedInserter =\n\t/** @class */\n\tfunction () {\n\t  function SortedInserter() {}\n\n\t  SortedInserter.prototype.insert = function (array, t) {\n\t    var index = this.binarySearch(array, t);\n\n\t    if (index >= 0) {\n\t      // 覆盖\n\t      array.splice(index, 1, t);\n\t    } else {\n\t      // 插入\n\t      var newIndex = -index - 1;\n\t      array.splice(newIndex, 0, t);\n\t    }\n\t  };\n\t  /**\n\t   * 相等就覆盖\n\t   * 大于0往后查询\n\t   * 小于0往前查询\n\t   */\n\n\n\t  SortedInserter.prototype.binarySearch = function (array, t) {\n\t    var m = 0;\n\t    var n = array.length - 1;\n\n\t    while (m <= n) {\n\t      var k = n + m >> 1;\n\t      var cmp = this.compare(t, array[k]);\n\n\t      if (cmp > 0) {\n\t        // 往后查询\n\t        m = k + 1;\n\t      } else if (cmp < 0) {\n\t        // 往前查询\n\t        n = k - 1;\n\t      } else {\n\t        return k;\n\t      }\n\t    }\n\n\t    return -m - 1;\n\t  };\n\n\t  return SortedInserter;\n\t}();\n\n\tsortedInserter.SortedInserter = SortedInserter;\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var GoEasy_1 = GoEasy$1;\n\t  var Calibrator_1 = Calibrator;\n\t  var sorted_inserter_1 = sortedInserter;\n\n\t  var MessageCache =\n\t  /** @class */\n\t  function () {\n\t    function MessageCache(target) {\n\t      this.messages = new Array();\n\t      this.allLoaded = false; //是否已加载服务端的所有消息，如果已全部加载，就不要再向服务端发送请求\n\n\t      this.target = target;\n\t    }\n\n\t    MessageCache.prototype.all = function () {\n\t      return this.messages;\n\t    };\n\n\t    MessageCache.prototype.sliceOverLengthMessages = function () {\n\t      //确保不超过最大消息，防止内存溢出，尤其是发送消息\n\t      if (this.messages.length > MessageCache.CACHE_MAX_LENGTH) {\n\t        this.messages = this.messages.slice(-MessageCache.CACHE_MAX_LENGTH);\n\n\t        if (this.allLoaded === true) {\n\t          this.allLoaded = false;\n\t        }\n\t      }\n\t    };\n\n\t    MessageCache.prototype.getMaxMessage = function () {\n\t      return this.messages[this.messages.length - 1];\n\t    };\n\n\t    MessageCache.prototype.loadLocalMessages = function (limit, lastTimestamp) {\n\t      var localMessages = [];\n\t      var totalSize = this.messages.length;\n\n\t      if (lastTimestamp) {\n\t        if (totalSize > 0) {\n\t          var minTimestamp = this.messages[0].timestamp;\n\t          var maxTimestamp = this.messages[totalSize - 1].timestamp; // 大于等于最小，小于等于最大\n\n\t          var between = lastTimestamp >= minTimestamp && lastTimestamp <= maxTimestamp;\n\n\t          if (between) {\n\t            for (var i = totalSize - 1; i >= 0; i--) {\n\t              var message = this.messages[i];\n\n\t              if (message.timestamp < lastTimestamp) {\n\t                if (localMessages.length < limit) {\n\t                  localMessages.unshift(message);\n\t                } else {\n\t                  break;\n\t                }\n\t              }\n\t            }\n\t          }\n\t        }\n\t      } else {\n\t        localMessages = this.messages.slice(-limit);\n\t      }\n\n\t      return localMessages;\n\t    };\n\t    /**\n\t     * 缓存条件：\n\t     *  1.request.lastTimestamp为空\n\t     *  2.本地的第一条消息的时间等于传入的request.lastTimestamp\n\t     * 如果本地已经有消息，但是request.lastTimestamp不等于第一条消息，就丢掉\n\t     */\n\n\n\t    MessageCache.prototype.cacheServerMessages = function (request, serverMessages) {\n\t      var firstMessage = this.messages[0];\n\t      var totalSize = this.messages.length;\n\n\t      if (this.messages.length < MessageCache.CACHE_MAX_LENGTH && (!request.lastTimestamp || totalSize > 0 && firstMessage.timestamp === request.lastTimestamp)) {\n\t        this.messages = serverMessages.concat(this.messages);\n\n\t        if (serverMessages.length < request.limit) {\n\t          this.allLoaded = true;\n\t        }\n\t      }\n\t    };\n\n\t    MessageCache.prototype.findMessageByTime = function (time) {\n\t      return this.messages.find(function (message) {\n\t        return time === message.timestamp;\n\t      });\n\t    };\n\n\t    MessageCache.prototype.findMessagesByTimes = function (times) {\n\t      var _this = this;\n\n\t      var messages = [];\n\t      times.forEach(function (time) {\n\t        var message = _this.findMessageByTime(time);\n\n\t        if (Calibrator_1[\"default\"].isDef(message)) {\n\t          messages.push(message);\n\t        }\n\t      });\n\t      return messages;\n\t    };\n\n\t    MessageCache.prototype.existsMessage = function (messageId) {\n\t      return this.findMessageIndexById(messageId) > -1;\n\t    };\n\n\t    MessageCache.prototype.findMessageIndexById = function (messageId) {\n\t      return this.messages.findIndex(function (message) {\n\t        return messageId === message.messageId;\n\t      });\n\t    };\n\n\t    MessageCache.prototype.deleteMessage = function (messageId) {\n\t      var index = this.findMessageIndexById(messageId); //服务端按照指令成功删除最关键，本地与服务端不一致，可以忽略\n\n\t      if (index >= 0) {\n\t        this.messages.splice(index, 1);\n\t      }\n\t    };\n\n\t    MessageCache.prototype.recallMessages = function (messages) {\n\t      var _this = this;\n\n\t      messages.forEach(function (message) {\n\t        var localMessage = _this.findMessageByTime(message.timestamp);\n\n\t        if (Calibrator_1[\"default\"].isDef(localMessage)) {\n\t          localMessage.recalled = true;\n\t        }\n\n\t        message.recalled = true;\n\t      });\n\t    };\n\n\t    MessageCache.prototype.isEmpty = function () {\n\t      return this.messages.length === 0;\n\t    };\n\n\t    MessageCache.prototype.deleteMessages = function (messages) {\n\t      var _this = this;\n\n\t      messages.forEach(function (message) {\n\t        _this.deleteMessage(message.messageId);\n\t      });\n\t    };\n\n\t    MessageCache.prototype.saveMessage = function (message) {\n\t      MessageCache.sortedInserter.insert(this.messages, message);\n\t      this.sliceOverLengthMessages();\n\t    };\n\n\t    MessageCache.prototype.maxSuccessMessageTime = function () {\n\t      for (var i = this.messages.length - 1; i >= 0; i--) {\n\t        if (this.messages[i].status === GoEasy_1.MessageStatus.SUCCESS) {\n\t          return this.messages[i].timestamp;\n\t        }\n\t      }\n\n\t      return 0;\n\t    };\n\n\t    MessageCache.prototype.minTime = function () {\n\t      if (this.isEmpty()) {\n\t        return 0;\n\t      }\n\n\t      return this.messages[0].timestamp;\n\t    };\n\n\t    MessageCache.prototype.correctPosition = function (message) {\n\t      this.deleteMessage(message.messageId);\n\t      this.saveMessage(message);\n\t    };\n\n\t    MessageCache.CACHE_MAX_LENGTH = 200;\n\t    MessageCache.sortedInserter = new (\n\t    /** @class */\n\t    function (_super) {\n\t      __extends(class_1, _super);\n\n\t      function class_1() {\n\t        return _super !== null && _super.apply(this, arguments) || this;\n\t      }\n\n\t      class_1.prototype.compare = function (a, b) {\n\t        var c = a.timestamp - b.timestamp;\n\t        return c > 0 ? 1 : c === 0 ? 0 : -1;\n\t      };\n\n\t      return class_1;\n\t    }(sorted_inserter_1.SortedInserter))();\n\t    return MessageCache;\n\t  }();\n\n\t  exports[\"default\"] = MessageCache;\n\t})(MessageCache);\n\n\tvar MessageDeleter = {};\n\n\tvar DeleteMessageRequest$1 = {};\n\n\tvar Target$1 = {};\n\n\tTarget$1.__esModule = true;\n\tTarget$1.Target = void 0;\n\tvar GoEasy_1$e = GoEasy$1;\n\tvar Calibrator_1$a = Calibrator;\n\tvar g_1$c = g;\n\t/**\n\t * target.id不同的场景表达不同的含义:\n\t *  cs场景：customer端id为teamId，agent端id为customerId\n\t *  private: id为friendId\n\t *  group：id为groupId\n\t * 注意：cs中才有teamId\n\t */\n\n\tvar Target =\n\t/** @class */\n\tfunction () {\n\t  function Target(scene, id, teamId) {\n\t    this.scene = scene;\n\t    this.id = id;\n\n\t    if (Calibrator_1$a[\"default\"].isDef(teamId)) {\n\t      this.teamId = teamId;\n\t    }\n\t  }\n\n\t  Target.prototype.toString = function () {\n\t    if (GoEasy_1$e.Scene.PRIVATE === this.scene || GoEasy_1$e.Scene.GROUP === this.scene) {\n\t      return this.scene + \"#\" + this.id;\n\t    }\n\n\t    return this.scene + \"#\" + this.id + \"#\" + this.teamId;\n\t  };\n\n\t  Target.prototype.customerId = function () {\n\t    if (GoEasy_1$e.Scene.CS === this.scene) {\n\t      if (this.id === this.teamId) {\n\t        return g_1$c.G.u();\n\t      } else {\n\t        return this.id;\n\t      }\n\t    }\n\t  };\n\n\t  Target.byScene = function (scene, targetId, teamId) {\n\t    return new Target(scene, targetId, teamId);\n\t  };\n\n\t  Target.byIMMessage = function (message) {\n\t    var teamId;\n\t    var id;\n\t    var scene = message.scene();\n\n\t    if (scene === GoEasy_1$e.Scene.PRIVATE) {\n\t      var senderId = message.senderId;\n\t      var receiverId = message.targetId();\n\t      id = g_1$c.G.u() === senderId ? receiverId : senderId;\n\t    } else if (scene === GoEasy_1$e.Scene.GROUP) {\n\t      id = message.targetId();\n\t    } else if (scene === GoEasy_1$e.Scene.CS) {\n\t      id = message.targetId();\n\t      var csMessage = message;\n\t      teamId = csMessage.teamId;\n\t    } else {\n\t      throw {\n\t        code: 400,\n\t        content: \"scene \".concat(scene, \" not exists\")\n\t      };\n\t    }\n\n\t    return new Target(scene, id, teamId);\n\t  };\n\n\t  Target.byMessageReadRemoteEvent = function (event) {\n\t    var scene = event.scene;\n\t    var receiverId = event.targetId;\n\t    var markerId = event.markerId;\n\t    var teamId = event.teamId;\n\t    var targetId;\n\n\t    if (scene === GoEasy_1$e.Scene.PRIVATE) {\n\t      targetId = g_1$c.G.u() === markerId ? receiverId : markerId;\n\t    } else if (scene === GoEasy_1$e.Scene.GROUP) {\n\t      targetId = receiverId;\n\t    } else if (scene === GoEasy_1$e.Scene.CS) {\n\t      if (receiverId === teamId) {\n\t        // customer mark\n\t        if (markerId === g_1$c.G.u()) {\n\t          targetId = teamId;\n\t        } else {\n\t          targetId = markerId;\n\t        }\n\t      } else {\n\t        // agent mark\n\t        if (markerId === g_1$c.G.u()) {\n\t          targetId = receiverId;\n\t        } else {\n\t          targetId = teamId;\n\t        }\n\t      }\n\t    }\n\n\t    return new Target(scene, targetId, teamId);\n\t  };\n\n\t  Target.byIMMessageDeletedEvent = function (event) {\n\t    var scene = event.scene;\n\t    var deleterId = event.deleterId;\n\n\t    if (scene === GoEasy_1$e.Scene.PRIVATE) {\n\t      var targetId = g_1$c.G.u() === deleterId ? event.targetId : deleterId;\n\t      return new Target(scene, targetId);\n\t    } else if (scene === GoEasy_1$e.Scene.GROUP) {\n\t      return new Target(scene, event.targetId);\n\t    }\n\t  };\n\n\t  Target.byConversationDTO = function (conversationDto) {\n\t    var lastMessage = conversationDto.lastMessage;\n\t    return this.byIMMessage(lastMessage);\n\t  };\n\n\t  Target.byRemoteRecallEvent = function (event) {\n\t    var targetId;\n\n\t    if (event.scene === GoEasy_1$e.Scene.PRIVATE) {\n\t      var ids = event.conversationId.split(\":\", 2);\n\t      targetId = ids[0] === g_1$c.G.u() ? ids[1] : ids[0];\n\t    } else {\n\t      targetId = event.conversationId;\n\t    }\n\n\t    return new Target(event.scene, targetId);\n\t  };\n\n\t  return Target;\n\t}();\n\n\tTarget$1.Target = Target;\n\n\tDeleteMessageRequest$1.__esModule = true;\n\tDeleteMessageRequest$1.DeleteMessageRequest = void 0;\n\tvar GoEasy_1$d = GoEasy$1;\n\tvar Target_1$4 = Target$1;\n\n\tvar DeleteMessageRequest =\n\t/** @class */\n\tfunction () {\n\t  function DeleteMessageRequest(messages) {\n\t    var _this = this;\n\n\t    this.times = new Array();\n\t    var message = messages[0];\n\t    var target = Target_1$4.Target.byIMMessage(message);\n\t    this.scene = target.scene;\n\t    this.targetId = target.id;\n\t    messages.forEach(function (message) {\n\t      if (message.status === GoEasy_1$d.MessageStatus.SUCCESS) {\n\t        //未成功的消息，不要发到服务端\n\t        _this.times.push(message.timestamp);\n\t      }\n\t    }); // 升序排列\n\n\t    this.times.sort(function (x, y) {\n\t      return x < y ? -1 : x == y ? 0 : 1;\n\t    });\n\t  }\n\n\t  return DeleteMessageRequest;\n\t}();\n\n\tDeleteMessageRequest$1.DeleteMessageRequest = DeleteMessageRequest;\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var GoEasy_1 = GoEasy$1;\n\t  var DeleteMessageRequest_1 = DeleteMessageRequest$1;\n\t  var Rocket_1 = Rocket;\n\t  var Permission_1 = Permission;\n\t  var SocketTimeout_1 = SocketTimeout;\n\t  var RocketTypes_1 = RocketTypes;\n\t  var g_1 = g;\n\n\t  var MessageDeleter =\n\t  /** @class */\n\t  function () {\n\t    function MessageDeleter() {}\n\n\t    MessageDeleter.deleteServerMessages = function (messages) {\n\t      var request = new DeleteMessageRequest_1.DeleteMessageRequest(messages);\n\n\t      if (request.times.length < 0) {\n\t        return Promise.resolve();\n\t      }\n\n\t      return new Promise(function (resolve, reject) {\n\t        var rocket = new Rocket_1[\"default\"]({\n\t          name: RocketTypes_1.RocketTypes.IM_DELETE_MESSAGE,\n\t          params: request,\n\t          permission: Permission_1.Permission.WRITE,\n\t          singleTimeout: SocketTimeout_1.SocketTimeout.commonQuerySingle,\n\t          totalTimeout: SocketTimeout_1.SocketTimeout.commonQueryTotal,\n\t          success: function success(res) {\n\t            if (res.code === 200) {\n\t              resolve(res);\n\t            } else {\n\t              reject(res);\n\t            }\n\t          },\n\t          fail: function fail(err) {\n\t            reject(err);\n\t          }\n\t        });\n\t        g_1.G.s().emit(rocket);\n\t      });\n\t    };\n\n\t    MessageDeleter.validate = function (options) {\n\t      var messages = options.messages;\n\n\t      for (var i = 0; i < messages.length; i++) {\n\t        var message = messages[i];\n\n\t        if (message.status === GoEasy_1.MessageStatus.SENDING) {\n\t          throw {\n\t            code: 400,\n\t            content: \"message[\" + i + \"] is '\" + message.status + \"' and cannot be deleted\"\n\t          };\n\t        }\n\t      }\n\t    };\n\n\t    return MessageDeleter;\n\t  }();\n\n\t  exports[\"default\"] = MessageDeleter;\n\t})(MessageDeleter);\n\n\tvar MessageRecaller = {};\n\n\tvar RecallMessageRequest$1 = {};\n\n\tRecallMessageRequest$1.__esModule = true;\n\tRecallMessageRequest$1.RecallMessageRequest = void 0;\n\tvar Target_1$3 = Target$1;\n\n\tvar RecallMessageRequest =\n\t/** @class */\n\tfunction () {\n\t  function RecallMessageRequest(messages) {\n\t    var _this = this;\n\n\t    this.times = new Array();\n\t    var message = messages[0];\n\t    var target = Target_1$3.Target.byIMMessage(message);\n\t    this.scene = target.scene;\n\t    this.targetId = target.id;\n\t    messages.forEach(function (message) {\n\t      _this.times.push(message.timestamp);\n\t    }); // 升序排列\n\n\t    this.times.sort(function (x, y) {\n\t      return x < y ? -1 : x == y ? 0 : 1;\n\t    });\n\t  }\n\n\t  return RecallMessageRequest;\n\t}();\n\n\tRecallMessageRequest$1.RecallMessageRequest = RecallMessageRequest;\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var GoEasy_1 = GoEasy$1;\n\t  var RecallMessageRequest_1 = RecallMessageRequest$1;\n\t  var Rocket_1 = Rocket;\n\t  var Permission_1 = Permission;\n\t  var SocketTimeout_1 = SocketTimeout;\n\t  var RocketTypes_1 = RocketTypes;\n\t  var g_1 = g;\n\t  /**\n\t   * todo MessageRecaller名称并不专业需要优化\n\t   */\n\n\t  var MessageRecaller =\n\t  /** @class */\n\t  function () {\n\t    function MessageRecaller() {}\n\n\t    MessageRecaller.recallServerMessages = function (messages) {\n\t      var request = new RecallMessageRequest_1.RecallMessageRequest(messages);\n\n\t      if (request.times.length === 0) {\n\t        return Promise.resolve();\n\t      }\n\n\t      return new Promise(function (resolve, reject) {\n\t        var rocket = new Rocket_1[\"default\"]({\n\t          name: RocketTypes_1.RocketTypes.IM_RECALL_MESSAGE,\n\t          params: request,\n\t          permission: Permission_1.Permission.WRITE,\n\t          singleTimeout: SocketTimeout_1.SocketTimeout.commonRequestSingle,\n\t          totalTimeout: SocketTimeout_1.SocketTimeout.commonRequestTotal,\n\t          fail: function fail(err) {\n\t            reject(err);\n\t          },\n\t          success: function success(res) {\n\t            if (res.code === 200) {\n\t              resolve(res);\n\t            } else {\n\t              reject(res);\n\t            }\n\t          }\n\t        });\n\t        g_1.G.s().emit(rocket);\n\t      });\n\t    };\n\t    /**\n\t     * 同一种会话的消息才能撤回，以传入的第一条消息作为会话标准\n\t     * @param options\n\t     */\n\n\n\t    MessageRecaller.validate = function (options) {\n\t      var messages = options.messages;\n\n\t      for (var i = 0; i < messages.length; i++) {\n\t        var message = messages[i];\n\n\t        if (message.status !== GoEasy_1.MessageStatus.SUCCESS) {\n\t          throw {\n\t            code: 400,\n\t            content: \"message[\" + i + \"] is '\" + message.status + \"' and cannot be recalled\"\n\t          };\n\t        }\n\n\t        if (message.recalled) {\n\t          throw {\n\t            code: 400,\n\t            content: \"message[\" + i + \"] has been recalled\"\n\t          };\n\t        }\n\n\t        if (message.senderId !== g_1.G.u()) {\n\t          throw {\n\t            code: 400,\n\t            content: \"it is not allowed to recall messages sent by others\"\n\t          };\n\t        }\n\t      }\n\t    };\n\n\t    return MessageRecaller;\n\t  }();\n\n\t  exports[\"default\"] = MessageRecaller;\n\t})(MessageRecaller);\n\n\tvar remoteHistory = {};\n\n\tvar HistoryChangeQueryRequest = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\n\t  var HistoryChangeQueryRequest =\n\t  /** @class */\n\t  function () {\n\t    function HistoryChangeQueryRequest(scene, id, after, min, teamId) {\n\t      this.scene = scene;\n\t      this.id = id;\n\t      this.after = after;\n\t      this.min = min;\n\t      this.teamId = teamId;\n\t    }\n\n\t    return HistoryChangeQueryRequest;\n\t  }();\n\n\t  exports[\"default\"] = HistoryChangeQueryRequest;\n\t})(HistoryChangeQueryRequest);\n\n\tvar ReadMessageMarkRequest$1 = {};\n\n\tReadMessageMarkRequest$1.__esModule = true;\n\tReadMessageMarkRequest$1.ReadMessageMarkRequest = void 0;\n\n\tvar ReadMessageMarkRequest =\n\t/** @class */\n\tfunction () {\n\t  function ReadMessageMarkRequest(id, scene, lastTimestamp, teamId) {\n\t    this.id = id;\n\t    this.scene = scene;\n\t    this.lastTimestamp = lastTimestamp;\n\t    this.teamId = teamId;\n\t  }\n\n\t  return ReadMessageMarkRequest;\n\t}();\n\n\tReadMessageMarkRequest$1.ReadMessageMarkRequest = ReadMessageMarkRequest;\n\n\tvar remoteAbbrMessageBuilder = {};\n\n\tvar PrivateMessage$1 = {};\n\n\tvar __extends$d = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tPrivateMessage$1.__esModule = true;\n\tPrivateMessage$1.PrivateMessage = void 0;\n\tvar AbstractMessage_1$2 = AbstractMessage$1;\n\tvar GoEasy_1$c = GoEasy$1;\n\n\tvar PrivateMessage =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$d(PrivateMessage, _super);\n\n\t  function PrivateMessage() {\n\t    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n\t    _this.read = false;\n\t    return _this;\n\t  }\n\n\t  PrivateMessage.prototype.scene = function () {\n\t    return GoEasy_1$c.Scene.PRIVATE;\n\t  };\n\n\t  PrivateMessage.prototype.targetId = function () {\n\t    return this.receiverId;\n\t  };\n\n\t  return PrivateMessage;\n\t}(AbstractMessage_1$2.AbstractMessage);\n\n\tPrivateMessage$1.PrivateMessage = PrivateMessage;\n\n\tvar GroupMessage$1 = {};\n\n\tvar __extends$c = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tGroupMessage$1.__esModule = true;\n\tGroupMessage$1.GroupMessage = void 0;\n\tvar AbstractMessage_1$1 = AbstractMessage$1;\n\tvar GoEasy_1$b = GoEasy$1;\n\n\tvar GroupMessage =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$c(GroupMessage, _super);\n\n\t  function GroupMessage() {\n\t    return _super !== null && _super.apply(this, arguments) || this;\n\t  } // readAmount: number;\n\t  // readUsers: Array<string>;\n\n\n\t  GroupMessage.prototype.scene = function () {\n\t    return GoEasy_1$b.Scene.GROUP;\n\t  };\n\n\t  GroupMessage.prototype.targetId = function () {\n\t    return this.groupId;\n\t  };\n\n\t  return GroupMessage;\n\t}(AbstractMessage_1$1.AbstractMessage);\n\n\tGroupMessage$1.GroupMessage = GroupMessage;\n\n\tvar csMessage = {};\n\n\tvar __extends$b = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tcsMessage.__esModule = true;\n\tcsMessage.CSMessage = void 0;\n\tvar AbstractMessage_1 = AbstractMessage$1;\n\tvar GoEasy_1$a = GoEasy$1;\n\tvar g_1$b = g;\n\n\tvar CSMessage =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$b(CSMessage, _super);\n\n\t  function CSMessage() {\n\t    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n\t    _this.accepted = false;\n\t    return _this;\n\t  }\n\n\t  CSMessage.prototype.scene = function () {\n\t    return GoEasy_1$a.Scene.CS;\n\t  };\n\t  /**\n\t   * 当前用户是customer，返回teamId\n\t   * 当前用户是agent，返回customerId\n\t   */\n\n\n\t  CSMessage.prototype.targetId = function () {\n\t    if (g_1$b.G.u() === this.customerId()) {\n\t      return this.teamId;\n\t    } else {\n\t      return this.customerId();\n\t    }\n\t  };\n\n\t  CSMessage.prototype.sendByCustomer = function () {\n\t    return this.to === this.teamId;\n\t  };\n\n\t  CSMessage.prototype.customerId = function () {\n\t    if (this.sendByCustomer()) {\n\t      return this.senderId;\n\t    } else {\n\t      return this.to;\n\t    }\n\t  }; //如果我是customer，这个发送方只要不是我，就是other\n\t  //如果我是agent，这个发送方是customer，就是other\n\n\n\t  CSMessage.prototype.isOtherSent = function () {\n\t    if (g_1$b.G.u() === this.customerId()) {\n\t      return this.senderId !== g_1$b.G.u();\n\t    } else {\n\t      return this.senderId === this.customerId();\n\t    }\n\t  };\n\n\t  return CSMessage;\n\t}(AbstractMessage_1.AbstractMessage);\n\n\tcsMessage.CSMessage = CSMessage;\n\n\tvar csMessageType = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  exports.CSMessageType = void 0;\n\n\t  (function (CSMessageType) {\n\t    CSMessageType[\"ACCEPT\"] = \"CS_ACCEPT\";\n\t    CSMessageType[\"END\"] = \"CS_END\";\n\t    CSMessageType[\"TRANSFER\"] = \"CS_TRANSFER\";\n\t  })(exports.CSMessageType || (exports.CSMessageType = {}));\n\t})(csMessageType);\n\n\tremoteAbbrMessageBuilder.__esModule = true;\n\tremoteAbbrMessageBuilder.RemoteAbbrMessageBuilder = void 0;\n\tvar GoEasy_1$9 = GoEasy$1;\n\tvar PrivateMessage_1$1 = PrivateMessage$1;\n\tvar GroupMessage_1$1 = GroupMessage$1;\n\tvar cs_message_1$1 = csMessage;\n\tvar Calibrator_1$9 = Calibrator;\n\tvar g_1$a = g;\n\tvar cs_message_type_1$3 = csMessageType;\n\n\tvar RemoteAbbrMessageBuilder =\n\t/** @class */\n\tfunction () {\n\t  function RemoteAbbrMessageBuilder() {}\n\n\t  RemoteAbbrMessageBuilder.prototype.build = function (remoteAbbrMessage) {\n\t    var message;\n\t    var scene = remoteAbbrMessage.t;\n\n\t    if (scene === GoEasy_1$9.Scene.PRIVATE) {\n\t      message = new PrivateMessage_1$1.PrivateMessage();\n\t      message.read = false;\n\t      message.receiverId = remoteAbbrMessage.r;\n\t    } else if (scene === GoEasy_1$9.Scene.GROUP) {\n\t      message = new GroupMessage_1$1.GroupMessage();\n\t      message.groupId = remoteAbbrMessage.r;\n\t      message.senderData = remoteAbbrMessage.d ? JSON.parse(remoteAbbrMessage.d) : {};\n\t    } else if (scene === GoEasy_1$9.Scene.CS) {\n\t      message = new cs_message_1$1.CSMessage();\n\t      message.to = remoteAbbrMessage.r;\n\t      message.teamId = remoteAbbrMessage.tid;\n\t      message.senderData = remoteAbbrMessage.d ? JSON.parse(remoteAbbrMessage.d) : {};\n\t      message.accepted = remoteAbbrMessage.accepted;\n\n\t      if (message.customerId() !== g_1$a.G.u()) {\n\t        message.sessionId = remoteAbbrMessage.sessionId;\n\t      }\n\t    }\n\n\t    message.senderId = remoteAbbrMessage.s;\n\t    message.messageId = remoteAbbrMessage.i;\n\t    message.timestamp = remoteAbbrMessage.ts;\n\t    message.type = remoteAbbrMessage.mt;\n\t    var payload = remoteAbbrMessage.p;\n\n\t    if (Calibrator_1$9[\"default\"].isDef(payload)) {\n\t      if (scene === GoEasy_1$9.Scene.CS && message.type === cs_message_type_1$3.CSMessageType.TRANSFER) {\n\t        var jsonPayload = JSON.parse(payload);\n\t        jsonPayload.transferTo.data = JSON.parse(jsonPayload.transferTo.data);\n\t        message.payload = jsonPayload;\n\t      } else {\n\t        message.payload = JSON.parse(payload);\n\t      }\n\t    }\n\n\t    message.recalled = remoteAbbrMessage.rc;\n\t    message.status = GoEasy_1$9.MessageStatus.SUCCESS;\n\t    return message;\n\t  };\n\n\t  return RemoteAbbrMessageBuilder;\n\t}();\n\n\tremoteAbbrMessageBuilder.RemoteAbbrMessageBuilder = RemoteAbbrMessageBuilder;\n\n\tvar __awaiter$7 = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n\t  function adopt(value) {\n\t    return value instanceof P ? value : new P(function (resolve) {\n\t      resolve(value);\n\t    });\n\t  }\n\n\t  return new (P || (P = Promise))(function (resolve, reject) {\n\t    function fulfilled(value) {\n\t      try {\n\t        step(generator.next(value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function rejected(value) {\n\t      try {\n\t        step(generator[\"throw\"](value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function step(result) {\n\t      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n\t    }\n\n\t    step((generator = generator.apply(thisArg, _arguments || [])).next());\n\t  });\n\t};\n\n\tvar __generator$7 = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n\t  var _ = {\n\t    label: 0,\n\t    sent: function sent() {\n\t      if (t[0] & 1) throw t[1];\n\t      return t[1];\n\t    },\n\t    trys: [],\n\t    ops: []\n\t  },\n\t      f,\n\t      y,\n\t      t,\n\t      g;\n\t  return g = {\n\t    next: verb(0),\n\t    \"throw\": verb(1),\n\t    \"return\": verb(2)\n\t  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n\t    return this;\n\t  }), g;\n\n\t  function verb(n) {\n\t    return function (v) {\n\t      return step([n, v]);\n\t    };\n\t  }\n\n\t  function step(op) {\n\t    if (f) throw new TypeError(\"Generator is already executing.\");\n\n\t    while (_) {\n\t      try {\n\t        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n\t        if (y = 0, t) op = [op[0] & 2, t.value];\n\n\t        switch (op[0]) {\n\t          case 0:\n\t          case 1:\n\t            t = op;\n\t            break;\n\n\t          case 4:\n\t            _.label++;\n\t            return {\n\t              value: op[1],\n\t              done: false\n\t            };\n\n\t          case 5:\n\t            _.label++;\n\t            y = op[1];\n\t            op = [0];\n\t            continue;\n\n\t          case 7:\n\t            op = _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\n\t          default:\n\t            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n\t              _ = 0;\n\t              continue;\n\t            }\n\n\t            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n\t              _.label = op[1];\n\t              break;\n\t            }\n\n\t            if (op[0] === 6 && _.label < t[1]) {\n\t              _.label = t[1];\n\t              t = op;\n\t              break;\n\t            }\n\n\t            if (t && _.label < t[2]) {\n\t              _.label = t[2];\n\n\t              _.ops.push(op);\n\n\t              break;\n\t            }\n\n\t            if (t[2]) _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\t        }\n\n\t        op = body.call(thisArg, _);\n\t      } catch (e) {\n\t        op = [6, e];\n\t        y = 0;\n\t      } finally {\n\t        f = t = 0;\n\t      }\n\t    }\n\n\t    if (op[0] & 5) throw op[1];\n\t    return {\n\t      value: op[0] ? op[1] : void 0,\n\t      done: true\n\t    };\n\t  }\n\t};\n\n\tremoteHistory.__esModule = true;\n\tremoteHistory.RemoteHistory = void 0;\n\tvar GoEasy_1$8 = GoEasy$1;\n\tvar HistoryChangeQueryRequest_1 = HistoryChangeQueryRequest;\n\tvar Rocket_1$3 = Rocket;\n\tvar RocketTypes_1$5 = RocketTypes;\n\tvar Permission_1$3 = Permission;\n\tvar SocketTimeout_1$3 = SocketTimeout;\n\tvar g_1$9 = g;\n\tvar ReadMessageMarkRequest_1 = ReadMessageMarkRequest$1;\n\tvar remote_abbr_message_builder_1$2 = remoteAbbrMessageBuilder;\n\n\tvar RemoteHistory =\n\t/** @class */\n\tfunction () {\n\t  function RemoteHistory() {\n\t    this.builder = new remote_abbr_message_builder_1$2.RemoteAbbrMessageBuilder();\n\t  }\n\n\t  RemoteHistory.prototype.sync = function (scene, targetId, after, min, teamId) {\n\t    var request = new HistoryChangeQueryRequest_1[\"default\"](scene, targetId, after, min, teamId);\n\t    return new Promise(function (resolve, reject) {\n\t      var rocket = new Rocket_1$3[\"default\"]({\n\t        name: RocketTypes_1$5.RocketTypes.IM_HISTORY_CHANGE,\n\t        params: request,\n\t        permission: Permission_1$3.Permission.READ,\n\t        singleTimeout: SocketTimeout_1$3.SocketTimeout.commonQuerySingle,\n\t        totalTimeout: SocketTimeout_1$3.SocketTimeout.commonQueryTotal,\n\t        fail: function fail(err) {\n\t          reject(err);\n\t        },\n\t        success: function success(res) {\n\t          var content = res.content;\n\t          resolve(content);\n\t        }\n\t      });\n\t      g_1$9.G.s().emit(rocket);\n\t    });\n\t  };\n\n\t  RemoteHistory.prototype.loadServerMessages = function (target, request) {\n\t    var _this = this;\n\n\t    return new Promise(function (resolve, reject) {\n\t      var rocket = new Rocket_1$3[\"default\"]({\n\t        name: RocketTypes_1$5.RocketTypes.IM_HISTORY,\n\t        params: request,\n\t        permission: Permission_1$3.Permission.READ,\n\t        singleTimeout: SocketTimeout_1$3.SocketTimeout.commonQuerySingle,\n\t        totalTimeout: SocketTimeout_1$3.SocketTimeout.commonQueryTotal,\n\t        fail: function fail(err) {\n\t          reject(err);\n\t        },\n\t        success: function success(res) {\n\t          var content = res.content;\n\t          content.messages = _this.convertServerMessages(target, content.messages);\n\t          resolve(content);\n\t        }\n\t      });\n\t      g_1$9.G.s().emit(rocket);\n\t    });\n\t  };\n\n\t  RemoteHistory.prototype.convertServerMessages = function (target, serverMessages) {\n\t    var _this = this;\n\n\t    var messages = [];\n\t    var scene = target.scene;\n\t    var targetId = target.id;\n\t    serverMessages.forEach(function (remoteAbbrMessage) {\n\t      remoteAbbrMessage.t = scene;\n\n\t      if (GoEasy_1$8.Scene.PRIVATE === scene) {\n\t        remoteAbbrMessage.r = remoteAbbrMessage.s === g_1$9.G.u() ? targetId : g_1$9.G.u();\n\t      } else if (GoEasy_1$8.Scene.GROUP === scene) {\n\t        remoteAbbrMessage.r = targetId;\n\t      } else if (GoEasy_1$8.Scene.CS === scene) {\n\t        var customerId = target.customerId();\n\t        var teamId = target.teamId;\n\n\t        if (customerId === g_1$9.G.u()) {\n\t          remoteAbbrMessage.r = teamId;\n\t        } else {\n\t          remoteAbbrMessage.r = customerId;\n\t        }\n\t      }\n\n\t      var message = _this.builder.build(remoteAbbrMessage);\n\n\t      messages.push(message);\n\t    });\n\t    return messages;\n\t  };\n\n\t  RemoteHistory.prototype.updateServerOffsets = function (markTime, target) {\n\t    return __awaiter$7(this, void 0, void 0, function () {\n\t      var request;\n\t      return __generator$7(this, function (_a) {\n\t        request = new ReadMessageMarkRequest_1.ReadMessageMarkRequest(target.id, target.scene, markTime, target.teamId);\n\t        return [2\n\t        /*return*/\n\t        , new Promise(function (resolve, reject) {\n\t          var rocket = new Rocket_1$3[\"default\"]({\n\t            name: RocketTypes_1$5.RocketTypes.IM_MARK_AS_READ,\n\t            params: request,\n\t            permission: Permission_1$3.Permission.WRITE,\n\t            singleTimeout: SocketTimeout_1$3.SocketTimeout.commonRequestSingle,\n\t            totalTimeout: SocketTimeout_1$3.SocketTimeout.commonRequestTotal,\n\t            success: function success(res) {\n\t              resolve(res);\n\t            },\n\t            fail: function fail(err) {\n\t              reject(err);\n\t            }\n\t          });\n\t          g_1$9.G.s().emit(rocket);\n\t        })];\n\t      });\n\t    });\n\t  };\n\n\t  RemoteHistory.instance = new RemoteHistory();\n\t  return RemoteHistory;\n\t}();\n\n\tremoteHistory.RemoteHistory = RemoteHistory;\n\n\tvar UserOffsets$1 = {};\n\n\tUserOffsets$1.__esModule = true;\n\tUserOffsets$1.UserOffsets = void 0;\n\tvar Calibrator_1$8 = Calibrator;\n\tvar g_1$8 = g;\n\n\tvar UserOffsets =\n\t/** @class */\n\tfunction () {\n\t  function UserOffsets() {\n\t    this.offsetMap = new Map(); // 对于私聊保存的是userId与friendId的userOffset,群聊则是保存群所有人的userOffSet\n\n\t    this.markingTime = 0; // 用于mark异步请求(是否多次mark)\n\n\t    this.userId = g_1$8.G.u();\n\t  }\n\n\t  UserOffsets.prototype.updateOffset = function (userId, offset) {\n\t    var oldOffset = this.offsetMap.get(userId);\n\n\t    if (Calibrator_1$8[\"default\"].isDef(oldOffset)) {\n\t      if (offset > oldOffset) {\n\t        this.offsetMap.set(userId, offset);\n\t        return true;\n\t      }\n\t    } else {\n\t      this.offsetMap.set(userId, offset);\n\t      return true;\n\t    }\n\n\t    return false;\n\t  };\n\n\t  UserOffsets.prototype.updateUserOffsets = function (userOffsets) {\n\t    var _this = this;\n\n\t    userOffsets.forEach(function (userOffset) {\n\t      var userId = userOffset.userId;\n\t      var offset = userOffset.offset;\n\n\t      _this.updateOffset(userId, offset);\n\t    });\n\t  };\n\n\t  UserOffsets.prototype.updateMyOffset = function (offset) {\n\t    return this.updateOffset(this.userId, offset);\n\t  };\n\n\t  UserOffsets.prototype.myOffset = function () {\n\t    return this.getOffset(this.userId);\n\t  };\n\n\t  UserOffsets.prototype.getOffset = function (userId) {\n\t    var offset = this.offsetMap.get(userId);\n\n\t    if (offset) {\n\t      return offset;\n\t    }\n\n\t    return 0;\n\t  };\n\n\t  return UserOffsets;\n\t}();\n\n\tUserOffsets$1.UserOffsets = UserOffsets;\n\n\tvar HistoryQueryRequest = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\n\t  var HistoryQueryRequest =\n\t  /** @class */\n\t  function () {\n\t    function HistoryQueryRequest(id, scene, lastTimestamp, limit, teamId) {\n\t      this.id = id;\n\t      this.scene = scene;\n\t      this.lastTimestamp = lastTimestamp;\n\t      this.limit = limit;\n\t      this.teamId = teamId;\n\t    }\n\n\t    return HistoryQueryRequest;\n\t  }();\n\n\t  exports[\"default\"] = HistoryQueryRequest;\n\t})(HistoryQueryRequest);\n\n\tvar unreadamountMaxmessageChangeDetector = {};\n\n\tunreadamountMaxmessageChangeDetector.__esModule = true;\n\tunreadamountMaxmessageChangeDetector.UnreadAmountMaxMessageChangeDetector = void 0;\n\tvar goeasy_event_center_1$6 = goeasyEventCenter;\n\tvar internal_events_1$6 = internalEvents;\n\n\tvar UnreadAmountMaxMessageChangeDetector =\n\t/** @class */\n\tfunction () {\n\t  function UnreadAmountMaxMessageChangeDetector(history) {\n\t    this.history = history;\n\t  }\n\n\t  UnreadAmountMaxMessageChangeDetector.prototype.pre = function () {\n\t    this.oldLastMessage = this.history.getMaxMessage();\n\t    this.oldUnreadAmount = this.history.unreadAmount();\n\n\t    if (this.oldLastMessage) {\n\t      this.oldLastMessageRecalled = this.oldLastMessage.recalled;\n\t      this.oldLastMessageRead = this.oldLastMessage.read;\n\t      this.oldLastMessageStatus = this.oldLastMessage.status;\n\t    }\n\t  };\n\t  /**\n\t   * 1.自己发送消息\n\t   *  a.sending\n\t   *  b.发送成功后触发\n\t   *      1.mark对方->read变化,unreadAmount变化\n\t   *  c.failed\n\t   * 2.接收对方的消息\n\t   *  a.对方mark自己\n\t   *      1.自己消息的read变化,unreadAmount变化\n\t   * 3.接收自己多端的消息\n\t   *  a.mark对方->read变化,unreadAmount变化\n\t   * 4.对方mark\n\t   *  a.自己消息的read变化,unreadAmount变化\n\t   * 5.多端mark\n\t   *  a.mark对方->read变化,unreadAmount变化\n\t   * 6.delete\n\t   * 7.recall\n\t   */\n\n\n\t  UnreadAmountMaxMessageChangeDetector.prototype.post = function () {\n\t    var newUnreadAmount = this.history.unreadAmount();\n\t    var newLastMessage = this.history.getMaxMessage();\n\t    var newLastMessageRead;\n\t    var newLastMessageRecalled;\n\t    var newLastMessageStatus; // lastMessage 为空的情况：只查询了conversation缓存了lastMessage，多端删除,同步删除的消息后,本地不再有消息缓存\n\n\t    if (newLastMessage) {\n\t      newLastMessageStatus = newLastMessage.status;\n\t      newLastMessageRead = newLastMessage.read;\n\t      newLastMessageRecalled = newLastMessage.recalled;\n\t    }\n\n\t    if (this.oldLastMessage !== newLastMessage || this.oldLastMessageRead !== newLastMessageRead || this.oldLastMessageRecalled !== newLastMessageRecalled || this.oldLastMessageStatus !== newLastMessageStatus) {\n\t      goeasy_event_center_1$6.GoEasyEventCenter.fire(internal_events_1$6.IM_INTERNAL_EVENTS.MAX_MESSAGE_CHANGED, newLastMessage);\n\t    } else if (this.oldUnreadAmount !== newUnreadAmount) {\n\t      goeasy_event_center_1$6.GoEasyEventCenter.fire(internal_events_1$6.IM_INTERNAL_EVENTS.UNREAD_AMOUNT_CHANGED, this.history.target);\n\t    }\n\t  };\n\n\t  return UnreadAmountMaxMessageChangeDetector;\n\t}();\n\n\tunreadamountMaxmessageChangeDetector.UnreadAmountMaxMessageChangeDetector = UnreadAmountMaxMessageChangeDetector;\n\n\t(function (exports) {\n\n\t  var __awaiter = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n\t    function adopt(value) {\n\t      return value instanceof P ? value : new P(function (resolve) {\n\t        resolve(value);\n\t      });\n\t    }\n\n\t    return new (P || (P = Promise))(function (resolve, reject) {\n\t      function fulfilled(value) {\n\t        try {\n\t          step(generator.next(value));\n\t        } catch (e) {\n\t          reject(e);\n\t        }\n\t      }\n\n\t      function rejected(value) {\n\t        try {\n\t          step(generator[\"throw\"](value));\n\t        } catch (e) {\n\t          reject(e);\n\t        }\n\t      }\n\n\t      function step(result) {\n\t        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n\t      }\n\n\t      step((generator = generator.apply(thisArg, _arguments || [])).next());\n\t    });\n\t  };\n\n\t  var __generator = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n\t    var _ = {\n\t      label: 0,\n\t      sent: function sent() {\n\t        if (t[0] & 1) throw t[1];\n\t        return t[1];\n\t      },\n\t      trys: [],\n\t      ops: []\n\t    },\n\t        f,\n\t        y,\n\t        t,\n\t        g;\n\t    return g = {\n\t      next: verb(0),\n\t      \"throw\": verb(1),\n\t      \"return\": verb(2)\n\t    }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n\t      return this;\n\t    }), g;\n\n\t    function verb(n) {\n\t      return function (v) {\n\t        return step([n, v]);\n\t      };\n\t    }\n\n\t    function step(op) {\n\t      if (f) throw new TypeError(\"Generator is already executing.\");\n\n\t      while (_) {\n\t        try {\n\t          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n\t          if (y = 0, t) op = [op[0] & 2, t.value];\n\n\t          switch (op[0]) {\n\t            case 0:\n\t            case 1:\n\t              t = op;\n\t              break;\n\n\t            case 4:\n\t              _.label++;\n\t              return {\n\t                value: op[1],\n\t                done: false\n\t              };\n\n\t            case 5:\n\t              _.label++;\n\t              y = op[1];\n\t              op = [0];\n\t              continue;\n\n\t            case 7:\n\t              op = _.ops.pop();\n\n\t              _.trys.pop();\n\n\t              continue;\n\n\t            default:\n\t              if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n\t                _ = 0;\n\t                continue;\n\t              }\n\n\t              if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n\t                _.label = op[1];\n\t                break;\n\t              }\n\n\t              if (op[0] === 6 && _.label < t[1]) {\n\t                _.label = t[1];\n\t                t = op;\n\t                break;\n\t              }\n\n\t              if (t && _.label < t[2]) {\n\t                _.label = t[2];\n\n\t                _.ops.push(op);\n\n\t                break;\n\t              }\n\n\t              if (t[2]) _.ops.pop();\n\n\t              _.trys.pop();\n\n\t              continue;\n\t          }\n\n\t          op = body.call(thisArg, _);\n\t        } catch (e) {\n\t          op = [6, e];\n\t          y = 0;\n\t        } finally {\n\t          f = t = 0;\n\t        }\n\t      }\n\n\t      if (op[0] & 5) throw op[1];\n\t      return {\n\t        value: op[0] ? op[1] : void 0,\n\t        done: true\n\t      };\n\t    }\n\t  };\n\n\t  var __values = commonjsGlobal && commonjsGlobal.__values || function (o) {\n\t    var s = typeof Symbol === \"function\" && Symbol.iterator,\n\t        m = s && o[s],\n\t        i = 0;\n\t    if (m) return m.call(o);\n\t    if (o && typeof o.length === \"number\") return {\n\t      next: function next() {\n\t        if (o && i >= o.length) o = void 0;\n\t        return {\n\t          value: o && o[i++],\n\t          done: !o\n\t        };\n\t      }\n\t    };\n\t    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n\t  };\n\n\t  exports.__esModule = true;\n\t  var GoEasy_1 = GoEasy$1;\n\t  var callback_utils_1 = callbackUtils;\n\t  var im_api_events_1 = imApiEvents;\n\t  var MessageCache_1 = MessageCache;\n\t  var MessageDeleter_1 = MessageDeleter;\n\t  var MessageRecaller_1 = MessageRecaller;\n\t  var im_1 = im;\n\t  var g_1 = g;\n\t  var remote_history_1 = remoteHistory;\n\t  var UserOffsets_1 = UserOffsets$1;\n\t  var HistoryQueryRequest_1 = HistoryQueryRequest;\n\t  var Calibrator_1 = Calibrator;\n\t  var unreadamount_maxmessage_change_detector_1 = unreadamountMaxmessageChangeDetector;\n\t  var goeasy_event_center_1 = goeasyEventCenter;\n\t  var internal_events_1 = internalEvents;\n\n\t  var History =\n\t  /** @class */\n\t  function () {\n\t    function History(target) {\n\t      this.expiredTime = 0;\n\t      this.remoteHistory = remote_history_1.RemoteHistory.instance;\n\t      this.target = target;\n\t      this.userOffsets = new UserOffsets_1.UserOffsets();\n\t      this.messageCache = new MessageCache_1[\"default\"](target);\n\t    }\n\t    /**\n\t     * @param message\n\t     * @param userOffsets\n\t     */\n\n\n\t    History.prototype.initMaxMessageAndOffsets = function (message, userOffsets) {\n\t      var _this = this;\n\n\t      if (!this.existsMessage(message)) {\n\t        this.messageCache.saveMessage(message);\n\t        userOffsets.forEach(function (userOffset) {\n\t          _this.markLocalMessagesRead(_this.messageCache.all(), userOffset.userId, userOffset.offset, false);\n\t        });\n\t      }\n\t    };\n\n\t    History.prototype.existsMessage = function (message) {\n\t      return this.messageCache.existsMessage(message.messageId);\n\t    };\n\n\t    History.prototype.loadHistory = function (lastTimestamp, limit) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              if (!(this.expiredTime > 0 && !this.messageCache.isEmpty())) return [3\n\t              /*break*/\n\t              , 2];\n\t              return [4\n\t              /*yield*/\n\t              , this.updateByServerChange()];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              _a.label = 2;\n\n\t            case 2:\n\t              if (Calibrator_1[\"default\"].isUndef(limit)) {\n\t                limit = 10;\n\t              } else {\n\t                if (limit > 30) {\n\t                  limit = 30;\n\t                }\n\t              }\n\n\t              return [4\n\t              /*yield*/\n\t              , this.loadServerMessages(lastTimestamp, limit)];\n\n\t            case 3:\n\t              return [2\n\t              /*return*/\n\t              , _a.sent()];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    History.prototype.loadServerMessages = function (lastTimestamp, limit) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        var messages, newLimit, newLastTimestamp, request, content, serverMessages_1;\n\n\t        var _this = this;\n\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              messages = this.messageCache.loadLocalMessages(limit, lastTimestamp);\n\t              if (!(this.messageCache.allLoaded === false && messages.length !== limit)) return [3\n\t              /*break*/\n\t              , 2];\n\t              newLimit = limit - messages.length;\n\t              newLastTimestamp = messages[0] ? messages[0].timestamp : lastTimestamp;\n\t              request = new HistoryQueryRequest_1[\"default\"](this.target.id.toString(), this.target.scene, newLastTimestamp, newLimit, this.target.teamId);\n\t              return [4\n\t              /*yield*/\n\t              , this.remoteHistory.loadServerMessages(this.target, request)];\n\n\t            case 1:\n\t              content = _a.sent();\n\t              serverMessages_1 = content.messages;\n\t              messages = serverMessages_1.concat(messages);\n\t              this.messageCache.cacheServerMessages(request, serverMessages_1);\n\t              content.userOffsets.forEach(function (userOffset) {\n\t                _this.userOffsets.updateOffset(userOffset.userId, userOffset.offset);\n\t              });\n\t              this.userOffsets.offsetMap.forEach(function (offset, userId) {\n\t                _this.markLocalMessagesRead(serverMessages_1, userId, offset, false);\n\t              });\n\t              _a.label = 2;\n\n\t            case 2:\n\t              return [2\n\t              /*return*/\n\t              , messages];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    History.prototype.deleteMessages = function (options) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        var _this = this;\n\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              return [4\n\t              /*yield*/\n\t              , this.aopUnreadAmountMaxMessage(function () {\n\t                return __awaiter(_this, void 0, void 0, function () {\n\t                  var messages;\n\t                  return __generator(this, function (_a) {\n\t                    switch (_a.label) {\n\t                      case 0:\n\t                        messages = options.messages;\n\t                        return [4\n\t                        /*yield*/\n\t                        , MessageDeleter_1[\"default\"].deleteServerMessages(messages)];\n\n\t                      case 1:\n\t                        _a.sent();\n\n\t                        this.messageCache.deleteMessages(messages);\n\t                        callback_utils_1.CallbackUtils.onSuccess(options);\n\t                        return [2\n\t                        /*return*/\n\t                        ];\n\t                    }\n\t                  });\n\t                });\n\t              })];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    History.prototype.syncDeletedMessage = function (deleterId, times) {\n\t      var _this = this;\n\n\t      this.aopUnreadAmountMaxMessage(function () {\n\t        _this.doSyncDeletedMessage(deleterId, times);\n\t      });\n\t    };\n\n\t    History.prototype.doSyncDeletedMessage = function (deleterId, times) {\n\t      if (deleterId === g_1.G.u()) {\n\t        var messages = this.messageCache.findMessagesByTimes(times);\n\t        this.messageCache.deleteMessages(messages);\n\n\t        if (messages.length > 0) {\n\t          im_1.IM.aec.fire(im_api_events_1.ImApiEvents.MESSAGE_DELETED, messages);\n\t        }\n\t      }\n\t    };\n\n\t    History.prototype.recallMessage = function (options) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        var _this = this;\n\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              return [4\n\t              /*yield*/\n\t              , this.aopUnreadAmountMaxMessage(function () {\n\t                return __awaiter(_this, void 0, void 0, function () {\n\t                  var messages;\n\t                  return __generator(this, function (_a) {\n\t                    switch (_a.label) {\n\t                      case 0:\n\t                        messages = options.messages;\n\t                        return [4\n\t                        /*yield*/\n\t                        , MessageRecaller_1[\"default\"].recallServerMessages(messages)];\n\n\t                      case 1:\n\t                        _a.sent();\n\n\t                        this.messageCache.recallMessages(messages);\n\t                        callback_utils_1.CallbackUtils.onSuccess(options);\n\t                        return [2\n\t                        /*return*/\n\t                        ];\n\t                    }\n\t                  });\n\t                });\n\t              })];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    History.prototype.syncRecalledMessage = function (times) {\n\t      var _this = this;\n\n\t      this.aopUnreadAmountMaxMessage(function () {\n\t        return __awaiter(_this, void 0, void 0, function () {\n\t          return __generator(this, function (_a) {\n\t            this.doSyncRecalledMessage(times);\n\t            return [2\n\t            /*return*/\n\t            ];\n\t          });\n\t        });\n\t      });\n\t    };\n\n\t    History.prototype.doSyncRecalledMessage = function (times) {\n\t      var messages = this.messageCache.findMessagesByTimes(times);\n\n\t      if (messages.length > 0) {\n\t        this.messageCache.recallMessages(messages);\n\t        im_1.IM.aec.fire(im_api_events_1.ImApiEvents.MESSAGE_RECALLED, messages);\n\t      }\n\t    };\n\t    /**\n\t     * 发消息成功  lastOffset=myOffset   = message[0].time\n\t     * mark   lastOffset=myOffset     >= message[0].time\n\t     * 收到消息  lastOffset= message[0].time\n\t     * 删除\n\t     * 撤回\n\t     */\n\n\n\t    History.prototype.expire = function () {\n\t      if (!this.messageCache.isEmpty()) {\n\t        this.expiredTime = this.messageCache.maxSuccessMessageTime();\n\t      }\n\t    };\n\n\t    History.prototype.updateByServerChange = function () {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        var _this = this;\n\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              return [4\n\t              /*yield*/\n\t              , this.aopUnreadAmountMaxMessage(function () {\n\t                return __awaiter(_this, void 0, void 0, function () {\n\t                  var content, deletedMessageTimes, recalledTimes;\n\n\t                  var _this = this;\n\n\t                  return __generator(this, function (_a) {\n\t                    switch (_a.label) {\n\t                      case 0:\n\t                        return [4\n\t                        /*yield*/\n\t                        , this.remoteHistory.sync(this.target.scene, this.target.id, this.expiredTime, this.messageCache.minTime(), this.target.teamId)];\n\n\t                      case 1:\n\t                        content = _a.sent();\n\t                        content.userOffsets.forEach(function (userOffset) {\n\t                          _this.markLocalMessagesRead(_this.messageCache.all(), userOffset.userId, userOffset.offset, true);\n\t                        });\n\t                        deletedMessageTimes = content.deletedMessageTimes;\n\n\t                        if (deletedMessageTimes.length > 0) {\n\t                          this.doSyncDeletedMessage(g_1.G.u(), deletedMessageTimes);\n\t                        }\n\n\t                        recalledTimes = content.recalled;\n\n\t                        if (recalledTimes.length > 0) {\n\t                          this.doSyncRecalledMessage(recalledTimes);\n\t                        }\n\n\t                        this.expiredTime = 0;\n\t                        return [2\n\t                        /*return*/\n\t                        ];\n\t                    }\n\t                  });\n\t                });\n\t              })];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    History.prototype.markRead = function () {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        var _this = this;\n\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              return [4\n\t              /*yield*/\n\t              , this.aopUnreadAmountMaxMessage(function () {\n\t                return __awaiter(_this, void 0, void 0, function () {\n\t                  var markTime, myOffset;\n\t                  return __generator(this, function (_a) {\n\t                    switch (_a.label) {\n\t                      case 0:\n\t                        markTime = this.messageCache.maxSuccessMessageTime();\n\t                        myOffset = this.userOffsets.myOffset();\n\t                        if (!(markTime > myOffset)) return [3\n\t                        /*break*/\n\t                        , 2];\n\t                        this.userOffsets.markingTime = markTime;\n\t                        return [4\n\t                        /*yield*/\n\t                        , this.remoteHistory.updateServerOffsets(markTime, this.target)];\n\n\t                      case 1:\n\t                        _a.sent();\n\n\t                        if (markTime === this.userOffsets.markingTime) {\n\t                          //在你异步操作服务器期间，没有其他新的操作给出新的markingTime\n\t                          this.markLocalMessagesRead(this.messageCache.all(), g_1.G.u(), markTime, true);\n\t                        }\n\n\t                        _a.label = 2;\n\n\t                      case 2:\n\t                        return [2\n\t                        /*return*/\n\t                        ];\n\t                    }\n\t                  });\n\t                });\n\t              })];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    History.prototype.syncMarkedMessage = function (event) {\n\t      var _this = this;\n\n\t      this.aopUnreadAmountMaxMessage(function () {\n\t        _this.markLocalMessagesRead(_this.messageCache.all(), event.markerId, event.time, true);\n\t      });\n\t    };\n\n\t    History.prototype.onMessageSending = function (message) {\n\t      var _this = this;\n\n\t      this.aopUnreadAmountMaxMessage(function () {\n\t        _this.messageCache.saveMessage(message);\n\t      });\n\t    };\n\n\t    History.prototype.onMessageSendSuccess = function (message) {\n\t      var _this = this;\n\n\t      this.aopUnreadAmountMaxMessage(function () {\n\t        _this.messageCache.correctPosition(message);\n\n\t        _this.markLocalMessagesRead(_this.messageCache.all(), g_1.G.u(), message.timestamp, true);\n\t      });\n\t    };\n\n\t    History.prototype.onMessageSendFailed = function (message) {\n\t      var maxMessage = this.getMaxMessage();\n\n\t      if (maxMessage === message) {\n\t        goeasy_event_center_1.GoEasyEventCenter.fire(internal_events_1.IM_INTERNAL_EVENTS.MAX_MESSAGE_CHANGED, message);\n\t      }\n\t    };\n\n\t    History.prototype.onMessageReceived = function (message) {\n\t      var _this = this;\n\n\t      this.aopUnreadAmountMaxMessage(function () {\n\t        _this.messageCache.saveMessage(message);\n\n\t        _this.markLocalMessagesRead(_this.messageCache.all(), message.senderId, message.timestamp, true);\n\t      });\n\t    };\n\n\t    History.prototype.aopUnreadAmountMaxMessage = function (functionObj, callbackOptions) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        var decorator, err_1;\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              _a.trys.push([0, 2,, 3]);\n\n\t              decorator = new unreadamount_maxmessage_change_detector_1.UnreadAmountMaxMessageChangeDetector(this);\n\t              decorator.pre();\n\t              return [4\n\t              /*yield*/\n\t              , functionObj()];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              decorator.post();\n\t              return [3\n\t              /*break*/\n\t              , 3];\n\n\t            case 2:\n\t              err_1 = _a.sent();\n\t              callback_utils_1.CallbackUtils.onFailed(callbackOptions, err_1);\n\t              return [3\n\t              /*break*/\n\t              , 3];\n\n\t            case 3:\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    History.prototype.markLocalMessagesRead = function (messages, markerId, offset, fireMessageReadEvent) {\n\t      this.userOffsets.updateOffset(markerId, offset);\n\n\t      if (this.isOtherUserId(markerId)) {\n\t        var markedMessages = this.markMySentRead(messages, offset);\n\n\t        if (fireMessageReadEvent && markedMessages.length > 0) {\n\t          im_1.IM.aec.fire(im_api_events_1.ImApiEvents.MESSAGE_READ, markedMessages);\n\t        }\n\t      } else if (markerId === g_1.G.u()) {\n\t        this.markOthersSentRead(messages, offset);\n\t      } else ;\n\t    };\n\n\t    History.prototype.markOthersSentRead = function (messages, markTime) {\n\t      if (this.target.scene === GoEasy_1.Scene.PRIVATE) {\n\t        for (var i = messages.length - 1; i >= 0; i--) {\n\t          var message = messages[i];\n\n\t          if (message.isOtherSent() && message.timestamp <= markTime) {\n\t            if (message.read) {\n\t              break;\n\t            } else {\n\t              message.read = true;\n\t            }\n\t          }\n\t        }\n\t      }\n\t    };\n\n\t    History.prototype.markMySentRead = function (messages, markTime) {\n\t      var markedMessages = new Array();\n\n\t      if (this.target.scene === GoEasy_1.Scene.PRIVATE) {\n\t        for (var i = messages.length - 1; i >= 0; i--) {\n\t          var message = messages[i];\n\n\t          if (!message.isOtherSent() && message.timestamp <= markTime && message.status === GoEasy_1.MessageStatus.SUCCESS) {\n\t            if (message.read) {\n\t              break;\n\t            } else {\n\t              message.read = true;\n\t              markedMessages.push(message);\n\t            }\n\t          }\n\t        }\n\t      }\n\n\t      return markedMessages;\n\t    };\n\n\t    History.prototype.isOtherUserId = function (userId) {\n\t      if (this.target.scene === GoEasy_1.Scene.CS) {\n\t        var customerId = this.target.customerId();\n\n\t        if (g_1.G.u() === customerId) {\n\t          return userId !== g_1.G.u();\n\t        } else {\n\t          return userId === customerId;\n\t        }\n\t      } else {\n\t        return userId !== g_1.G.u();\n\t      }\n\t    };\n\n\t    History.prototype.unreadAmount = function (accepted) {\n\t      var e_1, _a;\n\n\t      var unreadAmount = 0;\n\t      var myOffset = this.userOffsets.myOffset();\n\t      var messages = this.messageCache.all();\n\n\t      try {\n\t        for (var messages_1 = __values(messages), messages_1_1 = messages_1.next(); !messages_1_1.done; messages_1_1 = messages_1.next()) {\n\t          var message = messages_1_1.value;\n\n\t          if (message.isOtherSent() && message.recalled === false && message.timestamp > myOffset) {\n\t            unreadAmount += 1;\n\t          }\n\t        }\n\t      } catch (e_1_1) {\n\t        e_1 = {\n\t          error: e_1_1\n\t        };\n\t      } finally {\n\t        try {\n\t          if (messages_1_1 && !messages_1_1.done && (_a = messages_1[\"return\"])) _a.call(messages_1);\n\t        } finally {\n\t          if (e_1) throw e_1.error;\n\t        }\n\t      }\n\n\t      return unreadAmount;\n\t    };\n\n\t    History.prototype.getMaxMessage = function (accepted) {\n\t      return this.messageCache.getMaxMessage();\n\t    };\n\n\t    History.prototype.maxTime = function (accepted) {\n\t      var lastMessage = this.getMaxMessage();\n\n\t      if (Calibrator_1[\"default\"].isDef(lastMessage)) {\n\t        return lastMessage.timestamp;\n\t      }\n\n\t      return 0;\n\t    };\n\n\t    return History;\n\t  }();\n\n\t  exports[\"default\"] = History;\n\t})(History);\n\n\tvar agentHistory = {};\n\n\tvar liveSession = {};\n\n\tvar liveSessionRequest = {};\n\n\tliveSessionRequest.__esModule = true;\n\tliveSessionRequest.LiveSessionRequest = void 0;\n\n\tvar LiveSessionRequest =\n\t/** @class */\n\tfunction () {\n\t  function LiveSessionRequest(teamId, customerId) {\n\t    this.teamId = teamId;\n\t    this.customerId = customerId;\n\t  }\n\n\t  return LiveSessionRequest;\n\t}();\n\n\tliveSessionRequest.LiveSessionRequest = LiveSessionRequest;\n\n\tvar customerStatus = {};\n\n\tcustomerStatus.__esModule = true;\n\tcustomerStatus.CustomerStatus = void 0;\n\n\tvar CustomerStatus =\n\t/** @class */\n\tfunction () {\n\t  function CustomerStatus() {}\n\n\t  return CustomerStatus;\n\t}();\n\n\tcustomerStatus.CustomerStatus = CustomerStatus;\n\n\tvar agentStatus = {};\n\n\tvar csOnlineRequest = {};\n\n\tcsOnlineRequest.__esModule = true;\n\tcsOnlineRequest.CSOnlineRequest = void 0;\n\n\tvar CSOnlineRequest =\n\t/** @class */\n\tfunction () {\n\t  function CSOnlineRequest(teamId, teamData, agentData) {\n\t    this.teamId = teamId;\n\t    this.teamData = JSON.stringify(teamData);\n\t    this.agentData = JSON.stringify(agentData);\n\t  }\n\n\t  return CSOnlineRequest;\n\t}();\n\n\tcsOnlineRequest.CSOnlineRequest = CSOnlineRequest;\n\n\tvar csOfflineRequest = {};\n\n\tcsOfflineRequest.__esModule = true;\n\tcsOfflineRequest.CSOfflineRequest = void 0;\n\n\tvar CSOfflineRequest =\n\t/** @class */\n\tfunction () {\n\t  function CSOfflineRequest(teamId) {\n\t    this.teamId = teamId;\n\t  }\n\n\t  return CSOfflineRequest;\n\t}();\n\n\tcsOfflineRequest.CSOfflineRequest = CSOfflineRequest;\n\n\tvar csAgentsQueryRequest = {};\n\n\tcsAgentsQueryRequest.__esModule = true;\n\tcsAgentsQueryRequest.CsAgentsQueryRequest = void 0;\n\n\tvar CsAgentsQueryRequest =\n\t/** @class */\n\tfunction () {\n\t  function CsAgentsQueryRequest(teamId) {\n\t    this.teamId = teamId;\n\t  }\n\n\t  return CsAgentsQueryRequest;\n\t}();\n\n\tcsAgentsQueryRequest.CsAgentsQueryRequest = CsAgentsQueryRequest;\n\n\tvar __awaiter$6 = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n\t  function adopt(value) {\n\t    return value instanceof P ? value : new P(function (resolve) {\n\t      resolve(value);\n\t    });\n\t  }\n\n\t  return new (P || (P = Promise))(function (resolve, reject) {\n\t    function fulfilled(value) {\n\t      try {\n\t        step(generator.next(value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function rejected(value) {\n\t      try {\n\t        step(generator[\"throw\"](value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function step(result) {\n\t      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n\t    }\n\n\t    step((generator = generator.apply(thisArg, _arguments || [])).next());\n\t  });\n\t};\n\n\tvar __generator$6 = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n\t  var _ = {\n\t    label: 0,\n\t    sent: function sent() {\n\t      if (t[0] & 1) throw t[1];\n\t      return t[1];\n\t    },\n\t    trys: [],\n\t    ops: []\n\t  },\n\t      f,\n\t      y,\n\t      t,\n\t      g;\n\t  return g = {\n\t    next: verb(0),\n\t    \"throw\": verb(1),\n\t    \"return\": verb(2)\n\t  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n\t    return this;\n\t  }), g;\n\n\t  function verb(n) {\n\t    return function (v) {\n\t      return step([n, v]);\n\t    };\n\t  }\n\n\t  function step(op) {\n\t    if (f) throw new TypeError(\"Generator is already executing.\");\n\n\t    while (_) {\n\t      try {\n\t        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n\t        if (y = 0, t) op = [op[0] & 2, t.value];\n\n\t        switch (op[0]) {\n\t          case 0:\n\t          case 1:\n\t            t = op;\n\t            break;\n\n\t          case 4:\n\t            _.label++;\n\t            return {\n\t              value: op[1],\n\t              done: false\n\t            };\n\n\t          case 5:\n\t            _.label++;\n\t            y = op[1];\n\t            op = [0];\n\t            continue;\n\n\t          case 7:\n\t            op = _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\n\t          default:\n\t            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n\t              _ = 0;\n\t              continue;\n\t            }\n\n\t            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n\t              _.label = op[1];\n\t              break;\n\t            }\n\n\t            if (op[0] === 6 && _.label < t[1]) {\n\t              _.label = t[1];\n\t              t = op;\n\t              break;\n\t            }\n\n\t            if (t && _.label < t[2]) {\n\t              _.label = t[2];\n\n\t              _.ops.push(op);\n\n\t              break;\n\t            }\n\n\t            if (t[2]) _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\t        }\n\n\t        op = body.call(thisArg, _);\n\t      } catch (e) {\n\t        op = [6, e];\n\t        y = 0;\n\t      } finally {\n\t        f = t = 0;\n\t      }\n\t    }\n\n\t    if (op[0] & 5) throw op[1];\n\t    return {\n\t      value: op[0] ? op[1] : void 0,\n\t      done: true\n\t    };\n\t  }\n\t};\n\n\tagentStatus.__esModule = true;\n\tagentStatus.AgentStatus = void 0;\n\tvar Rocket_1$2 = Rocket;\n\tvar RocketTypes_1$4 = RocketTypes;\n\tvar Permission_1$2 = Permission;\n\tvar SocketTimeout_1$2 = SocketTimeout;\n\tvar Calibrator_1$7 = Calibrator;\n\tvar cs_online_request_1 = csOnlineRequest;\n\tvar cs_offline_request_1 = csOfflineRequest;\n\tvar goeasy_event_center_1$5 = goeasyEventCenter;\n\tvar internal_events_1$5 = internalEvents;\n\tvar callback_utils_1$6 = callbackUtils;\n\tvar g_1$7 = g;\n\tvar cs_agents_query_request_1 = csAgentsQueryRequest;\n\tvar RemoteEvents_1 = RemoteEvents;\n\n\tvar AgentStatus =\n\t/** @class */\n\tfunction () {\n\t  function AgentStatus() {\n\t    this[\"synchronized\"] = true;\n\t    g_1$7.G.s().addDisconnectedObserver(this.onDisconnected.bind(this));\n\t    g_1$7.G.s().addConnectedObserver(this.onConnected.bind(this));\n\t    g_1$7.G.s().addMessageObserver(RemoteEvents_1.RemoteEvents.CS_ONLINE_CHANGED, this.onlineChanged.bind(this));\n\t  }\n\n\t  AgentStatus.getInstance = function () {\n\t    if (!AgentStatus.instance) {\n\t      AgentStatus.instance = new AgentStatus();\n\t    }\n\n\t    return AgentStatus.instance;\n\t  };\n\n\t  AgentStatus.prototype.queryTeams = function () {\n\t    var _this = this;\n\n\t    if (!this.queryMyTeamPromise) {\n\t      this.queryMyTeamPromise = new Promise(function (resolve, reject) {\n\t        console.log('start query team.');\n\t        var rocket = new Rocket_1$2[\"default\"]({\n\t          name: RocketTypes_1$4.RocketTypes.CS_MY_TEAMS,\n\t          params: {},\n\t          permission: Permission_1$2.Permission.READ,\n\t          singleTimeout: SocketTimeout_1$2.SocketTimeout.commonQuerySingle,\n\t          totalTimeout: SocketTimeout_1$2.SocketTimeout.commonQueryTotal,\n\t          fail: function fail(err) {\n\t            reject(err);\n\t          },\n\t          success: function success(res) {\n\t            _this.teamIds = new Set(res.content);\n\t            _this[\"synchronized\"] = true;\n\t            resolve(_this.teamIds);\n\t          }\n\t        });\n\t        g_1$7.G.s().emit(rocket);\n\t      });\n\t    }\n\n\t    return this.queryMyTeamPromise;\n\t  };\n\n\t  AgentStatus.prototype.myTeams = function () {\n\t    if (this[\"synchronized\"] && this.queryMyTeamPromise) {\n\t      return this.teamIds;\n\t    } else {\n\t      throw 'please query team first.';\n\t    }\n\t  };\n\n\t  AgentStatus.prototype.isOnline = function (teamId, option) {\n\t    return __awaiter$6(this, void 0, void 0, function () {\n\t      return __generator$6(this, function (_a) {\n\t        switch (_a.label) {\n\t          case 0:\n\t            return [4\n\t            /*yield*/\n\t            , this.queryTeams()];\n\n\t          case 1:\n\t            _a.sent();\n\n\t            callback_utils_1$6.CallbackUtils.onSuccess(option, this.teamIds.has(teamId));\n\t            return [2\n\t            /*return*/\n\t            ];\n\t        }\n\t      });\n\t    });\n\t  };\n\n\t  AgentStatus.prototype.online = function (teamId, option) {\n\t    var _this = this;\n\n\t    if (!Calibrator_1$7[\"default\"].isObject(option.agentData) || !Calibrator_1$7[\"default\"].isObject(option.teamData)) {\n\t      throw {\n\t        code: 400,\n\t        content: \"agentData and teamData require an object\"\n\t      };\n\t    }\n\n\t    var request = new cs_online_request_1.CSOnlineRequest(teamId, option.teamData, option.agentData);\n\t    var rocket = new Rocket_1$2[\"default\"]({\n\t      name: RocketTypes_1$4.RocketTypes.CS_ONLINE,\n\t      params: request,\n\t      permission: Permission_1$2.Permission.WRITE,\n\t      singleTimeout: SocketTimeout_1$2.SocketTimeout.commonRequestSingle,\n\t      totalTimeout: SocketTimeout_1$2.SocketTimeout.commonRequestTotal,\n\t      fail: function fail(err) {\n\t        callback_utils_1$6.CallbackUtils.onFailed(option, err);\n\t      },\n\t      success: function success(res) {\n\t        _this.teamIds.add(teamId);\n\n\t        callback_utils_1$6.CallbackUtils.onSuccess(option);\n\t        goeasy_event_center_1$5.GoEasyEventCenter.fire(internal_events_1$5.IM_INTERNAL_EVENTS.CS_ONLINE_SUCCESS);\n\t      }\n\t    });\n\t    g_1$7.G.s().emit(rocket);\n\t  };\n\n\t  AgentStatus.prototype.offline = function (teamId, option) {\n\t    var _this = this;\n\n\t    var request = new cs_offline_request_1.CSOfflineRequest(teamId);\n\t    var rocket = new Rocket_1$2[\"default\"]({\n\t      name: RocketTypes_1$4.RocketTypes.CS_OFFLINE,\n\t      params: request,\n\t      permission: Permission_1$2.Permission.WRITE,\n\t      singleTimeout: SocketTimeout_1$2.SocketTimeout.commonRequestSingle,\n\t      totalTimeout: SocketTimeout_1$2.SocketTimeout.commonRequestTotal,\n\t      fail: function fail(err) {\n\t        callback_utils_1$6.CallbackUtils.onFailed(option, err);\n\t      },\n\t      success: function success(res) {\n\t        _this.teamIds[\"delete\"](teamId);\n\n\t        callback_utils_1$6.CallbackUtils.onSuccess(option);\n\t        goeasy_event_center_1$5.GoEasyEventCenter.fire(internal_events_1$5.IM_INTERNAL_EVENTS.CS_OFFLINE_SUCCESS);\n\t      }\n\t    });\n\t    g_1$7.G.s().emit(rocket);\n\t  };\n\n\t  AgentStatus.prototype.agents = function (teamId, options) {\n\t    var request = new cs_agents_query_request_1.CsAgentsQueryRequest(teamId);\n\t    var rocket = new Rocket_1$2[\"default\"]({\n\t      name: RocketTypes_1$4.RocketTypes.CS_AGENTS,\n\t      params: request,\n\t      permission: Permission_1$2.Permission.READ,\n\t      singleTimeout: SocketTimeout_1$2.SocketTimeout.commonQuerySingle,\n\t      totalTimeout: SocketTimeout_1$2.SocketTimeout.commonQueryTotal,\n\t      fail: function fail(err) {\n\t        callback_utils_1$6.CallbackUtils.onFailed(options, err);\n\t      },\n\t      success: function success(res) {\n\t        res.content.forEach(function (agent) {\n\t          agent.data = JSON.parse(agent.data);\n\t        });\n\t        callback_utils_1$6.CallbackUtils.onSuccess(options, res);\n\t      }\n\t    });\n\t    g_1$7.G.s().emit(rocket);\n\t  };\n\n\t  AgentStatus.prototype.onlineChanged = function (event) {\n\t    if (event.online) {\n\t      this.teamIds.add(event.teamId);\n\t    } else {\n\t      this.teamIds[\"delete\"](event.teamId);\n\t    }\n\t  };\n\n\t  AgentStatus.prototype.onDisconnected = function () {\n\t    this.queryMyTeamPromise = null;\n\t    this.teamIds = null;\n\t  }; //todo:类似的实现，比如PendingConversation会不会自动加载\n\n\n\t  AgentStatus.prototype.onConnected = function () {\n\t    if (this[\"synchronized\"]) {\n\t      //至少查询过一次，断网重连的时候，才有必要重新拉去\n\t      this.queryMyTeamPromise = this.queryTeams();\n\t    }\n\t  };\n\n\t  return AgentStatus;\n\t}();\n\n\tagentStatus.AgentStatus = AgentStatus;\n\n\tvar __awaiter$5 = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n\t  function adopt(value) {\n\t    return value instanceof P ? value : new P(function (resolve) {\n\t      resolve(value);\n\t    });\n\t  }\n\n\t  return new (P || (P = Promise))(function (resolve, reject) {\n\t    function fulfilled(value) {\n\t      try {\n\t        step(generator.next(value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function rejected(value) {\n\t      try {\n\t        step(generator[\"throw\"](value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function step(result) {\n\t      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n\t    }\n\n\t    step((generator = generator.apply(thisArg, _arguments || [])).next());\n\t  });\n\t};\n\n\tvar __generator$5 = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n\t  var _ = {\n\t    label: 0,\n\t    sent: function sent() {\n\t      if (t[0] & 1) throw t[1];\n\t      return t[1];\n\t    },\n\t    trys: [],\n\t    ops: []\n\t  },\n\t      f,\n\t      y,\n\t      t,\n\t      g;\n\t  return g = {\n\t    next: verb(0),\n\t    \"throw\": verb(1),\n\t    \"return\": verb(2)\n\t  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n\t    return this;\n\t  }), g;\n\n\t  function verb(n) {\n\t    return function (v) {\n\t      return step([n, v]);\n\t    };\n\t  }\n\n\t  function step(op) {\n\t    if (f) throw new TypeError(\"Generator is already executing.\");\n\n\t    while (_) {\n\t      try {\n\t        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n\t        if (y = 0, t) op = [op[0] & 2, t.value];\n\n\t        switch (op[0]) {\n\t          case 0:\n\t          case 1:\n\t            t = op;\n\t            break;\n\n\t          case 4:\n\t            _.label++;\n\t            return {\n\t              value: op[1],\n\t              done: false\n\t            };\n\n\t          case 5:\n\t            _.label++;\n\t            y = op[1];\n\t            op = [0];\n\t            continue;\n\n\t          case 7:\n\t            op = _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\n\t          default:\n\t            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n\t              _ = 0;\n\t              continue;\n\t            }\n\n\t            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n\t              _.label = op[1];\n\t              break;\n\t            }\n\n\t            if (op[0] === 6 && _.label < t[1]) {\n\t              _.label = t[1];\n\t              t = op;\n\t              break;\n\t            }\n\n\t            if (t && _.label < t[2]) {\n\t              _.label = t[2];\n\n\t              _.ops.push(op);\n\n\t              break;\n\t            }\n\n\t            if (t[2]) _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\t        }\n\n\t        op = body.call(thisArg, _);\n\t      } catch (e) {\n\t        op = [6, e];\n\t        y = 0;\n\t      } finally {\n\t        f = t = 0;\n\t      }\n\t    }\n\n\t    if (op[0] & 5) throw op[1];\n\t    return {\n\t      value: op[0] ? op[1] : void 0,\n\t      done: true\n\t    };\n\t  }\n\t};\n\n\tliveSession.__esModule = true;\n\tliveSession.LiveSession = void 0;\n\tvar GoEasy_1$7 = GoEasy$1;\n\tvar live_session_request_1 = liveSessionRequest;\n\tvar validator_utils_1$5 = validatorUtils;\n\tvar Rocket_1$1 = Rocket;\n\tvar RocketTypes_1$3 = RocketTypes;\n\tvar Permission_1$1 = Permission;\n\tvar SocketTimeout_1$1 = SocketTimeout;\n\tvar callback_utils_1$5 = callbackUtils;\n\tvar g_1$6 = g;\n\tvar goeasy_event_center_1$4 = goeasyEventCenter;\n\tvar internal_events_1$4 = internalEvents;\n\tvar customer_status_1 = customerStatus;\n\tvar cs_message_type_1$2 = csMessageType;\n\tvar agent_status_1$2 = agentStatus;\n\n\tvar LiveSession =\n\t/** @class */\n\tfunction () {\n\t  function LiveSession(teamId) {\n\t    this.teamId = teamId;\n\t    goeasy_event_center_1$4.GoEasyEventCenter.on(internal_events_1$4.IM_INTERNAL_EVENTS.CS_AGENT_MESSAGE_RECEIVED, this.onMessageReceived);\n\t    goeasy_event_center_1$4.GoEasyEventCenter.on(internal_events_1$4.IM_INTERNAL_EVENTS.CS_ACCEPTED, this.onMessageReceived);\n\t    goeasy_event_center_1$4.GoEasyEventCenter.on(internal_events_1$4.IM_INTERNAL_EVENTS.CS_ENDED, this.onMessageReceived);\n\t    goeasy_event_center_1$4.GoEasyEventCenter.on(internal_events_1$4.IM_INTERNAL_EVENTS.CS_TRANSFER, this.onMessageReceived);\n\t  }\n\n\t  LiveSession.live = function (teamId, options) {\n\t    return __awaiter$5(this, void 0, void 0, function () {\n\t      var customerId, request, rocket;\n\n\t      var _this = this;\n\n\t      return __generator$5(this, function (_a) {\n\t        switch (_a.label) {\n\t          case 0:\n\t            customerId = options.customerId; //todo:是否有必要判断该客户已经监听的话，直接返回结果，不再发请求\n\n\t            validator_utils_1$5[\"default\"].validateId(customerId, \"customerId\");\n\t            request = new live_session_request_1.LiveSessionRequest(teamId, customerId);\n\t            return [4\n\t            /*yield*/\n\t            , agent_status_1$2.AgentStatus.getInstance().queryTeams()];\n\n\t          case 1:\n\t            _a.sent();\n\n\t            rocket = new Rocket_1$1[\"default\"]({\n\t              name: RocketTypes_1$3.RocketTypes.CS_LIVE_SESSION,\n\t              params: request,\n\t              permission: Permission_1$1.Permission.WRITE,\n\t              singleTimeout: SocketTimeout_1$1.SocketTimeout.commonRequestSingle,\n\t              totalTimeout: SocketTimeout_1$1.SocketTimeout.commonRequestTotal,\n\t              fail: function fail(err) {\n\t                callback_utils_1$5.CallbackUtils.onFailed(options, err);\n\t              },\n\t              success: function success(res) {\n\t                LiveSession.destroy();\n\t                _this.session = new LiveSession(teamId);\n\t                _this.session.liveOptions = options;\n\t                var customerStatus = res.content.customerStatus;\n\n\t                if (customerStatus.status === 'ACCEPTED') {\n\t                  customerStatus.agent.data = JSON.parse(customerStatus.agent.data);\n\t                }\n\n\t                _this.session.status = customerStatus;\n\n\t                _this.session.liveOptions.onStatusUpdated(_this.session.status);\n\n\t                callback_utils_1$5.CallbackUtils.onSuccess(options);\n\t              }\n\t            });\n\t            g_1$6.G.s().emit(rocket);\n\t            return [2\n\t            /*return*/\n\t            ];\n\t        }\n\t      });\n\t    });\n\t  };\n\n\t  LiveSession.prototype.customerId = function () {\n\t    return this.liveOptions.customerId;\n\t  };\n\n\t  LiveSession.isMyCustomer = function (target) {\n\t    var session = LiveSession.session; //先看这个客户是不是正在围观的,围观才意味着有可能是一个吃瓜客户，否则一定是自己的客户\n\n\t    if (session && session.teamId === target.teamId && session.customerId() === target.customerId()) {\n\t      var myTeams = agent_status_1$2.AgentStatus.getInstance().myTeams();\n\t      var agent = session.status.agent; //必须是我的team, agent为空就是pending和free, 或agent是我自己， 否则就是找一个吃瓜消息\n\n\t      return myTeams.has(target.teamId) && (!agent || agent.id === g_1$6.G.u());\n\t    }\n\n\t    return true;\n\t  };\n\n\t  LiveSession.quit = function (options) {\n\t    var currentSession = LiveSession.session;\n\n\t    if (currentSession) {\n\t      var customerId = currentSession.liveOptions.customerId;\n\t      validator_utils_1$5[\"default\"].validateId(customerId, \"customerId\");\n\t      var request = new live_session_request_1.LiveSessionRequest(currentSession.teamId, customerId);\n\t      var rocket = new Rocket_1$1[\"default\"]({\n\t        name: RocketTypes_1$3.RocketTypes.CS_QUIT_LIVE,\n\t        params: request,\n\t        permission: Permission_1$1.Permission.WRITE,\n\t        singleTimeout: SocketTimeout_1$1.SocketTimeout.commonRequestSingle,\n\t        totalTimeout: SocketTimeout_1$1.SocketTimeout.commonRequestTotal,\n\t        fail: function fail(err) {\n\t          callback_utils_1$5.CallbackUtils.onFailed(options, err);\n\t        },\n\t        success: function success(res) {\n\t          LiveSession.destroy();\n\t          callback_utils_1$5.CallbackUtils.onSuccess(options);\n\t        }\n\t      });\n\t      g_1$6.G.s().emit(rocket);\n\t    }\n\t  };\n\n\t  LiveSession.destroy = function () {\n\t    var session = LiveSession.session;\n\n\t    if (session) {\n\t      goeasy_event_center_1$4.GoEasyEventCenter.off(internal_events_1$4.IM_INTERNAL_EVENTS.CS_AGENT_MESSAGE_RECEIVED, session.onMessageReceived);\n\t      goeasy_event_center_1$4.GoEasyEventCenter.off(internal_events_1$4.IM_INTERNAL_EVENTS.CS_ACCEPTED, session.onMessageReceived);\n\t      goeasy_event_center_1$4.GoEasyEventCenter.off(internal_events_1$4.IM_INTERNAL_EVENTS.CS_ENDED, session.onMessageReceived);\n\t      goeasy_event_center_1$4.GoEasyEventCenter.off(internal_events_1$4.IM_INTERNAL_EVENTS.CS_TRANSFER, session.onMessageReceived);\n\t      LiveSession.session = null;\n\t    }\n\t  };\n\n\t  LiveSession.prototype.onMessageReceived = function (message) {\n\t    var self = LiveSession.session;\n\n\t    if (message.scene() === GoEasy_1$7.Scene.CS && self.liveOptions) {\n\t      var csMessage = message;\n\t      var customerId = self.liveOptions.customerId;\n\n\t      if (self.teamId === csMessage.teamId && csMessage.customerId() === customerId) {\n\t        self.tryUpdateStatus(csMessage);\n\t        self.liveOptions.onNewMessage(csMessage);\n\t      }\n\t    }\n\t  };\n\n\t  LiveSession.prototype.tryUpdateStatus = function (message) {\n\t    if (this.status.status !== 'FREE' && this.status.sessionId > message.sessionId) {\n\t      return;\n\t    }\n\n\t    var newStatus;\n\n\t    switch (message.type) {\n\t      case cs_message_type_1$2.CSMessageType.ACCEPT:\n\t        newStatus = new customer_status_1.CustomerStatus();\n\t        newStatus.status = 'ACCEPTED';\n\t        newStatus.start = message.payload.sessionStart;\n\t        newStatus.sessionId = message.sessionId;\n\t        newStatus.agent = new GoEasy_1$7.User(message.senderId, message.senderData);\n\t        break;\n\n\t      case cs_message_type_1$2.CSMessageType.END:\n\t        newStatus = new customer_status_1.CustomerStatus();\n\t        newStatus.status = 'FREE';\n\t        break;\n\n\t      case cs_message_type_1$2.CSMessageType.TRANSFER:\n\t        newStatus = new customer_status_1.CustomerStatus();\n\t        newStatus.status = 'ACCEPTED';\n\t        newStatus.start = message.payload.sessionStart;\n\t        newStatus.sessionId = message.sessionId;\n\t        newStatus.agent = message.payload.transferTo;\n\t        break;\n\n\t      default:\n\t        if (this.status.status === 'FREE') {\n\t          newStatus = new customer_status_1.CustomerStatus();\n\t          newStatus.status = 'PENDING';\n\t          newStatus.start = message.timestamp;\n\t          newStatus.sessionId = message.sessionId;\n\t        }\n\n\t        break;\n\t    }\n\n\t    if (newStatus) {\n\t      this.status = newStatus;\n\t      this.liveOptions.onStatusUpdated(newStatus);\n\t    }\n\t  };\n\n\t  return LiveSession;\n\t}();\n\n\tliveSession.LiveSession = LiveSession;\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  var __awaiter = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n\t    function adopt(value) {\n\t      return value instanceof P ? value : new P(function (resolve) {\n\t        resolve(value);\n\t      });\n\t    }\n\n\t    return new (P || (P = Promise))(function (resolve, reject) {\n\t      function fulfilled(value) {\n\t        try {\n\t          step(generator.next(value));\n\t        } catch (e) {\n\t          reject(e);\n\t        }\n\t      }\n\n\t      function rejected(value) {\n\t        try {\n\t          step(generator[\"throw\"](value));\n\t        } catch (e) {\n\t          reject(e);\n\t        }\n\t      }\n\n\t      function step(result) {\n\t        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n\t      }\n\n\t      step((generator = generator.apply(thisArg, _arguments || [])).next());\n\t    });\n\t  };\n\n\t  var __generator = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n\t    var _ = {\n\t      label: 0,\n\t      sent: function sent() {\n\t        if (t[0] & 1) throw t[1];\n\t        return t[1];\n\t      },\n\t      trys: [],\n\t      ops: []\n\t    },\n\t        f,\n\t        y,\n\t        t,\n\t        g;\n\t    return g = {\n\t      next: verb(0),\n\t      \"throw\": verb(1),\n\t      \"return\": verb(2)\n\t    }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n\t      return this;\n\t    }), g;\n\n\t    function verb(n) {\n\t      return function (v) {\n\t        return step([n, v]);\n\t      };\n\t    }\n\n\t    function step(op) {\n\t      if (f) throw new TypeError(\"Generator is already executing.\");\n\n\t      while (_) {\n\t        try {\n\t          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n\t          if (y = 0, t) op = [op[0] & 2, t.value];\n\n\t          switch (op[0]) {\n\t            case 0:\n\t            case 1:\n\t              t = op;\n\t              break;\n\n\t            case 4:\n\t              _.label++;\n\t              return {\n\t                value: op[1],\n\t                done: false\n\t              };\n\n\t            case 5:\n\t              _.label++;\n\t              y = op[1];\n\t              op = [0];\n\t              continue;\n\n\t            case 7:\n\t              op = _.ops.pop();\n\n\t              _.trys.pop();\n\n\t              continue;\n\n\t            default:\n\t              if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n\t                _ = 0;\n\t                continue;\n\t              }\n\n\t              if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n\t                _.label = op[1];\n\t                break;\n\t              }\n\n\t              if (op[0] === 6 && _.label < t[1]) {\n\t                _.label = t[1];\n\t                t = op;\n\t                break;\n\t              }\n\n\t              if (t && _.label < t[2]) {\n\t                _.label = t[2];\n\n\t                _.ops.push(op);\n\n\t                break;\n\t              }\n\n\t              if (t[2]) _.ops.pop();\n\n\t              _.trys.pop();\n\n\t              continue;\n\t          }\n\n\t          op = body.call(thisArg, _);\n\t        } catch (e) {\n\t          op = [6, e];\n\t          y = 0;\n\t        } finally {\n\t          f = t = 0;\n\t        }\n\t      }\n\n\t      if (op[0] & 5) throw op[1];\n\t      return {\n\t        value: op[0] ? op[1] : void 0,\n\t        done: true\n\t      };\n\t    }\n\t  };\n\n\t  exports.__esModule = true;\n\t  var HistoryQueryRequest_1 = HistoryQueryRequest;\n\t  var History_1 = History;\n\t  var callback_utils_1 = callbackUtils;\n\t  var Calibrator_1 = Calibrator;\n\t  var goeasy_event_center_1 = goeasyEventCenter;\n\t  var internal_events_1 = internalEvents;\n\t  var g_1 = g;\n\t  var cs_message_type_1 = csMessageType;\n\t  var live_session_1 = liveSession;\n\n\t  var AgentHistory =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(AgentHistory, _super);\n\n\t    function AgentHistory(target) {\n\t      var _this = _super.call(this, target) || this;\n\n\t      _this.unread = 0;\n\t      _this.markingAmount = 0;\n\t      return _this;\n\t    }\n\n\t    AgentHistory.prototype.loadHistory = function (lastTimestamp, limit) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              if (Calibrator_1[\"default\"].isUndef(limit)) {\n\t                limit = 10;\n\t              } else {\n\t                if (limit > 30) {\n\t                  limit = 30;\n\t                }\n\t              }\n\n\t              return [4\n\t              /*yield*/\n\t              , this.loadServerMessages(lastTimestamp, limit)];\n\n\t            case 1:\n\t              return [2\n\t              /*return*/\n\t              , _a.sent()];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    AgentHistory.prototype.loadServerMessages = function (lastTimestamp, limit) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        var request, content;\n\n\t        var _this = this;\n\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              request = new HistoryQueryRequest_1[\"default\"](this.target.id.toString(), this.target.scene, lastTimestamp, limit, this.target.teamId);\n\t              return [4\n\t              /*yield*/\n\t              , this.remoteHistory.loadServerMessages(this.target, request)];\n\n\t            case 1:\n\t              content = _a.sent();\n\t              content.userOffsets.forEach(function (userOffset) {\n\t                _this.userOffsets.updateOffset(userOffset.userId, userOffset.offset);\n\t              });\n\t              return [2\n\t              /*return*/\n\t              , content.messages];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    AgentHistory.prototype.deleteMessages = function (options) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        return __generator(this, function (_a) {\n\t          callback_utils_1.CallbackUtils.onFailed(options, \"Delete CS message is not supported yet\");\n\t          return [2\n\t          /*return*/\n\t          ];\n\t        });\n\t      });\n\t    };\n\n\t    AgentHistory.prototype.recallMessage = function (options) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        return __generator(this, function (_a) {\n\t          callback_utils_1.CallbackUtils.onFailed(options, \"Recall CS message is not supported yet\");\n\t          return [2\n\t          /*return*/\n\t          ];\n\t        });\n\t      });\n\t    };\n\n\t    AgentHistory.prototype.initMaxMessageAndOffsets = function (message, userOffsets) {\n\t      var _this = this;\n\n\t      userOffsets.forEach(function (userOffset) {\n\t        _this.userOffsets.updateOffset(userOffset.userId, userOffset.offset);\n\t      });\n\n\t      if (Calibrator_1[\"default\"].isUndef(this.acceptedMaxMessage) || this.acceptedMaxMessage.timestamp < message.timestamp) {\n\t        this.increaseUnreadAmount(message);\n\t      }\n\n\t      this.saveAcceptedMessage(message);\n\t    };\n\n\t    AgentHistory.prototype.initPendingMaxMessageAndOffsets = function (message, userOffsets) {\n\t      var _this = this;\n\n\t      userOffsets.forEach(function (userOffset) {\n\t        _this.userOffsets.updateOffset(userOffset.userId, userOffset.offset);\n\t      });\n\t      this.savePendingMessage(message);\n\t    };\n\n\t    AgentHistory.prototype.savePendingMessage = function (message) {\n\t      if (this.pendingMaxMessage) {\n\t        if (this.pendingMaxMessage.timestamp < message.timestamp) {\n\t          this.pendingMaxMessage = message;\n\t        }\n\t      } else {\n\t        this.pendingMaxMessage = message;\n\t      }\n\t    };\n\n\t    AgentHistory.prototype.saveAcceptedMessage = function (message) {\n\t      if (this.acceptedMaxMessage) {\n\t        if (this.acceptedMaxMessage.timestamp < message.timestamp) {\n\t          this.acceptedMaxMessage = message;\n\t        }\n\t      } else {\n\t        this.acceptedMaxMessage = message;\n\t      }\n\t    };\n\n\t    AgentHistory.prototype.onMessageSending = function (message) {\n\t      this.saveAcceptedMessage(message);\n\t      goeasy_event_center_1.GoEasyEventCenter.fire(internal_events_1.IM_INTERNAL_EVENTS.MAX_MESSAGE_CHANGED, message);\n\t    };\n\n\t    AgentHistory.prototype.onMessageSendSuccess = function (message) {\n\t      this.saveAcceptedMessage(message);\n\t      this.userOffsets.updateOffset(message.senderId, message.timestamp);\n\n\t      if (this.acceptedMaxMessage === message) {\n\t        goeasy_event_center_1.GoEasyEventCenter.fire(internal_events_1.IM_INTERNAL_EVENTS.MAX_MESSAGE_CHANGED, message);\n\t      }\n\t    };\n\n\t    AgentHistory.prototype.onMessageSendFailed = function (message) {\n\t      if (this.acceptedMaxMessage === message) {\n\t        goeasy_event_center_1.GoEasyEventCenter.fire(internal_events_1.IM_INTERNAL_EVENTS.MAX_MESSAGE_CHANGED, message);\n\t      }\n\t    };\n\n\t    AgentHistory.prototype.onMessageReceived = function (message) {\n\t      if (live_session_1.LiveSession.isMyCustomer(this.target)) {\n\t        if (!message.accepted || message.senderId !== g_1.G.u() && message.type === cs_message_type_1.CSMessageType.ACCEPT) {\n\t          this.savePendingMessage(message);\n\t        } else {\n\t          this.saveAcceptedMessage(message);\n\t        }\n\n\t        this.userOffsets.updateOffset(message.senderId, message.timestamp);\n\t        this.increaseUnreadAmount(message);\n\t        goeasy_event_center_1.GoEasyEventCenter.fire(internal_events_1.IM_INTERNAL_EVENTS.MAX_MESSAGE_CHANGED, message);\n\t      }\n\t    };\n\n\t    AgentHistory.prototype.increaseUnreadAmount = function (message) {\n\t      if (message.sendByCustomer() || message.type === cs_message_type_1.CSMessageType.TRANSFER && message.senderId !== g_1.G.u()) {\n\t        var myOffset = this.userOffsets.myOffset();\n\n\t        if (myOffset < message.timestamp && message.accepted) {\n\t          this.unread += 1;\n\t        }\n\t      }\n\t    };\n\n\t    AgentHistory.prototype.markRead = function () {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        var markTime;\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              markTime = this.maxAcceptedMessageTime();\n\t              if (!(live_session_1.LiveSession.isMyCustomer(this.target) && this.preMark(markTime))) return [3\n\t              /*break*/\n\t              , 2];\n\t              return [4\n\t              /*yield*/\n\t              , this.remoteHistory.updateServerOffsets(markTime, this.target)];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              this.postMark(markTime);\n\t              _a.label = 2;\n\n\t            case 2:\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    AgentHistory.prototype.preMark = function (markTime) {\n\t      var myOffset = this.userOffsets.myOffset(); //todo:如果mark时 最后一条消息如果是自己发送的，有可能导致mark了没反应，但应该不会经常出现，观察一下再看\n\n\t      if (markTime > this.userOffsets.markingTime && markTime > myOffset) {\n\t        this.userOffsets.markingTime = markTime;\n\t        this.markingAmount = this.unread;\n\t        return true;\n\t      }\n\n\t      return false;\n\t    };\n\n\t    AgentHistory.prototype.postMark = function (markTime) {\n\t      if (markTime === this.userOffsets.markingTime) {\n\t        //确定是同一个请求才处理\n\t        this.unread -= this.markingAmount;\n\t        this.markingAmount = 0;\n\t        this.userOffsets.updateOffset(g_1.G.u(), markTime);\n\t        goeasy_event_center_1.GoEasyEventCenter.fire(internal_events_1.IM_INTERNAL_EVENTS.UNREAD_AMOUNT_CHANGED, this.target);\n\t      }\n\t    };\n\n\t    AgentHistory.prototype.syncMarkedMessage = function (event) {// todo 远程同步mark不处理 do nothing\n\t    };\n\n\t    AgentHistory.prototype.getMaxMessage = function (accepted) {\n\t      return accepted ? this.acceptedMaxMessage : this.pendingMaxMessage;\n\t    };\n\n\t    AgentHistory.prototype.unreadAmount = function (accepted) {\n\t      return accepted ? this.unread : 0;\n\t    };\n\n\t    AgentHistory.prototype.existsMessage = function (message) {\n\t      return this.acceptedMaxMessage && this.acceptedMaxMessage.messageId === message.messageId || this.pendingMaxMessage && this.pendingMaxMessage.messageId === message.messageId;\n\t    };\n\n\t    AgentHistory.prototype.maxAcceptedMessageTime = function () {\n\t      return this.acceptedMaxMessage ? this.acceptedMaxMessage.timestamp : 0;\n\t    };\n\n\t    AgentHistory.prototype.maxTime = function (accepted) {\n\t      var maxMessage = this.getMaxMessage(accepted);\n\n\t      if (maxMessage) {\n\t        return maxMessage.timestamp;\n\t      }\n\n\t      return 0;\n\t    };\n\n\t    return AgentHistory;\n\t  }(History_1[\"default\"]);\n\n\t  exports[\"default\"] = AgentHistory;\n\t})(agentHistory);\n\n\tvar customerHistory = {};\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  var __awaiter = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n\t    function adopt(value) {\n\t      return value instanceof P ? value : new P(function (resolve) {\n\t        resolve(value);\n\t      });\n\t    }\n\n\t    return new (P || (P = Promise))(function (resolve, reject) {\n\t      function fulfilled(value) {\n\t        try {\n\t          step(generator.next(value));\n\t        } catch (e) {\n\t          reject(e);\n\t        }\n\t      }\n\n\t      function rejected(value) {\n\t        try {\n\t          step(generator[\"throw\"](value));\n\t        } catch (e) {\n\t          reject(e);\n\t        }\n\t      }\n\n\t      function step(result) {\n\t        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n\t      }\n\n\t      step((generator = generator.apply(thisArg, _arguments || [])).next());\n\t    });\n\t  };\n\n\t  var __generator = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n\t    var _ = {\n\t      label: 0,\n\t      sent: function sent() {\n\t        if (t[0] & 1) throw t[1];\n\t        return t[1];\n\t      },\n\t      trys: [],\n\t      ops: []\n\t    },\n\t        f,\n\t        y,\n\t        t,\n\t        g;\n\t    return g = {\n\t      next: verb(0),\n\t      \"throw\": verb(1),\n\t      \"return\": verb(2)\n\t    }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n\t      return this;\n\t    }), g;\n\n\t    function verb(n) {\n\t      return function (v) {\n\t        return step([n, v]);\n\t      };\n\t    }\n\n\t    function step(op) {\n\t      if (f) throw new TypeError(\"Generator is already executing.\");\n\n\t      while (_) {\n\t        try {\n\t          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n\t          if (y = 0, t) op = [op[0] & 2, t.value];\n\n\t          switch (op[0]) {\n\t            case 0:\n\t            case 1:\n\t              t = op;\n\t              break;\n\n\t            case 4:\n\t              _.label++;\n\t              return {\n\t                value: op[1],\n\t                done: false\n\t              };\n\n\t            case 5:\n\t              _.label++;\n\t              y = op[1];\n\t              op = [0];\n\t              continue;\n\n\t            case 7:\n\t              op = _.ops.pop();\n\n\t              _.trys.pop();\n\n\t              continue;\n\n\t            default:\n\t              if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n\t                _ = 0;\n\t                continue;\n\t              }\n\n\t              if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n\t                _.label = op[1];\n\t                break;\n\t              }\n\n\t              if (op[0] === 6 && _.label < t[1]) {\n\t                _.label = t[1];\n\t                t = op;\n\t                break;\n\t              }\n\n\t              if (t && _.label < t[2]) {\n\t                _.label = t[2];\n\n\t                _.ops.push(op);\n\n\t                break;\n\t              }\n\n\t              if (t[2]) _.ops.pop();\n\n\t              _.trys.pop();\n\n\t              continue;\n\t          }\n\n\t          op = body.call(thisArg, _);\n\t        } catch (e) {\n\t          op = [6, e];\n\t          y = 0;\n\t        } finally {\n\t          f = t = 0;\n\t        }\n\t      }\n\n\t      if (op[0] & 5) throw op[1];\n\t      return {\n\t        value: op[0] ? op[1] : void 0,\n\t        done: true\n\t      };\n\t    }\n\t  };\n\n\t  exports.__esModule = true;\n\t  var History_1 = History;\n\t  var callback_utils_1 = callbackUtils;\n\n\t  var CustomerHistory =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(CustomerHistory, _super);\n\n\t    function CustomerHistory(target) {\n\t      return _super.call(this, target) || this;\n\t    }\n\n\t    CustomerHistory.prototype.deleteMessages = function (options) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        return __generator(this, function (_a) {\n\t          callback_utils_1.CallbackUtils.onFailed(options, \"Delete CS message is not supported yet\");\n\t          return [2\n\t          /*return*/\n\t          ];\n\t        });\n\t      });\n\t    };\n\n\t    CustomerHistory.prototype.recallMessage = function (options) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        return __generator(this, function (_a) {\n\t          callback_utils_1.CallbackUtils.onFailed(options, \"Recall CS message is not supported yet\");\n\t          return [2\n\t          /*return*/\n\t          ];\n\t        });\n\t      });\n\t    };\n\n\t    return CustomerHistory;\n\t  }(History_1[\"default\"]);\n\n\t  exports[\"default\"] = CustomerHistory;\n\t})(customerHistory);\n\n\t(function (exports) {\n\n\t  var __awaiter = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n\t    function adopt(value) {\n\t      return value instanceof P ? value : new P(function (resolve) {\n\t        resolve(value);\n\t      });\n\t    }\n\n\t    return new (P || (P = Promise))(function (resolve, reject) {\n\t      function fulfilled(value) {\n\t        try {\n\t          step(generator.next(value));\n\t        } catch (e) {\n\t          reject(e);\n\t        }\n\t      }\n\n\t      function rejected(value) {\n\t        try {\n\t          step(generator[\"throw\"](value));\n\t        } catch (e) {\n\t          reject(e);\n\t        }\n\t      }\n\n\t      function step(result) {\n\t        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n\t      }\n\n\t      step((generator = generator.apply(thisArg, _arguments || [])).next());\n\t    });\n\t  };\n\n\t  var __generator = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n\t    var _ = {\n\t      label: 0,\n\t      sent: function sent() {\n\t        if (t[0] & 1) throw t[1];\n\t        return t[1];\n\t      },\n\t      trys: [],\n\t      ops: []\n\t    },\n\t        f,\n\t        y,\n\t        t,\n\t        g;\n\t    return g = {\n\t      next: verb(0),\n\t      \"throw\": verb(1),\n\t      \"return\": verb(2)\n\t    }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n\t      return this;\n\t    }), g;\n\n\t    function verb(n) {\n\t      return function (v) {\n\t        return step([n, v]);\n\t      };\n\t    }\n\n\t    function step(op) {\n\t      if (f) throw new TypeError(\"Generator is already executing.\");\n\n\t      while (_) {\n\t        try {\n\t          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n\t          if (y = 0, t) op = [op[0] & 2, t.value];\n\n\t          switch (op[0]) {\n\t            case 0:\n\t            case 1:\n\t              t = op;\n\t              break;\n\n\t            case 4:\n\t              _.label++;\n\t              return {\n\t                value: op[1],\n\t                done: false\n\t              };\n\n\t            case 5:\n\t              _.label++;\n\t              y = op[1];\n\t              op = [0];\n\t              continue;\n\n\t            case 7:\n\t              op = _.ops.pop();\n\n\t              _.trys.pop();\n\n\t              continue;\n\n\t            default:\n\t              if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n\t                _ = 0;\n\t                continue;\n\t              }\n\n\t              if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n\t                _.label = op[1];\n\t                break;\n\t              }\n\n\t              if (op[0] === 6 && _.label < t[1]) {\n\t                _.label = t[1];\n\t                t = op;\n\t                break;\n\t              }\n\n\t              if (t && _.label < t[2]) {\n\t                _.label = t[2];\n\n\t                _.ops.push(op);\n\n\t                break;\n\t              }\n\n\t              if (t[2]) _.ops.pop();\n\n\t              _.trys.pop();\n\n\t              continue;\n\t          }\n\n\t          op = body.call(thisArg, _);\n\t        } catch (e) {\n\t          op = [6, e];\n\t          y = 0;\n\t        } finally {\n\t          f = t = 0;\n\t        }\n\t      }\n\n\t      if (op[0] & 5) throw op[1];\n\t      return {\n\t        value: op[0] ? op[1] : void 0,\n\t        done: true\n\t      };\n\t    }\n\t  };\n\n\t  exports.__esModule = true;\n\t  var GoEasy_1 = GoEasy$1;\n\t  var Calibrator_1 = Calibrator;\n\t  var History_1 = History;\n\t  var Target_1 = Target$1;\n\t  var goeasy_event_center_1 = goeasyEventCenter;\n\t  var internal_events_1 = internalEvents;\n\t  var AbstractMessage_1 = AbstractMessage$1;\n\t  var MessageDeleter_1 = MessageDeleter;\n\t  var MessageRecaller_1 = MessageRecaller;\n\t  var RemoteEvents_1 = RemoteEvents;\n\t  var g_1 = g;\n\t  var callback_utils_1 = callbackUtils;\n\t  var agent_history_1 = agentHistory;\n\t  var customer_history_1 = customerHistory;\n\n\t  var Histories =\n\t  /** @class */\n\t  function () {\n\t    function Histories() {\n\t      this.map = new Map();\n\t    }\n\n\t    Histories.init = function () {\n\t      if (!Histories.instance) {\n\t        Histories.instance = new Histories();\n\t      }\n\n\t      return Histories.instance;\n\t    };\n\n\t    Histories.prototype.initialListeners = function () {\n\t      var _this = this;\n\n\t      goeasy_event_center_1.GoEasyEventCenter.on(internal_events_1.IM_INTERNAL_EVENTS.MESSAGE_SENDING, function (message) {\n\t        return _this.onMessageSending(message);\n\t      });\n\t      goeasy_event_center_1.GoEasyEventCenter.on(internal_events_1.IM_INTERNAL_EVENTS.MESSAGE_SEND_SUCCESS, function (message) {\n\t        return _this.onMessageSendSuccess(message);\n\t      });\n\t      goeasy_event_center_1.GoEasyEventCenter.on(internal_events_1.IM_INTERNAL_EVENTS.MESSAGE_SEND_FAILED, function (message) {\n\t        return _this.onMessageSendFailed(message);\n\t      });\n\t      goeasy_event_center_1.GoEasyEventCenter.on(internal_events_1.IM_INTERNAL_EVENTS.MESSAGE_RECEIVED, function (message) {\n\t        return _this.onMessageReceived(message);\n\t      });\n\t      goeasy_event_center_1.GoEasyEventCenter.on(internal_events_1.IM_INTERNAL_EVENTS.CS_AGENT_MESSAGE_RECEIVED, function (message) {\n\t        return _this.onMessageReceived(message);\n\t      });\n\t      goeasy_event_center_1.GoEasyEventCenter.on(internal_events_1.IM_INTERNAL_EVENTS.CS_ACCEPTED, function (message) {\n\t        return _this.onMessageReceived(message);\n\t      });\n\t      goeasy_event_center_1.GoEasyEventCenter.on(internal_events_1.IM_INTERNAL_EVENTS.CS_ENDED, function (message) {\n\t        return _this.onMessageReceived(message);\n\t      });\n\t      goeasy_event_center_1.GoEasyEventCenter.on(internal_events_1.IM_INTERNAL_EVENTS.CS_TRANSFER, function (message) {\n\t        return _this.onMessageReceived(message);\n\t      });\n\t      g_1.G.s().addMessageObserver(RemoteEvents_1.RemoteEvents.IM_MSG_READ, this.onRemoteMarkRead.bind(this));\n\t      g_1.G.s().addMessageObserver(RemoteEvents_1.RemoteEvents.IM_MSG_DELETED, this.onRemoteMessageDeleted.bind(this));\n\t      g_1.G.s().addMessageObserver(RemoteEvents_1.RemoteEvents.IM_MSG_RECALLED, this.onRemoteMessageRecalled.bind(this));\n\t      g_1.G.s().addDisconnectedObserver(this.onDisconnected.bind(this));\n\t    };\n\n\t    Histories.prototype.loadHistory = function (options, teamId) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        var target, history, messages;\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              target = this.queryToTarget(options, teamId);\n\t              history = this.findOrCreateHistory(target);\n\t              return [4\n\t              /*yield*/\n\t              , history.loadHistory(options.lastTimestamp, options.limit)];\n\n\t            case 1:\n\t              messages = _a.sent();\n\t              callback_utils_1.CallbackUtils.onSuccess(options, {\n\t                code: 200,\n\t                content: messages\n\t              });\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    Histories.prototype.queryToTarget = function (options, teamId) {\n\t      if (Calibrator_1[\"default\"].isDef(options.userId)) {\n\t        return new Target_1.Target(GoEasy_1.Scene.PRIVATE, options.userId);\n\t      } else if (Calibrator_1[\"default\"].isDef(options.groupId)) {\n\t        return new Target_1.Target(GoEasy_1.Scene.GROUP, options.groupId);\n\t      } else if (Calibrator_1[\"default\"].isDef(options.type)) {\n\t        if (!Object.values(GoEasy_1.Scene).includes(options.type)) {\n\t          throw new Error('incorrect type, must be: ' + Object.values(GoEasy_1.Scene));\n\t        }\n\n\t        if (Calibrator_1[\"default\"].isUndef(options.id)) {\n\t          throw new Error('If type is not empty, id is required.');\n\t        }\n\n\t        if (GoEasy_1.Scene.CS == options.type) {\n\t          //如果teamId为空，就认为是customer端查询，更好的方式是能够判断当前用户是否customer\n\t          if (Calibrator_1[\"default\"].isUndef(teamId)) {\n\t            teamId = options.id;\n\t          }\n\t        }\n\n\t        return new Target_1.Target(options.type, options.id, teamId);\n\t      }\n\n\t      throw new Error('incorrect query options.');\n\t    };\n\n\t    Histories.prototype.onMessageSending = function (message) {\n\t      var target = Target_1.Target.byIMMessage(message);\n\t      var history = this.findOrCreateHistory(target);\n\t      history.onMessageSending(message);\n\t    };\n\n\t    Histories.prototype.onMessageSendSuccess = function (message) {\n\t      var target = Target_1.Target.byIMMessage(message);\n\t      var history = this.findHistory(target);\n\t      history.onMessageSendSuccess(message);\n\t    };\n\n\t    Histories.prototype.onMessageSendFailed = function (message) {\n\t      var target = Target_1.Target.byIMMessage(message);\n\t      var history = this.findHistory(target);\n\t      history.onMessageSendFailed(message);\n\t    };\n\n\t    Histories.prototype.onMessageReceived = function (message) {\n\t      var target = Target_1.Target.byIMMessage(message);\n\t      var history = this.findOrCreateHistory(target);\n\t      history.onMessageReceived(message);\n\t    };\n\n\t    Histories.prototype.privateMarkAsRead = function (markOption) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        var target;\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              if (Calibrator_1[\"default\"].isUndef(markOption.userId)) {\n\t                throw new Error('userId could not be empty.');\n\t              }\n\n\t              target = Target_1.Target.byScene(GoEasy_1.Scene.PRIVATE, markOption.userId);\n\t              return [4\n\t              /*yield*/\n\t              , this.markAsRead(target, markOption)];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    Histories.prototype.groupMarkAsRead = function (markOption) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        var target;\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              if (Calibrator_1[\"default\"].isUndef(markOption.groupId)) {\n\t                throw new Error('groupId could not be empty.');\n\t              }\n\n\t              target = Target_1.Target.byScene(GoEasy_1.Scene.GROUP, markOption.groupId);\n\t              return [4\n\t              /*yield*/\n\t              , this.markAsRead(target, markOption)];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    Histories.prototype.markMessageAsRead = function (option, teamId) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        var target;\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              if (Calibrator_1[\"default\"].isUndef(option.id)) {\n\t                throw new Error('id could not be empty.');\n\t              }\n\n\t              if (!Object.values(GoEasy_1.Scene).includes(option.type)) {\n\t                throw new Error('incorrect type, must be: ' + Object.values(GoEasy_1.Scene));\n\t              }\n\n\t              if (GoEasy_1.Scene.CS == option.type) {\n\t                //如果teamId为空，就认为是customer端mark，更好的方式是能够判断当前用户是否customer\n\t                if (Calibrator_1[\"default\"].isUndef(teamId)) {\n\t                  teamId = option.id;\n\t                }\n\t              }\n\n\t              target = Target_1.Target.byScene(option.type, option.id, teamId);\n\t              return [4\n\t              /*yield*/\n\t              , this.markAsRead(target, option)];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    Histories.prototype.markAsRead = function (target, markOption) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        var history;\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              history = this.findHistory(target);\n\t              if (!history) return [3\n\t              /*break*/\n\t              , 2];\n\t              return [4\n\t              /*yield*/\n\t              , history.markRead()];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              _a.label = 2;\n\n\t            case 2:\n\t              callback_utils_1.CallbackUtils.onSuccess(markOption);\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    Histories.prototype.onRemoteMarkRead = function (event) {\n\t      var target = Target_1.Target.byMessageReadRemoteEvent(event);\n\t      var history = this.findHistory(target);\n\n\t      if (history) {\n\t        history.syncMarkedMessage(event);\n\t      }\n\t    };\n\n\t    Histories.prototype.deleteMessage = function (options) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        var message, target, history;\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              this.validateMessageArray(options.messages);\n\t              MessageDeleter_1[\"default\"].validate(options);\n\t              message = options.messages[0];\n\t              target = Target_1.Target.byIMMessage(message);\n\t              history = this.findHistory(target);\n\t              if (!history) return [3\n\t              /*break*/\n\t              , 2];\n\t              return [4\n\t              /*yield*/\n\t              , history.deleteMessages(options)];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              return [3\n\t              /*break*/\n\t              , 3];\n\n\t            case 2:\n\t              throw {\n\t                code: 400,\n\t                content: 'No message that could be deleted'\n\t              };\n\n\t            case 3:\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    Histories.prototype.onRemoteMessageDeleted = function (event) {\n\t      var target = Target_1.Target.byIMMessageDeletedEvent(event);\n\t      var history = this.findHistory(target);\n\n\t      if (history) {\n\t        history.syncDeletedMessage(event.deleterId, event.times);\n\t      }\n\t    };\n\n\t    Histories.prototype.recallMessage = function (options) {\n\t      return __awaiter(this, void 0, void 0, function () {\n\t        var message, target, history;\n\t        return __generator(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              this.validateMessageArray(options.messages);\n\t              MessageRecaller_1[\"default\"].validate(options);\n\t              message = options.messages[0];\n\t              target = Target_1.Target.byIMMessage(message);\n\t              history = this.findHistory(target);\n\t              if (!history) return [3\n\t              /*break*/\n\t              , 2];\n\t              return [4\n\t              /*yield*/\n\t              , history.recallMessage(options)];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              return [3\n\t              /*break*/\n\t              , 3];\n\n\t            case 2:\n\t              throw {\n\t                code: 400,\n\t                content: 'No message that could be recalled'\n\t              };\n\n\t            case 3:\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    Histories.prototype.onRemoteMessageRecalled = function (event) {\n\t      var target = Target_1.Target.byRemoteRecallEvent(event);\n\t      var history = this.findHistory(target);\n\n\t      if (history) {\n\t        history.syncRecalledMessage(event.times);\n\t      }\n\t    };\n\n\t    Histories.prototype.onDisconnected = function () {\n\t      this.map.forEach(function (history, key) {\n\t        history.expire();\n\t      });\n\t    };\n\n\t    Histories.prototype.findOrCreateHistory = function (target) {\n\t      var history = this.findHistory(target);\n\n\t      if (history) {\n\t        return history;\n\t      } else {\n\t        if (target.scene === GoEasy_1.Scene.CS) {\n\t          if (g_1.G.u() === target.customerId()) {\n\t            history = new customer_history_1[\"default\"](target);\n\t          } else {\n\t            history = new agent_history_1[\"default\"](target);\n\t          }\n\t        } else {\n\t          history = new History_1[\"default\"](target);\n\t        }\n\n\t        this.map.set(target.toString(), history);\n\t        return history;\n\t      }\n\t    };\n\n\t    Histories.get = function (target) {\n\t      return Histories.instance.findOrCreateHistory(target);\n\t    };\n\n\t    Histories.prototype.findHistory = function (target) {\n\t      return this.map.get(target.toString());\n\t    };\n\n\t    Histories.prototype.validateMessageArray = function (messages) {\n\t      if (!Calibrator_1[\"default\"].isArray(messages) || Calibrator_1[\"default\"].isEmpty(messages)) {\n\t        throw {\n\t          code: 400,\n\t          content: \"messages requires non empty array\"\n\t        };\n\t      }\n\n\t      if (messages.length > 50) {\n\t        throw {\n\t          code: 400,\n\t          content: \"The maximum number of messages is 50\"\n\t        };\n\t      }\n\n\t      var firstTarget = Target_1.Target.byIMMessage(messages[0]);\n\n\t      for (var i = 0; i < messages.length; i++) {\n\t        var message = messages[i];\n\n\t        if (!(message instanceof AbstractMessage_1.AbstractMessage)) {\n\t          throw {\n\t            code: 400,\n\t            content: \"message[\" + i + \"] is not a correct message\"\n\t          };\n\t        }\n\n\t        if (i > 0) {\n\t          var target = Target_1.Target.byIMMessage(message);\n\n\t          if (target.scene !== firstTarget.scene || target.id !== firstTarget.id) {\n\t            throw {\n\t              code: 400,\n\t              content: \"each message must be from the same friend or group\"\n\t            };\n\t          }\n\t        }\n\t      }\n\t    };\n\n\t    return Histories;\n\t  }();\n\n\t  exports[\"default\"] = Histories;\n\t})(histories);\n\n\tConversation$1.__esModule = true;\n\tConversation$1.Conversation = void 0;\n\tvar GoEasy_1$6 = GoEasy$1;\n\tvar histories_1$5 = histories;\n\n\tvar Conversation =\n\t/** @class */\n\tfunction () {\n\t  function Conversation(target) {\n\t    this.top = false;\n\t    this.data = null;\n\t    this.dataLoaded = false;\n\t    this.target = target;\n\t  }\n\n\t  Conversation.prototype.toDto = function () {\n\t    var scene = this.target.scene;\n\t    var targetId = this.target.id;\n\t    var conversationDto = new GoEasy_1$6.ConversationDTO();\n\n\t    if (scene === GoEasy_1$6.Scene.PRIVATE) {\n\t      conversationDto.userId = targetId;\n\t    } else if (scene === GoEasy_1$6.Scene.GROUP) {\n\t      conversationDto.groupId = targetId;\n\t    } else if (scene === GoEasy_1$6.Scene.CS) {\n\t      //customer\n\t      conversationDto.id = this.target.teamId;\n\t    }\n\n\t    conversationDto.type = scene;\n\t    conversationDto.lastMessage = this.getMaxMessage();\n\t    conversationDto.unread = this.getUnreadAmount();\n\t    conversationDto.top = this.top;\n\t    conversationDto.data = this.data;\n\t    return conversationDto;\n\t  };\n\n\t  Conversation.prototype.getMaxMessage = function () {\n\t    return histories_1$5[\"default\"].get(this.target).getMaxMessage();\n\t  };\n\n\t  Conversation.prototype.getUnreadAmount = function () {\n\t    return histories_1$5[\"default\"].get(this.target).unreadAmount();\n\t  };\n\n\t  Conversation.prototype.maxMessageTime = function () {\n\t    return histories_1$5[\"default\"].get(this.target).maxTime();\n\t  };\n\n\t  return Conversation;\n\t}();\n\n\tConversation$1.Conversation = Conversation;\n\n\tvar CSConversation$1 = {};\n\n\tvar __extends$a = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tCSConversation$1.__esModule = true;\n\tCSConversation$1.CSConversation = void 0;\n\tvar Conversation_1$1 = Conversation$1;\n\tvar histories_1$4 = histories;\n\tvar GoEasy_1$5 = GoEasy$1;\n\n\tvar CSConversation =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$a(CSConversation, _super);\n\n\t  function CSConversation(target) {\n\t    var _this = _super.call(this, target) || this;\n\n\t    _this.accepted = false;\n\t    return _this;\n\t  }\n\n\t  CSConversation.prototype.toDto = function () {\n\t    var conversationDto = new GoEasy_1$5.ConversationDTO();\n\t    var scene = this.target.scene;\n\t    var customerId = this.target.id;\n\t    var teamId = this.target.teamId;\n\t    conversationDto.id = customerId;\n\t    conversationDto.teamId = teamId;\n\t    conversationDto.type = scene;\n\t    conversationDto.lastMessage = this.getMaxMessage();\n\t    conversationDto.unread = this.getUnreadAmount();\n\t    conversationDto.top = this.top;\n\t    conversationDto.data = this.data;\n\t    return conversationDto;\n\t  };\n\n\t  CSConversation.prototype.getMaxMessage = function () {\n\t    return histories_1$4[\"default\"].get(this.target).getMaxMessage(this.accepted);\n\t  };\n\n\t  CSConversation.prototype.getUnreadAmount = function () {\n\t    return histories_1$4[\"default\"].get(this.target).unreadAmount(this.accepted);\n\t  };\n\n\t  CSConversation.prototype.maxMessageTime = function () {\n\t    return histories_1$4[\"default\"].get(this.target).maxTime(this.accepted);\n\t  };\n\n\t  return CSConversation;\n\t}(Conversation_1$1.Conversation);\n\n\tCSConversation$1.CSConversation = CSConversation;\n\n\tvar remoteConversations = {};\n\n\tvar TopConversationRequest = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\n\t  var TopConversationRequest =\n\t  /** @class */\n\t  function () {\n\t    function TopConversationRequest(type, top, targetId, teamId) {\n\t      this.type = type;\n\t      this.top = top;\n\t      this.targetId = targetId;\n\t      this.teamId = teamId;\n\t    }\n\n\t    return TopConversationRequest;\n\t  }();\n\n\t  exports[\"default\"] = TopConversationRequest;\n\t})(TopConversationRequest);\n\n\tvar RemoveConversationRequest = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\n\t  var RemoveConversationRequest =\n\t  /** @class */\n\t  function () {\n\t    function RemoveConversationRequest(type, targetId, teamId) {\n\t      this.type = type;\n\t      this.targetId = targetId;\n\t      this.teamId = teamId;\n\t    }\n\n\t    return RemoveConversationRequest;\n\t  }();\n\n\t  exports[\"default\"] = RemoveConversationRequest;\n\t})(RemoveConversationRequest);\n\n\tvar dataRequest = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\n\t  var DataRequest =\n\t  /** @class */\n\t  function () {\n\t    function DataRequest(type, targetId, teamId) {\n\t      this.type = type;\n\t      this.targetId = targetId;\n\t      this.teamId = teamId;\n\t    }\n\n\t    return DataRequest;\n\t  }();\n\n\t  exports[\"default\"] = DataRequest;\n\t})(dataRequest);\n\n\t(function (exports) {\n\n\t  var __awaiter = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n\t    function adopt(value) {\n\t      return value instanceof P ? value : new P(function (resolve) {\n\t        resolve(value);\n\t      });\n\t    }\n\n\t    return new (P || (P = Promise))(function (resolve, reject) {\n\t      function fulfilled(value) {\n\t        try {\n\t          step(generator.next(value));\n\t        } catch (e) {\n\t          reject(e);\n\t        }\n\t      }\n\n\t      function rejected(value) {\n\t        try {\n\t          step(generator[\"throw\"](value));\n\t        } catch (e) {\n\t          reject(e);\n\t        }\n\t      }\n\n\t      function step(result) {\n\t        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n\t      }\n\n\t      step((generator = generator.apply(thisArg, _arguments || [])).next());\n\t    });\n\t  };\n\n\t  var __generator = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n\t    var _ = {\n\t      label: 0,\n\t      sent: function sent() {\n\t        if (t[0] & 1) throw t[1];\n\t        return t[1];\n\t      },\n\t      trys: [],\n\t      ops: []\n\t    },\n\t        f,\n\t        y,\n\t        t,\n\t        g;\n\t    return g = {\n\t      next: verb(0),\n\t      \"throw\": verb(1),\n\t      \"return\": verb(2)\n\t    }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n\t      return this;\n\t    }), g;\n\n\t    function verb(n) {\n\t      return function (v) {\n\t        return step([n, v]);\n\t      };\n\t    }\n\n\t    function step(op) {\n\t      if (f) throw new TypeError(\"Generator is already executing.\");\n\n\t      while (_) {\n\t        try {\n\t          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n\t          if (y = 0, t) op = [op[0] & 2, t.value];\n\n\t          switch (op[0]) {\n\t            case 0:\n\t            case 1:\n\t              t = op;\n\t              break;\n\n\t            case 4:\n\t              _.label++;\n\t              return {\n\t                value: op[1],\n\t                done: false\n\t              };\n\n\t            case 5:\n\t              _.label++;\n\t              y = op[1];\n\t              op = [0];\n\t              continue;\n\n\t            case 7:\n\t              op = _.ops.pop();\n\n\t              _.trys.pop();\n\n\t              continue;\n\n\t            default:\n\t              if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n\t                _ = 0;\n\t                continue;\n\t              }\n\n\t              if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n\t                _.label = op[1];\n\t                break;\n\t              }\n\n\t              if (op[0] === 6 && _.label < t[1]) {\n\t                _.label = t[1];\n\t                t = op;\n\t                break;\n\t              }\n\n\t              if (t && _.label < t[2]) {\n\t                _.label = t[2];\n\n\t                _.ops.push(op);\n\n\t                break;\n\t              }\n\n\t              if (t[2]) _.ops.pop();\n\n\t              _.trys.pop();\n\n\t              continue;\n\t          }\n\n\t          op = body.call(thisArg, _);\n\t        } catch (e) {\n\t          op = [6, e];\n\t          y = 0;\n\t        } finally {\n\t          f = t = 0;\n\t        }\n\t      }\n\n\t      if (op[0] & 5) throw op[1];\n\t      return {\n\t        value: op[0] ? op[1] : void 0,\n\t        done: true\n\t      };\n\t    }\n\t  };\n\n\t  exports.__esModule = true;\n\t  var TopConversationRequest_1 = TopConversationRequest;\n\t  var Rocket_1 = Rocket;\n\t  var RocketTypes_1 = RocketTypes;\n\t  var Permission_1 = Permission;\n\t  var SocketTimeout_1 = SocketTimeout;\n\t  var RemoveConversationRequest_1 = RemoveConversationRequest;\n\t  var g_1 = g;\n\t  var data_request_1 = dataRequest;\n\n\t  var RemoteConversations =\n\t  /** @class */\n\t  function () {\n\t    function RemoteConversations() {}\n\n\t    RemoteConversations.prototype.top = function (target, top) {\n\t      var request = new TopConversationRequest_1[\"default\"](target.scene, top, target.id, target.teamId);\n\t      return new Promise(function (resolve, reject) {\n\t        var rocket = new Rocket_1[\"default\"]({\n\t          name: RocketTypes_1.RocketTypes.topConversation,\n\t          params: request,\n\t          permission: Permission_1.Permission.WRITE,\n\t          singleTimeout: SocketTimeout_1.SocketTimeout.commonRequestSingle,\n\t          totalTimeout: SocketTimeout_1.SocketTimeout.commonRequestTotal,\n\t          success: function success(res) {\n\t            if (res.code === 200) {\n\t              resolve(res);\n\t            } else {\n\t              reject(res);\n\t            }\n\t          },\n\t          fail: function fail(err) {\n\t            reject(err);\n\t          }\n\t        });\n\t        g_1.G.s().emit(rocket);\n\t      });\n\t    };\n\n\t    RemoteConversations.prototype.remove = function (target) {\n\t      var request = new RemoveConversationRequest_1[\"default\"](target.scene, target.id, target.teamId);\n\t      return new Promise(function (resolve, reject) {\n\t        var rocket = new Rocket_1[\"default\"]({\n\t          name: RocketTypes_1.RocketTypes.removeConversation,\n\t          params: request,\n\t          permission: Permission_1.Permission.WRITE,\n\t          singleTimeout: SocketTimeout_1.SocketTimeout.commonRequestSingle,\n\t          totalTimeout: SocketTimeout_1.SocketTimeout.commonRequestTotal,\n\t          success: function success(res) {\n\t            if (res.code == 200) {\n\t              resolve(res);\n\t            } else {\n\t              reject(res);\n\t            }\n\t          },\n\t          fail: function fail(err) {\n\t            reject(err);\n\t          }\n\t        });\n\t        g_1.G.s().emit(rocket);\n\t      });\n\t    };\n\n\t    RemoteConversations.prototype.query = function (rocketType) {\n\t      var _this = this;\n\n\t      return new Promise(function (resolve, reject) {\n\t        var rocket = new Rocket_1[\"default\"]({\n\t          name: rocketType,\n\t          params: {},\n\t          permission: Permission_1.Permission.READ,\n\t          singleTimeout: SocketTimeout_1.SocketTimeout.commonQuerySingle,\n\t          totalTimeout: SocketTimeout_1.SocketTimeout.commonQueryTotal,\n\t          fail: function fail(err) {\n\t            reject(err);\n\t          },\n\t          success: function success(result) {\n\t            return __awaiter(_this, void 0, void 0, function () {\n\t              return __generator(this, function (_a) {\n\t                resolve(result);\n\t                return [2\n\t                /*return*/\n\t                ];\n\t              });\n\t            });\n\t          }\n\t        });\n\t        g_1.G.s().emit(rocket);\n\t      });\n\t    };\n\n\t    RemoteConversations.prototype.loadData = function (target) {\n\t      var request = new data_request_1[\"default\"](target.scene, target.id, target.teamId);\n\t      return new Promise(function (resolve, reject) {\n\t        var rocket = new Rocket_1[\"default\"]({\n\t          name: RocketTypes_1.RocketTypes.imData,\n\t          params: request,\n\t          permission: Permission_1.Permission.READ,\n\t          singleTimeout: SocketTimeout_1.SocketTimeout.commonQuerySingle,\n\t          totalTimeout: SocketTimeout_1.SocketTimeout.commonQueryTotal,\n\t          success: function success(result) {\n\t            var data = JSON.parse(result.content);\n\t            resolve(data);\n\t          },\n\t          fail: function fail(error) {\n\t            reject(error);\n\t          }\n\t        });\n\t        g_1.G.s().emit(rocket);\n\t      });\n\t    };\n\n\t    RemoteConversations.instance = new RemoteConversations();\n\t    return RemoteConversations;\n\t  }();\n\n\t  exports[\"default\"] = RemoteConversations;\n\t})(remoteConversations);\n\n\tvar __extends$9 = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tvar __awaiter$4 = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n\t  function adopt(value) {\n\t    return value instanceof P ? value : new P(function (resolve) {\n\t      resolve(value);\n\t    });\n\t  }\n\n\t  return new (P || (P = Promise))(function (resolve, reject) {\n\t    function fulfilled(value) {\n\t      try {\n\t        step(generator.next(value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function rejected(value) {\n\t      try {\n\t        step(generator[\"throw\"](value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function step(result) {\n\t      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n\t    }\n\n\t    step((generator = generator.apply(thisArg, _arguments || [])).next());\n\t  });\n\t};\n\n\tvar __generator$4 = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n\t  var _ = {\n\t    label: 0,\n\t    sent: function sent() {\n\t      if (t[0] & 1) throw t[1];\n\t      return t[1];\n\t    },\n\t    trys: [],\n\t    ops: []\n\t  },\n\t      f,\n\t      y,\n\t      t,\n\t      g;\n\t  return g = {\n\t    next: verb(0),\n\t    \"throw\": verb(1),\n\t    \"return\": verb(2)\n\t  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n\t    return this;\n\t  }), g;\n\n\t  function verb(n) {\n\t    return function (v) {\n\t      return step([n, v]);\n\t    };\n\t  }\n\n\t  function step(op) {\n\t    if (f) throw new TypeError(\"Generator is already executing.\");\n\n\t    while (_) {\n\t      try {\n\t        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n\t        if (y = 0, t) op = [op[0] & 2, t.value];\n\n\t        switch (op[0]) {\n\t          case 0:\n\t          case 1:\n\t            t = op;\n\t            break;\n\n\t          case 4:\n\t            _.label++;\n\t            return {\n\t              value: op[1],\n\t              done: false\n\t            };\n\n\t          case 5:\n\t            _.label++;\n\t            y = op[1];\n\t            op = [0];\n\t            continue;\n\n\t          case 7:\n\t            op = _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\n\t          default:\n\t            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n\t              _ = 0;\n\t              continue;\n\t            }\n\n\t            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n\t              _.label = op[1];\n\t              break;\n\t            }\n\n\t            if (op[0] === 6 && _.label < t[1]) {\n\t              _.label = t[1];\n\t              t = op;\n\t              break;\n\t            }\n\n\t            if (t && _.label < t[2]) {\n\t              _.label = t[2];\n\n\t              _.ops.push(op);\n\n\t              break;\n\t            }\n\n\t            if (t[2]) _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\t        }\n\n\t        op = body.call(thisArg, _);\n\t      } catch (e) {\n\t        op = [6, e];\n\t        y = 0;\n\t      } finally {\n\t        f = t = 0;\n\t      }\n\t    }\n\n\t    if (op[0] & 5) throw op[1];\n\t    return {\n\t      value: op[0] ? op[1] : void 0,\n\t      done: true\n\t    };\n\t  }\n\t};\n\n\tvar __values$1 = commonjsGlobal && commonjsGlobal.__values || function (o) {\n\t  var s = typeof Symbol === \"function\" && Symbol.iterator,\n\t      m = s && o[s],\n\t      i = 0;\n\t  if (m) return m.call(o);\n\t  if (o && typeof o.length === \"number\") return {\n\t    next: function next() {\n\t      if (o && i >= o.length) o = void 0;\n\t      return {\n\t        value: o && o[i++],\n\t        done: !o\n\t      };\n\t    }\n\t  };\n\t  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n\t};\n\n\tConversations$1.__esModule = true;\n\tConversations$1.Conversations = void 0;\n\tvar Conversation_1 = Conversation$1;\n\tvar callback_utils_1$4 = callbackUtils;\n\tvar GoEasy_1$4 = GoEasy$1;\n\tvar remote_abbr_message_builder_1$1 = remoteAbbrMessageBuilder;\n\tvar RocketTypes_1$2 = RocketTypes;\n\tvar im_api_events_1$2 = imApiEvents;\n\tvar sorted_inserter_1 = sortedInserter;\n\tvar goeasy_event_center_1$3 = goeasyEventCenter;\n\tvar internal_events_1$3 = internalEvents;\n\tvar Target_1$2 = Target$1;\n\tvar CSConversation_1$1 = CSConversation$1;\n\tvar im_1$3 = im;\n\tvar remote_conversations_1 = remoteConversations;\n\tvar histories_1$3 = histories;\n\tvar g_1$5 = g;\n\tvar cs_message_type_1$1 = csMessageType;\n\tvar Calibrator_1$6 = Calibrator;\n\n\tvar Conversations =\n\t/** @class */\n\tfunction () {\n\t  function Conversations() {\n\t    var _this = this;\n\n\t    this.list = new Array();\n\t    this.builder = new remote_abbr_message_builder_1$1.RemoteAbbrMessageBuilder();\n\t    this.remoteConversations = remote_conversations_1[\"default\"].instance;\n\t    this[\"synchronized\"] = false;\n\t    goeasy_event_center_1$3.GoEasyEventCenter.on(internal_events_1$3.IM_INTERNAL_EVENTS.MAX_MESSAGE_CHANGED, function (message) {\n\t      return _this.onMaxMessageChanged(message);\n\t    });\n\t    goeasy_event_center_1$3.GoEasyEventCenter.on(internal_events_1$3.IM_INTERNAL_EVENTS.UNREAD_AMOUNT_CHANGED, function (target) {\n\t      return _this.onUnreadMessageChanged(target);\n\t    });\n\t  }\n\n\t  Conversations.prototype.onUnreadMessageChanged = function (target) {\n\t    var conversation = this.findConversation(target);\n\n\t    if (conversation) {\n\t      this.fireUpdated();\n\t    }\n\t  };\n\n\t  Conversations.prototype.fireUpdated = function () {\n\t    var data = this.loadLocalConversations();\n\t    var updatedEventName = this.getUpdatedEventName();\n\t    im_1$3.IM.aec.fire(updatedEventName, {\n\t      unreadTotal: data.content.unreadTotal,\n\t      conversations: data.content.conversations\n\t    });\n\t  };\n\n\t  Conversations.prototype.getUpdatedEventName = function () {\n\t    return im_api_events_1$2.ImApiEvents.CONVERSATIONS_UPDATED;\n\t  };\n\n\t  Conversations.prototype.latestConversations = function (options) {\n\t    return __awaiter$4(this, void 0, void 0, function () {\n\t      var data;\n\t      return __generator$4(this, function (_a) {\n\t        switch (_a.label) {\n\t          case 0:\n\t            if (!!this[\"synchronized\"]) return [3\n\t            /*break*/\n\t            , 2];\n\t            return [4\n\t            /*yield*/\n\t            , this.loadServerConversations()];\n\n\t          case 1:\n\t            _a.sent();\n\n\t            _a.label = 2;\n\n\t          case 2:\n\t            data = this.loadLocalConversations();\n\t            callback_utils_1$4.CallbackUtils.onSuccess(options, data);\n\t            return [2\n\t            /*return*/\n\t            ];\n\t        }\n\t      });\n\t    });\n\t  };\n\n\t  Conversations.prototype.loadServerConversations = function () {\n\t    return __awaiter$4(this, void 0, void 0, function () {\n\t      var rocketType, data;\n\t      return __generator$4(this, function (_a) {\n\t        switch (_a.label) {\n\t          case 0:\n\t            rocketType = this.rocketName();\n\t            return [4\n\t            /*yield*/\n\t            , this.remoteConversations.query(rocketType)];\n\n\t          case 1:\n\t            data = _a.sent();\n\t            this.convertAbbrConversation(data.content);\n\t            this[\"synchronized\"] = true;\n\t            return [2\n\t            /*return*/\n\t            ];\n\t        }\n\t      });\n\t    });\n\t  };\n\n\t  Conversations.prototype.rocketName = function () {\n\t    return RocketTypes_1$2.RocketTypes.imLastConversations;\n\t  };\n\n\t  Conversations.prototype.convertAbbrConversation = function (abbrConversations) {\n\t    var e_1, _a;\n\n\t    var conversations = abbrConversations;\n\n\t    try {\n\t      for (var conversations_1 = __values$1(conversations), conversations_1_1 = conversations_1.next(); !conversations_1_1.done; conversations_1_1 = conversations_1.next()) {\n\t        var abbrConversation = conversations_1_1.value;\n\t        var scene = abbrConversation.t;\n\t        var top_1 = abbrConversation.top;\n\t        var data = abbrConversation.d ? JSON.parse(abbrConversation.d) : {};\n\t        var userOffsets = abbrConversation.userOffsets;\n\t        abbrConversation.lmsg.t = scene;\n\t        var lastMessage = abbrConversation.lmsg;\n\t        var message = this.builder.build(lastMessage);\n\t        var target = Target_1$2.Target.byIMMessage(message);\n\t        var conversation = this.findConversation(target);\n\n\t        if (Calibrator_1$6[\"default\"].isUndef(conversation)) {\n\t          conversation = this.buildByAbbr(abbrConversation, message);\n\t          this.insertOne(conversation);\n\t        } else {\n\t          conversation.top = top_1;\n\t          conversation.data = data;\n\t        }\n\n\t        histories_1$3[\"default\"].get(target).initMaxMessageAndOffsets(message, userOffsets);\n\t        this.correctPosition(conversation);\n\t      }\n\t    } catch (e_1_1) {\n\t      e_1 = {\n\t        error: e_1_1\n\t      };\n\t    } finally {\n\t      try {\n\t        if (conversations_1_1 && !conversations_1_1.done && (_a = conversations_1[\"return\"])) _a.call(conversations_1);\n\t      } finally {\n\t        if (e_1) throw e_1.error;\n\t      }\n\t    }\n\t  };\n\n\t  Conversations.prototype.onMaxMessageChanged = function (message) {\n\t    return __awaiter$4(this, void 0, void 0, function () {\n\t      var csMessage;\n\t      return __generator$4(this, function (_a) {\n\t        switch (_a.label) {\n\t          case 0:\n\t            //对于agent收到的accepted=false的消息, 或者其他agent accepted的消息，不可以更新自己的userConversation，只能更新pendingConversation\n\t            if (message.scene() === GoEasy_1$4.Scene.CS) {\n\t              csMessage = message;\n\n\t              if (g_1$5.G.u() != csMessage.customerId()) {\n\t                if (csMessage.accepted === false || csMessage.type === cs_message_type_1$1.CSMessageType.ACCEPT && csMessage.senderId != g_1$5.G.u()) {\n\t                  return [2\n\t                  /*return*/\n\t                  ];\n\t                }\n\t              }\n\t            }\n\n\t            return [4\n\t            /*yield*/\n\t            , this.saveOrUpdateConversation(message)];\n\n\t          case 1:\n\t            _a.sent();\n\n\t            return [2\n\t            /*return*/\n\t            ];\n\t        }\n\t      });\n\t    });\n\t  };\n\n\t  Conversations.prototype.saveOrUpdateConversation = function (message) {\n\t    return __awaiter$4(this, void 0, void 0, function () {\n\t      var status, target, conversation, _a;\n\n\t      return __generator$4(this, function (_b) {\n\t        switch (_b.label) {\n\t          case 0:\n\t            status = message.status;\n\t            target = Target_1$2.Target.byIMMessage(message);\n\t            conversation = this.findConversation(target);\n\t            if (!(Calibrator_1$6[\"default\"].isUndef(conversation) && status !== GoEasy_1$4.MessageStatus.FAIL)) return [3\n\t            /*break*/\n\t            , 2];\n\t            conversation = this.buildByMessage(message); //todo:可以参考queryteams的方式避免多次请求，和卡主逻辑链\n\n\t            this.insertOne(conversation);\n\t            if (!(status === GoEasy_1$4.MessageStatus.SUCCESS)) return [3\n\t            /*break*/\n\t            , 2];\n\t            _a = conversation;\n\t            return [4\n\t            /*yield*/\n\t            , this.remoteConversations.loadData(target)];\n\n\t          case 1:\n\t            _a.data = _b.sent();\n\t            conversation.dataLoaded = true;\n\t            _b.label = 2;\n\n\t          case 2:\n\t            if (status === GoEasy_1$4.MessageStatus.SENDING) {\n\t              conversation.data = message.getToData();\n\t              conversation.dataLoaded = true;\n\t            }\n\n\t            if (conversation && conversation.dataLoaded) {\n\t              this.correctPosition(conversation);\n\t              this.fireUpdated();\n\t            }\n\n\t            return [2\n\t            /*return*/\n\t            ];\n\t        }\n\t      });\n\t    });\n\t  };\n\n\t  Conversations.prototype.loadLocalConversations = function () {\n\t    var e_2, _a;\n\n\t    var unreadTotal = 0;\n\t    var conversations = new Array();\n\n\t    try {\n\t      for (var _b = __values$1(this.list), _c = _b.next(); !_c.done; _c = _b.next()) {\n\t        var conversation = _c.value;\n\n\t        if (conversation.dataLoaded && conversation.getMaxMessage()) {\n\t          unreadTotal += conversation.getUnreadAmount();\n\t          var conversationDTO = conversation.toDto();\n\t          conversations.push(conversationDTO);\n\t        }\n\t      }\n\t    } catch (e_2_1) {\n\t      e_2 = {\n\t        error: e_2_1\n\t      };\n\t    } finally {\n\t      try {\n\t        if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n\t      } finally {\n\t        if (e_2) throw e_2.error;\n\t      }\n\t    }\n\n\t    return {\n\t      code: 200,\n\t      content: {\n\t        unreadTotal: unreadTotal,\n\t        conversations: conversations\n\t      }\n\t    };\n\t  };\n\n\t  Conversations.prototype.findConversationIndex = function (target) {\n\t    return this.list.findIndex(function (item) {\n\t      return target.toString() === item.target.toString();\n\t    });\n\t  };\n\n\t  Conversations.prototype.findConversation = function (target) {\n\t    var index = this.findConversationIndex(target);\n\t    return this.list[index];\n\t  };\n\n\t  Conversations.prototype.removeLocalConversation = function (conversation) {\n\t    var index = this.findConversationIndex(conversation.target);\n\t    this.list.splice(index, 1);\n\t  };\n\n\t  Conversations.prototype.insertOne = function (conversation) {\n\t    Conversations.sortedInserter.insert(this.list, conversation);\n\n\t    if (this.list.length > Conversations.CONVERSATIONS_MAX_LENGTH) {\n\t      this.list = this.list.slice(0, Conversations.CONVERSATIONS_MAX_LENGTH);\n\t    }\n\t  };\n\n\t  Conversations.prototype.correctPosition = function (conversation) {\n\t    this.removeLocalConversation(conversation);\n\t    this.insertOne(conversation);\n\t  };\n\n\t  Conversations.prototype.removeConversation = function (message) {\n\t    var target = Target_1$2.Target.byIMMessage(message);\n\t    var conversation = this.findConversation(target);\n\n\t    if (conversation) {\n\t      this.removeLocalConversation(conversation);\n\t      this.fireUpdated();\n\t    }\n\t  };\n\n\t  Conversations.prototype.top = function (target, top, options) {\n\t    return __awaiter$4(this, void 0, void 0, function () {\n\t      var conversation;\n\t      return __generator$4(this, function (_a) {\n\t        switch (_a.label) {\n\t          case 0:\n\t            if (!Calibrator_1$6[\"default\"].isBoolean(top)) {\n\t              throw new Error('top must be boolean.');\n\t            }\n\n\t            conversation = this.findConversation(target);\n\n\t            if (!conversation) {\n\t              throw new Error('conversation does not exist.');\n\t            }\n\n\t            if (!(conversation.top != top)) return [3\n\t            /*break*/\n\t            , 2];\n\t            return [4\n\t            /*yield*/\n\t            , this.remoteConversations.top(target, top)];\n\n\t          case 1:\n\t            _a.sent();\n\n\t            conversation.top = top;\n\t            this.correctPosition(conversation);\n\t            _a.label = 2;\n\n\t          case 2:\n\t            this.fireUpdated();\n\t            callback_utils_1$4.CallbackUtils.onSuccess(options);\n\t            return [2\n\t            /*return*/\n\t            ];\n\t        }\n\t      });\n\t    });\n\t  };\n\n\t  Conversations.prototype.remove = function (target, options) {\n\t    return __awaiter$4(this, void 0, void 0, function () {\n\t      var conversation;\n\t      return __generator$4(this, function (_a) {\n\t        switch (_a.label) {\n\t          case 0:\n\t            conversation = this.findConversation(target);\n\n\t            if (!conversation) {\n\t              throw new Error('conversation does not exist.');\n\t            }\n\n\t            return [4\n\t            /*yield*/\n\t            , this.remoteConversations.remove(target)];\n\n\t          case 1:\n\t            _a.sent();\n\n\t            this.removeLocalConversation(conversation);\n\t            this.fireUpdated();\n\t            callback_utils_1$4.CallbackUtils.onSuccess(options);\n\t            return [2\n\t            /*return*/\n\t            ];\n\t        }\n\t      });\n\t    });\n\t  };\n\n\t  Conversations.prototype.buildByAbbr = function (abbrConversation, message) {\n\t    var conversation;\n\t    var target = Target_1$2.Target.byIMMessage(message);\n\n\t    if (abbrConversation.t === GoEasy_1$4.Scene.CS) {\n\t      var csMessage = message;\n\n\t      if (g_1$5.G.u() === csMessage.customerId()) {\n\t        conversation = new Conversation_1.Conversation(target);\n\t      } else {\n\t        conversation = new CSConversation_1$1.CSConversation(target);\n\t        conversation.accepted = csMessage.accepted;\n\t      }\n\t    } else {\n\t      conversation = new Conversation_1.Conversation(target);\n\t    }\n\n\t    conversation.dataLoaded = true;\n\t    conversation.top = abbrConversation.top;\n\t    conversation.data = abbrConversation.d ? JSON.parse(abbrConversation.d) : {};\n\t    return conversation;\n\t  };\n\t  /**\n\t   * 注意：\n\t   *  客服消息：\n\t   *      customer端暂时使用conversation\n\t   *      agent端使用cs conversation\n\t   *  私聊和群聊使用conversation\n\t   */\n\n\n\t  Conversations.prototype.buildByMessage = function (message) {\n\t    var conversation;\n\t    var target = Target_1$2.Target.byIMMessage(message);\n\n\t    if (message.scene() === GoEasy_1$4.Scene.CS) {\n\t      var csMessage = message;\n\n\t      if (g_1$5.G.u() === csMessage.customerId()) {\n\t        conversation = new Conversation_1.Conversation(target);\n\t      } else {\n\t        conversation = new CSConversation_1$1.CSConversation(target);\n\t        conversation.accepted = csMessage.accepted;\n\t      }\n\t    } else {\n\t      conversation = new Conversation_1.Conversation(target);\n\t    }\n\n\t    return conversation;\n\t  };\n\n\t  Conversations.CONVERSATIONS_MAX_LENGTH = 200;\n\t  Conversations.sortedInserter = new (\n\t  /** @class */\n\t  function (_super) {\n\t    __extends$9(class_1, _super);\n\n\t    function class_1() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    class_1.prototype.compare = function (a, b) {\n\t      var c;\n\n\t      if (a.top == b.top) {\n\t        var aScore = a.maxMessageTime();\n\t        var bScore = b.maxMessageTime();\n\t        c = bScore - aScore;\n\t      } else {\n\t        c = a.top ? -1 : 1;\n\t      }\n\n\t      return c === 0 ? 0 : c > 0 ? 1 : -1;\n\t    };\n\n\t    return class_1;\n\t  }(sorted_inserter_1.SortedInserter))();\n\t  return Conversations;\n\t}();\n\n\tConversations$1.Conversations = Conversations;\n\n\tvar PendingConversations$1 = {};\n\n\tvar __extends$8 = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tvar __awaiter$3 = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n\t  function adopt(value) {\n\t    return value instanceof P ? value : new P(function (resolve) {\n\t      resolve(value);\n\t    });\n\t  }\n\n\t  return new (P || (P = Promise))(function (resolve, reject) {\n\t    function fulfilled(value) {\n\t      try {\n\t        step(generator.next(value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function rejected(value) {\n\t      try {\n\t        step(generator[\"throw\"](value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function step(result) {\n\t      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n\t    }\n\n\t    step((generator = generator.apply(thisArg, _arguments || [])).next());\n\t  });\n\t};\n\n\tvar __generator$3 = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n\t  var _ = {\n\t    label: 0,\n\t    sent: function sent() {\n\t      if (t[0] & 1) throw t[1];\n\t      return t[1];\n\t    },\n\t    trys: [],\n\t    ops: []\n\t  },\n\t      f,\n\t      y,\n\t      t,\n\t      g;\n\t  return g = {\n\t    next: verb(0),\n\t    \"throw\": verb(1),\n\t    \"return\": verb(2)\n\t  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n\t    return this;\n\t  }), g;\n\n\t  function verb(n) {\n\t    return function (v) {\n\t      return step([n, v]);\n\t    };\n\t  }\n\n\t  function step(op) {\n\t    if (f) throw new TypeError(\"Generator is already executing.\");\n\n\t    while (_) {\n\t      try {\n\t        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n\t        if (y = 0, t) op = [op[0] & 2, t.value];\n\n\t        switch (op[0]) {\n\t          case 0:\n\t          case 1:\n\t            t = op;\n\t            break;\n\n\t          case 4:\n\t            _.label++;\n\t            return {\n\t              value: op[1],\n\t              done: false\n\t            };\n\n\t          case 5:\n\t            _.label++;\n\t            y = op[1];\n\t            op = [0];\n\t            continue;\n\n\t          case 7:\n\t            op = _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\n\t          default:\n\t            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n\t              _ = 0;\n\t              continue;\n\t            }\n\n\t            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n\t              _.label = op[1];\n\t              break;\n\t            }\n\n\t            if (op[0] === 6 && _.label < t[1]) {\n\t              _.label = t[1];\n\t              t = op;\n\t              break;\n\t            }\n\n\t            if (t && _.label < t[2]) {\n\t              _.label = t[2];\n\n\t              _.ops.push(op);\n\n\t              break;\n\t            }\n\n\t            if (t[2]) _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\t        }\n\n\t        op = body.call(thisArg, _);\n\t      } catch (e) {\n\t        op = [6, e];\n\t        y = 0;\n\t      } finally {\n\t        f = t = 0;\n\t      }\n\t    }\n\n\t    if (op[0] & 5) throw op[1];\n\t    return {\n\t      value: op[0] ? op[1] : void 0,\n\t      done: true\n\t    };\n\t  }\n\t};\n\n\tvar __values = commonjsGlobal && commonjsGlobal.__values || function (o) {\n\t  var s = typeof Symbol === \"function\" && Symbol.iterator,\n\t      m = s && o[s],\n\t      i = 0;\n\t  if (m) return m.call(o);\n\t  if (o && typeof o.length === \"number\") return {\n\t    next: function next() {\n\t      if (o && i >= o.length) o = void 0;\n\t      return {\n\t        value: o && o[i++],\n\t        done: !o\n\t      };\n\t    }\n\t  };\n\t  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n\t};\n\n\tPendingConversations$1.__esModule = true;\n\tPendingConversations$1.PendingConversations = void 0;\n\tvar Conversations_1 = Conversations$1;\n\tvar GoEasy_1$3 = GoEasy$1;\n\tvar RocketTypes_1$1 = RocketTypes;\n\tvar Target_1$1 = Target$1;\n\tvar goeasy_event_center_1$2 = goeasyEventCenter;\n\tvar internal_events_1$2 = internalEvents;\n\tvar im_api_events_1$1 = imApiEvents;\n\tvar cs_message_type_1 = csMessageType;\n\tvar histories_1$2 = histories;\n\tvar CSConversation_1 = CSConversation$1;\n\tvar g_1$4 = g;\n\tvar Calibrator_1$5 = Calibrator;\n\n\tvar PendingConversations =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$8(PendingConversations, _super);\n\n\t  function PendingConversations() {\n\t    var _this = _super.call(this) || this;\n\n\t    _this.expired = false;\n\t    goeasy_event_center_1$2.GoEasyEventCenter.on(internal_events_1$2.IM_INTERNAL_EVENTS.CS_ONLINE_SUCCESS, function () {\n\t      return _this.onCSOnlineSuccess();\n\t    });\n\t    goeasy_event_center_1$2.GoEasyEventCenter.on(internal_events_1$2.IM_INTERNAL_EVENTS.CS_OFFLINE_SUCCESS, function () {\n\t      return _this.onCSOfflineSuccess();\n\t    });\n\t    g_1$4.G.s().addDisconnectedObserver(_this.onDisconnected.bind(_this));\n\t    g_1$4.G.s().addConnectedObserver(_this.onConnected.bind(_this));\n\t    return _this;\n\t  }\n\n\t  PendingConversations.prototype.onMaxMessageChanged = function (message) {\n\t    return __awaiter$3(this, void 0, void 0, function () {\n\t      var csMessage;\n\t      return __generator$3(this, function (_a) {\n\t        switch (_a.label) {\n\t          case 0:\n\t            if (!(message.scene() === GoEasy_1$3.Scene.CS)) return [3\n\t            /*break*/\n\t            , 3];\n\t            csMessage = message;\n\t            if (!(csMessage.customerId() != g_1$4.G.u())) return [3\n\t            /*break*/\n\t            , 3];\n\t            if (!(csMessage.accepted === false || csMessage.type === cs_message_type_1.CSMessageType.ACCEPT)) return [3\n\t            /*break*/\n\t            , 3];\n\t            if (!(cs_message_type_1.CSMessageType.ACCEPT === message.type)) return [3\n\t            /*break*/\n\t            , 1];\n\t            this.removeConversation(message);\n\t            return [3\n\t            /*break*/\n\t            , 3];\n\n\t          case 1:\n\t            return [4\n\t            /*yield*/\n\t            , this.saveOrUpdateConversation(message)];\n\n\t          case 2:\n\t            _a.sent();\n\n\t            _a.label = 3;\n\n\t          case 3:\n\t            return [2\n\t            /*return*/\n\t            ];\n\t        }\n\t      });\n\t    });\n\t  };\n\n\t  PendingConversations.prototype.latestConversations = function (options) {\n\t    return __awaiter$3(this, void 0, void 0, function () {\n\t      var _synchronized;\n\n\t      return __generator$3(this, function (_a) {\n\t        switch (_a.label) {\n\t          case 0:\n\t            _synchronized = this[\"synchronized\"];\n\t            return [4\n\t            /*yield*/\n\t            , _super.prototype.latestConversations.call(this, options)];\n\n\t          case 1:\n\t            _a.sent();\n\n\t            if (this.list.length > 0 && !_synchronized) {\n\t              //todo:首次查询会倒是DTO重复转换，未来业务逻辑成熟后优化\n\t              this.fireUpdated();\n\t            }\n\n\t            return [2\n\t            /*return*/\n\t            ];\n\t        }\n\t      });\n\t    });\n\t  };\n\n\t  PendingConversations.prototype.onUnreadMessageChanged = function (target) {// pending message没有unread amount 所以do nothing\n\t  };\n\n\t  PendingConversations.prototype.onCSOnlineSuccess = function () {\n\t    return __awaiter$3(this, void 0, void 0, function () {\n\t      return __generator$3(this, function (_a) {\n\t        switch (_a.label) {\n\t          case 0:\n\t            return [4\n\t            /*yield*/\n\t            , this.loadServerConversations()];\n\n\t          case 1:\n\t            _a.sent();\n\n\t            this.fireUpdated();\n\t            return [2\n\t            /*return*/\n\t            ];\n\t        }\n\t      });\n\t    });\n\t  };\n\n\t  PendingConversations.prototype.onCSOfflineSuccess = function () {\n\t    this.list = [];\n\t    this.fireUpdated();\n\t  };\n\n\t  PendingConversations.prototype.getUpdatedEventName = function () {\n\t    return im_api_events_1$1.ImApiEvents.PENDING_CONVERSATIONS_UPDATED;\n\t  };\n\n\t  PendingConversations.prototype.rocketName = function () {\n\t    return RocketTypes_1$1.RocketTypes.CS_PENDING_CONVERSATION;\n\t  };\n\n\t  PendingConversations.prototype.convertAbbrConversation = function (abbrConversations) {\n\t    return __awaiter$3(this, void 0, void 0, function () {\n\t      var conversations, conversations_1, conversations_1_1, abbrConversation, customerData, lastMessage, userOffsets, data, message, target, conversation, agentHistory;\n\n\t      var e_1, _a;\n\n\t      return __generator$3(this, function (_b) {\n\t        conversations = abbrConversations;\n\n\t        try {\n\t          for (conversations_1 = __values(conversations), conversations_1_1 = conversations_1.next(); !conversations_1_1.done; conversations_1_1 = conversations_1.next()) {\n\t            abbrConversation = conversations_1_1.value;\n\t            abbrConversation.lastMessage.t = GoEasy_1$3.Scene.CS;\n\t            customerData = abbrConversation.customerData;\n\t            lastMessage = abbrConversation.lastMessage;\n\t            userOffsets = abbrConversation.userOffsets;\n\t            data = customerData ? JSON.parse(customerData) : {};\n\t            message = this.builder.build(lastMessage);\n\t            target = Target_1$1.Target.byIMMessage(message);\n\t            conversation = this.findConversation(target);\n\n\t            if (Calibrator_1$5[\"default\"].isUndef(conversation)) {\n\t              conversation = new CSConversation_1.CSConversation(target);\n\t              conversation.accepted = message.accepted;\n\t              conversation.dataLoaded = true;\n\t              this.insertOne(conversation);\n\t            }\n\n\t            conversation.top = false;\n\t            conversation.data = data;\n\t            agentHistory = histories_1$2[\"default\"].get(target);\n\t            agentHistory.initPendingMaxMessageAndOffsets(message, userOffsets);\n\t            this.correctPosition(conversation);\n\t          }\n\t        } catch (e_1_1) {\n\t          e_1 = {\n\t            error: e_1_1\n\t          };\n\t        } finally {\n\t          try {\n\t            if (conversations_1_1 && !conversations_1_1.done && (_a = conversations_1[\"return\"])) _a.call(conversations_1);\n\t          } finally {\n\t            if (e_1) throw e_1.error;\n\t          }\n\t        }\n\n\t        return [2\n\t        /*return*/\n\t        ];\n\t      });\n\t    });\n\t  };\n\n\t  PendingConversations.prototype.onDisconnected = function () {\n\t    this.expired = true;\n\t  };\n\n\t  PendingConversations.prototype.onConnected = function () {\n\t    return __awaiter$3(this, void 0, void 0, function () {\n\t      return __generator$3(this, function (_a) {\n\t        switch (_a.label) {\n\t          case 0:\n\t            if (!this.expired) return [3\n\t            /*break*/\n\t            , 2];\n\t            this.expired = false;\n\t            this.list = [];\n\t            return [4\n\t            /*yield*/\n\t            , this.loadServerConversations()];\n\n\t          case 1:\n\t            _a.sent();\n\n\t            this.fireUpdated();\n\t            _a.label = 2;\n\n\t          case 2:\n\t            return [2\n\t            /*return*/\n\t            ];\n\t        }\n\t      });\n\t    });\n\t  };\n\n\t  return PendingConversations;\n\t}(Conversations_1.Conversations);\n\n\tPendingConversations$1.PendingConversations = PendingConversations;\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var Conversations_1 = Conversations$1;\n\t  var Target_1 = Target$1;\n\t  var GoEasy_1 = GoEasy$1;\n\t  var PendingConversations_1 = PendingConversations$1;\n\t  var cs_message_1 = csMessage;\n\t  var g_1 = g;\n\n\t  var ConversationList =\n\t  /** @class */\n\t  function () {\n\t    function ConversationList() {\n\t      this.conversations = new Conversations_1.Conversations();\n\t      this.pendingConversations = new PendingConversations_1.PendingConversations();\n\t    }\n\n\t    ConversationList.prototype.latestConversations = function (options) {\n\t      this.conversations.latestConversations(options);\n\t    };\n\n\t    ConversationList.prototype.latestPendingConversations = function (options) {\n\t      this.pendingConversations.latestConversations(options);\n\t    };\n\n\t    ConversationList.prototype.topPrivateConversation = function (options) {\n\t      var target = Target_1.Target.byScene(GoEasy_1.Scene.PRIVATE, options.userId);\n\t      this.conversations.top(target, options.top, options);\n\t    };\n\n\t    ConversationList.prototype.topGroupConversation = function (options) {\n\t      var target = Target_1.Target.byScene(GoEasy_1.Scene.GROUP, options.groupId);\n\t      this.conversations.top(target, options.top, options);\n\t    };\n\n\t    ConversationList.prototype.topConversation = function (options) {\n\t      var conversationDTO = options.conversation;\n\t      this.validateConversationDTO(conversationDTO);\n\t      var target = Target_1.Target.byConversationDTO(conversationDTO);\n\t      this.conversations.top(target, options.top, options);\n\t    };\n\n\t    ConversationList.prototype.removePrivateConversation = function (options) {\n\t      var target = Target_1.Target.byScene(GoEasy_1.Scene.PRIVATE, options.userId);\n\t      this.conversations.remove(target, options);\n\t    };\n\n\t    ConversationList.prototype.removeGroupConversation = function (options) {\n\t      var target = Target_1.Target.byScene(GoEasy_1.Scene.GROUP, options.groupId);\n\t      this.conversations.remove(target, options);\n\t    };\n\n\t    ConversationList.prototype.removeConversation = function (options) {\n\t      var conversationDTO = options.conversation;\n\t      this.validateConversationDTO(conversationDTO);\n\t      var target = Target_1.Target.byConversationDTO(conversationDTO);\n\t      this.conversations.remove(target, options);\n\t    };\n\n\t    ConversationList.prototype.validateConversationDTO = function (conversationDTO) {\n\t      if (!(conversationDTO instanceof GoEasy_1.ConversationDTO)) {\n\t        throw new Error('Incorrect conversation object.');\n\t      } else {\n\t        var lastMessage = conversationDTO.lastMessage;\n\n\t        if (lastMessage instanceof cs_message_1.CSMessage) {\n\t          if (lastMessage.customerId() !== g_1.G.u() && lastMessage.accepted === false) {\n\t            throw new Error('pending conversation cannot be topped or removed.');\n\t          }\n\t        }\n\t      }\n\t    };\n\n\t    return ConversationList;\n\t  }();\n\n\t  exports[\"default\"] = ConversationList;\n\t})(conversationList);\n\n\tvar IMReceiver = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var internal_events_1 = internalEvents;\n\t  var goeasy_event_center_1 = goeasyEventCenter;\n\t  var remote_abbr_message_builder_1 = remoteAbbrMessageBuilder;\n\t  var RemoteEvents_1 = RemoteEvents;\n\t  var GNS_1 = GNS$1;\n\t  var Calibrator_1 = Calibrator;\n\t  var GoEasy_1 = GoEasy$1;\n\t  var g_1 = g;\n\t  var im_api_events_1 = imApiEvents;\n\t  var histories_1 = histories;\n\t  var Target_1 = Target$1;\n\t  var im_1 = im;\n\n\t  var IMReceiver =\n\t  /** @class */\n\t  function () {\n\t    function IMReceiver() {\n\t      this.builder = new remote_abbr_message_builder_1.RemoteAbbrMessageBuilder();\n\t      GNS_1.GNS.instance.addAssembler(new (\n\t      /** @class */\n\t      function () {\n\t        function class_1() {}\n\n\t        class_1.prototype.assemble = function (oldPayload) {\n\t          var newPayload = {\n\t            // im fields\n\t            messageId: oldPayload.id,\n\t            timestamp: oldPayload.tm,\n\t            type: oldPayload.t,\n\t            senderId: oldPayload.sid,\n\t            toType: oldPayload.tt\n\t          };\n\n\t          if (oldPayload.tt === GoEasy_1.Scene.GROUP) {\n\t            newPayload.groupId = oldPayload.gid;\n\t          }\n\n\t          return newPayload;\n\t        };\n\n\t        class_1.prototype.support = function (oldPayload) {\n\t          return !!oldPayload.sid;\n\t        };\n\n\t        return class_1;\n\t      }())());\n\t    }\n\n\t    IMReceiver.prototype.initialGoEasySocket = function () {\n\t      g_1.G.s().addMessageObserver(RemoteEvents_1.RemoteEvents.imMessage, this.onMessageReceived.bind(this));\n\t    };\n\n\t    IMReceiver.prototype.onMessageReceived = function (abbrMessage) {\n\t      if (abbrMessage.t !== GoEasy_1.Scene.CS) {\n\t        console.log('IMReceiver -> onMessageReceived:', abbrMessage);\n\t        var receivedMessage = this.builder.build(abbrMessage);\n\t        this.sendAck(receivedMessage);\n\t        var target = Target_1.Target.byIMMessage(receivedMessage);\n\t        var scene = target.scene;\n\t        var history_1 = histories_1[\"default\"].get(target);\n\n\t        if (!history_1.existsMessage(receivedMessage)) {\n\t          this.createNotification(abbrMessage);\n\t          goeasy_event_center_1.GoEasyEventCenter.fire(internal_events_1.IM_INTERNAL_EVENTS.MESSAGE_RECEIVED, receivedMessage);\n\n\t          if (scene === GoEasy_1.Scene.PRIVATE) {\n\t            im_1.IM.aec.fire(im_api_events_1.ImApiEvents.PRIVATE_MESSAGE_RECEIVED, receivedMessage);\n\t          } else if (scene === GoEasy_1.Scene.GROUP) {\n\t            im_1.IM.aec.fire(im_api_events_1.ImApiEvents.GROUP_MESSAGE_RECEIVED, receivedMessage);\n\t          }\n\t        }\n\t      }\n\t    };\n\n\t    IMReceiver.prototype.sendAck = function (message) {\n\t      g_1.G.s().sendAck('imAck', {\n\t        \"publishGuid\": message.messageId\n\t      });\n\t    };\n\n\t    IMReceiver.prototype.createNotification = function (message) {\n\t      var supportGNS = GNS_1.GNS.instance.supportNotification();\n\n\t      if (!Calibrator_1[\"default\"].isObject(message.nt) || message.s === g_1.G.u() || !supportGNS) {\n\t        return;\n\t      }\n\n\t      var data = {\n\t        id: message.i,\n\t        tm: message.ts,\n\t        t: message.mt,\n\t        sid: message.s,\n\t        tt: message.t\n\t      };\n\n\t      if (data.tt === GoEasy_1.Scene.GROUP) {\n\t        data.gid = message.r;\n\t      }\n\n\t      GNS_1.GNS.instance.createLocalNotification(message.nt.t, message.nt.c, data);\n\t    };\n\n\t    return IMReceiver;\n\t  }();\n\n\t  exports[\"default\"] = IMReceiver;\n\t})(IMReceiver);\n\n\tvar GroupMessageSubscriber = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var Rocket_1 = Rocket;\n\t  var Permission_1 = Permission;\n\t  var SocketTimeout_1 = SocketTimeout;\n\t  var validator_utils_1 = validatorUtils;\n\t  var RocketTypes_1 = RocketTypes;\n\t  var callback_utils_1 = callbackUtils;\n\t  var g_1 = g;\n\n\t  var GroupMessageSubscriber =\n\t  /** @class */\n\t  function () {\n\t    function GroupMessageSubscriber() {}\n\n\t    GroupMessageSubscriber.prototype.subscribe = function (options) {\n\t      validator_utils_1[\"default\"].validateIdArray(options.groupIds, 'groupIds');\n\t      options.groupIds = options.groupIds.toString().split(',');\n\t      var rocket = new Rocket_1[\"default\"]({\n\t        name: RocketTypes_1.RocketTypes.subscribeGroups,\n\t        params: {\n\t          groupIds: options.groupIds,\n\t          at: options.accessToken\n\t        },\n\t        permission: Permission_1.Permission.WRITE,\n\t        singleTimeout: SocketTimeout_1.SocketTimeout.commonInfiniteSingle,\n\t        totalTimeout: SocketTimeout_1.SocketTimeout.commonInfiniteTotal,\n\t        success: function success() {\n\t          callback_utils_1.CallbackUtils.onSuccess(options, {\n\t            code: 200,\n\t            content: 'ok'\n\t          });\n\t        },\n\t        fail: function fail(e) {\n\t          callback_utils_1.CallbackUtils.onFailed(options, {\n\t            code: e.resultCode || 408,\n\t            content: e.content || 'Failed to subscribe group message'\n\t          });\n\t        }\n\t      });\n\t      g_1.G.s().emit(rocket);\n\t    };\n\n\t    GroupMessageSubscriber.prototype.unsubscribe = function (options) {\n\t      validator_utils_1[\"default\"].validateId(options.groupId, 'groupId');\n\t      options.groupId = options.groupId.toString();\n\t      var rocket = new Rocket_1[\"default\"]({\n\t        name: RocketTypes_1.RocketTypes.unsubscribeGroup,\n\t        params: {\n\t          groupId: options.groupId\n\t        },\n\t        permission: Permission_1.Permission.READ,\n\t        singleTimeout: SocketTimeout_1.SocketTimeout.commonRequestSingle,\n\t        totalTimeout: SocketTimeout_1.SocketTimeout.commonRequestTotal,\n\t        success: function success() {\n\t          callback_utils_1.CallbackUtils.onSuccess(options, {\n\t            code: 200,\n\t            content: 'ok'\n\t          });\n\t        },\n\t        fail: function fail(e) {\n\t          callback_utils_1.CallbackUtils.onFailed(options, {\n\t            code: e.resultCode || 408,\n\t            content: e.content || 'Failed to unsubscribe group message'\n\t          });\n\t        }\n\t      });\n\t      g_1.G.s().emit(rocket);\n\t    };\n\n\t    return GroupMessageSubscriber;\n\t  }();\n\n\t  exports[\"default\"] = GroupMessageSubscriber;\n\t})(GroupMessageSubscriber);\n\n\tvar GroupPresenceSubscriber = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var Rocket_1 = Rocket;\n\t  var Permission_1 = Permission;\n\t  var SocketTimeout_1 = SocketTimeout;\n\t  var RocketTypes_1 = RocketTypes;\n\t  var RemoteEvents_1 = RemoteEvents;\n\t  var im_api_events_1 = imApiEvents;\n\t  var validator_utils_1 = validatorUtils;\n\t  var callback_utils_1 = callbackUtils;\n\t  var g_1 = g;\n\t  var im_1 = im;\n\n\t  var GroupPresenceSubscribe =\n\t  /** @class */\n\t  function () {\n\t    function GroupPresenceSubscribe() {\n\t      g_1.G.s().addMessageObserver(RemoteEvents_1.RemoteEvents.groupPresence, this.newMessageReceived.bind(this));\n\t    }\n\n\t    GroupPresenceSubscribe.prototype.presence = function (options) {\n\t      validator_utils_1[\"default\"].validateIdArray(options.groupIds, 'groupIds');\n\t      options.groupIds.toString().split(',');\n\n\t      var success = function success() {\n\t        callback_utils_1.CallbackUtils.onSuccess(options, {\n\t          code: 200,\n\t          content: 'ok'\n\t        });\n\t      };\n\n\t      var fail = function fail(e) {\n\t        callback_utils_1.CallbackUtils.onFailed(options, {\n\t          code: e.code || 408,\n\t          content: e.content || 'Failed to subscribe group message'\n\t        });\n\t      };\n\n\t      var params = {\n\t        groupIds: options.groupIds\n\t      };\n\t      this.emitRocket(RocketTypes_1.RocketTypes.subscribeGroupPresence, params, success, fail, SocketTimeout_1.SocketTimeout.commonInfiniteSingle, SocketTimeout_1.SocketTimeout.commonInfiniteTotal);\n\t    };\n\n\t    GroupPresenceSubscribe.prototype.unPresence = function (options) {\n\t      validator_utils_1[\"default\"].validateId(options.groupId, 'groupId');\n\t      options.groupId = options.groupId.toString();\n\n\t      var success = function success() {\n\t        callback_utils_1.CallbackUtils.onSuccess(options, {\n\t          code: 200,\n\t          content: 'ok'\n\t        });\n\t      };\n\n\t      var fail = function fail(e) {\n\t        callback_utils_1.CallbackUtils.onFailed(options, {\n\t          code: e.code || 408,\n\t          content: e.content || 'Failed to unsubscribe presence'\n\t        });\n\t      };\n\n\t      var params = {\n\t        groupId: options.groupId\n\t      };\n\t      this.emitRocket(RocketTypes_1.RocketTypes.unsubscribeGroupPresence, params, success, fail, SocketTimeout_1.SocketTimeout.commonRequestSingle, SocketTimeout_1.SocketTimeout.commonRequestTotal);\n\t    };\n\n\t    GroupPresenceSubscribe.prototype.emitRocket = function (emitType, params, success, fail, singleTimeout, totalTimeout) {\n\t      var rocket = new Rocket_1[\"default\"]({\n\t        name: emitType,\n\t        params: params,\n\t        singleTimeout: singleTimeout,\n\t        totalTimeout: totalTimeout,\n\t        permission: Permission_1.Permission.WRITE,\n\t        success: success,\n\t        fail: fail\n\t      });\n\t      g_1.G.s().emit(rocket);\n\t    };\n\n\t    GroupPresenceSubscribe.prototype.newMessageReceived = function (message) {\n\t      var content = null;\n\n\t      if (message.c) {\n\t        content = JSON.parse(message.c);\n\t      }\n\n\t      content && content.events && content.events.map(function (item) {\n\t        var data = item.userData ? JSON.parse(item.userData) : {};\n\t        var event = {\n\t          time: item.time,\n\t          action: item.action,\n\t          groupOnlineCount: content.userAmount,\n\t          groupId: content.groupId,\n\t          id: item.userId,\n\t          data: data\n\t        };\n\t        im_1.IM.aec.fire(im_api_events_1.ImApiEvents.GROUP_PRESENCE, event);\n\t      });\n\t    };\n\n\t    return GroupPresenceSubscribe;\n\t  }();\n\n\t  exports[\"default\"] = GroupPresenceSubscribe;\n\t})(GroupPresenceSubscriber);\n\n\tvar GroupOnlineCount = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var Rocket_1 = Rocket;\n\t  var Permission_1 = Permission;\n\t  var SocketTimeout_1 = SocketTimeout;\n\t  var RocketTypes_1 = RocketTypes;\n\t  var validator_utils_1 = validatorUtils;\n\t  var callback_utils_1 = callbackUtils;\n\t  var g_1 = g;\n\n\t  var GroupOnlineCount =\n\t  /** @class */\n\t  function () {\n\t    function GroupOnlineCount() {}\n\n\t    GroupOnlineCount.prototype.get = function (options) {\n\t      validator_utils_1[\"default\"].validateId(options.groupId, 'groupId');\n\t      options.groupId = options.groupId.toString();\n\t      var rocket = new Rocket_1[\"default\"]({\n\t        name: RocketTypes_1.RocketTypes.imGroupOnlineCount,\n\t        params: {\n\t          groupId: options.groupId\n\t        },\n\t        permission: Permission_1.Permission.READ,\n\t        singleTimeout: SocketTimeout_1.SocketTimeout.commonQuerySingle,\n\t        totalTimeout: SocketTimeout_1.SocketTimeout.commonQueryTotal,\n\t        fail: function fail(e) {\n\t          callback_utils_1.CallbackUtils.onFailed(options, e || {\n\t            code: 408,\n\t            content: 'Failed to query online group users'\n\t          });\n\t        },\n\t        success: function success(result) {\n\t          if (result.code == 200) {\n\t            callback_utils_1.CallbackUtils.onSuccess(options, result);\n\t          } else {\n\t            callback_utils_1.CallbackUtils.onFailed(options, result);\n\t          }\n\t        }\n\t      });\n\t      g_1.G.s().emit(rocket);\n\t    };\n\n\t    return GroupOnlineCount;\n\t  }();\n\n\t  exports[\"default\"] = GroupOnlineCount;\n\t})(GroupOnlineCount);\n\n\tvar GroupHereNow = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var Rocket_1 = Rocket;\n\t  var Permission_1 = Permission;\n\t  var SocketTimeout_1 = SocketTimeout;\n\t  var RocketTypes_1 = RocketTypes;\n\t  var validator_utils_1 = validatorUtils;\n\t  var callback_utils_1 = callbackUtils;\n\t  var g_1 = g;\n\n\t  var GroupHereNow =\n\t  /** @class */\n\t  function () {\n\t    function GroupHereNow() {}\n\n\t    GroupHereNow.prototype.hereNow = function (options) {\n\t      validator_utils_1[\"default\"].validateId(options.groupId, 'groupId');\n\t      options.groupId = options.groupId.toString();\n\t      var rocket = new Rocket_1[\"default\"]({\n\t        name: RocketTypes_1.RocketTypes.imGroupHereNow,\n\t        params: {\n\t          groupId: options.groupId\n\t        },\n\t        permission: Permission_1.Permission.READ,\n\t        singleTimeout: SocketTimeout_1.SocketTimeout.commonQuerySingle,\n\t        totalTimeout: SocketTimeout_1.SocketTimeout.commonQueryTotal,\n\t        fail: function fail(e) {\n\t          callback_utils_1.CallbackUtils.onFailed(options, {\n\t            code: e.resultCode || 408,\n\t            content: e.content || 'Failed to query online group users'\n\t          });\n\t        },\n\t        success: function success(result) {\n\t          if (result.code == 200) {\n\t            var content = result.content;\n\t            result.content = content.map(function (user) {\n\t              var data = user.userData ? JSON.parse(user.userData) : {};\n\t              return {\n\t                id: user.userId,\n\t                data: data\n\t              };\n\t            });\n\t            callback_utils_1.CallbackUtils.onSuccess(options, result);\n\t          } else {\n\t            callback_utils_1.CallbackUtils.onFailed(options, result);\n\t          }\n\t        }\n\t      });\n\t      g_1.G.s().emit(rocket);\n\t    };\n\n\t    return GroupHereNow;\n\t  }();\n\n\t  exports[\"default\"] = GroupHereNow;\n\t})(GroupHereNow);\n\n\tvar UserPresenceSubscriber = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var Rocket_1 = Rocket;\n\t  var Permission_1 = Permission;\n\t  var SocketTimeout_1 = SocketTimeout;\n\t  var validator_utils_1 = validatorUtils;\n\t  var RocketTypes_1 = RocketTypes;\n\t  var RemoteEvents_1 = RemoteEvents;\n\t  var im_api_events_1 = imApiEvents;\n\t  var callback_utils_1 = callbackUtils;\n\t  var g_1 = g;\n\t  var im_1 = im;\n\n\t  var UserPresenceSubscriber =\n\t  /** @class */\n\t  function () {\n\t    function UserPresenceSubscriber() {\n\t      g_1.G.s().addMessageObserver(RemoteEvents_1.RemoteEvents.userPresence, this.newMessageReceived.bind(this));\n\t    }\n\n\t    UserPresenceSubscriber.prototype.presence = function (options) {\n\t      validator_utils_1[\"default\"].validateIdArray(options.userIds, 'userIds');\n\t      options.userIds.toString().split(',');\n\n\t      var success = function success() {\n\t        callback_utils_1.CallbackUtils.onSuccess(options, {\n\t          code: 200,\n\t          content: 'ok'\n\t        });\n\t      };\n\n\t      var fail = function fail(e) {\n\t        callback_utils_1.CallbackUtils.onFailed(options, {\n\t          code: e.code || 408,\n\t          content: e.content || 'Failed to subscribe group message'\n\t        });\n\t      };\n\n\t      var params = {\n\t        userIds: options.userIds\n\t      };\n\t      this.emitRocket(RocketTypes_1.RocketTypes.subscribeUserPresence, params, success, fail, SocketTimeout_1.SocketTimeout.commonInfiniteSingle, SocketTimeout_1.SocketTimeout.commonInfiniteTotal);\n\t    };\n\n\t    UserPresenceSubscriber.prototype.unPresence = function (options) {\n\t      validator_utils_1[\"default\"].validateId(options.userId, 'userId');\n\t      options.userId = options.userId.toString();\n\n\t      var success = function success() {\n\t        callback_utils_1.CallbackUtils.onSuccess(options, {\n\t          code: 200,\n\t          content: 'ok'\n\t        });\n\t      };\n\n\t      var fail = function fail(e) {\n\t        callback_utils_1.CallbackUtils.onFailed(options, {\n\t          code: e.code || 408,\n\t          content: e.content || 'Failed to unsubscribe presence'\n\t        });\n\t      };\n\n\t      var params = {\n\t        userId: options.userId\n\t      };\n\t      this.emitRocket(RocketTypes_1.RocketTypes.unsubscribeUserPresence, params, success, fail, SocketTimeout_1.SocketTimeout.commonRequestSingle, SocketTimeout_1.SocketTimeout.commonRequestTotal);\n\t    };\n\n\t    UserPresenceSubscriber.prototype.emitRocket = function (emitType, params, success, fail, singleTimeout, totalTimeout) {\n\t      var rocket = new Rocket_1[\"default\"]({\n\t        name: emitType,\n\t        params: params,\n\t        singleTimeout: singleTimeout,\n\t        totalTimeout: totalTimeout,\n\t        permission: Permission_1.Permission.WRITE,\n\t        success: success,\n\t        fail: fail\n\t      });\n\t      g_1.G.s().emit(rocket);\n\t    };\n\n\t    UserPresenceSubscriber.prototype.newMessageReceived = function (message) {\n\t      var events = [];\n\n\t      if (message.c) {\n\t        events = JSON.parse(message.c).events || [];\n\t      }\n\n\t      events.map(function (item) {\n\t        var data = item.userData ? JSON.parse(item.userData) : {};\n\t        var event = {\n\t          time: item.time,\n\t          action: item.action,\n\t          id: item.userId,\n\t          data: data\n\t        };\n\t        im_1.IM.aec.fire(im_api_events_1.ImApiEvents.USER_PRESENCE, event);\n\t      });\n\t    };\n\n\t    return UserPresenceSubscriber;\n\t  }();\n\n\t  exports[\"default\"] = UserPresenceSubscriber;\n\t})(UserPresenceSubscriber);\n\n\tvar UserHereNow = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  var Rocket_1 = Rocket;\n\t  var Permission_1 = Permission;\n\t  var SocketTimeout_1 = SocketTimeout;\n\t  var RocketTypes_1 = RocketTypes;\n\t  var validator_utils_1 = validatorUtils;\n\t  var callback_utils_1 = callbackUtils;\n\t  var g_1 = g;\n\n\t  var UserHereNow =\n\t  /** @class */\n\t  function () {\n\t    function UserHereNow() {}\n\n\t    UserHereNow.prototype.hereNow = function (options) {\n\t      var userIds = options.userIds;\n\t      validator_utils_1[\"default\"].validateIdArray(userIds, 'userIds');\n\t      userIds.toString().split(',');\n\t      var rocket = new Rocket_1[\"default\"]({\n\t        name: RocketTypes_1.RocketTypes.imHereNow,\n\t        params: options,\n\t        permission: Permission_1.Permission.READ,\n\t        singleTimeout: SocketTimeout_1.SocketTimeout.commonQuerySingle,\n\t        totalTimeout: SocketTimeout_1.SocketTimeout.commonQueryTotal,\n\t        fail: function fail(e) {\n\t          callback_utils_1.CallbackUtils.onFailed(options, e);\n\t        },\n\t        success: function success(result) {\n\t          if (result.code == 200) {\n\t            var content = result.content;\n\t            result.content = content.map(function (user) {\n\t              var data = user.userData ? JSON.parse(user.userData) : {};\n\t              return {\n\t                id: user.userId,\n\t                data: data\n\t              };\n\t            });\n\t            callback_utils_1.CallbackUtils.onSuccess(options, result);\n\t          } else {\n\t            callback_utils_1.CallbackUtils.onFailed(options, result);\n\t          }\n\t        }\n\t      });\n\t      g_1.G.s().emit(rocket);\n\t    };\n\n\t    return UserHereNow;\n\t  }();\n\n\t  exports[\"default\"] = UserHereNow;\n\t})(UserHereNow);\n\n\tvar IMMessageBuilder$1 = {};\n\n\tvar WXImagePayloadBuilder = {};\n\n\tvar Str$1 = {};\n\n\tStr$1.__esModule = true;\n\tStr$1.str = void 0;\n\tvar Calibrator_1$4 = Calibrator;\n\n\tvar Str =\n\t/** @class */\n\tfunction () {\n\t  function Str() {}\n\n\t  Str.prototype.fileExtension = function (str, type) {\n\t    if (!Calibrator_1$4[\"default\"].isString(str)) return;\n\n\t    try {\n\t      var strArr = str.split(type);\n\t      return strArr[strArr.length - 1];\n\t    } catch (e) {\n\t      throw Error(e);\n\t    }\n\t  };\n\n\t  return Str;\n\t}();\n\n\tvar str = new Str();\n\tStr$1.str = str;\n\n\tvar ImageMessagePayload$1 = {};\n\n\tvar FileMessagePayload$1 = {};\n\n\tvar AbstractMessagePayload$1 = {};\n\n\tAbstractMessagePayload$1.__esModule = true;\n\tAbstractMessagePayload$1.AbstractMessagePayload = void 0;\n\n\tvar AbstractMessagePayload =\n\t/** @class */\n\tfunction () {\n\t  function AbstractMessagePayload() {}\n\n\t  return AbstractMessagePayload;\n\t}();\n\n\tAbstractMessagePayload$1.AbstractMessagePayload = AbstractMessagePayload;\n\n\tvar __extends$7 = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tFileMessagePayload$1.__esModule = true;\n\tFileMessagePayload$1.FileMessagePayload = void 0;\n\tvar AbstractMessagePayload_1$2 = AbstractMessagePayload$1;\n\n\tvar FileMessagePayload =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$7(FileMessagePayload, _super);\n\n\t  function FileMessagePayload() {\n\t    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n\t    _this.contentType = \"\";\n\t    _this.name = \"\";\n\t    _this.size = 0;\n\t    _this.url = \"\";\n\t    return _this;\n\t  }\n\n\t  return FileMessagePayload;\n\t}(AbstractMessagePayload_1$2.AbstractMessagePayload);\n\n\tFileMessagePayload$1.FileMessagePayload = FileMessagePayload;\n\n\tvar __extends$6 = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tImageMessagePayload$1.__esModule = true;\n\tImageMessagePayload$1.ImageMessagePayload = void 0;\n\tvar FileMessagePayload_1$1 = FileMessagePayload$1;\n\n\tvar ImageMessagePayload =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$6(ImageMessagePayload, _super);\n\n\t  function ImageMessagePayload() {\n\t    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n\t    _this.width = 0;\n\t    _this.height = 0;\n\t    return _this;\n\t  }\n\n\t  return ImageMessagePayload;\n\t}(FileMessagePayload_1$1.FileMessagePayload);\n\n\tImageMessagePayload$1.ImageMessagePayload = ImageMessagePayload;\n\n\tvar WXFilePayloadBuilder = {};\n\n\tvar AbstractPayloadBuilder$1 = {};\n\n\tAbstractPayloadBuilder$1.__esModule = true;\n\tAbstractPayloadBuilder$1.AbstractPayloadBuilder = void 0;\n\n\tvar AbstractPayloadBuilder =\n\t/** @class */\n\tfunction () {\n\t  function AbstractPayloadBuilder() {}\n\n\t  AbstractPayloadBuilder.prototype.build = function (buildOptions) {\n\t    this.validate(buildOptions.createOptions);\n\t    var messagePayload = this.create();\n\t    this.setPayload(buildOptions, messagePayload);\n\t    return messagePayload;\n\t  };\n\n\t  return AbstractPayloadBuilder;\n\t}();\n\n\tAbstractPayloadBuilder$1.AbstractPayloadBuilder = AbstractPayloadBuilder;\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var AbstractPayloadBuilder_1 = AbstractPayloadBuilder$1;\n\t  var FileMessagePayload_1 = FileMessagePayload$1;\n\t  var Calibrator_1 = Calibrator;\n\n\t  var WXFilePayloadBuilder =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(WXFilePayloadBuilder, _super);\n\n\t    function WXFilePayloadBuilder() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    WXFilePayloadBuilder.prototype.create = function () {\n\t      return new FileMessagePayload_1.FileMessagePayload();\n\t    };\n\n\t    WXFilePayloadBuilder.prototype.setPayload = function (buildOptions, payload) {\n\t      var filePayload = payload;\n\t      var createOptions = buildOptions.createOptions;\n\t      var file = createOptions.file;\n\t      filePayload.url = file.path;\n\t      filePayload.name = file.name;\n\t      filePayload.size = file.size;\n\t      filePayload.contentType = file.type;\n\t      buildOptions.complete = Promise.resolve();\n\t    };\n\n\t    WXFilePayloadBuilder.prototype.validate = function (createOptions) {\n\t      if (!Calibrator_1[\"default\"].isObject(createOptions)) {\n\t        throw Error('it is an empty message.');\n\t      }\n\n\t      if (!Calibrator_1[\"default\"].isDef(createOptions.file)) {\n\t        throw Error('file is empty.');\n\t      }\n\t    };\n\n\t    return WXFilePayloadBuilder;\n\t  }(AbstractPayloadBuilder_1.AbstractPayloadBuilder);\n\n\t  exports[\"default\"] = WXFilePayloadBuilder;\n\t})(WXFilePayloadBuilder);\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var Str_1 = Str$1;\n\t  var Calibrator_1 = Calibrator;\n\t  var ImageMessagePayload_1 = ImageMessagePayload$1;\n\t  var WXFilePayloadBuilder_1 = WXFilePayloadBuilder;\n\n\t  var WXImagePayloadBuilder =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(WXImagePayloadBuilder, _super);\n\n\t    function WXImagePayloadBuilder() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    WXImagePayloadBuilder.prototype.create = function () {\n\t      return new ImageMessagePayload_1.ImageMessagePayload();\n\t    };\n\n\t    WXImagePayloadBuilder.prototype.setPayload = function (buildOptions, payload) {\n\t      _super.prototype.setPayload.call(this, buildOptions, payload);\n\n\t      var createOptions = buildOptions.createOptions;\n\t      var tempFile = createOptions.file;\n\t      var messagePayload = payload; // wx.chooseImage --> path, wx.chooseMedia --> tempFilePath\n\n\t      var path = tempFile.path || tempFile.tempFilePath;\n\t      var namePath = Calibrator_1[\"default\"].isEmpty(tempFile.name) || tempFile.name === undefined ? path : tempFile.name;\n\t      messagePayload.name = 'wx-image.' + Str_1.str.fileExtension(namePath, '.');\n\t      messagePayload.contentType = 'image/' + Str_1.str.fileExtension(namePath, '.');\n\t      messagePayload.url = path;\n\t      messagePayload.size = tempFile.size;\n\t      buildOptions.complete = new Promise(function (resolve, reject) {\n\t        wx.getImageInfo({\n\t          src: messagePayload.url,\n\t          success: function success(res) {\n\t            messagePayload.width = res.width;\n\t            messagePayload.height = res.height;\n\t            resolve();\n\t          },\n\t          fail: function fail(err) {\n\t            reject(err);\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    WXImagePayloadBuilder.prototype.validate = function (createOptions) {\n\t      _super.prototype.validate.call(this, createOptions);\n\t    };\n\n\t    return WXImagePayloadBuilder;\n\t  }(WXFilePayloadBuilder_1[\"default\"]);\n\n\t  exports[\"default\"] = WXImagePayloadBuilder;\n\t})(WXImagePayloadBuilder);\n\n\tvar WXAudioPayloadBuilder = {};\n\n\tvar AudioMessagePayload$1 = {};\n\n\tvar __extends$5 = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tAudioMessagePayload$1.__esModule = true;\n\tAudioMessagePayload$1.AudioMessagePayload = void 0;\n\tvar FileMessagePayload_1 = FileMessagePayload$1;\n\n\tvar AudioMessagePayload =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$5(AudioMessagePayload, _super);\n\n\t  function AudioMessagePayload() {\n\t    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n\t    _this.duration = 0;\n\t    return _this;\n\t  }\n\n\t  return AudioMessagePayload;\n\t}(FileMessagePayload_1.FileMessagePayload);\n\n\tAudioMessagePayload$1.AudioMessagePayload = AudioMessagePayload;\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var AudioMessagePayload_1 = AudioMessagePayload$1;\n\t  var Calibrator_1 = Calibrator;\n\t  var Str_1 = Str$1;\n\t  var WXFilePayloadBuilder_1 = WXFilePayloadBuilder;\n\n\t  var WXAudioPayloadBuilder =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(WXAudioPayloadBuilder, _super);\n\n\t    function WXAudioPayloadBuilder() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    WXAudioPayloadBuilder.prototype.create = function () {\n\t      return new AudioMessagePayload_1.AudioMessagePayload();\n\t    };\n\n\t    WXAudioPayloadBuilder.prototype.setPayload = function (buildOptions, payload) {\n\t      _super.prototype.setPayload.call(this, buildOptions, payload);\n\n\t      var createOptions = buildOptions.createOptions;\n\t      var file = createOptions.file;\n\t      var audioPayload = payload;\n\t      var path = file.tempFilePath;\n\t      var namePath = Calibrator_1[\"default\"].isEmpty(file.name) || file.name == undefined ? path : file.name;\n\t      var duration = file.duration;\n\t      var size = file.fileSize;\n\t      audioPayload.url = path;\n\t      audioPayload.size = size;\n\t      audioPayload.duration = duration / 1000;\n\t      audioPayload.name = 'wx-audio.' + Str_1.str.fileExtension(namePath, '.');\n\t      audioPayload.contentType = 'audio/' + Str_1.str.fileExtension(namePath, '.');\n\t      buildOptions.complete = Promise.resolve();\n\t    };\n\n\t    WXAudioPayloadBuilder.prototype.validate = function (createOptions) {\n\t      _super.prototype.validate.call(this, createOptions);\n\t    };\n\n\t    return WXAudioPayloadBuilder;\n\t  }(WXFilePayloadBuilder_1[\"default\"]);\n\n\t  exports[\"default\"] = WXAudioPayloadBuilder;\n\t})(WXAudioPayloadBuilder);\n\n\tvar TextPayloadBuilder$1 = {};\n\n\tvar TextMessagePayload$1 = {};\n\n\tvar __extends$4 = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tTextMessagePayload$1.__esModule = true;\n\tTextMessagePayload$1.TextMessagePayload = void 0;\n\tvar AbstractMessagePayload_1$1 = AbstractMessagePayload$1;\n\n\tvar TextMessagePayload =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$4(TextMessagePayload, _super);\n\n\t  function TextMessagePayload() {\n\t    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n\t    _this.text = \"\";\n\t    return _this;\n\t  }\n\n\t  return TextMessagePayload;\n\t}(AbstractMessagePayload_1$1.AbstractMessagePayload);\n\n\tTextMessagePayload$1.TextMessagePayload = TextMessagePayload;\n\n\tvar __extends$3 = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tTextPayloadBuilder$1.__esModule = true;\n\tTextPayloadBuilder$1.TextPayloadBuilder = void 0;\n\tvar AbstractPayloadBuilder_1$1 = AbstractPayloadBuilder$1;\n\tvar TextMessagePayload_1 = TextMessagePayload$1;\n\tvar Calibrator_1$3 = Calibrator;\n\n\tvar TextPayloadBuilder =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$3(TextPayloadBuilder, _super);\n\n\t  function TextPayloadBuilder() {\n\t    return _super !== null && _super.apply(this, arguments) || this;\n\t  }\n\n\t  TextPayloadBuilder.prototype.create = function () {\n\t    return new TextMessagePayload_1.TextMessagePayload();\n\t  };\n\n\t  TextPayloadBuilder.prototype.setPayload = function (buildOptions, payload) {\n\t    var textPayload = payload;\n\t    var createOptions = buildOptions.createOptions;\n\t    textPayload.text = createOptions.text;\n\t    buildOptions.complete = Promise.resolve();\n\t  };\n\n\t  TextPayloadBuilder.prototype.validate = function (createOptions) {\n\t    if (Calibrator_1$3[\"default\"].isEmpty(createOptions.text)) {\n\t      throw {\n\t        code: 400,\n\t        content: \"text is empty\"\n\t      };\n\t    }\n\n\t    if (Calibrator_1$3[\"default\"].isString(createOptions.text)) {\n\t      if (createOptions.text.trim() === '') {\n\t        throw {\n\t          code: 400,\n\t          content: \"text is empty\"\n\t        };\n\t      }\n\t    } else {\n\t      throw {\n\t        code: 400,\n\t        content: 'TypeError: text requires string.'\n\t      };\n\t    }\n\n\t    if (createOptions.text.length > 2500) {\n\t      throw {\n\t        code: 400,\n\t        content: 'Message text over max length 2500'\n\t      };\n\t    }\n\t  };\n\n\t  return TextPayloadBuilder;\n\t}(AbstractPayloadBuilder_1$1.AbstractPayloadBuilder);\n\n\tTextPayloadBuilder$1.TextPayloadBuilder = TextPayloadBuilder;\n\n\tvar WXVideoPayloadBuilder = {};\n\n\tvar VideoMessagePayload$1 = {};\n\n\tvar __extends$2 = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tVideoMessagePayload$1.__esModule = true;\n\tVideoMessagePayload$1.VideoMessagePayload = void 0;\n\tvar AbstractMessagePayload_1 = AbstractMessagePayload$1;\n\n\tvar VideoMessagePayload =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$2(VideoMessagePayload, _super);\n\n\t  function VideoMessagePayload() {\n\t    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n\t    _this.video = new GoEasyVideo();\n\t    _this.thumbnail = new GoEasyThumbnail();\n\t    return _this;\n\t  }\n\n\t  return VideoMessagePayload;\n\t}(AbstractMessagePayload_1.AbstractMessagePayload);\n\n\tVideoMessagePayload$1.VideoMessagePayload = VideoMessagePayload;\n\n\tvar GoEasyThumbnail =\n\t/** @class */\n\tfunction () {\n\t  function GoEasyThumbnail() {\n\t    this.name = \"\";\n\t    this.url = \"\";\n\t    this.width = 0;\n\t    this.height = 0;\n\t    this.contentType = \"\";\n\t  }\n\n\t  return GoEasyThumbnail;\n\t}();\n\n\tvar GoEasyVideo =\n\t/** @class */\n\tfunction () {\n\t  function GoEasyVideo() {\n\t    this.name = \"\";\n\t    this.url = \"\";\n\t    this.width = 0;\n\t    this.height = 0;\n\t    this.contentType = \"\";\n\t    this.size = 0;\n\t    this.duration = 0;\n\t  }\n\n\t  return GoEasyVideo;\n\t}();\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var VideoMessagePayload_1 = VideoMessagePayload$1;\n\t  var Calibrator_1 = Calibrator;\n\t  var Str_1 = Str$1;\n\t  var AbstractPayloadBuilder_1 = AbstractPayloadBuilder$1;\n\n\t  var WXVideoPayloadBuilder =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(WXVideoPayloadBuilder, _super);\n\n\t    function WXVideoPayloadBuilder() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    WXVideoPayloadBuilder.prototype.create = function () {\n\t      return new VideoMessagePayload_1.VideoMessagePayload();\n\t    };\n\n\t    WXVideoPayloadBuilder.prototype.setPayload = function (buildOptions, payload) {\n\t      var createOptions = buildOptions.createOptions;\n\t      var file = createOptions.file;\n\t      var videoPayload = payload;\n\t      var video = videoPayload.video;\n\t      var thumbnail = videoPayload.thumbnail;\n\t      var duration = file.duration,\n\t          height = file.height,\n\t          size = file.size,\n\t          tempFilePath = file.tempFilePath,\n\t          thumbTempFilePath = file.thumbTempFilePath,\n\t          width = file.width,\n\t          _a = file.name,\n\t          name = _a === void 0 ? '' : _a;\n\t      var videoPath = Calibrator_1[\"default\"].isEmpty(name) ? tempFilePath : name;\n\t      video.contentType = 'video/' + Str_1.str.fileExtension(videoPath, '.');\n\t      video.name = 'wx-video.' + Str_1.str.fileExtension(videoPath, '.');\n\t      video.url = tempFilePath;\n\t      video.width = thumbnail.width = width;\n\t      video.height = thumbnail.height = height;\n\t      video.size = size;\n\t      video.duration = duration;\n\t      thumbnail.url = thumbTempFilePath;\n\t      thumbnail.contentType = 'image/jpg';\n\t      thumbnail.name = 'wx-thumbnail.jpg';\n\t      buildOptions.complete = Promise.resolve();\n\t    };\n\n\t    WXVideoPayloadBuilder.prototype.validate = function (createOptions) {\n\t      if (!Calibrator_1[\"default\"].isObject(createOptions)) {\n\t        throw Error('it is an empty message.');\n\t      }\n\n\t      if (!Calibrator_1[\"default\"].isDef(createOptions.file)) {\n\t        throw Error('file is empty.');\n\t      }\n\t    };\n\n\t    return WXVideoPayloadBuilder;\n\t  }(AbstractPayloadBuilder_1.AbstractPayloadBuilder);\n\n\t  exports[\"default\"] = WXVideoPayloadBuilder;\n\t})(WXVideoPayloadBuilder);\n\n\tvar UniAppImagePayloadBuilder = {};\n\n\tvar UniAppFilePayloadBuilder = {};\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var AbstractPayloadBuilder_1 = AbstractPayloadBuilder$1;\n\t  var FileMessagePayload_1 = FileMessagePayload$1;\n\t  var Calibrator_1 = Calibrator;\n\n\t  var UniAppFilePayloadBuilder =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(UniAppFilePayloadBuilder, _super);\n\n\t    function UniAppFilePayloadBuilder() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    UniAppFilePayloadBuilder.prototype.create = function () {\n\t      return new FileMessagePayload_1.FileMessagePayload();\n\t    };\n\n\t    UniAppFilePayloadBuilder.prototype.setPayload = function (buildOptions, payload) {\n\t      var filePayload = payload;\n\t      var createOptions = buildOptions.createOptions;\n\t      var file = createOptions.file;\n\t      filePayload.url = file.fullPath;\n\t      filePayload.name = file.name;\n\t      filePayload.size = file.size;\n\t      /****\n\t       *  todo: 论证必要性 ，无法标准化，对用户来说也不是刚需\n\t       *  因为只有h5拿到正确的contentType，小程序和ios/Android都不标准\n\t       *  小程序中type: png、file，安卓有时能获取到正常的contentType有时不能\n\t       */\n\n\t      filePayload.contentType = file.type;\n\t      console.log('filePayload file.type', file.type);\n\t      buildOptions.complete = Promise.resolve();\n\t    };\n\n\t    UniAppFilePayloadBuilder.prototype.validate = function (createOptions) {\n\t      if (!Calibrator_1[\"default\"].isObject(createOptions)) {\n\t        throw Error('it is an empty message.');\n\t      }\n\n\t      if (!Calibrator_1[\"default\"].isDef(createOptions.file)) {\n\t        throw Error('file is empty.');\n\t      }\n\t    };\n\n\t    return UniAppFilePayloadBuilder;\n\t  }(AbstractPayloadBuilder_1.AbstractPayloadBuilder);\n\n\t  exports[\"default\"] = UniAppFilePayloadBuilder;\n\t})(UniAppFilePayloadBuilder);\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var Str_1 = Str$1;\n\t  var Calibrator_1 = Calibrator;\n\t  var ImageMessagePayload_1 = ImageMessagePayload$1;\n\t  var UniAppFilePayloadBuilder_1 = UniAppFilePayloadBuilder;\n\n\t  var UniAppImagePayloadBuilder =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(UniAppImagePayloadBuilder, _super);\n\n\t    function UniAppImagePayloadBuilder() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    UniAppImagePayloadBuilder.prototype.create = function () {\n\t      return new ImageMessagePayload_1.ImageMessagePayload();\n\t    };\n\n\t    UniAppImagePayloadBuilder.prototype.setPayload = function (buildOptions, payload) {\n\t      var imagePayload = payload;\n\t      var createOptions = buildOptions.createOptions;\n\t      var tempFile = createOptions.file;\n\t      imagePayload.url = tempFile.path;\n\t      imagePayload.size = tempFile.size;\n\t      var path = Calibrator_1[\"default\"].isEmpty(tempFile.name) || tempFile.name === undefined ? tempFile.path : tempFile.name;\n\t      imagePayload.contentType = 'image/' + Str_1.str.fileExtension(path, '.');\n\t      imagePayload.name = 'uni-image.' + Str_1.str.fileExtension(path, '.');\n\t      buildOptions.complete = new Promise(function (resolve, reject) {\n\t        uni.getImageInfo({\n\t          src: tempFile.path,\n\t          success: function success(res) {\n\t            imagePayload.width = res.width;\n\t            imagePayload.height = res.height;\n\t            resolve();\n\t          },\n\t          fail: function fail(err) {\n\t            reject(err);\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    UniAppImagePayloadBuilder.prototype.validate = function (createOptions) {\n\t      _super.prototype.validate.call(this, createOptions);\n\t    };\n\n\t    return UniAppImagePayloadBuilder;\n\t  }(UniAppFilePayloadBuilder_1[\"default\"]);\n\n\t  exports[\"default\"] = UniAppImagePayloadBuilder;\n\t})(UniAppImagePayloadBuilder);\n\n\tvar UniAppAudioPayloadBuilder = {};\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var Calibrator_1 = Calibrator;\n\t  var Str_1 = Str$1;\n\t  var AudioMessagePayload_1 = AudioMessagePayload$1;\n\t  var UniAppFilePayloadBuilder_1 = UniAppFilePayloadBuilder;\n\n\t  var UniAppAudioPayloadBuilder =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(UniAppAudioPayloadBuilder, _super);\n\n\t    function UniAppAudioPayloadBuilder() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    UniAppAudioPayloadBuilder.prototype.create = function () {\n\t      return new AudioMessagePayload_1.AudioMessagePayload();\n\t    };\n\n\t    UniAppAudioPayloadBuilder.prototype.setPayload = function (buildOptions, payload) {\n\t      var createOptions = buildOptions.createOptions;\n\t      var audioPayload = payload;\n\t      var file = createOptions.file;\n\t      var path = file.tempFilePath;\n\t      var namePath = Calibrator_1[\"default\"].isEmpty(file.name) || file.name == undefined ? path : file.name;\n\t      audioPayload.url = path;\n\t      audioPayload.name = 'uni-audio.' + Str_1.str.fileExtension(namePath, '.');\n\t      audioPayload.contentType = 'audio/' + Str_1.str.fileExtension(namePath, '.');\n\t      buildOptions.complete = new Promise(function (resolve, reject) {\n\t        uni.getFileInfo({\n\t          filePath: path,\n\t          success: function success(res) {\n\t            var size = res.size;\n\t            audioPayload.size = size;\n\n\t            if (size === 0) {\n\t              // if res size is 0,innerAudioContext can't callback onCanplay method and onError method\n\t              resolve();\n\t            } else {\n\t              if (Calibrator_1[\"default\"].isDef(createOptions.file.duration)) {\n\t                //编译成微信小程序\n\t                audioPayload.duration = createOptions.file.duration / 1000;\n\t                resolve();\n\t              } else {\n\t                //app\n\t                var innerAudioContext_1 = uni.createInnerAudioContext();\n\t                innerAudioContext_1.src = path;\n\t                innerAudioContext_1.onCanplay(function (error) {\n\t                  if (error.errCode) {\n\t                    innerAudioContext_1.destroy();\n\t                    reject(error);\n\t                  } else {\n\t                    audioPayload.duration = innerAudioContext_1.duration;\n\t                    innerAudioContext_1.destroy();\n\t                    resolve();\n\t                  }\n\t                });\n\t                innerAudioContext_1.onError(function (error) {\n\t                  innerAudioContext_1.destroy();\n\n\t                  if (error.errCode === -99) {\n\t                    resolve();\n\t                  } else {\n\t                    reject(error);\n\t                  }\n\t                });\n\t              }\n\t            }\n\t          },\n\t          fail: function fail(error) {\n\t            reject(error);\n\t          }\n\t        });\n\t      });\n\t    };\n\n\t    UniAppAudioPayloadBuilder.prototype.validate = function (createOptions) {\n\t      _super.prototype.validate.call(this, createOptions);\n\t    };\n\n\t    return UniAppAudioPayloadBuilder;\n\t  }(UniAppFilePayloadBuilder_1[\"default\"]);\n\n\t  exports[\"default\"] = UniAppAudioPayloadBuilder;\n\t})(UniAppAudioPayloadBuilder);\n\n\tvar UniAppVideoPayloadBuilder = {};\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var Calibrator_1 = Calibrator;\n\t  var Str_1 = Str$1;\n\t  var VideoMessagePayload_1 = VideoMessagePayload$1;\n\t  var AbstractPayloadBuilder_1 = AbstractPayloadBuilder$1;\n\n\t  var UniAppVideoPayloadBuilder =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(UniAppVideoPayloadBuilder, _super);\n\n\t    function UniAppVideoPayloadBuilder() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    UniAppVideoPayloadBuilder.prototype.create = function () {\n\t      return new VideoMessagePayload_1.VideoMessagePayload();\n\t    };\n\n\t    UniAppVideoPayloadBuilder.prototype.setPayload = function (buildOptions, payload) {\n\t      var createOptions = buildOptions.createOptions;\n\t      var file = createOptions.file;\n\t      var videoPayload = payload;\n\t      var video = videoPayload.video;\n\t      var thumbnail = videoPayload.thumbnail;\n\t      var duration = file.duration,\n\t          height = file.height,\n\t          size = file.size,\n\t          tempFilePath = file.tempFilePath,\n\t          width = file.width,\n\t          _a = file.name,\n\t          name = _a === void 0 ? '' : _a;\n\t      var path = Calibrator_1[\"default\"].isEmpty(name) ? tempFilePath : name;\n\t      video.size = size;\n\t      video.width = width;\n\t      video.height = height;\n\t      video.url = tempFilePath;\n\t      video.duration = duration;\n\t      video.contentType = 'video/' + Str_1.str.fileExtension(path, '.');\n\t      video.name = 'uni-video.' + Str_1.str.fileExtension(path, '.');\n\t      thumbnail.url = tempFilePath;\n\t      thumbnail.width = width;\n\t      thumbnail.height = height;\n\t      thumbnail.contentType = 'image/jpg';\n\t      thumbnail.name = 'uni-thumbnail.jpg';\n\t      buildOptions.complete = Promise.resolve();\n\t    };\n\n\t    UniAppVideoPayloadBuilder.prototype.validate = function (createOptions) {\n\t      if (!Calibrator_1[\"default\"].isObject(createOptions)) {\n\t        throw Error('it is an empty message.');\n\t      }\n\n\t      if (!Calibrator_1[\"default\"].isDef(createOptions.file)) {\n\t        throw Error('file is empty.');\n\t      }\n\t    };\n\n\t    return UniAppVideoPayloadBuilder;\n\t  }(AbstractPayloadBuilder_1.AbstractPayloadBuilder);\n\n\t  exports[\"default\"] = UniAppVideoPayloadBuilder;\n\t})(UniAppVideoPayloadBuilder);\n\n\tvar HTMLImagePayloadBuilder = {};\n\n\tvar HTMLFilePayloadBuilder = {};\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var AbstractPayloadBuilder_1 = AbstractPayloadBuilder$1;\n\t  var FileMessagePayload_1 = FileMessagePayload$1;\n\t  var Calibrator_1 = Calibrator;\n\n\t  var HTMLFilePayloadBuilder =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(HTMLFilePayloadBuilder, _super);\n\n\t    function HTMLFilePayloadBuilder() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    HTMLFilePayloadBuilder.prototype.create = function () {\n\t      return new FileMessagePayload_1.FileMessagePayload();\n\t    };\n\n\t    HTMLFilePayloadBuilder.prototype.setPayload = function (buildOptions, payload) {\n\t      var filePayload = payload;\n\t      var createOptions = buildOptions.createOptions;\n\t      var file = createOptions.file;\n\t      var url = window.URL || window.webkitURL;\n\t      filePayload.url = url.createObjectURL(file);\n\t      filePayload.name = file.name;\n\t      filePayload.size = file.size;\n\t      filePayload.contentType = file.type;\n\t      buildOptions.complete = Promise.resolve();\n\t    };\n\n\t    HTMLFilePayloadBuilder.prototype.validate = function (createOptions) {\n\t      if (!Calibrator_1[\"default\"].isObject(createOptions)) {\n\t        throw Error('it is an empty message.');\n\t      }\n\n\t      if (!(createOptions.file instanceof File)) {\n\t        throw Error('wrong file type.');\n\t      }\n\n\t      if (createOptions.file.size == 0) {\n\t        throw Error('File size is 0.');\n\t      }\n\n\t      if (createOptions.file.size > 500 * 1024 * 1024) {\n\t        throw Error('message-length limit 30mib');\n\t      }\n\t    };\n\n\t    return HTMLFilePayloadBuilder;\n\t  }(AbstractPayloadBuilder_1.AbstractPayloadBuilder);\n\n\t  exports[\"default\"] = HTMLFilePayloadBuilder;\n\t})(HTMLFilePayloadBuilder);\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var ImageMessagePayload_1 = ImageMessagePayload$1;\n\t  var HTMLFilePayloadBuilder_1 = HTMLFilePayloadBuilder;\n\n\t  var HTMLImagePayloadBuilder =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(HTMLImagePayloadBuilder, _super);\n\n\t    function HTMLImagePayloadBuilder() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    HTMLImagePayloadBuilder.prototype.create = function () {\n\t      return new ImageMessagePayload_1.ImageMessagePayload();\n\t    };\n\n\t    HTMLImagePayloadBuilder.prototype.setPayload = function (buildOptions, payload) {\n\t      _super.prototype.setPayload.call(this, buildOptions, payload);\n\n\t      var createOptions = buildOptions.createOptions;\n\t      var file = createOptions.file;\n\t      var imagePayLoad = payload;\n\t      var url = window.URL || window.webkitURL;\n\t      var img = new Image();\n\t      img.src = url.createObjectURL(file);\n\t      buildOptions.complete = new Promise(function (resolve, reject) {\n\t        img.onload = function () {\n\t          imagePayLoad.width = img.width;\n\t          imagePayLoad.height = img.height;\n\t          url.revokeObjectURL(img.src);\n\t          resolve();\n\t        };\n\n\t        img.onerror = function (error) {\n\t          url.revokeObjectURL(img.src);\n\t          reject(error);\n\t        };\n\t      });\n\t    };\n\n\t    HTMLImagePayloadBuilder.prototype.validate = function (createOptions) {\n\t      _super.prototype.validate.call(this, createOptions);\n\n\t      var supportTypes = ['gif', 'jpg', 'png', 'jpeg'];\n\n\t      if (!supportTypes.find(function (item) {\n\t        return item === createOptions.file.type.split('/')[1].toLowerCase();\n\t      })) {\n\t        throw Error('Only ' + supportTypes.join(',') + \" is supported image.\");\n\t      }\n\t    };\n\n\t    return HTMLImagePayloadBuilder;\n\t  }(HTMLFilePayloadBuilder_1[\"default\"]);\n\n\t  exports[\"default\"] = HTMLImagePayloadBuilder;\n\t})(HTMLImagePayloadBuilder);\n\n\tvar HTMLAudioPayloadBuilder = {};\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var AudioMessagePayload_1 = AudioMessagePayload$1;\n\t  var HTMLFilePayloadBuilder_1 = HTMLFilePayloadBuilder;\n\n\t  var HTMLAudioPayloadBuilder =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(HTMLAudioPayloadBuilder, _super);\n\n\t    function HTMLAudioPayloadBuilder() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    HTMLAudioPayloadBuilder.prototype.create = function () {\n\t      return new AudioMessagePayload_1.AudioMessagePayload();\n\t    };\n\n\t    HTMLAudioPayloadBuilder.prototype.setPayload = function (buildOptions, payload) {\n\t      _super.prototype.setPayload.call(this, buildOptions, payload);\n\n\t      var createOptions = buildOptions.createOptions;\n\t      var file = createOptions.file;\n\t      var audioPayLoad = payload;\n\t      var url = window.URL || window.webkitURL;\n\t      var audio = document.createElement('audio');\n\t      audio.src = url.createObjectURL(file);\n\t      buildOptions.complete = new Promise(function (resolve, reject) {\n\t        audio.onloadedmetadata = function () {\n\t          audioPayLoad.duration = audio.duration;\n\t          url.revokeObjectURL(audio.src);\n\t          resolve();\n\t        };\n\n\t        audio.onerror = function (error) {\n\t          url.revokeObjectURL(audio.src);\n\t          reject(error);\n\t        };\n\t      });\n\t    };\n\n\t    HTMLAudioPayloadBuilder.prototype.validate = function (createOptions) {\n\t      _super.prototype.validate.call(this, createOptions);\n\n\t      var supportTypes = ['mp3', 'ogg', 'wav', 'wma', 'ape', 'acc', 'mpeg'];\n\n\t      if (!supportTypes.find(function (item) {\n\t        return item === createOptions.file.type.split('/')[1].toLowerCase();\n\t      })) {\n\t        throw Error('Only ' + supportTypes.join(',') + \" is supported audio.\");\n\t      }\n\t    };\n\n\t    return HTMLAudioPayloadBuilder;\n\t  }(HTMLFilePayloadBuilder_1[\"default\"]);\n\n\t  exports[\"default\"] = HTMLAudioPayloadBuilder;\n\t})(HTMLAudioPayloadBuilder);\n\n\tvar HTMLVideoPayloadBuilder = {};\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var VideoMessagePayload_1 = VideoMessagePayload$1;\n\t  var AbstractPayloadBuilder_1 = AbstractPayloadBuilder$1;\n\t  var Calibrator_1 = Calibrator;\n\n\t  var HTMLVideoPayloadBuilder =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(HTMLVideoPayloadBuilder, _super);\n\n\t    function HTMLVideoPayloadBuilder() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    HTMLVideoPayloadBuilder.prototype.create = function () {\n\t      return new VideoMessagePayload_1.VideoMessagePayload();\n\t    };\n\n\t    HTMLVideoPayloadBuilder.prototype.setPayload = function (buildOptions, payload) {\n\t      var _this = this;\n\n\t      var createOptions = buildOptions.createOptions;\n\t      var file = createOptions.file;\n\t      var videoPayLoad = payload;\n\t      var video = videoPayLoad.video;\n\t      var thumbnail = videoPayLoad.thumbnail;\n\t      var url = window.URL || window.webkitURL;\n\t      var videoElement = document.createElement('video');\n\t      videoElement.src = url.createObjectURL(file);\n\t      video.size = file.size;\n\t      video.name = file.name;\n\t      video.contentType = file.type;\n\t      video.url = videoElement.src;\n\t      thumbnail.name = file.name;\n\t      thumbnail.contentType = 'image/jpg';\n\t      buildOptions.complete = new Promise(function (resolve, reject) {\n\t        videoElement.onloadedmetadata = function () {\n\t          video.duration = videoElement.duration;\n\t          video.width = videoElement.videoWidth;\n\t          video.height = videoElement.videoHeight;\n\t          thumbnail.width = videoElement.videoWidth;\n\t          thumbnail.height = videoElement.videoHeight;\n\t          thumbnail.url = _this.getThumbnailUrl(videoElement);\n\t          url.revokeObjectURL(videoElement.src);\n\t          resolve();\n\t        };\n\n\t        videoElement.onerror = function (error) {\n\t          url.revokeObjectURL(videoElement.src);\n\t          reject(error);\n\t        };\n\t      });\n\t    };\n\n\t    HTMLVideoPayloadBuilder.prototype.getThumbnailUrl = function (video) {\n\t      var canvas = document.createElement(\"canvas\");\n\t      canvas.width = video.videoWidth;\n\t      canvas.height = video.videoHeight;\n\t      canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);\n\t      return canvas.toDataURL(\"image/png\");\n\t    };\n\n\t    HTMLVideoPayloadBuilder.prototype.validate = function (createOptions) {\n\t      if (!Calibrator_1[\"default\"].isObject(createOptions)) {\n\t        throw Error('it is an empty message.');\n\t      }\n\n\t      if (!(createOptions.file instanceof File)) {\n\t        throw Error('wrong file type.');\n\t      }\n\n\t      if (createOptions.file.size == 0) {\n\t        throw Error('File size is 0.');\n\t      }\n\n\t      if (createOptions.file.size > 30 * 1024 * 1024) {\n\t        throw Error('message-length limit 30mib');\n\t      }\n\n\t      var supportTypes = ['avi', 'mov', 'rmvb', 'rm', 'flv', 'mp4', '3gp', 'quicktime'];\n\n\t      if (!supportTypes.find(function (item) {\n\t        return item === createOptions.file.type.split('/')[1].toLowerCase();\n\t      })) {\n\t        throw Error('Only ' + supportTypes.join(',') + \" is supported video.\");\n\t      }\n\t    };\n\n\t    return HTMLVideoPayloadBuilder;\n\t  }(AbstractPayloadBuilder_1.AbstractPayloadBuilder);\n\n\t  exports[\"default\"] = HTMLVideoPayloadBuilder;\n\t})(HTMLVideoPayloadBuilder);\n\n\tvar CustomPayloadBuilder$1 = {};\n\n\tvar CustomMessagePayload = {};\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  var AbstractMessagePayload_1 = AbstractMessagePayload$1;\n\n\t  var CustomMessagePayload =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(CustomMessagePayload, _super);\n\n\t    function CustomMessagePayload() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    return CustomMessagePayload;\n\t  }(AbstractMessagePayload_1.AbstractMessagePayload);\n\n\t  exports[\"default\"] = CustomMessagePayload;\n\t})(CustomMessagePayload);\n\n\tvar __extends$1 = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tCustomPayloadBuilder$1.__esModule = true;\n\tCustomPayloadBuilder$1.CustomPayloadBuilder = void 0;\n\tvar AbstractPayloadBuilder_1 = AbstractPayloadBuilder$1;\n\tvar CustomMessagePayload_1 = CustomMessagePayload;\n\tvar Calibrator_1$2 = Calibrator;\n\n\tvar CustomPayloadBuilder =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends$1(CustomPayloadBuilder, _super);\n\n\t  function CustomPayloadBuilder() {\n\t    return _super !== null && _super.apply(this, arguments) || this;\n\t  }\n\n\t  CustomPayloadBuilder.prototype.create = function () {\n\t    return new CustomMessagePayload_1[\"default\"]();\n\t  };\n\n\t  CustomPayloadBuilder.prototype.setPayload = function (buildOptions, payload) {\n\t    var customMessageOptions = buildOptions.createOptions;\n\t    var customMessagePayLoad = payload;\n\t    customMessagePayLoad.payload = customMessageOptions.payload;\n\t    buildOptions.complete = Promise.resolve();\n\t  };\n\n\t  CustomPayloadBuilder.prototype.validate = function (createOptions) {\n\t    var type = createOptions.type;\n\t    var payload = createOptions.payload;\n\n\t    if (Calibrator_1$2[\"default\"].isEmpty(type)) {\n\t      throw Error('type is empty.');\n\t    }\n\n\t    if (!Calibrator_1$2[\"default\"].isString(type)) {\n\t      throw Error('type require a string');\n\t    }\n\n\t    if (Calibrator_1$2[\"default\"].isEmpty(payload)) {\n\t      throw Error('payload is empty.');\n\t    }\n\n\t    if (!Calibrator_1$2[\"default\"].isPlainObject(payload) && !Calibrator_1$2[\"default\"].isStringOrNumber(payload)) {\n\t      throw Error('payload require object | string | number.');\n\t    }\n\t  };\n\n\t  return CustomPayloadBuilder;\n\t}(AbstractPayloadBuilder_1.AbstractPayloadBuilder);\n\n\tCustomPayloadBuilder$1.CustomPayloadBuilder = CustomPayloadBuilder;\n\n\tvar LocalIMMessageBuildOptions$1 = {};\n\n\tLocalIMMessageBuildOptions$1.__esModule = true;\n\tLocalIMMessageBuildOptions$1.LocalIMMessageBuildOptions = void 0;\n\n\tvar LocalIMMessageBuildOptions =\n\t/** @class */\n\tfunction () {\n\t  function LocalIMMessageBuildOptions(type, createOptions) {\n\t    this.type = type;\n\t    this.createOptions = createOptions;\n\t  }\n\n\t  return LocalIMMessageBuildOptions;\n\t}();\n\n\tLocalIMMessageBuildOptions$1.LocalIMMessageBuildOptions = LocalIMMessageBuildOptions;\n\n\tIMMessageBuilder$1.__esModule = true;\n\tIMMessageBuilder$1.IMMessageBuilder = void 0;\n\tvar framework_detector_1 = frameworkDetector;\n\tvar WXImagePayloadBuilder_1 = WXImagePayloadBuilder;\n\tvar WXFilePayloadBuilder_1 = WXFilePayloadBuilder;\n\tvar WXAudioPayloadBuilder_1 = WXAudioPayloadBuilder;\n\tvar TextPayloadBuilder_1 = TextPayloadBuilder$1;\n\tvar WXVideoPayloadBuilder_1 = WXVideoPayloadBuilder;\n\tvar UniAppImagePayloadBuilder_1 = UniAppImagePayloadBuilder;\n\tvar UniAppFilePayloadBuilder_1 = UniAppFilePayloadBuilder;\n\tvar UniAppAudioPayloadBuilder_1 = UniAppAudioPayloadBuilder;\n\tvar UniAppVideoPayloadBuilder_1 = UniAppVideoPayloadBuilder;\n\tvar HTMLImagePayloadBuilder_1 = HTMLImagePayloadBuilder;\n\tvar HTMLFilePayloadBuilder_1 = HTMLFilePayloadBuilder;\n\tvar HTMLAudioPayloadBuilder_1 = HTMLAudioPayloadBuilder;\n\tvar HTMLVideoPayloadBuilder_1 = HTMLVideoPayloadBuilder;\n\tvar CustomPayloadBuilder_1 = CustomPayloadBuilder$1;\n\tvar LocalIMMessageBuildOptions_1 = LocalIMMessageBuildOptions$1;\n\tvar UUID_1 = UUID;\n\tvar Calibrator_1$1 = Calibrator;\n\tvar GoEasy_1$2 = GoEasy$1;\n\tvar GroupMessage_1 = GroupMessage$1;\n\tvar PrivateMessage_1 = PrivateMessage$1;\n\tvar validator_utils_1$4 = validatorUtils;\n\tvar cs_message_1 = csMessage;\n\tvar callback_utils_1$3 = callbackUtils;\n\tvar g_1$3 = g;\n\n\tvar IMMessageBuilder =\n\t/** @class */\n\tfunction () {\n\t  function IMMessageBuilder() {\n\t    var _a;\n\n\t    this.framework = framework_detector_1.FrameworkDetector.currentFramework();\n\t    this.payloadBuilders = (_a = {}, _a[framework_detector_1.Framework.UNIAPP] = {\n\t      image: new UniAppImagePayloadBuilder_1[\"default\"](),\n\t      file: new UniAppFilePayloadBuilder_1[\"default\"](),\n\t      audio: new UniAppAudioPayloadBuilder_1[\"default\"](),\n\t      video: new UniAppVideoPayloadBuilder_1[\"default\"](),\n\t      text: new TextPayloadBuilder_1.TextPayloadBuilder()\n\t    }, _a[framework_detector_1.Framework.NATIVE_APPLET_WX] = {\n\t      image: new WXImagePayloadBuilder_1[\"default\"](),\n\t      file: new WXFilePayloadBuilder_1[\"default\"](),\n\t      audio: new WXAudioPayloadBuilder_1[\"default\"](),\n\t      video: new WXVideoPayloadBuilder_1[\"default\"](),\n\t      text: new TextPayloadBuilder_1.TextPayloadBuilder()\n\t    }, _a[framework_detector_1.Framework.UNKNOWN] = {\n\t      image: new HTMLImagePayloadBuilder_1[\"default\"](),\n\t      file: new HTMLFilePayloadBuilder_1[\"default\"](),\n\t      audio: new HTMLAudioPayloadBuilder_1[\"default\"](),\n\t      video: new HTMLVideoPayloadBuilder_1[\"default\"](),\n\t      text: new TextPayloadBuilder_1.TextPayloadBuilder()\n\t    }, _a);\n\t  }\n\n\t  IMMessageBuilder.prototype.buildMessage = function (type, createOptions) {\n\t    var payloadBuilder = this.payloadBuilders[this.framework][type];\n\t    var buildOptions = new LocalIMMessageBuildOptions_1.LocalIMMessageBuildOptions(type, createOptions);\n\n\t    if (payloadBuilder) {\n\t      var payload = payloadBuilder.build(buildOptions);\n\t      buildOptions.payload = payload;\n\t    } else {\n\t      var customPayloadBuilder = new CustomPayloadBuilder_1.CustomPayloadBuilder();\n\t      var payload = customPayloadBuilder.build(buildOptions);\n\t      buildOptions.payload = payload.payload;\n\t    }\n\n\t    var message = this.build(buildOptions);\n\t    buildOptions.complete.then(function () {\n\t      callback_utils_1$3.CallbackUtils.onSuccess(createOptions, message);\n\t    })[\"catch\"](function (e) {\n\t      callback_utils_1$3.CallbackUtils.onFailed(createOptions, e);\n\t    });\n\t    return message;\n\t  };\n\n\t  IMMessageBuilder.prototype.build = function (buildOptions) {\n\t    var type = buildOptions.type;\n\t    var payload = buildOptions.payload;\n\t    var createOptions = buildOptions.createOptions;\n\t    var to = createOptions.to;\n\t    var scene = to.type;\n\t    this.validate(createOptions);\n\t    var message;\n\n\t    if (scene === GoEasy_1$2.Scene.GROUP) {\n\t      message = new GroupMessage_1.GroupMessage();\n\t      message.groupId = to.id.toString();\n\t      message.senderData = g_1$3.G.ud();\n\t    } else if (scene === GoEasy_1$2.Scene.PRIVATE) {\n\t      message = new PrivateMessage_1.PrivateMessage();\n\t      message.read = false;\n\t      message.receiverId = to.id.toString();\n\t    } else if (scene === GoEasy_1$2.Scene.CS) {\n\t      message = new cs_message_1.CSMessage();\n\t      message.to = to.id.toString();\n\t      message.teamId = to.id.toString();\n\t      message.senderData = g_1$3.G.ud();\n\t    }\n\n\t    message.senderId = g_1$3.G.u();\n\t    message.messageId = UUID_1[\"default\"].get();\n\t    message.payload = payload;\n\t    message.timestamp = Date.now();\n\t    message.type = type;\n\t    message.recalled = false;\n\t    message.status = GoEasy_1$2.MessageStatus.NEW;\n\t    message.buildOptions = buildOptions;\n\t    return message;\n\t  };\n\n\t  IMMessageBuilder.prototype.validate = function (createOptions) {\n\t    var to = createOptions.to;\n\n\t    if (!to) {\n\t      throw new Error(\"message require property to.\");\n\t    }\n\n\t    if (!Calibrator_1$1[\"default\"].isObject(to)) {\n\t      throw new Error(\"TypeError: to requires an object.\");\n\t    }\n\n\t    if (!Calibrator_1$1[\"default\"].isObject(to.data)) {\n\t      throw new Error(\"TypeError: to.data requires an object.\");\n\t    }\n\n\t    if (!to.type || to.type !== GoEasy_1$2.Scene.GROUP && to.type !== GoEasy_1$2.Scene.PRIVATE && to.type !== GoEasy_1$2.Scene.CS) {\n\t      throw new Error(\"message require property to.type\");\n\t    }\n\n\t    if (Calibrator_1$1[\"default\"].isEmpty(to.id)) {\n\t      throw new Error(\"message require property to.id\");\n\t    }\n\n\t    if (!Calibrator_1$1[\"default\"].isStringOrNumber(to.id)) {\n\t      throw new Error(\"to.id should be a string or number.\");\n\t    }\n\n\t    if (g_1$3.G.u() === to.id) {\n\t      throw new Error(\"to.id can not be the same as your id.\");\n\t    }\n\n\t    if (createOptions.notification) {\n\t      validator_utils_1$4[\"default\"].validateNotification(createOptions.notification);\n\t    }\n\n\t    if (createOptions.wxmpTemplateMsg) {\n\t      validator_utils_1$4[\"default\"].validateWXMPTemplateMsg(createOptions.wxmpTemplateMsg);\n\t    }\n\t  };\n\n\t  return IMMessageBuilder;\n\t}();\n\n\tIMMessageBuilder$1.IMMessageBuilder = IMMessageBuilder;\n\n\tvar csMessageReceiver = {};\n\n\tvar __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t  var _extendStatics = function extendStatics(d, b) {\n\t    _extendStatics = Object.setPrototypeOf || {\n\t      __proto__: []\n\t    } instanceof Array && function (d, b) {\n\t      d.__proto__ = b;\n\t    } || function (d, b) {\n\t      for (var p in b) {\n\t        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t      }\n\t    };\n\n\t    return _extendStatics(d, b);\n\t  };\n\n\t  return function (d, b) {\n\t    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t    _extendStatics(d, b);\n\n\t    function __() {\n\t      this.constructor = d;\n\t    }\n\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t  };\n\t}();\n\n\tcsMessageReceiver.__esModule = true;\n\tcsMessageReceiver.CsMessageReceiver = void 0;\n\tvar goeasy_event_center_1$1 = goeasyEventCenter;\n\tvar internal_events_1$1 = internalEvents;\n\tvar agent_status_1$1 = agentStatus;\n\tvar g_1$2 = g;\n\tvar im_1$2 = im;\n\tvar im_api_events_1 = imApiEvents;\n\tvar IMReceiver_1$1 = IMReceiver;\n\tvar Target_1 = Target$1;\n\tvar histories_1$1 = histories;\n\tvar GoEasy_1$1 = GoEasy$1;\n\tvar live_session_1$1 = liveSession;\n\n\tvar CsMessageReceiver =\n\t/** @class */\n\tfunction (_super) {\n\t  __extends(CsMessageReceiver, _super);\n\n\t  function CsMessageReceiver() {\n\t    return _super !== null && _super.apply(this, arguments) || this;\n\t  }\n\n\t  CsMessageReceiver.prototype.onMessageReceived = function (abbrMessage) {\n\t    var _this = this;\n\n\t    if (abbrMessage.t === GoEasy_1$1.Scene.CS) {\n\t      var receivedMessage_1 = this.builder.build(abbrMessage);\n\t      this.sendAck(receivedMessage_1);\n\t      var target_1 = Target_1.Target.byIMMessage(receivedMessage_1);\n\t      var history_1 = histories_1$1[\"default\"].get(target_1);\n\n\t      if (!history_1.existsMessage(receivedMessage_1)) {\n\t        var csMessage = receivedMessage_1;\n\n\t        if (csMessage.customerId() === g_1$2.G.u()) {\n\t          this.createNotification(abbrMessage);\n\t          goeasy_event_center_1$1.GoEasyEventCenter.fire(internal_events_1$1.IM_INTERNAL_EVENTS.MESSAGE_RECEIVED, receivedMessage_1);\n\t          im_1$2.IM.aec.fire(im_api_events_1.ImApiEvents.CS_MESSAGE_RECEIVED, receivedMessage_1);\n\t        } else {\n\t          var promise = agent_status_1$1.AgentStatus.getInstance().queryTeams();\n\t          promise.then(function () {\n\t            if (live_session_1$1.LiveSession.isMyCustomer(target_1)) {\n\t              _this.createNotification(abbrMessage);\n\t            }\n\n\t            goeasy_event_center_1$1.GoEasyEventCenter.fire(internal_events_1$1.IM_INTERNAL_EVENTS.CS_AGENT_MESSAGE_RECEIVED, receivedMessage_1);\n\t          });\n\t        }\n\t      }\n\t    }\n\t  };\n\n\t  return CsMessageReceiver;\n\t}(IMReceiver_1$1[\"default\"]);\n\n\tcsMessageReceiver.CsMessageReceiver = CsMessageReceiver;\n\n\tvar __awaiter$2 = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n\t  function adopt(value) {\n\t    return value instanceof P ? value : new P(function (resolve) {\n\t      resolve(value);\n\t    });\n\t  }\n\n\t  return new (P || (P = Promise))(function (resolve, reject) {\n\t    function fulfilled(value) {\n\t      try {\n\t        step(generator.next(value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function rejected(value) {\n\t      try {\n\t        step(generator[\"throw\"](value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function step(result) {\n\t      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n\t    }\n\n\t    step((generator = generator.apply(thisArg, _arguments || [])).next());\n\t  });\n\t};\n\n\tvar __generator$2 = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n\t  var _ = {\n\t    label: 0,\n\t    sent: function sent() {\n\t      if (t[0] & 1) throw t[1];\n\t      return t[1];\n\t    },\n\t    trys: [],\n\t    ops: []\n\t  },\n\t      f,\n\t      y,\n\t      t,\n\t      g;\n\t  return g = {\n\t    next: verb(0),\n\t    \"throw\": verb(1),\n\t    \"return\": verb(2)\n\t  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n\t    return this;\n\t  }), g;\n\n\t  function verb(n) {\n\t    return function (v) {\n\t      return step([n, v]);\n\t    };\n\t  }\n\n\t  function step(op) {\n\t    if (f) throw new TypeError(\"Generator is already executing.\");\n\n\t    while (_) {\n\t      try {\n\t        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n\t        if (y = 0, t) op = [op[0] & 2, t.value];\n\n\t        switch (op[0]) {\n\t          case 0:\n\t          case 1:\n\t            t = op;\n\t            break;\n\n\t          case 4:\n\t            _.label++;\n\t            return {\n\t              value: op[1],\n\t              done: false\n\t            };\n\n\t          case 5:\n\t            _.label++;\n\t            y = op[1];\n\t            op = [0];\n\t            continue;\n\n\t          case 7:\n\t            op = _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\n\t          default:\n\t            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n\t              _ = 0;\n\t              continue;\n\t            }\n\n\t            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n\t              _.label = op[1];\n\t              break;\n\t            }\n\n\t            if (op[0] === 6 && _.label < t[1]) {\n\t              _.label = t[1];\n\t              t = op;\n\t              break;\n\t            }\n\n\t            if (t && _.label < t[2]) {\n\t              _.label = t[2];\n\n\t              _.ops.push(op);\n\n\t              break;\n\t            }\n\n\t            if (t[2]) _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\t        }\n\n\t        op = body.call(thisArg, _);\n\t      } catch (e) {\n\t        op = [6, e];\n\t        y = 0;\n\t      } finally {\n\t        f = t = 0;\n\t      }\n\t    }\n\n\t    if (op[0] & 5) throw op[1];\n\t    return {\n\t      value: op[0] ? op[1] : void 0,\n\t      done: true\n\t    };\n\t  }\n\t};\n\n\tim.__esModule = true;\n\tim.IM = void 0;\n\tvar api_event_center_1 = apiEventCenter;\n\tvar GoEasyUploader_1 = GoEasyUploader$1;\n\tvar IMMessageSender_1 = IMMessageSender;\n\tvar conversation_list_1 = conversationList;\n\tvar IMReceiver_1 = IMReceiver;\n\tvar GroupMessageSubscriber_1 = GroupMessageSubscriber;\n\tvar GroupPresenceSubscriber_1 = GroupPresenceSubscriber;\n\tvar GroupOnlineCount_1 = GroupOnlineCount;\n\tvar GroupHereNow_1 = GroupHereNow;\n\tvar UserPresenceSubscriber_1 = UserPresenceSubscriber;\n\tvar UserHereNow_1 = UserHereNow;\n\tvar Calibrator_1 = Calibrator;\n\tvar ModuleTypes_1 = ModuleTypes;\n\tvar validator_utils_1$3 = validatorUtils;\n\tvar callback_utils_1$2 = callbackUtils;\n\tvar IMMessageBuilder_1 = IMMessageBuilder$1;\n\tvar MessageType_1 = MessageType;\n\tvar histories_1 = histories;\n\tvar g_1$1 = g;\n\tvar cs_message_receiver_1 = csMessageReceiver;\n\n\tvar IM =\n\t/** @class */\n\tfunction () {\n\t  function IM(options) {\n\t    this._iMReceiver = new IMReceiver_1[\"default\"]();\n\t    this.csMessageReceiver = new cs_message_receiver_1.CsMessageReceiver();\n\t    this.options = options;\n\t    IM.aec = new api_event_center_1.ApiEventCenter();\n\t    this._userHereNow = new UserHereNow_1[\"default\"]();\n\t    this.goEasyUploader = new GoEasyUploader_1.GoEasyUploader();\n\t    this._groupHereNow = new GroupHereNow_1[\"default\"]();\n\t    this._groupOnlineCount = new GroupOnlineCount_1[\"default\"]();\n\t    this.groupMessageSubscriber = new GroupMessageSubscriber_1[\"default\"]();\n\t  }\n\n\t  IM.init = function (options) {\n\t    IM.instance = new IM(options);\n\t  };\n\n\t  IM.prototype.afterConnect = function () {\n\t    this._iMReceiver.initialGoEasySocket();\n\n\t    this.csMessageReceiver.initialGoEasySocket();\n\t    this.messageBuilder = new IMMessageBuilder_1.IMMessageBuilder();\n\t    this.messageSender = new IMMessageSender_1[\"default\"]();\n\t    this.histories = histories_1[\"default\"].init();\n\t    this.histories.initialListeners();\n\t    this.conversations = new conversation_list_1[\"default\"]();\n\t    this._groupPresenceSubscriber = new GroupPresenceSubscriber_1[\"default\"]();\n\t    this._userPresenceSubscriber = new UserPresenceSubscriber_1[\"default\"]();\n\t  }; // todo: 函数名\n\n\n\t  IM.prototype.validateModules = function () {\n\t    if (Calibrator_1[\"default\"].isUndef(g_1$1.G.s())) {\n\t      throw Error('Please call connect() first.');\n\t    }\n\n\t    if (!this.options.modules || !this.options.modules.includes(ModuleTypes_1.ModuleTypes.IM)) {\n\t      throw Error(\"Invalid options: module '\".concat(ModuleTypes_1.ModuleTypes.IM, \"' is not enabled\"));\n\t    }\n\t  };\n\n\t  IM.prototype[\"catch\"] = function (functionObj, callbackOptions) {\n\t    return __awaiter$2(this, void 0, void 0, function () {\n\t      var err_1;\n\t      return __generator$2(this, function (_a) {\n\t        switch (_a.label) {\n\t          case 0:\n\t            _a.trys.push([0, 2,, 3]);\n\n\t            this.validateModules();\n\t            validator_utils_1$3[\"default\"].validateCallbackOptions(callbackOptions);\n\t            return [4\n\t            /*yield*/\n\t            , functionObj()];\n\n\t          case 1:\n\t            _a.sent();\n\n\t            return [3\n\t            /*break*/\n\t            , 3];\n\n\t          case 2:\n\t            err_1 = _a.sent();\n\t            callback_utils_1$2.CallbackUtils.onFailed(callbackOptions, err_1);\n\t            return [3\n\t            /*break*/\n\t            , 3];\n\n\t          case 3:\n\t            return [2\n\t            /*return*/\n\t            ];\n\t        }\n\t      });\n\t    });\n\t  }; // ----------- External API ----------\n\n\n\t  IM.prototype.on = function (event, callBack) {\n\t    IM.aec.on(event, callBack);\n\t  };\n\n\t  IM.prototype.off = function (event, callBack) {\n\t    IM.aec.off(event, callBack);\n\t  };\n\n\t  IM.prototype.createTextMessage = function (createOptions) {\n\t    this.validateModules();\n\t    return this.messageBuilder.buildMessage(MessageType_1.MessageType.TEXT, createOptions);\n\t  };\n\n\t  IM.prototype.createImageMessage = function (createOptions) {\n\t    this.validateModules();\n\t    return this.messageBuilder.buildMessage(MessageType_1.MessageType.IMAGE, createOptions);\n\t  };\n\n\t  IM.prototype.createFileMessage = function (createOptions) {\n\t    this.validateModules();\n\t    return this.messageBuilder.buildMessage(MessageType_1.MessageType.FILE, createOptions);\n\t  };\n\n\t  IM.prototype.createAudioMessage = function (createOptions) {\n\t    this.validateModules();\n\t    return this.messageBuilder.buildMessage(MessageType_1.MessageType.AUDIO, createOptions);\n\t  };\n\n\t  IM.prototype.createVideoMessage = function (createOptions) {\n\t    this.validateModules();\n\t    return this.messageBuilder.buildMessage(MessageType_1.MessageType.VIDEO, createOptions);\n\t  };\n\n\t  IM.prototype.createCustomMessage = function (createOptions) {\n\t    this.validateModules();\n\t    return this.messageBuilder.buildMessage(createOptions.type, createOptions);\n\t  };\n\n\t  IM.prototype.sendMessage = function (sendOptions) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.messageSender.send(sendOptions);\n\t    }, sendOptions);\n\t  };\n\n\t  IM.prototype.recallMessage = function (messageRecallOptions) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.histories.recallMessage(messageRecallOptions);\n\t    }, messageRecallOptions);\n\t  };\n\n\t  IM.prototype.deleteMessage = function (messageDeleteOptions) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.histories.deleteMessage(messageDeleteOptions);\n\t    }, messageDeleteOptions);\n\t  };\n\n\t  IM.prototype.markGroupMessageAsRead = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return __awaiter$2(_this, void 0, void 0, function () {\n\t        return __generator$2(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              return [4\n\t              /*yield*/\n\t              , this.histories.groupMarkAsRead(options)];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    }, options);\n\t  };\n\n\t  IM.prototype.markPrivateMessageAsRead = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return __awaiter$2(_this, void 0, void 0, function () {\n\t        return __generator$2(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              return [4\n\t              /*yield*/\n\t              , this.histories.privateMarkAsRead(options)];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    }, options);\n\t  };\n\n\t  IM.prototype.markMessageAsRead = function (option, teamId) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return __awaiter$2(_this, void 0, void 0, function () {\n\t        return __generator$2(this, function (_a) {\n\t          switch (_a.label) {\n\t            case 0:\n\t              return [4\n\t              /*yield*/\n\t              , this.histories.markMessageAsRead(option, teamId)];\n\n\t            case 1:\n\t              _a.sent();\n\n\t              return [2\n\t              /*return*/\n\t              ];\n\t          }\n\t        });\n\t      });\n\t    }, option);\n\t  };\n\n\t  IM.prototype.latestConversations = function (options) {\n\t    this.validateModules();\n\t    this.conversations.latestConversations(options);\n\t  };\n\n\t  IM.prototype.removePrivateConversation = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return _this.conversations.removePrivateConversation(options);\n\t    }, options);\n\t  };\n\n\t  IM.prototype.removeGroupConversation = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return _this.conversations.removeGroupConversation(options);\n\t    }, options);\n\t  };\n\n\t  IM.prototype.topPrivateConversation = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return _this.conversations.topPrivateConversation(options);\n\t    }, options);\n\t  };\n\n\t  IM.prototype.topGroupConversation = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return _this.conversations.topGroupConversation(options);\n\t    }, options);\n\t  };\n\n\t  IM.prototype.history = function (options, teamId) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.histories.loadHistory(options, teamId);\n\t    }, options);\n\t  };\n\n\t  IM.prototype.subscribeUserPresence = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return _this._userPresenceSubscriber.presence(options);\n\t    }, options);\n\t  };\n\n\t  IM.prototype.unsubscribeUserPresence = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return _this._userPresenceSubscriber.unPresence(options);\n\t    }, options);\n\t  };\n\n\t  IM.prototype.hereNow = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return _this._userHereNow.hereNow(options);\n\t    }, options);\n\t  };\n\n\t  IM.prototype.subscribeGroup = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return _this.groupMessageSubscriber.subscribe(options);\n\t    }, options);\n\t  };\n\n\t  IM.prototype.unsubscribeGroup = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return _this.groupMessageSubscriber.unsubscribe(options);\n\t    }, options);\n\t  };\n\n\t  IM.prototype.subscribeGroupPresence = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return _this._groupPresenceSubscriber.presence(options);\n\t    }, options);\n\t  };\n\n\t  IM.prototype.unsubscribeGroupPresence = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return _this._groupPresenceSubscriber.unPresence(options);\n\t    }, options);\n\t  };\n\n\t  IM.prototype.groupHereNow = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return _this._groupHereNow.hereNow(options);\n\t    }, options);\n\t  };\n\n\t  IM.prototype.groupOnlineCount = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      return _this._groupOnlineCount.get(options);\n\t    }, options);\n\t  };\n\n\t  IM.prototype.latestPendingConversations = function (options) {\n\t    this.validateModules();\n\t    this.conversations.latestPendingConversations(options);\n\t  };\n\n\t  IM.prototype.topConversation = function (options) {\n\t    this.validateModules();\n\t    this.conversations.topConversation(options);\n\t  };\n\n\t  IM.prototype.removeConversation = function (options) {\n\t    this.validateModules();\n\t    this.conversations.removeConversation(options);\n\t  };\n\n\t  return IM;\n\t}();\n\n\tim.IM = IM;\n\n\tvar mediaType = {};\n\n\t(function (exports) {\n\n\t  exports.__esModule = true;\n\t  exports.MediaType = void 0;\n\n\t  (function (MediaType) {\n\t    MediaType[\"VIDEO\"] = \"VIDEO\";\n\t    MediaType[\"VOICE\"] = \"VOICE\";\n\t  })(exports.MediaType || (exports.MediaType = {}));\n\t})(mediaType);\n\n\tvar cs = {};\n\n\tvar team = {};\n\n\tvar conversationHandler = {};\n\n\tvar csStatusQueryRequest = {};\n\n\tcsStatusQueryRequest.__esModule = true;\n\tcsStatusQueryRequest.CSStatusQueryRequest = void 0;\n\n\tvar CSStatusQueryRequest =\n\t/** @class */\n\tfunction () {\n\t  function CSStatusQueryRequest(customerId, teamId) {\n\t    this.customerId = customerId;\n\t    this.teamId = teamId;\n\t  }\n\n\t  return CSStatusQueryRequest;\n\t}();\n\n\tcsStatusQueryRequest.CSStatusQueryRequest = CSStatusQueryRequest;\n\n\tvar csAcceptRequest = {};\n\n\tcsAcceptRequest.__esModule = true;\n\tcsAcceptRequest.CSAcceptRequest = void 0;\n\n\tvar CSAcceptRequest =\n\t/** @class */\n\tfunction () {\n\t  function CSAcceptRequest(customerId, teamId) {\n\t    this.customerId = customerId;\n\t    this.teamId = teamId;\n\t  }\n\n\t  return CSAcceptRequest;\n\t}();\n\n\tcsAcceptRequest.CSAcceptRequest = CSAcceptRequest;\n\n\tvar csTransferRequest = {};\n\n\tcsTransferRequest.__esModule = true;\n\tcsTransferRequest.CSTransferRequest = void 0;\n\n\tvar CSTransferRequest =\n\t/** @class */\n\tfunction () {\n\t  function CSTransferRequest(customerId, teamId, agentId) {\n\t    this.customerId = customerId;\n\t    this.teamId = teamId;\n\t    this.agentId = agentId;\n\t  }\n\n\t  return CSTransferRequest;\n\t}();\n\n\tcsTransferRequest.CSTransferRequest = CSTransferRequest;\n\n\tvar __awaiter$1 = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n\t  function adopt(value) {\n\t    return value instanceof P ? value : new P(function (resolve) {\n\t      resolve(value);\n\t    });\n\t  }\n\n\t  return new (P || (P = Promise))(function (resolve, reject) {\n\t    function fulfilled(value) {\n\t      try {\n\t        step(generator.next(value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function rejected(value) {\n\t      try {\n\t        step(generator[\"throw\"](value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function step(result) {\n\t      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n\t    }\n\n\t    step((generator = generator.apply(thisArg, _arguments || [])).next());\n\t  });\n\t};\n\n\tvar __generator$1 = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n\t  var _ = {\n\t    label: 0,\n\t    sent: function sent() {\n\t      if (t[0] & 1) throw t[1];\n\t      return t[1];\n\t    },\n\t    trys: [],\n\t    ops: []\n\t  },\n\t      f,\n\t      y,\n\t      t,\n\t      g;\n\t  return g = {\n\t    next: verb(0),\n\t    \"throw\": verb(1),\n\t    \"return\": verb(2)\n\t  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n\t    return this;\n\t  }), g;\n\n\t  function verb(n) {\n\t    return function (v) {\n\t      return step([n, v]);\n\t    };\n\t  }\n\n\t  function step(op) {\n\t    if (f) throw new TypeError(\"Generator is already executing.\");\n\n\t    while (_) {\n\t      try {\n\t        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n\t        if (y = 0, t) op = [op[0] & 2, t.value];\n\n\t        switch (op[0]) {\n\t          case 0:\n\t          case 1:\n\t            t = op;\n\t            break;\n\n\t          case 4:\n\t            _.label++;\n\t            return {\n\t              value: op[1],\n\t              done: false\n\t            };\n\n\t          case 5:\n\t            _.label++;\n\t            y = op[1];\n\t            op = [0];\n\t            continue;\n\n\t          case 7:\n\t            op = _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\n\t          default:\n\t            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n\t              _ = 0;\n\t              continue;\n\t            }\n\n\t            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n\t              _.label = op[1];\n\t              break;\n\t            }\n\n\t            if (op[0] === 6 && _.label < t[1]) {\n\t              _.label = t[1];\n\t              t = op;\n\t              break;\n\t            }\n\n\t            if (t && _.label < t[2]) {\n\t              _.label = t[2];\n\n\t              _.ops.push(op);\n\n\t              break;\n\t            }\n\n\t            if (t[2]) _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\t        }\n\n\t        op = body.call(thisArg, _);\n\t      } catch (e) {\n\t        op = [6, e];\n\t        y = 0;\n\t      } finally {\n\t        f = t = 0;\n\t      }\n\t    }\n\n\t    if (op[0] & 5) throw op[1];\n\t    return {\n\t      value: op[0] ? op[1] : void 0,\n\t      done: true\n\t    };\n\t  }\n\t};\n\n\tconversationHandler.__esModule = true;\n\tconversationHandler.ConversationHandler = void 0;\n\tvar cs_status_query_request_1 = csStatusQueryRequest;\n\tvar cs_accept_request_1 = csAcceptRequest;\n\tvar validator_utils_1$2 = validatorUtils;\n\tvar Rocket_1 = Rocket;\n\tvar RocketTypes_1 = RocketTypes;\n\tvar Permission_1 = Permission;\n\tvar SocketTimeout_1 = SocketTimeout;\n\tvar callback_utils_1$1 = callbackUtils;\n\tvar g_1 = g;\n\tvar cs_transfer_request_1 = csTransferRequest;\n\tvar goeasy_event_center_1 = goeasyEventCenter;\n\tvar internal_events_1 = internalEvents;\n\tvar remote_abbr_message_builder_1 = remoteAbbrMessageBuilder;\n\n\tvar ConversationHandler =\n\t/** @class */\n\tfunction () {\n\t  function ConversationHandler(teamId) {\n\t    this.builder = new remote_abbr_message_builder_1.RemoteAbbrMessageBuilder();\n\t    this.teamId = teamId;\n\t  }\n\n\t  ConversationHandler.prototype.accept = function (teamId, options) {\n\t    var _this = this;\n\n\t    validator_utils_1$2[\"default\"].validateId(options.id, \"id\");\n\t    var id = options.id;\n\t    var customerId = id.toString();\n\t    var request = new cs_accept_request_1.CSAcceptRequest(customerId, teamId);\n\t    var rocket = new Rocket_1[\"default\"]({\n\t      name: RocketTypes_1.RocketTypes.CS_ACCEPT,\n\t      params: request,\n\t      permission: Permission_1.Permission.WRITE,\n\t      singleTimeout: SocketTimeout_1.SocketTimeout.commonRequestSingle,\n\t      totalTimeout: SocketTimeout_1.SocketTimeout.commonRequestTotal,\n\t      fail: function fail(err) {\n\t        callback_utils_1$1.CallbackUtils.onFailed(options, err);\n\t      },\n\t      success: function success(res) {\n\t        var acceptedMessage = _this.builder.build(res.content.message);\n\n\t        goeasy_event_center_1.GoEasyEventCenter.fire(internal_events_1.IM_INTERNAL_EVENTS.CS_ACCEPTED, acceptedMessage);\n\t        callback_utils_1$1.CallbackUtils.onSuccess(options);\n\t      }\n\t    });\n\t    g_1.G.s().emit(rocket);\n\t  };\n\n\t  ConversationHandler.prototype.end = function (teamId, options) {\n\t    var _this = this;\n\n\t    validator_utils_1$2[\"default\"].validateId(options.id, \"id\");\n\t    var customerId = options.id.toString();\n\t    var request = new cs_accept_request_1.CSAcceptRequest(customerId, teamId);\n\t    var rocket = new Rocket_1[\"default\"]({\n\t      name: RocketTypes_1.RocketTypes.CS_END,\n\t      params: request,\n\t      permission: Permission_1.Permission.WRITE,\n\t      singleTimeout: SocketTimeout_1.SocketTimeout.commonRequestSingle,\n\t      totalTimeout: SocketTimeout_1.SocketTimeout.commonRequestTotal,\n\t      fail: function fail(err) {\n\t        callback_utils_1$1.CallbackUtils.onFailed(options, err);\n\t      },\n\t      success: function success(res) {\n\t        var endedMessage = _this.builder.build(res.content.message);\n\n\t        goeasy_event_center_1.GoEasyEventCenter.fire(internal_events_1.IM_INTERNAL_EVENTS.CS_ENDED, endedMessage);\n\t        callback_utils_1$1.CallbackUtils.onSuccess(options);\n\t      }\n\t    });\n\t    g_1.G.s().emit(rocket);\n\t  };\n\n\t  ConversationHandler.prototype.queryCustomerStatus = function (teamId, options) {\n\t    return __awaiter$1(this, void 0, void 0, function () {\n\t      var customerStatus;\n\t      return __generator$1(this, function (_a) {\n\t        switch (_a.label) {\n\t          case 0:\n\t            validator_utils_1$2[\"default\"].validateId(options.id, \"id\");\n\t            return [4\n\t            /*yield*/\n\t            , this.doCustomerStatus(teamId, options.id)];\n\n\t          case 1:\n\t            customerStatus = _a.sent();\n\t            this.activeCustomerStatus = customerStatus;\n\t            this.activeCustomerStatusOptions = options;\n\t            callback_utils_1$1.CallbackUtils.onSuccess(options, customerStatus);\n\t            return [2\n\t            /*return*/\n\t            ];\n\t        }\n\t      });\n\t    });\n\t  };\n\n\t  ConversationHandler.prototype.doCustomerStatus = function (teamId, id) {\n\t    var customerId = id.toString();\n\t    var request = new cs_status_query_request_1.CSStatusQueryRequest(customerId, teamId);\n\t    return new Promise(function (resolve, reject) {\n\t      var rocket = new Rocket_1[\"default\"]({\n\t        name: RocketTypes_1.RocketTypes.CS_CUSTOMER_STATUS,\n\t        params: request,\n\t        permission: Permission_1.Permission.READ,\n\t        singleTimeout: SocketTimeout_1.SocketTimeout.commonQuerySingle,\n\t        totalTimeout: SocketTimeout_1.SocketTimeout.commonQueryTotal,\n\t        fail: function fail(error) {\n\t          reject(error);\n\t        },\n\t        success: function success(res) {\n\t          //todo: 理论上还应该有user, team两个id/data，暂时没有，视情况要不要补充？\n\t          var content = res.content;\n\n\t          if (content.agent) {\n\t            content.agent.data = JSON.parse(content.agent.data);\n\t          }\n\n\t          resolve(content);\n\t        }\n\t      });\n\t      g_1.G.s().emit(rocket);\n\t    });\n\t  };\n\n\t  ConversationHandler.prototype.transfer = function (teamId, options) {\n\t    var _this = this;\n\n\t    validator_utils_1$2[\"default\"].validateId(options.customerId, \"customerId\");\n\t    validator_utils_1$2[\"default\"].validateId(options.agentId, \"agentId\");\n\t    var customerId = options.customerId.toString();\n\t    var to = options.agentId.toString();\n\t    var request = new cs_transfer_request_1.CSTransferRequest(customerId, teamId, to);\n\t    var rocket = new Rocket_1[\"default\"]({\n\t      name: RocketTypes_1.RocketTypes.CS_TRANSFER,\n\t      params: request,\n\t      permission: Permission_1.Permission.WRITE,\n\t      singleTimeout: SocketTimeout_1.SocketTimeout.commonRequestSingle,\n\t      totalTimeout: SocketTimeout_1.SocketTimeout.commonRequestTotal,\n\t      fail: function fail(err) {\n\t        callback_utils_1$1.CallbackUtils.onFailed(options, err);\n\t      },\n\t      success: function success(res) {\n\t        var transferMessage = _this.builder.build(res.content.message);\n\n\t        goeasy_event_center_1.GoEasyEventCenter.fire(internal_events_1.IM_INTERNAL_EVENTS.CS_TRANSFER, transferMessage);\n\t        callback_utils_1$1.CallbackUtils.onSuccess(options);\n\t      }\n\t    });\n\t    g_1.G.s().emit(rocket);\n\t  };\n\n\t  return ConversationHandler;\n\t}();\n\n\tconversationHandler.ConversationHandler = ConversationHandler;\n\n\tvar messageCreator = {};\n\n\tmessageCreator.__esModule = true;\n\tmessageCreator.MessageCreator = void 0;\n\tvar GoEasy_1 = GoEasy$1;\n\tvar im_1$1 = im;\n\n\tvar MessageCreator =\n\t/** @class */\n\tfunction () {\n\t  function MessageCreator() {}\n\n\t  MessageCreator.getInstance = function () {\n\t    if (!MessageCreator.instance) {\n\t      MessageCreator.instance = new MessageCreator();\n\t    }\n\n\t    return MessageCreator.instance;\n\t  };\n\n\t  MessageCreator.prototype.createTextMessage = function (teamId, createOptions) {\n\t    var imMessage = im_1$1.IM.instance.createTextMessage(createOptions);\n\t    this.extendProps(teamId, imMessage);\n\t  };\n\n\t  MessageCreator.prototype.createImageMessage = function (teamId, createOptions) {\n\t    var imMessage = im_1$1.IM.instance.createImageMessage(createOptions);\n\t    this.extendProps(teamId, imMessage);\n\t  };\n\n\t  MessageCreator.prototype.createFileMessage = function (teamId, createOptions) {\n\t    var imMessage = im_1$1.IM.instance.createFileMessage(createOptions);\n\t    this.extendProps(teamId, imMessage);\n\t  };\n\n\t  MessageCreator.prototype.createAudioMessage = function (teamId, createOptions) {\n\t    var imMessage = im_1$1.IM.instance.createAudioMessage(createOptions);\n\t    this.extendProps(teamId, imMessage);\n\t  };\n\n\t  MessageCreator.prototype.createVideoMessage = function (teamId, createOptions) {\n\t    var imMessage = im_1$1.IM.instance.createVideoMessage(createOptions);\n\t    this.extendProps(teamId, imMessage);\n\t  };\n\n\t  MessageCreator.prototype.createCustomMessage = function (teamId, createOptions) {\n\t    var imMessage = im_1$1.IM.instance.createCustomMessage(createOptions);\n\t    this.extendProps(teamId, imMessage);\n\t  };\n\t  /**\n\t   * agent发送的消息accepted一定为true(agent必须接入才能发送消息)\n\t   */\n\n\n\t  MessageCreator.prototype.extendProps = function (teamId, imMessage) {\n\t    if (imMessage.scene() === GoEasy_1.Scene.CS) {\n\t      var csMessage = imMessage;\n\t      csMessage.teamId = teamId;\n\t      csMessage.accepted = true;\n\t    }\n\t  };\n\n\t  return MessageCreator;\n\t}();\n\n\tmessageCreator.MessageCreator = MessageCreator;\n\n\tvar __awaiter = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n\t  function adopt(value) {\n\t    return value instanceof P ? value : new P(function (resolve) {\n\t      resolve(value);\n\t    });\n\t  }\n\n\t  return new (P || (P = Promise))(function (resolve, reject) {\n\t    function fulfilled(value) {\n\t      try {\n\t        step(generator.next(value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function rejected(value) {\n\t      try {\n\t        step(generator[\"throw\"](value));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    }\n\n\t    function step(result) {\n\t      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n\t    }\n\n\t    step((generator = generator.apply(thisArg, _arguments || [])).next());\n\t  });\n\t};\n\n\tvar __generator = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n\t  var _ = {\n\t    label: 0,\n\t    sent: function sent() {\n\t      if (t[0] & 1) throw t[1];\n\t      return t[1];\n\t    },\n\t    trys: [],\n\t    ops: []\n\t  },\n\t      f,\n\t      y,\n\t      t,\n\t      g;\n\t  return g = {\n\t    next: verb(0),\n\t    \"throw\": verb(1),\n\t    \"return\": verb(2)\n\t  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n\t    return this;\n\t  }), g;\n\n\t  function verb(n) {\n\t    return function (v) {\n\t      return step([n, v]);\n\t    };\n\t  }\n\n\t  function step(op) {\n\t    if (f) throw new TypeError(\"Generator is already executing.\");\n\n\t    while (_) {\n\t      try {\n\t        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n\t        if (y = 0, t) op = [op[0] & 2, t.value];\n\n\t        switch (op[0]) {\n\t          case 0:\n\t          case 1:\n\t            t = op;\n\t            break;\n\n\t          case 4:\n\t            _.label++;\n\t            return {\n\t              value: op[1],\n\t              done: false\n\t            };\n\n\t          case 5:\n\t            _.label++;\n\t            y = op[1];\n\t            op = [0];\n\t            continue;\n\n\t          case 7:\n\t            op = _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\n\t          default:\n\t            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n\t              _ = 0;\n\t              continue;\n\t            }\n\n\t            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n\t              _.label = op[1];\n\t              break;\n\t            }\n\n\t            if (op[0] === 6 && _.label < t[1]) {\n\t              _.label = t[1];\n\t              t = op;\n\t              break;\n\t            }\n\n\t            if (t && _.label < t[2]) {\n\t              _.label = t[2];\n\n\t              _.ops.push(op);\n\n\t              break;\n\t            }\n\n\t            if (t[2]) _.ops.pop();\n\n\t            _.trys.pop();\n\n\t            continue;\n\t        }\n\n\t        op = body.call(thisArg, _);\n\t      } catch (e) {\n\t        op = [6, e];\n\t        y = 0;\n\t      } finally {\n\t        f = t = 0;\n\t      }\n\t    }\n\n\t    if (op[0] & 5) throw op[1];\n\t    return {\n\t      value: op[0] ? op[1] : void 0,\n\t      done: true\n\t    };\n\t  }\n\t};\n\n\tteam.__esModule = true;\n\tteam.Team = void 0;\n\tvar validator_utils_1$1 = validatorUtils;\n\tvar callback_utils_1 = callbackUtils;\n\tvar im_1 = im;\n\tvar conversation_handler_1 = conversationHandler;\n\tvar agent_status_1 = agentStatus;\n\tvar message_creator_1 = messageCreator;\n\tvar live_session_1 = liveSession;\n\n\tvar Team =\n\t/** @class */\n\tfunction () {\n\t  function Team(teamId) {\n\t    this.teamId = teamId;\n\t    this.agentStatus = agent_status_1.AgentStatus.getInstance();\n\t    this.conversationHandler = new conversation_handler_1.ConversationHandler(teamId);\n\t    this.messageCreator = message_creator_1.MessageCreator.getInstance();\n\t  }\n\n\t  Team.prototype[\"catch\"] = function (functionObj, callbackOptions) {\n\t    return __awaiter(this, void 0, void 0, function () {\n\t      var err_1;\n\t      return __generator(this, function (_a) {\n\t        switch (_a.label) {\n\t          case 0:\n\t            _a.trys.push([0, 2,, 3]);\n\n\t            validator_utils_1$1[\"default\"].validateCallbackOptions(callbackOptions);\n\t            return [4\n\t            /*yield*/\n\t            , functionObj()];\n\n\t          case 1:\n\t            _a.sent();\n\n\t            return [3\n\t            /*break*/\n\t            , 3];\n\n\t          case 2:\n\t            err_1 = _a.sent();\n\t            callback_utils_1.CallbackUtils.onFailed(callbackOptions, err_1);\n\t            return [3\n\t            /*break*/\n\t            , 3];\n\n\t          case 3:\n\t            return [2\n\t            /*return*/\n\t            ];\n\t        }\n\t      });\n\t    });\n\t  };\n\n\t  Team.prototype.isOnline = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.agentStatus.isOnline(_this.teamId, options);\n\t    }, options);\n\t  }; //agentdata\n\n\n\t  Team.prototype.online = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.agentStatus.online(_this.teamId, options);\n\t    }, options);\n\t  };\n\n\t  Team.prototype.offline = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.agentStatus.offline(_this.teamId, options);\n\t    }, options);\n\t  };\n\n\t  Team.prototype.customerStatus = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.conversationHandler.queryCustomerStatus(_this.teamId, options);\n\t    }, options);\n\t  };\n\n\t  Team.prototype.accept = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.conversationHandler.accept(_this.teamId, options);\n\t    }, options);\n\t  };\n\n\t  Team.prototype.end = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.conversationHandler.end(_this.teamId, options);\n\t    }, options);\n\t  };\n\n\t  Team.prototype.history = function (options) {\n\t    im_1.IM.instance.history(options, this.teamId);\n\t  };\n\n\t  Team.prototype.markMessageAsRead = function (options) {\n\t    im_1.IM.instance.markMessageAsRead(options, this.teamId);\n\t  };\n\n\t  Team.prototype.createTextMessage = function (createOptions) {\n\t    this.messageCreator.createTextMessage(this.teamId, createOptions);\n\t  };\n\n\t  Team.prototype.createImageMessage = function (createOptions) {\n\t    this.messageCreator.createImageMessage(this.teamId, createOptions);\n\t  };\n\n\t  Team.prototype.createFileMessage = function (createOptions) {\n\t    this.messageCreator.createFileMessage(this.teamId, createOptions);\n\t  };\n\n\t  Team.prototype.createAudioMessage = function (createOptions) {\n\t    this.messageCreator.createAudioMessage(this.teamId, createOptions);\n\t  };\n\n\t  Team.prototype.createVideoMessage = function (createOptions) {\n\t    this.messageCreator.createVideoMessage(this.teamId, createOptions);\n\t  };\n\n\t  Team.prototype.createCustomMessage = function (createOptions) {\n\t    this.messageCreator.createCustomMessage(this.teamId, createOptions);\n\t  };\n\n\t  Team.prototype.transfer = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.conversationHandler.transfer(_this.teamId, options);\n\t    }, options);\n\t  };\n\n\t  Team.prototype.agents = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      _this.agentStatus.agents(_this.teamId, options);\n\t    }, options);\n\t  };\n\n\t  Team.prototype.liveSession = function (options) {\n\t    var _this = this;\n\n\t    this[\"catch\"](function () {\n\t      live_session_1.LiveSession.live(_this.teamId, options);\n\t    }, options);\n\t  };\n\n\t  Team.prototype.quitLiveSession = function (options) {\n\t    this[\"catch\"](function () {\n\t      live_session_1.LiveSession.quit(options);\n\t    }, options);\n\t  };\n\n\t  return Team;\n\t}();\n\n\tteam.Team = Team;\n\n\tcs.__esModule = true;\n\tcs.CS = void 0;\n\tvar team_1 = team;\n\tvar validator_utils_1 = validatorUtils;\n\n\tvar CS =\n\t/** @class */\n\tfunction () {\n\t  function CS() {}\n\n\t  CS.team = function (teamId) {\n\t    validator_utils_1[\"default\"].validateId(teamId, \"teamId\");\n\t    var team = this.teams.get(teamId);\n\n\t    if (!team) {\n\t      team = new team_1.Team(teamId.toString());\n\t      this.teams.set(teamId.toString(), team);\n\t    }\n\n\t    return team;\n\t  };\n\n\t  CS.teams = new Map();\n\t  return CS;\n\t}();\n\n\tcs.CS = CS;\n\n\t(function (exports) {\n\n\t  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n\t    var _extendStatics = function extendStatics(d, b) {\n\t      _extendStatics = Object.setPrototypeOf || {\n\t        __proto__: []\n\t      } instanceof Array && function (d, b) {\n\t        d.__proto__ = b;\n\t      } || function (d, b) {\n\t        for (var p in b) {\n\t          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n\t        }\n\t      };\n\n\t      return _extendStatics(d, b);\n\t    };\n\n\t    return function (d, b) {\n\t      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n\t      _extendStatics(d, b);\n\n\t      function __() {\n\t        this.constructor = d;\n\t      }\n\n\t      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t  }();\n\n\t  exports.__esModule = true;\n\t  exports.CSTeam = exports.GoEasyIM = exports.GoEasyPubSub = exports.CustomerStatusOptions = exports.User = exports.AgentOnlineOptions = exports.ConversationDTO = exports.MessageStatus = exports.Scene = exports.CallBackOptions = void 0;\n\t  var NetworkStatus_1 = NetworkStatus;\n\t  var GoEasySocket_1 = GoEasySocket;\n\t  var Calibrator_1 = Calibrator;\n\t  var ModuleTypes_1 = ModuleTypes;\n\t  var pubsub_1 = pubsub;\n\t  var im_1 = im;\n\t  var GNS_1 = GNS$1;\n\t  var im_api_events_1 = imApiEvents;\n\t  var goeasy_event_center_1 = goeasyEventCenter;\n\t  var media_type_1 = mediaType;\n\t  var cs_1 = cs;\n\t  var g_1 = g; // Lib version flag\n\n\t  var packageVersion = '2.5.2-1';\n\n\t  var CallBackOptions =\n\t  /** @class */\n\t  function () {\n\t    function CallBackOptions() {}\n\n\t    return CallBackOptions;\n\t  }();\n\n\t  exports.CallBackOptions = CallBackOptions; // --------------- IM API Options ---------------\n\n\t  var Scene;\n\n\t  (function (Scene) {\n\t    Scene[\"PRIVATE\"] = \"private\";\n\t    Scene[\"GROUP\"] = \"group\";\n\t    Scene[\"SYSTEM\"] = \"system\";\n\t    Scene[\"CS\"] = \"cs\";\n\t  })(Scene = exports.Scene || (exports.Scene = {}));\n\n\t  (function (MessageStatus) {\n\t    MessageStatus[\"NEW\"] = \"new\";\n\t    MessageStatus[\"SENDING\"] = \"sending\";\n\t    MessageStatus[\"SUCCESS\"] = \"success\";\n\t    MessageStatus[\"FAIL\"] = \"fail\";\n\t  })(exports.MessageStatus || (exports.MessageStatus = {}));\n\n\t  var ConversationDTO =\n\t  /** @class */\n\t  function () {\n\t    function ConversationDTO() {}\n\n\t    return ConversationDTO;\n\t  }();\n\n\t  exports.ConversationDTO = ConversationDTO;\n\n\t  var AgentOnlineOptions =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(AgentOnlineOptions, _super);\n\n\t    function AgentOnlineOptions() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    return AgentOnlineOptions;\n\t  }(CallBackOptions);\n\n\t  exports.AgentOnlineOptions = AgentOnlineOptions;\n\n\t  var User =\n\t  /** @class */\n\t  function () {\n\t    function User(id, data) {\n\t      this.id = id;\n\t      this.data = data;\n\t    }\n\n\t    return User;\n\t  }();\n\n\t  exports.User = User;\n\n\t  var CustomerStatusOptions =\n\t  /** @class */\n\t  function (_super) {\n\t    __extends(CustomerStatusOptions, _super);\n\n\t    function CustomerStatusOptions() {\n\t      return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\n\t    return CustomerStatusOptions;\n\t  }(CallBackOptions);\n\n\t  exports.CustomerStatusOptions = CustomerStatusOptions;\n\t  /**\n\t   * @description PubSub 类\n\t   */\n\n\t  var GoEasyPubSub =\n\t  /** @class */\n\t  function () {\n\t    function GoEasyPubSub(options) {\n\t      pubsub_1.PubSub.init(options);\n\t    }\n\n\t    GoEasyPubSub.prototype.initialGoEasySocket = function () {\n\t      pubsub_1.PubSub.instance.initialGoEasySocket();\n\t    };\n\n\t    GoEasyPubSub.prototype.initialBeforeConnect = function () {\n\t      pubsub_1.PubSub.instance.initialBeforeConnect();\n\t    };\n\n\t    GoEasyPubSub.prototype.publish = function (options) {\n\t      pubsub_1.PubSub.instance.publisher.publish(options);\n\t    };\n\n\t    GoEasyPubSub.prototype.subscribe = function (options) {\n\t      pubsub_1.PubSub.instance.subscriber.subscribe(options);\n\t    };\n\n\t    GoEasyPubSub.prototype.unsubscribe = function (options) {\n\t      pubsub_1.PubSub.instance.subscriber.unsubscribe(options);\n\t    };\n\n\t    GoEasyPubSub.prototype.subscribePresence = function (options) {\n\t      pubsub_1.PubSub.instance.presence.subscribePresence(options);\n\t    };\n\n\t    GoEasyPubSub.prototype.unsubscribePresence = function (options) {\n\t      pubsub_1.PubSub.instance.presence.unsubscribePresence(options);\n\t    };\n\n\t    GoEasyPubSub.prototype.history = function (options) {\n\t      pubsub_1.PubSub.instance.histories.get(options);\n\t    };\n\n\t    GoEasyPubSub.prototype.hereNow = function (options) {\n\t      pubsub_1.PubSub.instance.hereNows.byChannel(options);\n\t    };\n\n\t    GoEasyPubSub.prototype.hereNowByUserIds = function (options) {\n\t      pubsub_1.PubSub.instance.hereNows.byUserId(options);\n\t    };\n\n\t    return GoEasyPubSub;\n\t  }();\n\n\t  exports.GoEasyPubSub = GoEasyPubSub;\n\t  /**\n\t   * @description IM 聊天类\n\t   */\n\n\t  var GoEasyIM =\n\t  /** @class */\n\t  function () {\n\t    function GoEasyIM(options) {\n\t      im_1.IM.init(options);\n\t    }\n\n\t    GoEasyIM.prototype.afterConnect = function () {\n\t      im_1.IM.instance.afterConnect();\n\t    };\n\n\t    GoEasyIM.prototype.on = function (event, callBack) {\n\t      im_1.IM.instance.on(event, callBack);\n\t    };\n\n\t    GoEasyIM.prototype.off = function (event, callBack) {\n\t      im_1.IM.instance.off(event, callBack);\n\t    };\n\n\t    GoEasyIM.prototype.createTextMessage = function (createOptions) {\n\t      return im_1.IM.instance.createTextMessage(createOptions);\n\t    };\n\n\t    GoEasyIM.prototype.createImageMessage = function (createOptions) {\n\t      return im_1.IM.instance.createImageMessage(createOptions);\n\t    };\n\n\t    GoEasyIM.prototype.createFileMessage = function (createOptions) {\n\t      return im_1.IM.instance.createFileMessage(createOptions);\n\t    };\n\n\t    GoEasyIM.prototype.createAudioMessage = function (createOptions) {\n\t      return im_1.IM.instance.createAudioMessage(createOptions);\n\t    };\n\n\t    GoEasyIM.prototype.createVideoMessage = function (createOptions) {\n\t      return im_1.IM.instance.createVideoMessage(createOptions);\n\t    };\n\n\t    GoEasyIM.prototype.createCustomMessage = function (createOptions) {\n\t      return im_1.IM.instance.createCustomMessage(createOptions);\n\t    };\n\n\t    GoEasyIM.prototype.sendMessage = function (sendOptions) {\n\t      im_1.IM.instance.sendMessage(sendOptions);\n\t    };\n\n\t    GoEasyIM.prototype.recallMessage = function (messageRecallOptions) {\n\t      im_1.IM.instance.recallMessage(messageRecallOptions);\n\t    };\n\n\t    GoEasyIM.prototype.deleteMessage = function (messageDeleteOptions) {\n\t      im_1.IM.instance.deleteMessage(messageDeleteOptions);\n\t    };\n\n\t    GoEasyIM.prototype.markGroupMessageAsRead = function (options) {\n\t      im_1.IM.instance.markGroupMessageAsRead(options);\n\t    };\n\n\t    GoEasyIM.prototype.markPrivateMessageAsRead = function (options) {\n\t      im_1.IM.instance.markPrivateMessageAsRead(options);\n\t    };\n\n\t    GoEasyIM.prototype.latestConversations = function (options) {\n\t      im_1.IM.instance.latestConversations(options);\n\t    };\n\n\t    GoEasyIM.prototype.removePrivateConversation = function (options) {\n\t      im_1.IM.instance.removePrivateConversation(options);\n\t    };\n\n\t    GoEasyIM.prototype.removeGroupConversation = function (options) {\n\t      im_1.IM.instance.removeGroupConversation(options);\n\t    };\n\n\t    GoEasyIM.prototype.topPrivateConversation = function (options) {\n\t      im_1.IM.instance.topPrivateConversation(options);\n\t    };\n\n\t    GoEasyIM.prototype.topGroupConversation = function (options) {\n\t      im_1.IM.instance.topGroupConversation(options);\n\t    };\n\n\t    GoEasyIM.prototype.history = function (options) {\n\t      im_1.IM.instance.history(options);\n\t    };\n\n\t    GoEasyIM.prototype.subscribeUserPresence = function (options) {\n\t      im_1.IM.instance.subscribeUserPresence(options);\n\t    };\n\n\t    GoEasyIM.prototype.unsubscribeUserPresence = function (options) {\n\t      im_1.IM.instance.unsubscribeUserPresence(options);\n\t    };\n\n\t    GoEasyIM.prototype.hereNow = function (options) {\n\t      im_1.IM.instance.hereNow(options);\n\t    };\n\n\t    GoEasyIM.prototype.subscribeGroup = function (options) {\n\t      im_1.IM.instance.subscribeGroup(options);\n\t    };\n\n\t    GoEasyIM.prototype.unsubscribeGroup = function (options) {\n\t      im_1.IM.instance.unsubscribeGroup(options);\n\t    };\n\n\t    GoEasyIM.prototype.subscribeGroupPresence = function (options) {\n\t      im_1.IM.instance.subscribeGroupPresence(options);\n\t    };\n\n\t    GoEasyIM.prototype.unsubscribeGroupPresence = function (options) {\n\t      im_1.IM.instance.unsubscribeGroupPresence(options);\n\t    };\n\n\t    GoEasyIM.prototype.groupHereNow = function (options) {\n\t      im_1.IM.instance.groupHereNow(options);\n\t    };\n\n\t    GoEasyIM.prototype.groupOnlineCount = function (options) {\n\t      im_1.IM.instance.groupOnlineCount(options);\n\t    };\n\n\t    GoEasyIM.prototype.markMessageAsRead = function (options) {\n\t      im_1.IM.instance.markMessageAsRead(options);\n\t    };\n\n\t    GoEasyIM.prototype.csteam = function (teamId) {\n\t      return new CSTeam(teamId);\n\t    };\n\n\t    GoEasyIM.prototype.pendingConversations = function (options) {\n\t      im_1.IM.instance.latestPendingConversations(options);\n\t    };\n\n\t    GoEasyIM.prototype.topConversation = function (options) {\n\t      im_1.IM.instance.topConversation(options);\n\t    };\n\n\t    GoEasyIM.prototype.removeConversation = function (options) {\n\t      im_1.IM.instance.removeConversation(options);\n\t    };\n\n\t    return GoEasyIM;\n\t  }();\n\n\t  exports.GoEasyIM = GoEasyIM;\n\t  /**\n\t   * @description GoEasy 对外接口核心类\n\t   */\n\n\t  var GoEasy =\n\t  /** @class */\n\t  function () {\n\t    function GoEasy(options) {\n\t      if (Calibrator_1[\"default\"].isDef(GoEasy.instance) && GoEasy.instance.getConnectionStatus() !== NetworkStatus_1.NetworkStatus.DISCONNECTED) {\n\t        return GoEasy.instance;\n\t      }\n\n\t      this.validateOptions(options);\n\t      this.options = options;\n\t      GNS_1.GNS.init(options.allowNotification);\n\t      this.pubsub = new GoEasyPubSub(this.options);\n\t      this.im = new GoEasyIM(this.options); // this.rtc = new GoEasyRTC();\n\t    }\n\n\t    GoEasy.getInstance = function (options) {\n\t      if (Calibrator_1[\"default\"].isUndef(GoEasy.instance)) {\n\t        GoEasy.instance = new GoEasy(options);\n\t      }\n\n\t      return GoEasy.instance;\n\t    };\n\n\t    GoEasy.prototype.connect = function (options) {\n\t      if (this.getConnectionStatus() !== NetworkStatus_1.NetworkStatus.DISCONNECTED) {\n\t        //必须是手动断开或未连接，才能connect\n\t        if (Calibrator_1[\"default\"].isObject(options) && Calibrator_1[\"default\"].isFunction(options.onFailed)) {\n\t          options.onFailed({\n\t            code: 408,\n\t            content: 'It is already connected, don\\'t try again until disconnect() is called. '\n\t          });\n\t          return;\n\t        }\n\t      }\n\n\t      this.confirmUserId(options);\n\t      goeasy_event_center_1.GoEasyEventCenter.initial(); //很重要确保之前执行的监听器都要被删除\n\n\t      this.pubsub.initialBeforeConnect();\n\t      this.goEasySocket = new GoEasySocket_1[\"default\"](this.options, options);\n\t      this.goEasySocket.connect();\n\t      g_1.G.i(this.goEasySocket);\n\t      this.im.afterConnect();\n\t      this.pubsub.initialGoEasySocket(); // this.rtc.initialGoEasySocket(this.goEasySocket);\n\t    };\n\n\t    GoEasy.prototype.disconnect = function (options) {\n\t      this.goEasySocket.disconnect().then(function () {\n\t        if (Calibrator_1[\"default\"].isObject(options) && Calibrator_1[\"default\"].isFunction(options.onSuccess)) {\n\t          options.onSuccess();\n\t        }\n\t      })[\"catch\"](function (e) {\n\t        if (Calibrator_1[\"default\"].isObject(options) && Calibrator_1[\"default\"].isFunction(options.onFailed)) {\n\t          options.onFailed(e);\n\t        }\n\t      });\n\t    };\n\n\t    GoEasy.prototype.getConnectionStatus = function () {\n\t      if (this.goEasySocket) {\n\t        return this.goEasySocket.getStatus();\n\t      }\n\n\t      return NetworkStatus_1.NetworkStatus.DISCONNECTED;\n\t    };\n\n\t    GoEasy.prototype.validateOptions = function (options) {\n\t      var msg = '';\n\n\t      if (!Calibrator_1[\"default\"].isObject(options)) {\n\t        msg = \"options is require an object.\";\n\t        throw Error(msg);\n\t      }\n\n\t      if (!Calibrator_1[\"default\"].isPrimitive(options.appkey) || options.appkey.length == 0) {\n\t        msg = \"Invalid options:'appkey' is empty.\";\n\t        throw Error(msg);\n\t      }\n\n\t      if (!Calibrator_1[\"default\"].isPrimitive(options.host) || options.host.length == 0) {\n\t        msg = \"Invalid options:'host' is empty.\";\n\t        throw Error(msg);\n\t      }\n\n\t      if (!Calibrator_1[\"default\"].isArray(options.modules)) {\n\t        msg = \"Invalid options: 'modules' must be nonempty array\";\n\t        throw Error(msg);\n\t      }\n\n\t      var supportModules = [ModuleTypes_1.ModuleTypes.IM, ModuleTypes_1.ModuleTypes.PUBSUB];\n\t      var modules = options.modules.map(function (moduleName) {\n\t        var name = moduleName.toUpperCase();\n\n\t        if (!supportModules.includes(name)) {\n\t          msg = \"Invalid options: module '\".concat(moduleName, \"' is not support\");\n\t          throw Error(msg);\n\t        }\n\n\t        return name;\n\t      });\n\t      options.modules = modules;\n\t    };\n\n\t    GoEasy.prototype.onClickNotification = function (clickHandler) {\n\t      GNS_1.GNS.instance.onClickNotification(clickHandler);\n\t    };\n\n\t    GoEasy.prototype.confirmUserId = function (options) {\n\t      if (this.options.modules.includes(ModuleTypes_1.ModuleTypes.IM) && (Calibrator_1[\"default\"].isEmpty(options.id) || !Calibrator_1[\"default\"].isStringOrNumber(options.id))) {\n\t        throw {\n\t          code: 400,\n\t          content: 'TypeError: id requires number or string.'\n\t        };\n\t      } else if (typeof options.id === 'string' && options.id.length > 60) {\n\t        //if use calibrator.isString() directly, options.id.length will be error\n\t        throw {\n\t          code: 400,\n\t          content: 'id over max length 60'\n\t        };\n\t      }\n\t    };\n\n\t    GoEasy.version = packageVersion;\n\t    GoEasy.IM_EVENT = im_api_events_1.ImApiEvents;\n\t    GoEasy.IM_SCENE = Scene;\n\t    GoEasy.MEDIA_TYPE = media_type_1.MediaType;\n\t    return GoEasy;\n\t  }();\n\n\t  exports[\"default\"] = GoEasy;\n\n\t  var CSTeam =\n\t  /** @class */\n\t  function () {\n\t    function CSTeam(id) {\n\t      this.id = id;\n\t    }\n\n\t    CSTeam.prototype.isOnline = function (options) {\n\t      cs_1.CS.team(this.id).isOnline(options);\n\t    };\n\n\t    CSTeam.prototype.online = function (options) {\n\t      cs_1.CS.team(this.id).online(options);\n\t    };\n\n\t    CSTeam.prototype.offline = function (options) {\n\t      cs_1.CS.team(this.id).offline(options);\n\t    };\n\n\t    CSTeam.prototype.customerStatus = function (options) {\n\t      cs_1.CS.team(this.id).customerStatus(options);\n\t    };\n\n\t    CSTeam.prototype.accept = function (options) {\n\t      cs_1.CS.team(this.id).accept(options);\n\t    };\n\n\t    CSTeam.prototype.end = function (options) {\n\t      cs_1.CS.team(this.id).end(options);\n\t    };\n\n\t    CSTeam.prototype.history = function (options) {\n\t      cs_1.CS.team(this.id).history(options);\n\t    };\n\n\t    CSTeam.prototype.markMessageAsRead = function (options) {\n\t      cs_1.CS.team(this.id).markMessageAsRead(options);\n\t    };\n\n\t    CSTeam.prototype.createTextMessage = function (options) {\n\t      cs_1.CS.team(this.id).createTextMessage(options);\n\t    };\n\n\t    CSTeam.prototype.createImageMessage = function (options) {\n\t      cs_1.CS.team(this.id).createImageMessage(options);\n\t    };\n\n\t    CSTeam.prototype.createFileMessage = function (options) {\n\t      cs_1.CS.team(this.id).createFileMessage(options);\n\t    };\n\n\t    CSTeam.prototype.createAudioMessage = function (options) {\n\t      cs_1.CS.team(this.id).createAudioMessage(options);\n\t    };\n\n\t    CSTeam.prototype.createVideoMessage = function (options) {\n\t      cs_1.CS.team(this.id).createVideoMessage(options);\n\t    };\n\n\t    CSTeam.prototype.createCustomMessage = function (options) {\n\t      cs_1.CS.team(this.id).createCustomMessage(options);\n\t    };\n\n\t    CSTeam.prototype.transfer = function (options) {\n\t      cs_1.CS.team(this.id).transfer(options);\n\t    };\n\n\t    CSTeam.prototype.agents = function (options) {\n\t      cs_1.CS.team(this.id).agents(options);\n\t    };\n\n\t    CSTeam.prototype.liveSession = function (options) {\n\t      cs_1.CS.team(this.id).liveSession(options);\n\t    };\n\n\t    CSTeam.prototype.quitLiveSession = function (options) {\n\t      cs_1.CS.team(this.id).quitLiveSession(options);\n\t    };\n\n\t    return CSTeam;\n\t  }();\n\n\t  exports.CSTeam = CSTeam;\n\t})(GoEasy$1);\n\n\tvar GoEasy = /*@__PURE__*/getDefaultExportFromCjs(GoEasy$1);\n\n\treturn GoEasy;\n\n}));\n"],"sourceRoot":""}