(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-99e35dbc"],{1801:function(t,e,s){"use strict";s("a282")},"1dee":function(t,e,s){t.exports=s.p+"img/default.f0e98eaa.png"},"303d":function(t,e,s){"use strict";function i(t){t=t||Date.now();let e=new Date(t),s=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1;return s+="-",s+=e.getDate()<10?"0"+e.getDate():e.getDate(),s+=" ",s+=e.getHours(),s+=":",s+=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),s}function a(t){t=t||Date.now();let e=new Date(t),s=e.getFullYear();return s+="-",s+=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,s+="-",s+=e.getDate()<10?"0"+e.getDate():e.getDate(),s+=" ",s+=e.getHours(),s+=":",s+=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),s+=":",s+=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds(),s}function o(t){const e=1e3,s=60*e,i=60*s,a=24*i,o=(new Date).getTime(),n=o-t,r=n/e,c=n/s,l=n/i,d=n/a;return d>=1?parseInt(d)+"天":l>=1?parseInt(l)+"小时":c>=1?parseInt(c)+"分钟":r>=1?parseInt(r)+"秒":"0秒"}function n(t){return t.replace(/^http:\/\//i,"https://")}s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return o})),s.d(e,"d",(function(){return n}))},5774:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABT1JREFUeF7tm1toHkUUx8/ZL2mJFBV88PKqL94VrKDJQzNz5lOUGBWD91os3lAktlg0EJqIoKI1iogXvKD1jqGCQok7y+dDfal3wYJgH3zQBx8qqAQC2T2yYb+w2e7ZbzfdZPcj3z7mm3Nm/r855+zM7ARhgz+4wfVDD0AvAjY4gV4KbPAAyFcEXde9sNFokO/7WxHxzHWC9iYRvbfWfXVMAc/zmsw8CwBb1nowcf+I+C8AnKu1/iOrX9d1L3Uc54IgCM5oNBpHN23a5A4NDYW2uZ5MAJ7n3c/Mr+TyVHKjPABc151CxEcB4KRY94eDIJhoNpteniGJAFqt1hbf938FgLMSjr7K47iENpkpEInfK/XDzDuNMW91GocIwPO8K5n567YDZp6en5/fNzo6mju8OnW+2t8F8T8DwEVxn0EQ3NhsNg9k9SMCcF13HBFnYsbnE9GR1Q66LLs08UEQbG82m/s9zxtj5k8SfWWOOwtAmF/LIUZEHQtmWSIlP2niHcfZpZRanqgUCH8CgJEmr2sApIkP09IYM5UElgLhTumV2hUAsgqeBMFa2wKAbSEcRHxca/10WmTVHkCnah+KSkJI2iDiPVrrN7oOgCB+LzM78foUzfKU1no6xWaemYeMMT90FQAh5yeNMU+GQqSaIIGRCmstU0Co9hNKqafiQjzPC6PhuCLYboOIk1rrJWBdAyBNPCI+prV+Jk1ERo2YIKIVwGqfAkJY7zHGPFtwbbBHKSXaxH3VJgWEcN5NRM8XEQ8AmTZJX7UAkCaemR8xxrxQUPw4Eb1YZEVaOYA08Yj4sNb6pYLiHyKil4uIX3p95u1kLfYCQthnChGK5ANa61eLiq8UgDDzmUIE8amrPGvtawBwLzPPGGN21eo1KMz8fUT0et6IjFZ/d2ut307aeJ53NjP/Fvv7xUQUnhcc96x7CggzL67VM1Z9dxlj3hXWBtsQMdwMLT3MPGyMST3JWlcAgvjUWWwPXlgV3q6U+iAjWuoHQAj7HUT0jiREsLmFiD7OKniu69YLgDDz27XW+wuKHyOiTztV+1oBEGbxDiJ6v6D4G4jos07io5pRjwgQNiq3EtFHRcQj4nVa68/ziK8NAKF43ayUSp7aLusSUuUarfXBvOJrAaDVap26uLj4DSKeEx84It6mtf4wTYwg/iqt9ZdFxNcCgOu61yLiF2kDdxxnp1JqxRebNPFBEFDez1vJfiovgtbaJwBgMhpYuABZOp1tP/HNjrATFBcueaKhDgDCsDXRKmzacZxfkl9sHMeZ8H1/c/IML2vVlkd85SkQ5r/v+78DwMnxZajw2WqFpjLEVw7AWns9ALQ/SB4jotPaKrMglCW+cgCe580w83g4EEQ8sLCwsKO/v/+KsA4gogKAy5OhXKb4ygFYa8MPEJdEIueiArhZyt+yxVcKIMr/v3MWqyPM/KC0Tc3pI7VZZW8Ba214QeEnYfDHEHEuvHThOM4hpZTU7kS0L9lWBiDs3Fp7GAC2RioOMfNco9FoKaWWb5ucsMIODioF0J6Bvr6+b4eHh/9ba7Fp/isHUIXoeJ89AHU7EVrviOhFQEkRUMtrcnmiyVq7GwCea7d1HOcypdR3abZdeVEyC4K19jwA2AcAV0ft/iGiUySbOl+VzTPZaW1WnD0AwCwR3VQYQGhQ5WXp1apP2g0MDJw+ODj416oARBAquS5fAoCjzDwm3Q5r+891/bWif5hYFQNE/NH3/e8XFhZmR0ZG5js5yQWgk5Nu/r0HoJtnr4yx9yKgDIrd7KMXAd08e2WM/X/ksvZuGrKk2AAAAABJRU5ErkJggg=="},a282:function(t,e,s){},c5b7:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAM6SURBVHhe7ZtLa+pAGIZHQRci0lXB6kJxIf0Xbf3fQkUQQTdaxZXdir14aVW8nnPe6Zc2xmQyqUk8yeQB+WZiSHxfv7lGY3/+wRQmTlFZIgMoKktkAEVlUd4AqWFwPp+z5XLJX26TTqfZ9fU11fzH1oDhcMien59ZLBZjbk8ZcM14PM7u7u7oiP8Im8Dn56dn4gGuud/vqXYZhAYg9YEX4jXy+TyVvKHf77NWq0W1U4RNQEt/gFS9v7/n5aDQbrfZbDbj5dvbW5bNZnlZj/QocDgcqBQMIH46nfLsxWswGNA7x4RyGOx2u1y8npubGyodEzoDIH48HlPtC/Qz5XKZaseEygCk/cvLCx+19FiJB6ExwNjmNexGmVAYoInXgywQpb5G4A2wEp/L5WzFg8Aa8Pb2xqrV6ol4fOsPDw9S4kFgDeh0OiczVJmUNxJIA5rN5snE7DfiQeAMQJvHIs3JUCfCEwOwhthut1RzD32H52SoE+GqAeiY6vU6X0Dhw7q5gWLW20N4pVL59bcPhAasVisqyYGl53q95uXFYsGnpU6vYYaV+HOEawgNwLTSCbvdjkpfoK2ea4KX4oHQAKdL4GKxSKUfPj4+WK/X+84MJ3gtHrjaBxQKBVYqlaj2AzYlnp6e2GazoSP2+CEeSBuAHSEZrEyAGJhgbCZm+CUeCFVdXV1RyVlzsDJhMpnwPkG0EeqneCBtgFOsTHh/f7c0wW/xwNU+wIiVCZgvoDnoJzOXEA88NQBYmfD6+spNAF6Jh9GPj4+sVqvRkVM8NwBYmYB5RqPR8Oybx8QMna5oWu6LAcDMBDQB43TZzbSXGXZ9MwBYZYKGH23eiK8GAJiABYzRiEuIB9IGGNff56LPhkuJB9IGGLef3EDLhkuJB743gf+NyACKyhIZQFFZIgMoKktkAEVliQygqCyRARSVJTKAoi1YswcNmYc5wt8Kj0Yj/lwPJBIJ4eZiMpnk0cnjL2yy2O0zQITooYzZfY3HcB/8bsgMoUWpVIpHXMDuBw94323xOMfuiZTZfY3HRPcRGpDJZPgTX7sPCmTO0ePWNc3OMR6DDiuk/jITZqJRgKKyRAZQVBbFDWDsLw3806OylxmwAAAAAElFTkSuQmCC"},ee3d:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contact"},[e("div",{staticClass:"contact-left"},[e("div",{staticClass:"contact-tab"},[t._v("客户列表")]),e("div",{staticClass:"contacts-search-box"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"请输入电话号码或昵称"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),e("span",{staticClass:"btn",on:{click:t.queryContacts}},[t._v("搜索")])]),e("div",{staticClass:"contact-list"},t._l(t.customers||[],(function(i,a){return e("div",{key:a,class:t.selectedCustomer&&t.selectedCustomer.openId===i.openId?"user-item checked":"user-item",on:{click:function(e){return t.showCustomer(i)}}},[t._v(" "+t._s(t.selectedCustomer&&t.selectedCustomer.id)+t._s(i&&i.id)+" "),e("div",{staticClass:"user-avatar"},[i.avatar?e("img",{attrs:{src:t.replaceWithHttps(i.avatar)}}):e("img",{attrs:{src:s("1dee")}})]),i.mark?e("div",{staticClass:"user-info"},[t._v(t._s(i.mark))]):e("div",{staticClass:"user-info"},[t._v(t._s(i.nickname))])])})),0)]),e("div",{staticClass:"contact-main"},[t.selectedCustomer?e("div",{staticClass:"profile-card"},[e("div",{staticClass:"card-title"},[e("div",{staticClass:"profile-avatar"},[t.selectedCustomer.avatar?e("img",{attrs:{src:t.replaceWithHttps(t.selectedCustomer.avatar)}}):e("img",{attrs:{src:s("1dee")}})]),e("div",{staticClass:"profile-right"},[e("div",{staticClass:"profile-name"},[e("i",{staticClass:"iconfont icon-zhanghu"}),e("div",[t._v(t._s(t.selectedCustomer.nickname))])]),e("div",{staticClass:"button-box"},[e("button",{staticClass:"card-button",on:{click:function(e){return t.chat(t.selectedCustomer.openId)}}},[t._v("发消息")])])])]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"info-item"},[e("div",{staticClass:"info-name"},[t._v("备注")]),e("div",{staticClass:"info-text"},[t.markEditor.visible?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.markEditor.content,expression:"markEditor.content"}],staticClass:"info-text-input",domProps:{value:t.markEditor.content},on:{input:function(e){e.target.composing||t.$set(t.markEditor,"content",e.target.value)}}}):e("div",{staticClass:"info-text-content"},[t._v(t._s(t.selectedCustomer.mark))])]),e("div",{staticClass:"info-edit"},[t.markEditor.visible?e("img",{attrs:{src:s("c5b7")},on:{click:t.saveMark}}):e("img",{attrs:{src:s("5774")},on:{click:t.showMarkEditor}})])]),e("div",{staticClass:"info-item"},[e("div",{staticClass:"info-name"},[t._v("应用名称")]),e("div",{staticClass:"info-text"},[t._v(" "+t._s(t.selectedCustomer.appName)+" ")])]),e("div",{staticClass:"info-item"},[e("div",{staticClass:"info-name"},[t._v("手 机")]),e("div",{staticClass:"info-text"},[t.mobileEditor.visible?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.mobileEditor.content,expression:"mobileEditor.content"}],staticClass:"info-text-input",domProps:{value:t.mobileEditor.content},on:{input:function(e){e.target.composing||t.$set(t.mobileEditor,"content",e.target.value)}}}):e("div",{staticClass:"info-text-content"},[t._v(t._s(t.selectedCustomer.mobileNumber))])]),e("div",{staticClass:"info-edit"},[t.mobileEditor.visible?e("img",{attrs:{src:s("c5b7")},on:{click:t.saveMobileNumber}}):e("img",{attrs:{src:s("5774")},on:{click:t.showMobileEditor}})])])])]):t._e()])])},a=[],o=s("303d"),n={name:"Contacts",data(){return{customers:[],selectedCustomer:null,search:"",mobileEditor:{visible:!1,content:""},markEditor:{visible:!1,content:""}}},mounted(){this.queryContacts()},methods:{replaceWithHttps:o["d"],showMobileEditor(){this.mobileEditor.content=this.selectedCustomer.mobileNumber,this.mobileEditor.visible=!0},saveMobileNumber(){let t={openId:this.selectedCustomer.openId,mobileNumber:this.mobileEditor.content};this.global.api.updateMobileNumber(t).then(t=>{this.mobileEditor.visible=!1,200===t.code?this.selectedCustomer.mobileNumber=this.mobileEditor.content:alert("保存失败,"+t.errorMessage)}).catch(t=>{console.log("save or update mobile number failed:",t)})},showMarkEditor(){this.markEditor.content=this.selectedCustomer.mark,this.markEditor.visible=!0},saveMark(){this.global.api.updateUserMark(this.selectedCustomer.openId,this.markEditor.content).then(t=>{this.markEditor.visible=!1,this.selectedCustomer.mark=this.markEditor.content}).catch(t=>{console.log("save or update mark failed:",t)})},queryContacts(){this.global.api.getContacts(this.search).then(t=>{this.customers=t.data.list}).catch(t=>{console.log()})},showCustomer(t){this.selectedCustomer=t,this.mobileEditor={visible:!1,content:""},this.markEditor={visible:!1,content:""}},chat(t){this.$router.push({path:"/agent/conversations/chat",query:{id:t}})}}},r=n,c=(s("1801"),s("2877")),l=Object(c["a"])(r,i,a,!1,null,"45cb80e6",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-99e35dbc.475e01fc.js.map