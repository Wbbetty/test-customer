{"version":3,"sources":["webpack:///./src/agent/images/default.png","webpack:///./src/agent/images/edit.png","webpack:///./src/agent/view/Customers.vue?d28d","webpack:///./src/agent/api/utils.js","webpack:///./src/agent/api/index.js","webpack:///./src/agent/api/api.js","webpack:///./src/agent/images/finish.png","webpack:///./src/agent/view/Customers.vue?edc2","webpack:///src/agent/view/Customers.vue","webpack:///./src/agent/view/Customers.vue?61d3","webpack:///./src/agent/view/Customers.vue"],"names":["module","exports","Utils","env","VUE_APP_ENV","accessToken","this","getCookie","refreshToken","token","expiresAtMillis","setCookie","name","value","console","log","document","cookie","escape","arr","reg","RegExp","match","unescape","checkAndRefreshToken","xhr","window","XMLHttpRequest","ActiveXObject","url","expiresAt","utils","currentTime","Date","getTime","getRefreshToken","open","setRequestHeader","send","onreadystatechange","readyState","status","result","JSON","parse","responseText","newToken","newRefreshToken","storeTokens","http","a","create","baseURL","timeout","interceptors","request","use","config","getAccessToken","headers","error","Promise","reject","response","data","center","agentBaseUrl","getOTP","method","getWorkerInfo","getContacts","search","updateUserMark","openId","mark","getContact","updateMobileNumber","params","mobileNumber","render","_vm","_c","_self","staticClass","_v","directives","rawName","expression","attrs","domProps","on","$event","target","composing","queryContacts","_l","customers","user","key","class","selectedCustomer","showCustomer","_s","id","avatar","nickname","mobileEditor","visible","$set","saveMobileNumber","showMobileEditor","markEditor","saveMark","showMarkEditor","appName","chat","_e","staticRenderFns","content","methods","then","res","catch","err","list","customer","customerId","$router","push","path","query","component"],"mappings":"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","file":"js/chunk-227fd1dc.ede1f7b7.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/default.f0e98eaa.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABT1JREFUeF7tm1toHkUUx8/ZL2mJFBV88PKqL94VrKDJQzNz5lOUGBWD91os3lAktlg0EJqIoKI1iogXvKD1jqGCQok7y+dDfal3wYJgH3zQBx8qqAQC2T2yYb+w2e7ZbzfdZPcj3z7mm3Nm/r855+zM7ARhgz+4wfVDD0AvAjY4gV4KbPAAyFcEXde9sNFokO/7WxHxzHWC9iYRvbfWfXVMAc/zmsw8CwBb1nowcf+I+C8AnKu1/iOrX9d1L3Uc54IgCM5oNBpHN23a5A4NDYW2uZ5MAJ7n3c/Mr+TyVHKjPABc151CxEcB4KRY94eDIJhoNpteniGJAFqt1hbf938FgLMSjr7K47iENpkpEInfK/XDzDuNMW91GocIwPO8K5n567YDZp6en5/fNzo6mju8OnW+2t8F8T8DwEVxn0EQ3NhsNg9k9SMCcF13HBFnYsbnE9GR1Q66LLs08UEQbG82m/s9zxtj5k8SfWWOOwtAmF/LIUZEHQtmWSIlP2niHcfZpZRanqgUCH8CgJEmr2sApIkP09IYM5UElgLhTumV2hUAsgqeBMFa2wKAbSEcRHxca/10WmTVHkCnah+KSkJI2iDiPVrrN7oOgCB+LzM78foUzfKU1no6xWaemYeMMT90FQAh5yeNMU+GQqSaIIGRCmstU0Co9hNKqafiQjzPC6PhuCLYboOIk1rrJWBdAyBNPCI+prV+Jk1ERo2YIKIVwGqfAkJY7zHGPFtwbbBHKSXaxH3VJgWEcN5NRM8XEQ8AmTZJX7UAkCaemR8xxrxQUPw4Eb1YZEVaOYA08Yj4sNb6pYLiHyKil4uIX3p95u1kLfYCQthnChGK5ANa61eLiq8UgDDzmUIE8amrPGvtawBwLzPPGGN21eo1KMz8fUT0et6IjFZ/d2ut307aeJ53NjP/Fvv7xUQUnhcc96x7CggzL67VM1Z9dxlj3hXWBtsQMdwMLT3MPGyMST3JWlcAgvjUWWwPXlgV3q6U+iAjWuoHQAj7HUT0jiREsLmFiD7OKniu69YLgDDz27XW+wuKHyOiTztV+1oBEGbxDiJ6v6D4G4jos07io5pRjwgQNiq3EtFHRcQj4nVa68/ziK8NAKF43ayUSp7aLusSUuUarfXBvOJrAaDVap26uLj4DSKeEx84It6mtf4wTYwg/iqt9ZdFxNcCgOu61yLiF2kDdxxnp1JqxRebNPFBEFDez1vJfiovgtbaJwBgMhpYuABZOp1tP/HNjrATFBcueaKhDgDCsDXRKmzacZxfkl9sHMeZ8H1/c/IML2vVlkd85SkQ5r/v+78DwMnxZajw2WqFpjLEVw7AWns9ALQ/SB4jotPaKrMglCW+cgCe580w83g4EEQ8sLCwsKO/v/+KsA4gogKAy5OhXKb4ygFYa8MPEJdEIueiArhZyt+yxVcKIMr/v3MWqyPM/KC0Tc3pI7VZZW8Ba214QeEnYfDHEHEuvHThOM4hpZTU7kS0L9lWBiDs3Fp7GAC2RioOMfNco9FoKaWWb5ucsMIODioF0J6Bvr6+b4eHh/9ba7Fp/isHUIXoeJ89AHU7EVrviOhFQEkRUMtrcnmiyVq7GwCea7d1HOcypdR3abZdeVEyC4K19jwA2AcAV0ft/iGiUySbOl+VzTPZaW1WnD0AwCwR3VQYQGhQ5WXp1apP2g0MDJw+ODj416oARBAquS5fAoCjzDwm3Q5r+891/bWif5hYFQNE/NH3/e8XFhZmR0ZG5js5yQWgk5Nu/r0HoJtnr4yx9yKgDIrd7KMXAd08e2WM/X/ksvZuGrKk2AAAAABJRU5ErkJggg==\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Customers.vue?vue&type=style&index=0&id=cd1e377a&prod&lang=scss&scoped=true&\"","class Utils {\n\n    getAccessToken() {\n        let env = process.env.VUE_APP_ENV;\n        let accessToken = this.getCookie(`goeasy.token.${env}`);\n        return accessToken;\n    }\n\n    getRefreshToken() {\n        let env = process.env.VUE_APP_ENV;\n        let refreshToken = this.getCookie(`goeasy.refreshToken.${env}`);\n        return refreshToken;\n    }\n\n    storeTokens(token, refreshToken, expiresAtMillis) {\n        let env = process.env.VUE_APP_ENV;\n        this.setCookie(`goeasy.token.${env}`, token);\n        this.setCookie(`goeasy.refreshToken.${env}`, refreshToken);\n        this.setCookie(`goeasy.token.expiresAtMillis.${env}`, expiresAtMillis + \"\");\n    }\n\n    setCookie(name, value) {\n        console.log(\"will set \" + name + \"with value: \" + value);\n        document.cookie = name + \"=\" + escape(value) + \";domain=goeasy.io\";\n    }\n\n\n    getCookie(name) {\n        let arr, reg = new RegExp(\"(^| )\" + name + \"=([^;]*)(;|$)\");\n        if (arr = document.cookie.match(reg)) {\n            return unescape(arr[2]);\n        }\n        return null;\n    }\n}\n\nexport default new Utils();\n\n","import utils from \"./utils\";\nimport axios from 'axios';\n\nconst env = process.env.VUE_APP_ENV;\n\nfunction checkAndRefreshToken() {\n    let xhr;\n    if (window.XMLHttpRequest) {\n        xhr = new XMLHttpRequest();\n    } else {\n        xhr = new ActiveXObject(\"Microsoft.XMLHttp\")\n    }\n    let url = `https://${env}sso.goeasy.io`;\n    let expiresAt = utils.getCookie(`goeasy.token.expiresAtMillis.${env}`);\n    let currentTime = new Date().getTime();\n    if (xhr && expiresAt - currentTime < 3600 * 1000) {//less than 1 hour\n        let refreshToken = utils.getRefreshToken();\n        xhr.open(\"post\", url + \"/refreshtoken\", true);\n        xhr.setRequestHeader('content-type', 'application/x-www-form-urlencoded');\n        xhr.send(\"refreshToken=\" + refreshToken);\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState === 4) {\n                if (xhr.status === 200) {\n                    let result = JSON.parse(xhr.responseText);\n                    let newToken = result.token;\n                    let newRefreshToken = result.refreshToken;\n                    let expiresAtMillis = result.expiresAtMillis;\n                    utils.storeTokens(newToken, newRefreshToken, expiresAtMillis);\n                } else {\n                    // console.log(\"xxxx error: \", xhr.status)\n                }\n            } else {\n                // console.log(xhr.status);\n            }\n        }\n    }\n}\n\nconst http = axios.create({\n    baseURL: '',\n    timeout: 60000\n});\n\n// 请求拦截器\nhttp.interceptors.request.use((config) => {\n    checkAndRefreshToken();\n    const token = utils.getAccessToken();\n    if (token) {\n        config.headers['Authorization'] = \"Bearer \" + token\n    }\n    return config;\n}, (error) => {\n    return Promise.reject(error);\n});\n\n// 响应拦截器\nhttp.interceptors.response.use((response) => {\n    return response.data;\n}, (error) => {\n    return Promise.reject(error);\n});\n\nexport default http;\n","import http from \"./index\";\n\nlet env = process.env.VUE_APP_ENV;\nconst center = `https://${env}center.goeasy.io/api/v1`;\nconst agentBaseUrl = `https://${env}center.goeasy.io/api/v2/cs-agent`;\n\nexport function getOTP() {\n    let url =`${agentBaseUrl}/otp`;\n    return http({\n        url: url,\n        method: \"POST\"\n    })\n}\n\nexport function getWorkerInfo() {\n    let url = `${center}/admin/currentuser`;\n    return http({\n        url: url,\n        method: 'GET'\n    })\n}\n\nexport function getContacts(search) {\n    let url = `${agentBaseUrl}/contacts`;\n    return http({\n        url: url,\n        data: {\n            search: search\n        },\n        method: 'POST'\n    })\n}\n\nexport function updateUserMark(openId, mark) {\n    let url = `${agentBaseUrl}/contacts/${openId}/mark`;\n    return http({\n        url: url,\n        data: {\n            mark: mark\n        },\n        method: 'POST'\n    })\n}\n\nexport function getContact(openId) {\n    let url = `${agentBaseUrl}/contacts/${openId}`;\n    return http({\n        url: url,\n        method: 'GET'\n    })\n}\n\nexport function updateMobileNumber(params) {\n    let url = `${agentBaseUrl}/contacts/${params.openId}/mobile-number`;\n    return http({\n        url: url,\n        data: {\n            mobileNumber: params.mobileNumber\n        },\n        method: 'POST'\n    })\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAM6SURBVHhe7ZtLa+pAGIZHQRci0lXB6kJxIf0Xbf3fQkUQQTdaxZXdir14aVW8nnPe6Zc2xmQyqUk8yeQB+WZiSHxfv7lGY3/+wRQmTlFZIgMoKktkAEVlUd4AqWFwPp+z5XLJX26TTqfZ9fU11fzH1oDhcMien59ZLBZjbk8ZcM14PM7u7u7oiP8Im8Dn56dn4gGuud/vqXYZhAYg9YEX4jXy+TyVvKHf77NWq0W1U4RNQEt/gFS9v7/n5aDQbrfZbDbj5dvbW5bNZnlZj/QocDgcqBQMIH46nfLsxWswGNA7x4RyGOx2u1y8npubGyodEzoDIH48HlPtC/Qz5XKZaseEygCk/cvLCx+19FiJB6ExwNjmNexGmVAYoInXgywQpb5G4A2wEp/L5WzFg8Aa8Pb2xqrV6ol4fOsPDw9S4kFgDeh0OiczVJmUNxJIA5rN5snE7DfiQeAMQJvHIs3JUCfCEwOwhthut1RzD32H52SoE+GqAeiY6vU6X0Dhw7q5gWLW20N4pVL59bcPhAasVisqyYGl53q95uXFYsGnpU6vYYaV+HOEawgNwLTSCbvdjkpfoK2ea4KX4oHQAKdL4GKxSKUfPj4+WK/X+84MJ3gtHrjaBxQKBVYqlaj2AzYlnp6e2GazoSP2+CEeSBuAHSEZrEyAGJhgbCZm+CUeCFVdXV1RyVlzsDJhMpnwPkG0EeqneCBtgFOsTHh/f7c0wW/xwNU+wIiVCZgvoDnoJzOXEA88NQBYmfD6+spNAF6Jh9GPj4+sVqvRkVM8NwBYmYB5RqPR8Oybx8QMna5oWu6LAcDMBDQB43TZzbSXGXZ9MwBYZYKGH23eiK8GAJiABYzRiEuIB9IGGNff56LPhkuJB9IGGLef3EDLhkuJB743gf+NyACKyhIZQFFZIgMoKktkAEVliQygqCyRARSVJTKAoi1YswcNmYc5wt8Kj0Yj/lwPJBIJ4eZiMpnk0cnjL2yy2O0zQITooYzZfY3HcB/8bsgMoUWpVIpHXMDuBw94323xOMfuiZTZfY3HRPcRGpDJZPgTX7sPCmTO0ePWNc3OMR6DDiuk/jITZqJRgKKyRAZQVBbFDWDsLw3806OylxmwAAAAAElFTkSuQmCC\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"contact\"},[_c('div',{staticClass:\"contact-left\"},[_c('div',{staticClass:\"contact-tab\"},[_vm._v(\"客户列表\")]),_c('div',{staticClass:\"contacts-search-box\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.search),expression:\"search\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入电话号码或昵称\"},domProps:{\"value\":(_vm.search)},on:{\"input\":function($event){if($event.target.composing)return;_vm.search=$event.target.value}}}),_c('span',{staticClass:\"btn\",on:{\"click\":_vm.queryContacts}},[_vm._v(\"搜索\")])]),_c('div',{staticClass:\"contact-list\"},_vm._l((_vm.customers || []),function(user,key){return _c('div',{key:key,class:_vm.selectedCustomer && _vm.selectedCustomer.openId === user.openId ?'user-item checked' : 'user-item',on:{\"click\":function($event){return _vm.showCustomer(user)}}},[_vm._v(\" \"+_vm._s(_vm.selectedCustomer && _vm.selectedCustomer.id)+_vm._s(user && user.id)+\" \"),_c('div',{staticClass:\"user-avatar\"},[(user.avatar)?_c('img',{attrs:{\"src\":user.avatar}}):_c('img',{attrs:{\"src\":require(\"../images/default.png\")}})]),(user.mark)?_c('div',{staticClass:\"user-info\"},[_vm._v(_vm._s(user.mark))]):_c('div',{staticClass:\"user-info\"},[_vm._v(_vm._s(user.nickname))])])}),0)]),_c('div',{staticClass:\"contact-main\"},[(_vm.selectedCustomer)?_c('div',{staticClass:\"profile-card\"},[_c('div',{staticClass:\"card-title\"},[_c('div',{staticClass:\"profile-name\"},[_c('i',{staticClass:\"iconfont icon-zhanghu\"}),_c('div',[_vm._v(_vm._s(_vm.selectedCustomer.nickname))])]),_c('div',{staticClass:\"profile-avatar\"},[(_vm.selectedCustomer.avatar)?_c('img',{attrs:{\"src\":_vm.selectedCustomer.avatar}}):_c('img',{attrs:{\"src\":require(\"../images/default.png\")}})])]),_c('div',{staticClass:\"info-item\"},[_c('div',{staticClass:\"info-name\"},[_vm._v(\"手 机\")]),_c('div',{staticClass:\"info-text\"},[(!_vm.mobileEditor.visible)?_c('div',[_vm._v(_vm._s(_vm.selectedCustomer.mobileNumber))]):_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.mobileEditor.content),expression:\"mobileEditor.content\"}],domProps:{\"value\":(_vm.mobileEditor.content)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.mobileEditor, \"content\", $event.target.value)}}})]),_c('div',{staticClass:\"info-edit\"},[(!_vm.mobileEditor.visible)?_c('img',{attrs:{\"src\":require(\"../images/edit.png\")},on:{\"click\":_vm.showMobileEditor}}):_c('img',{attrs:{\"src\":require(\"../images/finish.png\")},on:{\"click\":_vm.saveMobileNumber}})])]),_c('div',{staticClass:\"info-item\"},[_c('div',{staticClass:\"info-name\"},[_vm._v(\"mark\")]),_c('div',{staticClass:\"info-text\"},[(!_vm.markEditor.visible)?_c('div',[_vm._v(_vm._s(_vm.selectedCustomer.mark || _vm.selectedCustomer.nickname))]):_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.markEditor.content),expression:\"markEditor.content\"}],domProps:{\"value\":(_vm.markEditor.content)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.markEditor, \"content\", $event.target.value)}}})]),_c('div',{staticClass:\"info-edit\"},[(!_vm.markEditor.visible)?_c('img',{attrs:{\"src\":require(\"../images/edit.png\")},on:{\"click\":_vm.showMarkEditor}}):_c('img',{attrs:{\"src\":require(\"../images/finish.png\")},on:{\"click\":_vm.saveMark}})])]),_c('div',{staticClass:\"info-item\"},[_c('div',{staticClass:\"info-name\"},[_vm._v(\"应用名称\")]),_c('div',{staticClass:\"info-text\"},[_vm._v(\" \"+_vm._s(_vm.selectedCustomer.appName)+\" \")])]),_c('div',{staticClass:\"button-box\"},[_c('button',{staticClass:\"card-button\",on:{\"click\":function($event){return _vm.chat(_vm.selectedCustomer.openId)}}},[_vm._v(\"发消息\")])])]):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"contact\">\n    <div class=\"contact-left\">\n      <div class=\"contact-tab\">客户列表</div>\n      <div class=\"contacts-search-box\">\n        <input v-model=\"search\" type=\"text\" placeholder=\"请输入电话号码或昵称\">\n        <span class=\"btn\" @click=\"queryContacts\">搜索</span>\n      </div>\n      <div class=\"contact-list\">\n        <div\n          v-for=\"(user, key) in customers || []\"\n          :key=\"key\"\n          :class=\"selectedCustomer && selectedCustomer.openId === user.openId ?'user-item checked' : 'user-item'\"\n          @click=\"showCustomer(user)\"\n        >\n          {{selectedCustomer && selectedCustomer.id}}{{user && user.id}}\n          <div class=\"user-avatar\">\n            <img v-if=\"user.avatar\" :src=\"user.avatar\"/>\n            <img v-else src=\"../images/default.png\"/>\n          </div>\n          <div class=\"user-info\" v-if=\"user.mark\">{{ user.mark }}</div>\n          <div class=\"user-info\" v-else>{{ user.nickname }}</div>\n        </div>\n      </div>\n    </div>\n    <div class=\"contact-main\">\n      <div class=\"profile-card\" v-if=\"selectedCustomer\">\n        <div class=\"card-title\">\n          <div class=\"profile-name\">\n            <i class=\"iconfont icon-zhanghu\"></i>\n            <div>{{ selectedCustomer.nickname }}</div>\n          </div>\n          <div class=\"profile-avatar\">\n            <img v-if=\"selectedCustomer.avatar\" :src=\"selectedCustomer.avatar\"/>\n            <img v-else src=\"../images/default.png\"/>\n          </div>\n        </div>\n        <div class=\"info-item\">\n          <div class=\"info-name\">手 机</div>\n          <div class=\"info-text\">\n            <div v-if=\"!mobileEditor.visible\">{{ selectedCustomer.mobileNumber }}</div>\n            <input v-else v-model=\"mobileEditor.content\" />\n          </div>\n          <div class=\"info-edit\">\n            <img v-if=\"!mobileEditor.visible\" @click=\"showMobileEditor\" src=\"../images/edit.png\" />\n            <img v-else @click=\"saveMobileNumber\" src=\"../images/finish.png\" />\n          </div>\n        </div>\n        <div class=\"info-item\">\n          <div class=\"info-name\">mark</div>\n          <div class=\"info-text\">\n            <div v-if=\"!markEditor.visible\">{{ selectedCustomer.mark || selectedCustomer.nickname }}</div>\n            <input v-else v-model=\"markEditor.content\" />\n          </div>\n          <div class=\"info-edit\">\n            <img v-if=\"!markEditor.visible\" @click=\"showMarkEditor\" src=\"../images/edit.png\" />\n            <img v-else @click=\"saveMark\" src=\"../images/finish.png\" />\n          </div>\n        </div>\n        <div class=\"info-item\">\n          <div class=\"info-name\">应用名称</div>\n          <div class=\"info-text\">\n            {{ selectedCustomer.appName }}\n          </div>\n        </div>\n        <div class=\"button-box\">\n          <button class=\"card-button\" @click=\"chat(selectedCustomer.openId)\">发消息</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import {getContacts, updateMobileNumber, updateUserMark} from \"../api/api\";\n\n  export default {\n    name: \"Contacts\",\n    data() {\n      return {\n        customers: [],\n        selectedCustomer: null,\n        search: \"\",\n        mobileEditor: {\n          visible: false,\n          content: ''\n        },\n        markEditor: {\n          visible: false,\n          content: ''\n        }\n      };\n    },\n    mounted() {\n      this.queryContacts();\n    },\n    methods: {\n      showMobileEditor () {\n        this.mobileEditor.content = this.selectedCustomer.mobileNumber;\n        this.mobileEditor.visible = true;\n      },\n      saveMobileNumber () {\n        let params = {\n          openId: this.selectedCustomer.openId,\n          mobileNumber: this.mobileEditor.content\n        }\n        updateMobileNumber(params).then((res) => {\n          this.mobileEditor.visible = false;\n          this.selectedCustomer.mobileNumber = this.mobileEditor.content;\n        }).catch((err) => {\n          console.log(\"save or update mobile number failed:\", err);\n        });\n      },\n      showMarkEditor () {\n        this.markEditor.content = this.selectedCustomer.mark;\n        this.markEditor.visible = true;\n      },\n      saveMark () {\n        updateUserMark(this.selectedCustomer.openId, this.markEditor.content).then((res) => {\n          this.markEditor.visible = false;\n          this.selectedCustomer.mark = this.markEditor.content;\n        }).catch((err) => {\n          console.log(\"save or update mark failed:\", err);\n        });\n      },\n      queryContacts() {\n        getContacts(this.search).then((res) => {\n          this.customers = res.data.list;\n        }).catch((err) => {\n          console.log();\n        });\n      },\n      showCustomer(customer) {\n        this.selectedCustomer = customer;\n        this.mobileEditor = {\n          visible: false,\n          content: ''\n        },\n        this.markEditor = {\n          visible: false,\n          content: ''\n        }\n      },\n      chat(customerId) {\n        this.$router.push({\n          path: '/agent/conversations/chat',\n          query: {\n            id: customerId,\n          }\n        });\n      },\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n  .contact {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    background: #F7F7F7;\n\n    .contact-left {\n      width: 260px;\n      height: 100%;\n      padding: 10px 9px 10px 10px;\n      border-right: #dbd6d6 1px solid;\n      display: flex;\n      flex-direction: column;\n\n      .contacts-search-box {\n        display: flex;\n        align-items: center;\n        padding: 10px 0;\n\n        input {\n          outline: none;\n          border: none;\n          height: 36px;\n          padding-left: 12px;\n          border-radius: 4px;\n          border: 1px solid #D8DCE6;\n          box-sizing: border-box;\n          background: #FFFFFF;\n        }\n\n        .btn {\n          display: inline-block;\n          margin-left: 10px;\n          padding: 10px;\n          border-radius: 4px;\n          line-height: 14px;\n          font-weight: normal;\n          font-size: 14px;\n          cursor: pointer;\n          color: #FFFFFF;\n          background: #D02129;\n        }\n      }\n\n      .contact-title {\n        padding: 20px;\n        margin-bottom: 15px;\n\n        .input {\n          background-color: #fff;\n          border-radius: 4px;\n          border: 1px solid #dcdfe6;\n          padding: 0 15px;\n          height: 32px;\n        }\n\n      }\n\n      .contact-tab {\n        padding: 20px;\n        margin-bottom: 20px;\n        font-size: 18px;\n        border-bottom: 1px solid #eeeeee;\n      }\n\n      .contact-list {\n        display: flex;\n        flex-direction: column;\n        overflow-y: auto;\n        height: 440px;\n\n        scrollbar-width: none;\n        -ms-overflow-style: none;\n\n        &::-webkit-scrollbar {\n          display: none;\n        }\n      }\n\n      .user-item {\n        display: flex;\n        padding: 5px 10px;\n        cursor: pointer;\n\n        .user-avatar {\n          width: 45px;\n\n          img {\n            width: 45px;\n            height: 45px;\n            border-radius: 10%;\n          }\n\n        }\n\n        .user-info {\n          display: flex;\n          align-items: center;\n          text-align: left;\n          padding-left: 10px;\n          font-size: 15px;\n        }\n\n      }\n\n      .checked {\n        background: #FFFFFF;\n        border-radius: 10px;\n        box-shadow: 0 1px 6px 0 rgba(0, 0, 0, 0.1);\n      }\n\n      .group-items {\n        display: flex;\n        padding: 5px 10px;\n\n        .group-avatar {\n          width: 50px;\n          height: 50px;\n          margin-left: 10px;\n          overflow: hidden;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          align-content: center;\n          flex-wrap: wrap-reverse;\n        }\n\n        .avatarItem--1 > img {\n          width: 98%;\n          height: 98%;\n        }\n\n        .avatarItem--2 > img {\n          width: 47%;\n          height: 47%;\n          margin: 1%;\n        }\n\n        .avatarItem--3 > img {\n          width: 31%;\n          height: 30%;\n          margin: 1%;\n        }\n\n        .group {\n          width: 65%;\n          margin-left: 10px;\n\n          .group-name {\n            width: 180px;\n            text-align: left;\n            font-size: 15px;\n            line-height: 40px;\n          }\n\n        }\n      }\n    }\n\n    .contact-main {\n      flex: 1;\n      background: #FFFFFF;\n    }\n\n  }\n\n  .profile-card {\n    padding: 20px 0;\n\n    .card-title {\n      padding: 60px;\n      border-bottom: 1px solid #eeeeee;\n      display: flex;\n      justify-content: space-around;\n\n      .profile-name {\n        width: 300px;\n        font-size: 18px;\n        display: flex;\n        align-items: center;\n\n        .icon-zhanghu {\n          font-size: 26px;\n          color: #eeeeee;\n          margin-right: 10px;\n        }\n\n      }\n\n      .profile-avatar {\n        width: 80px;\n\n        img {\n          width: 80px;\n          height: 80px;\n          border-radius: 10%;\n        }\n\n      }\n    }\n\n    .info-item {\n      padding: 10px 60px;\n      display: flex;\n      align-items: center;\n      text-align: left;\n      font-size: 14px;\n      line-height: 45px;\n\n      .info-name {\n        width: 100px;\n      }\n\n      .info-text {\n        min-width: 200px;\n        max-width: 240px;\n        overflow: auto;\n        margin-right: 10px;\n        input {\n          min-width: 200px;\n          max-width: 240px;\n          height: 24px;\n        }\n      }\n\n      .info-edit {\n        width: 25px;\n        height: 25px;\n        img {\n          width: 25px;\n          height: 25px;\n        }\n      }\n\n    }\n  }\n\n  .button-box {\n    padding: 40px 0;\n\n    .card-button {\n      background: #eeeeee;\n      color: #000000;\n      font-size: 14px;\n      border: none;\n      display: flex;\n      width: 120px;\n      height: 35px;\n      cursor: pointer;\n      border-radius: 5px;\n      margin: 0 auto;\n      align-items: center;\n      justify-content: center;\n    }\n\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Customers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Customers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Customers.vue?vue&type=template&id=cd1e377a&scoped=true&\"\nimport script from \"./Customers.vue?vue&type=script&lang=js&\"\nexport * from \"./Customers.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Customers.vue?vue&type=style&index=0&id=cd1e377a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cd1e377a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}