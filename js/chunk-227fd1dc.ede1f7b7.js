(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-227fd1dc"],{"13cb":function(e,t,s){},"1dee":function(e,t,s){e.exports=s.p+"img/default.f0e98eaa.png"},5774:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABT1JREFUeF7tm1toHkUUx8/ZL2mJFBV88PKqL94VrKDJQzNz5lOUGBWD91os3lAktlg0EJqIoKI1iogXvKD1jqGCQok7y+dDfal3wYJgH3zQBx8qqAQC2T2yYb+w2e7ZbzfdZPcj3z7mm3Nm/r855+zM7ARhgz+4wfVDD0AvAjY4gV4KbPAAyFcEXde9sNFokO/7WxHxzHWC9iYRvbfWfXVMAc/zmsw8CwBb1nowcf+I+C8AnKu1/iOrX9d1L3Uc54IgCM5oNBpHN23a5A4NDYW2uZ5MAJ7n3c/Mr+TyVHKjPABc151CxEcB4KRY94eDIJhoNpteniGJAFqt1hbf938FgLMSjr7K47iENpkpEInfK/XDzDuNMW91GocIwPO8K5n567YDZp6en5/fNzo6mju8OnW+2t8F8T8DwEVxn0EQ3NhsNg9k9SMCcF13HBFnYsbnE9GR1Q66LLs08UEQbG82m/s9zxtj5k8SfWWOOwtAmF/LIUZEHQtmWSIlP2niHcfZpZRanqgUCH8CgJEmr2sApIkP09IYM5UElgLhTumV2hUAsgqeBMFa2wKAbSEcRHxca/10WmTVHkCnah+KSkJI2iDiPVrrN7oOgCB+LzM78foUzfKU1no6xWaemYeMMT90FQAh5yeNMU+GQqSaIIGRCmstU0Co9hNKqafiQjzPC6PhuCLYboOIk1rrJWBdAyBNPCI+prV+Jk1ERo2YIKIVwGqfAkJY7zHGPFtwbbBHKSXaxH3VJgWEcN5NRM8XEQ8AmTZJX7UAkCaemR8xxrxQUPw4Eb1YZEVaOYA08Yj4sNb6pYLiHyKil4uIX3p95u1kLfYCQthnChGK5ANa61eLiq8UgDDzmUIE8amrPGvtawBwLzPPGGN21eo1KMz8fUT0et6IjFZ/d2ut307aeJ53NjP/Fvv7xUQUnhcc96x7CggzL67VM1Z9dxlj3hXWBtsQMdwMLT3MPGyMST3JWlcAgvjUWWwPXlgV3q6U+iAjWuoHQAj7HUT0jiREsLmFiD7OKniu69YLgDDz27XW+wuKHyOiTztV+1oBEGbxDiJ6v6D4G4jos07io5pRjwgQNiq3EtFHRcQj4nVa68/ziK8NAKF43ayUSp7aLusSUuUarfXBvOJrAaDVap26uLj4DSKeEx84It6mtf4wTYwg/iqt9ZdFxNcCgOu61yLiF2kDdxxnp1JqxRebNPFBEFDez1vJfiovgtbaJwBgMhpYuABZOp1tP/HNjrATFBcueaKhDgDCsDXRKmzacZxfkl9sHMeZ8H1/c/IML2vVlkd85SkQ5r/v+78DwMnxZajw2WqFpjLEVw7AWns9ALQ/SB4jotPaKrMglCW+cgCe580w83g4EEQ8sLCwsKO/v/+KsA4gogKAy5OhXKb4ygFYa8MPEJdEIueiArhZyt+yxVcKIMr/v3MWqyPM/KC0Tc3pI7VZZW8Ba214QeEnYfDHEHEuvHThOM4hpZTU7kS0L9lWBiDs3Fp7GAC2RioOMfNco9FoKaWWb5ucsMIODioF0J6Bvr6+b4eHh/9ba7Fp/isHUIXoeJ89AHU7EVrviOhFQEkRUMtrcnmiyVq7GwCea7d1HOcypdR3abZdeVEyC4K19jwA2AcAV0ft/iGiUySbOl+VzTPZaW1WnD0AwCwR3VQYQGhQ5WXp1apP2g0MDJw+ODj416oARBAquS5fAoCjzDwm3Q5r+891/bWif5hYFQNE/NH3/e8XFhZmR0ZG5js5yQWgk5Nu/r0HoJtnr4yx9yKgDIrd7KMXAd08e2WM/X/ksvZuGrKk2AAAAABJRU5ErkJggg=="},"66b5":function(e,t,s){"use strict";s("13cb")},"6e4d":function(e,t,s){"use strict";s.d(t,"c",(function(){return h})),s.d(t,"d",(function(){return v})),s.d(t,"b",(function(){return E})),s.d(t,"f",(function(){return b})),s.d(t,"a",(function(){return C})),s.d(t,"e",(function(){return f}));class o{getAccessToken(){let e=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_ENV,t=this.getCookie("goeasy.token."+e);return t}getRefreshToken(){let e=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_ENV,t=this.getCookie("goeasy.refreshToken."+e);return t}storeTokens(e,t,s){let o=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_ENV;this.setCookie("goeasy.token."+o,e),this.setCookie("goeasy.refreshToken."+o,t),this.setCookie("goeasy.token.expiresAtMillis."+o,s+"")}setCookie(e,t){console.log("will set "+e+"with value: "+t),document.cookie=e+"="+escape(t)+";domain=goeasy.io"}getCookie(e){let t,s=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(s))?unescape(t[2]):null}}var i=new o,n=s("bc3a"),a=s.n(n);const r=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_ENV;function c(){let e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHttp");let t=`https://${r}sso.goeasy.io`,s=i.getCookie("goeasy.token.expiresAtMillis."+r),o=(new Date).getTime();if(e&&s-o<36e5){let s=i.getRefreshToken();e.open("post",t+"/refreshtoken",!0),e.setRequestHeader("content-type","application/x-www-form-urlencoded"),e.send("refreshToken="+s),e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){let t=JSON.parse(e.responseText),s=t.token,o=t.refreshToken,n=t.expiresAtMillis;i.storeTokens(s,o,n)}}}}const l=a.a.create({baseURL:"",timeout:6e4});l.interceptors.request.use(e=>{c();const t=i.getAccessToken();return t&&(e.headers["Authorization"]="Bearer "+t),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e.data,e=>Promise.reject(e));var u=l;let d=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_ENV;const m=`https://${d}center.goeasy.io/api/v1`,A=`https://${d}center.goeasy.io/api/v2/cs-agent`;function h(){let e=A+"/otp";return u({url:e,method:"POST"})}function v(){let e=m+"/admin/currentuser";return u({url:e,method:"GET"})}function E(e){let t=A+"/contacts";return u({url:t,data:{search:e},method:"POST"})}function b(e,t){let s=`${A}/contacts/${e}/mark`;return u({url:s,data:{mark:t},method:"POST"})}function C(e){let t=`${A}/contacts/${e}`;return u({url:t,method:"GET"})}function f(e){let t=`${A}/contacts/${e.openId}/mobile-number`;return u({url:t,data:{mobileNumber:e.mobileNumber},method:"POST"})}},c5b7:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAM6SURBVHhe7ZtLa+pAGIZHQRci0lXB6kJxIf0Xbf3fQkUQQTdaxZXdir14aVW8nnPe6Zc2xmQyqUk8yeQB+WZiSHxfv7lGY3/+wRQmTlFZIgMoKktkAEVlUd4AqWFwPp+z5XLJX26TTqfZ9fU11fzH1oDhcMien59ZLBZjbk8ZcM14PM7u7u7oiP8Im8Dn56dn4gGuud/vqXYZhAYg9YEX4jXy+TyVvKHf77NWq0W1U4RNQEt/gFS9v7/n5aDQbrfZbDbj5dvbW5bNZnlZj/QocDgcqBQMIH46nfLsxWswGNA7x4RyGOx2u1y8npubGyodEzoDIH48HlPtC/Qz5XKZaseEygCk/cvLCx+19FiJB6ExwNjmNexGmVAYoInXgywQpb5G4A2wEp/L5WzFg8Aa8Pb2xqrV6ol4fOsPDw9S4kFgDeh0OiczVJmUNxJIA5rN5snE7DfiQeAMQJvHIs3JUCfCEwOwhthut1RzD32H52SoE+GqAeiY6vU6X0Dhw7q5gWLW20N4pVL59bcPhAasVisqyYGl53q95uXFYsGnpU6vYYaV+HOEawgNwLTSCbvdjkpfoK2ea4KX4oHQAKdL4GKxSKUfPj4+WK/X+84MJ3gtHrjaBxQKBVYqlaj2AzYlnp6e2GazoSP2+CEeSBuAHSEZrEyAGJhgbCZm+CUeCFVdXV1RyVlzsDJhMpnwPkG0EeqneCBtgFOsTHh/f7c0wW/xwNU+wIiVCZgvoDnoJzOXEA88NQBYmfD6+spNAF6Jh9GPj4+sVqvRkVM8NwBYmYB5RqPR8Oybx8QMna5oWu6LAcDMBDQB43TZzbSXGXZ9MwBYZYKGH23eiK8GAJiABYzRiEuIB9IGGNff56LPhkuJB9IGGLef3EDLhkuJB743gf+NyACKyhIZQFFZIgMoKktkAEVliQygqCyRARSVJTKAoi1YswcNmYc5wt8Kj0Yj/lwPJBIJ4eZiMpnk0cnjL2yy2O0zQITooYzZfY3HcB/8bsgMoUWpVIpHXMDuBw94323xOMfuiZTZfY3HRPcRGpDJZPgTX7sPCmTO0ePWNc3OMR6DDiuk/jITZqJRgKKyRAZQVBbFDWDsLw3806OylxmwAAAAAElFTkSuQmCC"},ee3d:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"contact"},[t("div",{staticClass:"contact-left"},[t("div",{staticClass:"contact-tab"},[e._v("客户列表")]),t("div",{staticClass:"contacts-search-box"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"text",placeholder:"请输入电话号码或昵称"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),t("span",{staticClass:"btn",on:{click:e.queryContacts}},[e._v("搜索")])]),t("div",{staticClass:"contact-list"},e._l(e.customers||[],(function(o,i){return t("div",{key:i,class:e.selectedCustomer&&e.selectedCustomer.openId===o.openId?"user-item checked":"user-item",on:{click:function(t){return e.showCustomer(o)}}},[e._v(" "+e._s(e.selectedCustomer&&e.selectedCustomer.id)+e._s(o&&o.id)+" "),t("div",{staticClass:"user-avatar"},[o.avatar?t("img",{attrs:{src:o.avatar}}):t("img",{attrs:{src:s("1dee")}})]),o.mark?t("div",{staticClass:"user-info"},[e._v(e._s(o.mark))]):t("div",{staticClass:"user-info"},[e._v(e._s(o.nickname))])])})),0)]),t("div",{staticClass:"contact-main"},[e.selectedCustomer?t("div",{staticClass:"profile-card"},[t("div",{staticClass:"card-title"},[t("div",{staticClass:"profile-name"},[t("i",{staticClass:"iconfont icon-zhanghu"}),t("div",[e._v(e._s(e.selectedCustomer.nickname))])]),t("div",{staticClass:"profile-avatar"},[e.selectedCustomer.avatar?t("img",{attrs:{src:e.selectedCustomer.avatar}}):t("img",{attrs:{src:s("1dee")}})])]),t("div",{staticClass:"info-item"},[t("div",{staticClass:"info-name"},[e._v("手 机")]),t("div",{staticClass:"info-text"},[e.mobileEditor.visible?t("input",{directives:[{name:"model",rawName:"v-model",value:e.mobileEditor.content,expression:"mobileEditor.content"}],domProps:{value:e.mobileEditor.content},on:{input:function(t){t.target.composing||e.$set(e.mobileEditor,"content",t.target.value)}}}):t("div",[e._v(e._s(e.selectedCustomer.mobileNumber))])]),t("div",{staticClass:"info-edit"},[e.mobileEditor.visible?t("img",{attrs:{src:s("c5b7")},on:{click:e.saveMobileNumber}}):t("img",{attrs:{src:s("5774")},on:{click:e.showMobileEditor}})])]),t("div",{staticClass:"info-item"},[t("div",{staticClass:"info-name"},[e._v("mark")]),t("div",{staticClass:"info-text"},[e.markEditor.visible?t("input",{directives:[{name:"model",rawName:"v-model",value:e.markEditor.content,expression:"markEditor.content"}],domProps:{value:e.markEditor.content},on:{input:function(t){t.target.composing||e.$set(e.markEditor,"content",t.target.value)}}}):t("div",[e._v(e._s(e.selectedCustomer.mark||e.selectedCustomer.nickname))])]),t("div",{staticClass:"info-edit"},[e.markEditor.visible?t("img",{attrs:{src:s("c5b7")},on:{click:e.saveMark}}):t("img",{attrs:{src:s("5774")},on:{click:e.showMarkEditor}})])]),t("div",{staticClass:"info-item"},[t("div",{staticClass:"info-name"},[e._v("应用名称")]),t("div",{staticClass:"info-text"},[e._v(" "+e._s(e.selectedCustomer.appName)+" ")])]),t("div",{staticClass:"button-box"},[t("button",{staticClass:"card-button",on:{click:function(t){return e.chat(e.selectedCustomer.openId)}}},[e._v("发消息")])])]):e._e()])])},i=[],n=s("6e4d"),a={name:"Contacts",data(){return{customers:[],selectedCustomer:null,search:"",mobileEditor:{visible:!1,content:""},markEditor:{visible:!1,content:""}}},mounted(){this.queryContacts()},methods:{showMobileEditor(){this.mobileEditor.content=this.selectedCustomer.mobileNumber,this.mobileEditor.visible=!0},saveMobileNumber(){let e={openId:this.selectedCustomer.openId,mobileNumber:this.mobileEditor.content};Object(n["e"])(e).then(e=>{this.mobileEditor.visible=!1,this.selectedCustomer.mobileNumber=this.mobileEditor.content}).catch(e=>{console.log("save or update mobile number failed:",e)})},showMarkEditor(){this.markEditor.content=this.selectedCustomer.mark,this.markEditor.visible=!0},saveMark(){Object(n["f"])(this.selectedCustomer.openId,this.markEditor.content).then(e=>{this.markEditor.visible=!1,this.selectedCustomer.mark=this.markEditor.content}).catch(e=>{console.log("save or update mark failed:",e)})},queryContacts(){Object(n["b"])(this.search).then(e=>{this.customers=e.data.list}).catch(e=>{console.log()})},showCustomer(e){this.selectedCustomer=e,this.mobileEditor={visible:!1,content:""},this.markEditor={visible:!1,content:""}},chat(e){this.$router.push({path:"/agent/conversations/chat",query:{id:e}})}}},r=a,c=(s("66b5"),s("2877")),l=Object(c["a"])(r,o,i,!1,null,"cd1e377a",null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-227fd1dc.ede1f7b7.js.map