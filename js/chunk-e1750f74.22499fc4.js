(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e1750f74"],{"0a06":function(e,t,n){"use strict";var o=n("c532"),r=n("30b5"),i=n("f6b4"),s=n("5270"),a=n("4a7b"),u=n("83b9"),c=n("848b"),f=c.validators;function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e,t){"string"===typeof e?(t=t||{},t.url=e):t=e||{},t=a(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:f.transitional(f.boolean),forcedJSONParsing:f.transitional(f.boolean),clarifyTimeoutError:f.transitional(f.boolean)},!1);var o=[],r=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var i,u=[];if(this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)})),!r){var l=[s,void 0];Array.prototype.unshift.apply(l,o),l=l.concat(u),i=Promise.resolve(t);while(l.length)i=i.then(l.shift(),l.shift());return i}var p=t;while(o.length){var d=o.shift(),h=o.shift();try{p=d(p)}catch(y){h(y);break}}try{i=s(p)}catch(y){return Promise.reject(y)}while(u.length)i=i.then(u.shift(),u.shift());return i},l.prototype.getUri=function(e){e=a(this.defaults,e);var t=u(e.baseURL,e.url);return r(t,e.params,e.paramsSerializer)},o.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),o.forEach(["post","put","patch"],(function(e){function t(t){return function(n,o,r){return this.request(a(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}l.prototype[e]=t(),l.prototype[e+"Form"]=t(!0)})),e.exports=l},"0df6":function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},"1d2b":function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(t,n)}}},"1fb5":function(e,t,n){"use strict";t.byteLength=f,t.toByteArray=p,t.fromByteArray=y;for(var o=[],r=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)o[a]=s[a],r[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var o=n===t?0:4-n%4;return[n,o]}function f(e){var t=c(e),n=t[0],o=t[1];return 3*(n+o)/4-o}function l(e,t,n){return 3*(t+n)/4-n}function p(e){var t,n,o=c(e),s=o[0],a=o[1],u=new i(l(e,s,a)),f=0,p=a>0?s-4:s;for(n=0;n<p;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],u[f++]=t>>16&255,u[f++]=t>>8&255,u[f++]=255&t;return 2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,u[f++]=255&t),1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,u[f++]=t>>8&255,u[f++]=255&t),u}function d(e){return o[e>>18&63]+o[e>>12&63]+o[e>>6&63]+o[63&e]}function h(e,t,n){for(var o,r=[],i=t;i<n;i+=3)o=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),r.push(d(o));return r.join("")}function y(e){for(var t,n=e.length,r=n%3,i=[],s=16383,a=0,u=n-r;a<u;a+=s)i.push(h(e,a,a+s>u?u:a+s));return 1===r?(t=e[n-1],i.push(o[t>>2]+o[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"=")),i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},"2e67":function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"30b5":function(e,t,n){"use strict";var o=n("c532");function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(o.isURLSearchParams(t))i=t.toString();else{var s=[];o.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,(function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),s.push(r(t)+"="+r(e))})))})),i=s.join("&")}if(i){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},3934:function(e,t,n){"use strict";var o=n("c532");e.exports=o.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var o=e;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=o.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return function(){return!0}}()},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,o="/";t.cwd=function(){return o},t.chdir=function(t){e||(e=n("df7c")),o=e.resolve(t,o)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},4581:function(e,t){e.exports=null},"467f":function(e,t,n){"use strict";var o=n("7917");e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new o("Request failed with status code "+n.status,[o.ERR_BAD_REQUEST,o.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},"4a7b":function(e,t,n){"use strict";var o=n("c532");e.exports=function(e,t){t=t||{};var n={};function r(e,t){return o.isPlainObject(e)&&o.isPlainObject(t)?o.merge(e,t):o.isPlainObject(t)?o.merge({},t):o.isArray(t)?t.slice():t}function i(n){return o.isUndefined(t[n])?o.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function s(e){if(!o.isUndefined(t[e]))return r(void 0,t[e])}function a(n){return o.isUndefined(t[n])?o.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function u(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return o.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||i,r=t(e);o.isUndefined(r)&&t!==u||(n[e]=r)})),n}},"4bac":function(e,t,n){(function(t,o,r){!function(t,n){e.exports=n()}(0,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var s={},a={};!function(e){e.__esModule=!0,e.NetworkStatus=void 0,function(e){e.DISCONNECTED="disconnected",e.DISCONNECTING="disconnecting",e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.RECONNECTED="reconnected",e.EXPIRED_RECONNECTED="reconnected",e.CONNECT_FAILED="connect_failed"}(e.NetworkStatus||(e.NetworkStatus={}))}(a);var u={},c={},f={};!function(e){e.__esModule=!0,e.Permission=void 0,function(e){e.WRITE="WRITE",e.READ="READ",e.NONE="NONE"}(e.Permission||(e.Permission={}))}(f);var l={__esModule:!0,Emitter:void 0},p=a,d=function(){function e(e){this.socket=e}return e.prototype.emit=function(e){this.socket.status!==p.NetworkStatus.CONNECT_FAILED&&this.socket.status!==p.NetworkStatus.DISCONNECTED?(e.start(),this.doEmit(e)):e.fail({resultCode:"409",content:"Please connect first"})},e.prototype.doEmit=function(e){var t=this;if(e.isTimeout())e.fail({resultCode:408,content:"Host unreachable or timeout"});else if(this.socket.status!==p.NetworkStatus.CONNECT_FAILED)if(this.authenticated())if(this.hasPermission(e))if([p.NetworkStatus.CONNECTED,p.NetworkStatus.RECONNECTED,p.NetworkStatus.EXPIRED_RECONNECTED].includes(this.socket.status)){if(!e.complete){var n=setTimeout((function(){t.doEmit(e)}),e.singleTimeout);e.unique&&(e.params.retried=e.retried),this.socket.doEmit(e.name,e.params,(function(t){clearTimeout(n),200===t.resultCode||200==t.code?e.success(t):e.fail(t)})),e.retried++}}else setTimeout((function(){t.doEmit(e)}),500);else e.fail({resultCode:401,content:"No permission"});else setTimeout((function(){t.doEmit(e)}),500);else e.fail({resultCode:408,content:"Failed to connect GoEasy."})},e.prototype.hasPermission=function(e){return!!this.socket.permissions.find((function(t){return t===e.permission}))},e.prototype.authenticated=function(){return[p.NetworkStatus.CONNECTED,p.NetworkStatus.RECONNECTING,p.NetworkStatus.RECONNECTED,p.NetworkStatus.EXPIRED_RECONNECTED].includes(this.socket.status)},e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}l.Emitter=d;var y={exports:{}},m=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,v=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],g=function(e){var t=e,n=e.indexOf("["),o=e.indexOf("]");-1!=n&&-1!=o&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));for(var r=m.exec(e||""),i={},s=14;s--;)i[v[s]]=r[s]||"";return-1!=n&&-1!=o&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i},b={exports:{}},E={exports:{}},S=1e3,w=6e4,_=60*w,C=24*_,M=365.25*C,T=function(e,t){t=t||{};var n=h(e);if("string"===n&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*M;case"days":case"day":case"d":return n*C;case"hours":case"hour":case"hrs":case"hr":case"h":return n*_;case"minutes":case"minute":case"mins":case"min":case"m":return n*w;case"seconds":case"second":case"secs":case"sec":case"s":return n*S;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===n&&!1===isNaN(e))return t.long?function(e){return I(e,C,"day")||I(e,_,"hour")||I(e,w,"minute")||I(e,S,"second")||e+" ms"}(e):function(e){return e>=C?Math.round(e/C)+"d":e>=_?Math.round(e/_)+"h":e>=w?Math.round(e/w)+"m":e>=S?Math.round(e/S)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function I(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}!function(e,t){function n(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,i=o-(n||o);e.diff=i,e.prev=n,e.curr=o,n=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,o){if("%%"===n)return n;u++;var r=t.formatters[o];if("function"==typeof r){var i=s[u];n=r.call(e,i),s.splice(u,1),u--}return n})),t.formatArgs.call(e,s);var c=r.log||t.log||console.log.bind(console);c.apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,o=0;for(n in e)o=(o<<5)-o+e.charCodeAt(n),o|=0;return t.colors[Math.abs(o)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var o=("string"==typeof e?e:"").split(/[\s,]+/),r=o.length;for(n=0;n<r;n++)o[n]&&("-"===(e=o[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var i=t.instances[n];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,o;for(n=0,o=t.skips.length;n<o;n++)if(t.skips[n].test(e))return!1;for(n=0,o=t.names.length;n<o;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=T,t.instances=[],t.names=[],t.skips=[],t.formatters={}}(E,E.exports),function(e,t){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof o&&"env"in o&&(e=Object({NODE_ENV:"production",BASE_URL:"/"}).DEBUG),e}(t=e.exports=E.exports).log=function(){return"object"===("undefined"==typeof console?"undefined":h(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var o="color: "+this.color;e.splice(1,0,o,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),e.splice(i,0,o)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())}(b,b.exports);var A=g,O=b.exports("socket.io-client:url"),R=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(O("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),O("parse %s",e),n=A(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(t&&t.port===n.port?"":":"+n.port),n},N={},P={exports:{}};!function(e){function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,o=this._callbacks["$"+e];if(!o)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<o.length;r++)if((n=o[r])===t||n.fn===t){o.splice(r,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var o=0,r=(n=n.slice(0)).length;o<r;++o)n[o].apply(this,t);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}(P);var k={}.toString,x=Array.isArray||function(e){return"[object Array]"==k.call(e)};!function(e){b.exports("socket.io-parser");var t=P.exports,n=x;function o(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=o,e.Decoder=i;var r=e.ERROR+'"encode error"';function i(){this.reconstructor=null}function s(t){return{type:e.ERROR,data:"parser error: "+t}}o.prototype.encode=function(t,n){var o=function(t){var n=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data){var o=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(t.data);if(!1===o)return r;n+=o}return n}(t);n([o])},t(i.prototype),i.prototype.add=function(t){var o;if("string"!=typeof t)throw new Error("Unknown type: "+t);o=function(t){var o=0,r={type:Number(t.charAt(0))};if(null==e.types[r.type])return s("unknown packet type "+r.type);if(e.BINARY_EVENT===r.type||e.BINARY_ACK===r.type){for(var i="";"-"!==t.charAt(++o)&&(i+=t.charAt(o),o!=t.length););if(i!=Number(i)||"-"!==t.charAt(o))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===t.charAt(o+1))for(r.nsp="";++o;){if(","===(u=t.charAt(o)))break;if(r.nsp+=u,o===t.length)break}else r.nsp="/";var a=t.charAt(o+1);if(""!==a&&Number(a)==a){for(r.id="";++o;){var u;if(null==(u=t.charAt(o))||Number(u)!=u){--o;break}if(r.id+=t.charAt(o),o===t.length)break}r.id=Number(r.id)}if(t.charAt(++o)){var c=function(e){try{return JSON.parse(e)}catch(e){return!1}}(t.substr(o));if(!1===c||r.type!==e.ERROR&&!n(c))return s("invalid payload");r.data=c}return r}(t),this.emit("decoded",o)},i.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}(N);var D={exports:{}},U={},F={},G=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var o in e)n.call(e,o)&&t.push(o);return t},L=x,B=Object.prototype.toString,j="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===B.call(Blob),q="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===B.call(File),V=function e(t){if(!t||"object"!==h(t))return!1;if(L(t)){for(var n=0,o=t.length;n<o;n++)if(e(t[n]))return!0;return!1}if("function"==typeof r&&r.isBuffer&&r.isBuffer(t)||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||j&&t instanceof Blob||q&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e(t[i]))return!0;return!1},H=function(e,t,n){var o=!1;return n=n||z,r.count=e,0===e?t():r;function r(e,i){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(o=!0,t(e),t=n):0!==r.count||o||t(null,i)}};function z(){}var W,Y,J,X=String.fromCharCode;function Q(e){for(var t,n,o=[],r=0,i=e.length;r<i;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<i?56320==(64512&(n=e.charCodeAt(r++)))?o.push(((1023&t)<<10)+(1023&n)+65536):(o.push(t),r--):o.push(t);return o}function K(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function $(e,t){return X(e>>t&63|128)}function Z(e,t){if(0==(4294967168&e))return X(e);var n="";return 0==(4294965248&e)?n=X(e>>6&31|192):0==(4294901760&e)?(K(e,t)||(e=65533),n=X(e>>12&15|224),n+=$(e,6)):0==(4292870144&e)&&(n=X(e>>18&7|240),n+=$(e,12),n+=$(e,6)),n+X(63&e|128)}function ee(){if(J>=Y)throw Error("Invalid byte index");var e=255&W[J];if(J++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function te(e){var t,n;if(J>Y)throw Error("Invalid byte index");if(J==Y)return!1;if(t=255&W[J],J++,0==(128&t))return t;if(192==(224&t)){if((n=(31&t)<<6|ee())>=128)return n;throw Error("Invalid continuation byte")}if(224==(240&t)){if((n=(15&t)<<12|ee()<<6|ee())>=2048)return K(n,e)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(n=(7&t)<<18|ee()<<12|ee()<<6|ee())>=65536&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}var ne={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,o=Q(e),r=o.length,i=-1,s="";++i<r;)s+=Z(o[i],n);return s},decode:function(e,t){var n=!1!==(t=t||{}).strict;W=Q(e),Y=W.length,J=0;for(var o,r=[];!1!==(o=te(n));)r.push(o);return function(e){for(var t,n=e.length,o=-1,r="";++o<n;)(t=e[o])>65535&&(r+=X((t-=65536)>>>10&1023|55296),t=56320|1023&t),r+=X(t);return r}(r)}},oe=void 0!==oe?oe:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,re=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),ie=re&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),se=oe&&oe.prototype.append&&oe.prototype.getBlob;function ae(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function ue(e,t){t=t||{};var n=new oe;return ae(e).forEach((function(e){n.append(e)})),t.type?n.getBlob(t.type):n.getBlob()}function ce(e,t){return new Blob(ae(e),t||{})}"undefined"!=typeof Blob&&(ue.prototype=Blob.prototype,ce.prototype=Blob.prototype);var fe=re?ie?Blob:ce:se?ue:void 0;!function(e){var t=G,n=V,o=H,r=ne;"undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),"undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),e.protocol=3;var i=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},s=t(i),a={type:"error",data:"parser error"},u=fe;e.encodePacket=function(e,t,n,o){"function"==typeof t&&(o=t,t=!1),"function"==typeof n&&(o=n,n=null),void 0===e.data||e.data.buffer||e.data;var s=i[e.type];return void 0!==e.data&&(s+=n?r.encode(String(e.data),{strict:!1}):String(e.data)),o(""+s)},e.decodePacket=function(e,t,n){if(void 0===e)return a;if("string"==typeof e){if(n&&!1===(e=function(e){try{e=r.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return a;var o=e.charAt(0);return Number(o)==o&&s[o]?e.length>1?{type:s[o],data:e.substring(1)}:{type:s[o]}:a}o=new Uint8Array(e)[0];var i=sliceBuffer(e,1);return u&&"blob"===t&&(i=new u([i])),{type:s[o],data:i}},e.encodePayload=function(t,r,i){"function"==typeof r&&(i=r,r=null);var s=n(t);if(!t.length)return i("0:");!function(e,t,n){for(var r=new Array(e.length),i=o(e.length,n),s=function(e,n,o){t(n,(function(t,n){r[e]=n,o(t,r)}))},a=0;a<e.length;a++)s(a,e[a],i)}(t,(function(t,n){e.encodePacket(t,!!s&&r,!0,(function(e){n(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return i(t.join(""))}))},e.decodePayload=function(t,n,o){var r;if("function"==typeof n&&(o=n,n=null),""===t)return o(a,0,1);for(var i,s,u="",c=0,f=t.length;c<f;c++){var l=t.charAt(c);if(":"===l){if(""===u||u!=(i=Number(u)))return o(a,0,1);if(u!=(s=t.substr(c+1,i)).length)return o(a,0,1);if(s.length){if(r=e.decodePacket(s,n,!0),a.type===r.type&&a.data===r.data)return o(a,0,1);if(!1===o(r,c+i,f))return}c+=i,u=""}else u+=l}return""!==u?o(a,0,1):void 0}}(F);var le=F,pe=de;function de(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}(0,P.exports)(de.prototype),de.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},de.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},de.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},de.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},de.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},de.prototype.onData=function(e){var t=le.decodePacket(e,this.socket.binaryType);this.onPacket(t)},de.prototype.onPacket=function(e){this.emit("packet",e)},de.prototype.onClose=function(){this.readyState="closed",this.emit("close")};var he,ye={encode:function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},decode:function(e){for(var t={},n=e.split("&"),o=0,r=n.length;o<r;o++){var i=n[o].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},me=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},ve="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ge={},be=0,Ee=0;function Se(e){var t="";do{t=ve[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function we(){var e=Se(+new Date);return e!==he?(be=0,he=e):e+"."+Se(be++)}for(;Ee<64;Ee++)ge[ve[Ee]]=Ee;we.encode=Se,we.decode=function(e){var t=0;for(Ee=0;Ee<e.length;Ee++)t=64*t+ge[e.charAt(Ee)];return t};var _e=we,Ce={exports:{}},Me={exports:{}},Te=1e3,Ie=60*Te,Ae=60*Ie,Oe=24*Ae,Re=365.25*Oe,Ne=function(e,t){t=t||{};var n=h(e);if("string"===n&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*Re;case"days":case"day":case"d":return n*Oe;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Ae;case"minutes":case"minute":case"mins":case"min":case"m":return n*Ie;case"seconds":case"second":case"secs":case"sec":case"s":return n*Te;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===n&&!1===isNaN(e))return t.long?function(e){return Pe(e,Oe,"day")||Pe(e,Ae,"hour")||Pe(e,Ie,"minute")||Pe(e,Te,"second")||e+" ms"}(e):function(e){return e>=Oe?Math.round(e/Oe)+"d":e>=Ae?Math.round(e/Ae)+"h":e>=Ie?Math.round(e/Ie)+"m":e>=Te?Math.round(e/Te)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Pe(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}!function(e,t){function n(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,i=o-(n||o);e.diff=i,e.prev=n,e.curr=o,n=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,o){if("%%"===n)return n;u++;var r=t.formatters[o];if("function"==typeof r){var i=s[u];n=r.call(e,i),s.splice(u,1),u--}return n})),t.formatArgs.call(e,s);var c=r.log||t.log||console.log.bind(console);c.apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,o=0;for(n in e)o=(o<<5)-o+e.charCodeAt(n),o|=0;return t.colors[Math.abs(o)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var o=("string"==typeof e?e:"").split(/[\s,]+/),r=o.length;for(n=0;n<r;n++)o[n]&&("-"===(e=o[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var i=t.instances[n];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,o;for(n=0,o=t.skips.length;n<o;n++)if(t.skips[n].test(e))return!1;for(n=0,o=t.names.length;n<o;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=Ne,t.instances=[],t.names=[],t.skips=[],t.formatters={}}(Me,Me.exports),function(e,t){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof o&&"env"in o&&(e=Object({NODE_ENV:"production",BASE_URL:"/"}).DEBUG),e}(t=e.exports=Me.exports).log=function(){return"object"===("undefined"==typeof console?"undefined":h(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var o="color: "+this.color;e.splice(1,0,o,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),e.splice(i,0,o)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())}(Ce,Ce.exports);var ke={exports:{}};try{ke.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){ke.exports=!1}var xe=ke.exports,De=function(e){var t=e.xdomain,n=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||xe))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(e){}if(!t)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}},Ue=pe,Fe=ye,Ge=F,Le=me,Be=_e,je=Ce.exports("engine.io-client:polling"),qe=He,Ve=null!=new De({xdomain:!1}).responseType;function He(e){var t=e&&e.forceBase64;Ve&&!t||(this.supportsBinary=!1),Ue.call(this,e)}Le(He,Ue),He.prototype.name="polling",He.prototype.doOpen=function(){this.poll()},He.prototype.pause=function(e){var t=this;function n(){je("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var o=0;this.polling&&(je("we are currently polling - waiting to pause"),o++,this.once("pollComplete",(function(){je("pre-pause polling complete"),--o||n()}))),this.writable||(je("we are currently writing - waiting to pause"),o++,this.once("drain",(function(){je("pre-pause writing complete"),--o||n()})))}else n()},He.prototype.poll=function(){je("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},He.prototype.onData=function(e){var t=this;je("polling got data %s",e),Ge.decodePayload(e,this.socket.binaryType,(function(e,n,o){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():je('ignoring poll - transport state "%s"',this.readyState))},He.prototype.doClose=function(){var e=this;function t(){je("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(je("transport open - closing"),t()):(je("transport not open - deferring close"),this.once("open",t))},He.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};Ge.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,n)}))},He.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=Be()),this.supportsBinary||e.sid||(e.b64=1),e=Fe.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e};var ze,We=qe,Ye=$e,Je=/\n/g,Xe=/\\n/g;function Qe(){}function Ke(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{}}function $e(e){if(We.call(this,e),this.query=this.query||{},!ze){var t=Ke();ze=t.___eio=t.___eio||[]}this.index=ze.length;var n=this;ze.push((function(e){n.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){n.script&&(n.script.onerror=Qe)}),!1)}me($e,We),$e.prototype.supportsBinary=!1,$e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),We.prototype.doClose.call(this)},$e.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},$e.prototype.doWrite=function(e,t){var n=this;if(!this.form){var o,r=document.createElement("form"),i=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=s,r.method="POST",r.setAttribute("accept-charset","utf-8"),i.name="d",r.appendChild(i),document.body.appendChild(r),this.form=r,this.area=i}function a(){u(),t()}function u(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';o=document.createElement(e)}catch(e){(o=document.createElement("iframe")).name=n.iframeId,o.src="javascript:0"}o.id=n.iframeId,n.form.appendChild(o),n.iframe=o}this.form.action=this.uri(),u(),e=e.replace(Xe,"\\\n"),this.area.value=e.replace(Je,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&a()}:this.iframe.onload=a};var Ze,et,nt=pe,ot=F,rt=ye,it=me,st=_e,at=Ce.exports("engine.io-client:websocket");if("undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket)if("undefined"!=typeof WebSocket)Ze=WebSocket;else if("undefined"!=typeof self)Ze=self.WebSocket||self.MozWebSocket;else try{et=n("7f73")}catch(e){}var ut=Ze||et;("undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket)&&"undefined"==typeof GameGlobal||(ut=function(e){var t=this;if(t.onopen=function(){},t.onclose=function(){},t.onmessage=function(e){},t.onerror=function(e){},"object"===("undefined"==typeof tt?"undefined":h(tt))&&tt.getSystemInfo){var n=tt.connectSocket({url:e});t.send=function(e){n.send({data:e})},t.close=function(){n.close()},n.onOpen((function(){t.onopen()})),n.onError((function(e){t.onerror(e)})),n.onMessage((function(e){t.onmessage(e)})),n.onClose((function(){t.onclose()}))}else if("undefined"!=typeof uni)if("undefined"!=typeof my)my.connectSocket({url:e}),t.send=function(e){my.sendSocketMessage({data:e})},t.close=function(e){my.closeSocket()},my.onSocketOpen((function(e){t.onopen()})),my.onSocketError((function(e){t.onerror(e)})),my.onSocketMessage((function(e){t.onmessage(e)})),my.onSocketClose((function(e){t.onclose(e)}));else{var o=uni.connectSocket({url:e,complete:function(){}});t.send=function(e){o.send({data:e})},t.close=function(){o.close()},o.onOpen((function(e){t.onopen()})),o.onError((function(e){t.onerror(e)})),o.onMessage((function(e){t.onmessage(e)})),o.onClose((function(e){t.onclose()}))}else{var r=wx.connectSocket({url:e});t.send=function(e){r.send({data:e})},t.close=function(e){r.close({code:1e3})},r.onOpen((function(){t.onopen()})),r.onError((function(e){t.onerror(e)})),r.onMessage((function(e){t.onmessage(e)})),r.onClose((function(e){t.onclose(e)}))}});var ct=ft;function ft(e){e&&e.forceBase64&&(this.supportsBinary=!1),("undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket)&&(this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=Ze&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(ut=et)),nt.call(this,e)}it(ft,nt),ft.prototype.name="websocket",ft.prototype.supportsBinary=!1,ft.prototype.doOpen=function(){if(this.check()){var e,t,n=this.uri();("undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket)&&(e=this.protocols),(t="undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket?{agent:this.agent,perMessageDeflate:this.perMessageDeflate}:{agent:this.agent}).pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(t.headers=this.extraHeaders),this.localAddress&&(t.localAddress=this.localAddress);try{"undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket?this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new ut(n,e):new ut(n):new ut(n,e,t):this.ws=new ut(n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},ft.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},ft.prototype.write=function(e){var t=this;this.writable=!1;for(var n=e.length,o=0,i=n;o<i;o++)!function(e){ot.encodePacket(e,t.supportsBinary,(function(o){if("undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket){if(!t.usingBrowserWebSocket){var i={};e.options&&(i.compress=e.options.compress),t.perMessageDeflate&&("string"==typeof o?r.byteLength(o):o.length)<t.perMessageDeflate.threshold&&(i.compress=!1)}try{t.usingBrowserWebSocket?t.ws.send(o):t.ws.send(o,i)}catch(e){at("websocket closed before onclose event")}}else try{t.ws.send(o)}catch(e){at("websocket closed before onclose event")}--n||s()}))}(e[o]);function s(){t.emit("flush"),setTimeout((function(){t.writable=!0,t.emit("drain")}),0)}},ft.prototype.onClose=function(){nt.prototype.onClose.call(this)},ft.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},ft.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=st()),this.supportsBinary||(e.b64=1),(e=rt.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},ft.prototype.check=function(){return!(!ut||"__initialize"in ut&&this.name===ft.prototype.name)};var lt=Ye,pt=ct;U.polling=function(e){var t=!1,n=!1;if(e.jsonp,"undefined"!=typeof location){var o="https:"===location.protocol,r=location.port;r||(r=o?443:80),t=e.hostname!==location.hostname||r!==e.port,n=e.secure!==o}return e.xdomain=t,e.xscheme=n,new lt(e)},U.websocket=pt;var dt=[].indexOf,ht=function(e,t){if(dt)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},yt=U,mt=P.exports,vt=Ce.exports("engine.io-client:socket"),gt=ht,bt=F,Et=g,St=ye,wt=_t;function _t(e,t){if(!(this instanceof _t))return new _t(e,t);t=t||{},e&&"object"===h(e)&&(t=e,e=null),e?(e=Et(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=Et(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=St.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}_t.priorWebsocketSuccess=!1,mt(_t.prototype),_t.protocol=bt.protocol,_t.Socket=_t,_t.Transport=pe,_t.transports=U,_t.parser=F,_t.prototype.createTransport=function(e){vt('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=bt.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new yt[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},_t.prototype.open=function(){var e;if(this.rememberUpgrade&&_t.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},_t.prototype.setTransport=function(e){vt("setting transport %s",e.name);var t=this;this.transport&&(vt("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},_t.prototype.probe=function(e){vt('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,o=this;function r(){if(o.onlyBinaryUpgrades){var r=!this.supportsBinary&&o.transport.supportsBinary;n=n||r}n||(vt('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(r){if(!n)if("pong"===r.type&&"probe"===r.data){if(vt('probe transport "%s" pong',e),o.upgrading=!0,o.emit("upgrading",t),!t)return;_t.priorWebsocketSuccess="websocket"===t.name,vt('pausing current transport "%s"',o.transport.name),o.transport.pause((function(){n||"closed"!==o.readyState&&(vt("changing transport and sending upgrade packet"),f(),o.setTransport(t),t.send([{type:"upgrade"}]),o.emit("upgrade",t),t=null,o.upgrading=!1,o.flush())}))}else{vt('probe transport "%s" failed',e);var i=new Error("probe error");i.transport=t.name,o.emit("upgradeError",i)}})))}function i(){n||(n=!0,f(),t.close(),t=null)}function s(n){var r=new Error("probe error: "+n);r.transport=t.name,i(),vt('probe transport "%s" failed because of error: %s',e,n),o.emit("upgradeError",r)}function a(){s("transport closed")}function u(){s("socket closed")}function c(e){t&&e.name!==t.name&&(vt('"%s" works - aborting "%s"',e.name,t.name),i())}function f(){t.removeListener("open",r),t.removeListener("error",s),t.removeListener("close",a),o.removeListener("close",u),o.removeListener("upgrading",c)}_t.priorWebsocketSuccess=!1,t.once("open",r),t.once("error",s),t.once("close",a),this.once("close",u),this.once("upgrading",c),t.open()},_t.prototype.onOpen=function(){if(vt("socket open"),this.readyState="open",_t.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){vt("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},_t.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(vt('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else vt('packet received with socket readyState "%s"',this.readyState)},_t.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},_t.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},_t.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){vt("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},_t.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},_t.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},_t.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(vt("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},_t.prototype.write=_t.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},_t.prototype.sendPacket=function(e,t,n,o){if("function"==typeof t&&(o=t,t=void 0),"function"==typeof n&&(o=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var r={type:e,data:t,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),o&&this.once("flush",o),this.flush()}},_t.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?o():t()})):this.upgrading?o():t()}function t(){e.onClose("forced close"),vt("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function o(){e.once("upgrade",n),e.once("upgradeError",n)}return this},_t.prototype.onError=function(e){vt("socket error %j",e),_t.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},_t.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(vt('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},_t.prototype.filterUpgrades=function(e){for(var t=[],n=0,o=e.length;n<o;n++)~gt(this.transports,e[n])&&t.push(e[n]);return t},D.exports=wt,D.exports.parser=F;var Ct={exports:{}},Mt=function(e,t){for(var n=[],o=(t=t||0)||0;o<e.length;o++)n[o-t]=e[o];return n},Tt=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}},It=[].slice,At=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=It.call(arguments,2);return function(){return t.apply(e,n.concat(It.call(arguments)))}};!function(e,t){var n=N,o=P.exports,r=Mt,i=Tt,s=At,a=(b.exports("socket.io-client:socket"),ye),u=V;e.exports=l;var c={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=o.prototype.emit;function l(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}o(l.prototype),l.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[i(e,"open",s(this,"onopen")),i(e,"packet",s(this,"onpacket")),i(e,"close",s(this,"onclose"))]}},l.prototype.open=l.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},l.prototype.send=function(){var e=r(arguments);return e.unshift("message"),this.emit.apply(this,e),this},l.prototype.emit=function(e){if(c.hasOwnProperty(e))return f.apply(this,arguments),this;var t=r(arguments),o={type:(void 0!==this.flags.binary?this.flags.binary:u(t))?n.BINARY_EVENT:n.EVENT,data:t,options:{}};return o.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(this.ids,this.acks[this.ids]=t.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),this.flags={},this},l.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},l.prototype.onopen=function(){if("/"!==this.nsp)if(this.query){var e="object"===h(this.query)?a.encode(this.query):this.query;this.packet({type:n.CONNECT,query:e})}else this.packet({type:n.CONNECT})},l.prototype.onclose=function(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},l.prototype.onpacket=function(e){var t=e.nsp===this.nsp,o=e.type===n.ERROR&&"/"===e.nsp;if(t||o)switch(e.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(e);break;case n.ACK:case n.BINARY_ACK:this.onack(e);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",e.data)}},l.prototype.onevent=function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},l.prototype.ack=function(e){var t=this,o=!1;return function(){if(!o){o=!0;var i=r(arguments);t.packet({type:u(i)?n.BINARY_ACK:n.ACK,id:e,data:i})}}},l.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(e.id,e.data,t.apply(this,e.data),delete this.acks[e.id]):e.id},l.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},l.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},l.prototype.ondisconnect=function(){this.nsp,this.destroy(),this.onclose("io server disconnect")},l.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},l.prototype.close=l.prototype.disconnect=function(){return this.connected&&(this.nsp,this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},l.prototype.compress=function(e){return this.flags.compress=e,this},l.prototype.binary=function(e){return this.flags.binary=e,this}}(Ct);var Ot=Rt;function Rt(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Rt.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Rt.prototype.reset=function(){this.attempts=0},Rt.prototype.setMin=function(e){this.ms=e},Rt.prototype.setMax=function(e){this.max=e},Rt.prototype.setJitter=function(e){this.jitter=e};var Nt={},Pt={},kt={};!function(t){var n,o=e&&e.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};t.__esModule=!0,t.PlatformDetector=t.Platform=void 0,function(e){e.BROWSER="BROWSER",e.UNKNOWN="UNKNOWN",e.APP_IOS="APP_IOS",e.APP_ANDROID="APP_ANDROID",e.APPLET_WX="APPLET_WX",e.APPLET_WX_GAME="APPLET_WX_GAME",e.APPLET_ALIPAY="APPLET_ALIPAY",e.APPLET_BYTEDANCE="APPLET_BYTEDANCE"}(n=t.Platform||(t.Platform={}));var r=function(){function e(){var e,t,r;this.platform=null,this.methods=((e={})[n.BROWSER]=this.isBrowser,e[n.APP_IOS]=this.isAppiOS,e[n.APP_ANDROID]=this.isAppAndroid,e[n.APPLET_WX]=this.isWXApplet,e[n.APPLET_WX_GAME]=this.isWXGameApplet,e);var i=this.methods,s=Object.keys(i);try{for(var a=o(s),u=a.next();!u.done;u=a.next()){var c=u.value;if((0,i[c])()){this.platform=c;break}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}this.platform=this.platform||n.UNKNOWN,this.platform}return e.currentPlatform=function(){return e.instance.platform},e.prototype.isBrowser=function(){return"undefined"!=typeof navigator&&"undefined"!=typeof document&&!!document.getElementById&&"undefined"==typeof GameGlobal},e.prototype.isAppiOS=function(){return"object"===("undefined"==typeof uni?"undefined":h(uni))&&!!uni.getSystemInfoSync&&"ios"===uni.getSystemInfoSync().platform&&"object"===("undefined"==typeof plus?"undefined":h(plus))},e.prototype.isAppAndroid=function(){return"object"===("undefined"==typeof uni?"undefined":h(uni))&&!!uni.getSystemInfoSync&&"android"===uni.getSystemInfoSync().platform&&"object"===("undefined"==typeof plus?"undefined":h(plus))},e.prototype.isWXApplet=function(){return"object"===("undefined"==typeof wx?"undefined":h(wx))&&!!wx.getSystemInfoSync&&"undefined"==typeof WebSocket&&"undefined"==typeof XMLHttpRequest&&"undefined"==typeof plus},e.prototype.isWXGameApplet=function(){return"object"===("undefined"==typeof GameGlobal?"undefined":h(GameGlobal))},e.prototype.isAlipayApplet=function(){return!1},e.prototype.isBytedanceApplet=function(){return!1},e.prototype.isQQApplet=function(){return!1},e.prototype.isBaiduApplet=function(){return!1},e.instance=new e,e}();t.PlatformDetector=r}(kt),function(t){var n=e&&e.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};t.__esModule=!0,t.FrameworkDetector=t.Framework=void 0;var o,r=kt;!function(e){e.UNIAPP="UNIAPP",e.REACT_NATIVE="REACT_NATIVE",e.TARO="TARO",e.IONIC="IONIC",e.NATIVE_APPLET_WX="NATIVE_APPLET_WX",e.NATIVE_APPLET_ALIPAY="NATIVE_APPLET_ALIPAY",e.UNKNOWN="UNKNOWN"}(o=t.Framework||(t.Framework={}));var i=function(){function t(){var e,t,r;this.framework=null,this.methods=((e={})[o.UNIAPP]=this.isUniApp,e[o.REACT_NATIVE]=this.isReactNative,e[o.NATIVE_APPLET_WX]=this.isWXApplet,e);var i=this.methods,s=Object.keys(i);try{for(var a=n(s),u=a.next();!u.done;u=a.next()){var c=u.value;if((0,i[c])()){this.framework=c;break}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}this.framework=this.framework||o.UNKNOWN,this.framework}return t.currentFramework=function(){return this.instance.framework},t.prototype.isUniApp=function(){return"object"===("undefined"==typeof uni?"undefined":h(uni))&&!!uni.getSystemInfoSync},t.prototype.isReactNative=function(){return void 0!==e&&e.__fbGenNativeModule},t.prototype.isTaro=function(){return!1},t.prototype.isWXApplet=function(){return r.PlatformDetector.currentPlatform()===r.Platform.APPLET_WX&&"undefined"==typeof uni},t.instance=new t,t}();t.FrameworkDetector=i}(Pt),Nt.__esModule=!0,Nt.uniApp=void 0;var xt=Pt,Dt=new(function(){function e(){this.uniAppRunningBackend=!1,this.listenAppRunning()}return e.prototype.listenAppRunning=function(){var e=this;xt.FrameworkDetector.currentFramework()===xt.Framework.UNIAPP&&"object"===("undefined"==typeof plus?"undefined":h(plus))&&(plus.globalEvent.addEventListener("resume",(function(){e.uniAppRunningBackend=!1,e.uniAppRunningBackend}),!1),plus.globalEvent.addEventListener("pause",(function(){e.uniAppRunningBackend=!0,e.uniAppRunningBackend}),!1))},e.prototype.runningBackend=function(){return this.uniAppRunningBackend},e}());Nt.uniApp=Dt;var Ut={},Ft={};!function(e){e.__esModule=!0,e.default={maxNumber:5}}(Ft);var Gt={},Lt={},Bt=e&&e.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Lt.__esModule=!0,Lt.Cookie=void 0;var jt=function(){function e(){}return e.get=function(e){var t,n,o=encodeURIComponent(e)+"=",r=document.cookie.split("; ");try{for(var i=Bt(r),s=i.next();!s.done;s=i.next()){var a=s.value;if(a.startsWith(o))return decodeURIComponent(a.substring(o.length))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return null},e.set=function(e,t,n,o,r,i){void 0===r&&(r="/"),void 0===i&&(i=!1);var s=encodeURIComponent(e)+"="+encodeURIComponent(t);n instanceof Date&&(s+="; expires="+n.toGMTString()),r&&(s+="; path="+r),o&&(s+="; domain="+o),i&&(s+="; secure"),document.cookie=s},e.remove=function(t,n,o,r){void 0===o&&(o="/"),void 0===r&&(r=!1),e.set(t,"",new Date(0),n,o,r)},e}();Lt.Cookie=jt;var qt=e&&e.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Gt.__esModule=!0,Gt.LocalStorageDispatcher=void 0;var Vt=Lt,Ht=function(){function e(){this.domain=null,this.domain="undefined"!=typeof location&&/^(?:[A-za-z0-9-]+\.)+[A-za-z]{2,4}(?:[\/\?#][\/=\?%\-&~`@[\]\':+!\.#\w]*)?$/.test(location.host)?location.host.split(".").slice(-2).join("."):null}return e.prototype.get=function(e){var t=Vt.Cookie.get(e)||null;return JSON.parse(t)},e.prototype.put=function(e,t){var n=new Date(2030,12,31,0,0,0,0),o=this.domain;Vt.Cookie.set(e,JSON.stringify(t),n,o)},e.prototype.remove=function(e){var t=this.domain;Vt.Cookie.remove(e,t)},e.prototype.support=function(){return"undefined"!=typeof navigator&&!0===navigator.cookieEnabled},e}(),zt=function(){function e(){}return e.prototype.get=function(e){var t=localStorage.getItem(e);return JSON.parse(t)},e.prototype.put=function(e,t){var n=localStorage.setItem(e,JSON.stringify(t));JSON.stringify(n)},e.prototype.remove=function(e){localStorage.removeItem(e)},e.prototype.support=function(){return!("undefined"!=typeof GameGlobal||"undefined"==typeof localStorage||!localStorage.setItem)},e}(),Wt=function(){function e(){}return e.prototype.get=function(e){var t=uni.getStorageSync(e)||null;return JSON.parse(t)},e.prototype.put=function(e,t){uni.setStorageSync(e,JSON.stringify(t))},e.prototype.remove=function(e){uni.removeStorageSync(e)},e.prototype.support=function(){return!("object"!==("undefined"==typeof uni?"undefined":h(uni))||!uni.getStorageSync)},e}(),Yt=function(){function e(){}return e.prototype.get=function(e){var t=wx.getStorageSync(e)||null;return JSON.parse(t)},e.prototype.put=function(e,t){wx.setStorageSync(e,JSON.stringify(t))},e.prototype.remove=function(e){wx.removeStorageSync(e)},e.prototype.support=function(){return!("object"!==("undefined"==typeof wx?"undefined":h(wx))||!wx.getStorageSync)},e}(),Jt=function(){function e(){this.supportedStorage=null;var t=e.storages;t.push(new Wt),t.push(new zt),t.push(new Yt),t.push(new Ht),this.dispatch(),this.supportedStorage}return e.localStorage=function(){return this.instance.supportedStorage},e.prototype.dispatch=function(){var t,n;try{for(var o=qt(e.storages),r=o.next();!r.done;r=o.next()){var i=r.value;if(i.support()){this.supportedStorage=i;break}}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.storages=new Array,e.instance=new e,e}();Gt.LocalStorageDispatcher=Jt,Ut.__esModule=!0,Ut.goEasyDomainNumber=void 0;var Xt=Ft,Qt=Gt,Kt=function(){function e(){}return e.prototype.refreshNumber=function(){var t=e.GOEASY_DOMAIN_NUMBER,n=Qt.LocalStorageDispatcher.localStorage(),o=Math.floor(Math.random()*(Xt.default.maxNumber-1)+1);return null!==n&&(o=parseInt(n.get(t))||o),o>0&&o<Xt.default.maxNumber?o+=1:o===Xt.default.maxNumber&&(o=1),null!==n&&n.put(t,o),o},e.GOEASY_DOMAIN_NUMBER="GOEASY_DOMAIN_NUMBER",e}(),$t=new Kt;Ut.goEasyDomainNumber=$t;var Zt=D.exports,en=Ct.exports,tn=P.exports,nn=N,on=Tt,rn=At,sn=(b.exports("socket.io-client:manager"),ht),an=Ot,un=Nt.uniApp,cn=Ut.goEasyDomainNumber,fn=Object.prototype.hasOwnProperty,ln=pn;function pn(e,t){if(!(this instanceof pn))return new pn(e,t);e&&"object"===h(e)&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new an({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||nn;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}function dn(){var e=!1;return"object"===("undefined"==typeof uni?"undefined":h(uni))&&uni.getSystemInfo&&(e=!0),e&&un.runningBackend()}pn.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)fn.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},pn.prototype.updateSocketIds=function(){for(var e in this.nsps)fn.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},pn.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},tn(pn.prototype),pn.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},pn.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},pn.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},pn.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},pn.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},pn.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},pn.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},pn.prototype.open=pn.prototype.connect=function(e,t){if(this.readyState,~this.readyState.indexOf("open"))return this;this.uri,this.engine=Zt(this.uri,this.opts);var n=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var r=on(n,"open",(function(){o.onopen(),e&&e()})),i=on(n,"error",(function(t){if("undefined"!=typeof window){var n=parseInt(o.uri.match(/[1-9][0-9]*/g)[0]),r=cn.refreshNumber();o.uri=o.uri.replace(n,r)}if(o.cleanup(),o.readyState="closed",o.emitAll("connect_error",t),e){var i=new Error("Connection error");i.data=t,e(i)}else o.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout,a=setTimeout((function(){r.destroy(),n.close(),n.emit("error","timeout"),o.emitAll("connect_timeout",s)}),s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(r),this.subs.push(i),this},pn.prototype.onopen=function(){this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(on(e,"data",rn(this,"ondata"))),this.subs.push(on(e,"ping",rn(this,"onping"))),this.subs.push(on(e,"pong",rn(this,"onpong"))),this.subs.push(on(e,"error",rn(this,"onerror"))),this.subs.push(on(e,"close",rn(this,"onclose"))),this.subs.push(on(this.decoder,"decoded",rn(this,"ondecoded")))},pn.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},pn.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},pn.prototype.ondata=function(e){this.decoder.add(e)},pn.prototype.ondecoded=function(e){this.emit("packet",e)},pn.prototype.onerror=function(e){this.emitAll("error",e)},pn.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new en(this,e,t),this.nsps[e]=n;var o=this;n.on("connecting",r),n.on("connect",(function(){n.id=o.generateId(e)})),this.autoConnect&&r()}function r(){~sn(o.connecting,n)||o.connecting.push(n)}return n},pn.prototype.destroy=function(e){var t=sn(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},pn.prototype.packet=function(e){var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var o=0;o<n.length;o++)t.engine.write(n[o],e.options);t.encoding=!1,t.processPacketQueue()})))},pn.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},pn.prototype.cleanup=function(){for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},pn.prototype.close=pn.prototype.disconnect=function(){this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},pn.prototype.onclose=function(e){this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},pn.prototype.reconnect=function(){if(dn(),this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||(dn()?(e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error","Uniapp running backend, skipped reconnect...")):e.open((function(t){t?(e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):e.onreconnect()}))))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},pn.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)},function(e,t){var n=R,o=N,r=ln;b.exports("socket.io-client"),e.exports=t=s;var i=t.managers={};function s(e,t){"object"===h(e)&&(t=e,e=void 0),t=t||{};var o,s=n(e),a=s.source,u=s.id,c=s.path,f=i[u]&&c in i[u].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||f?o=r(a,t):(i[u]||(i[u]=r(a,t)),o=i[u]),s.query&&!t.query&&(t.query=s.query),o.socket(s.path,t)}t.protocol=o.protocol,t.connect=s,t.Manager=ln,t.Socket=Ct.exports}(y,y.exports);var hn={};!function(e){e.__esModule=!0;var t=new(function(){function e(){}return e.prototype.isDef=function(e){return!this.isUndef(e)},e.prototype.isUndef=function(e){return null==e},e.prototype.isPrimitive=function(e){return"string"==typeof e||"number"==typeof e||"symbol"===h(e)||"boolean"==typeof e},e.prototype.isObject=function(e){return null!==e&&"object"===h(e)},e.prototype.isPlainObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},e.prototype.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},e.prototype.isValidArrayIndex=function(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)},e.prototype.isString=function(e){return"string"==typeof e},e.prototype.isNumber=function(e){return"number"==typeof e},e.prototype.isStringOrNumber=function(e){return this.isString(e)||this.isNumber(e)},e.prototype.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.prototype.isEmpty=function(e){return this.isArray(e)?0===e.length:this.isObject(e)?!this.isDef(e):!this.isNumber(e)&&(this.isString(e)?""===e.trim():!this.isDef(e))},e.prototype.isNative=function(e){return"function"==typeof e&&/native code/.test(e.toString())},e.prototype.isFunction=function(e){return"function"==typeof e},e.prototype.isBoolean=function(e){return"boolean"==typeof e},e.prototype.isTrue=function(e){return!0===e},e.prototype.isFalse=function(e){return!1===e},e}());e.default=t}(hn),function(e){e.__esModule=!0;var t=a,n=f,o=l,r=y.exports,i=hn,s=function(){function e(){this.io=r,this.status=t.NetworkStatus.DISCONNECTED,this.permissions=[n.Permission.NONE],this.connectedObservers=[],this.disconnectedObservers=[],this.emitter=new o.Emitter(this)}return e.prototype.connect=function(){this.status=t.NetworkStatus.CONNECTING},e.prototype.emit=function(e){this.emitter.emit(e)},e.prototype.doEmit=function(e,t,n){},e.prototype.on=function(e,t){this.io.on(e,t)},e.prototype.disconnect=function(){this.io.disconnect()},e.prototype.getStatus=function(){return this.status},e.prototype.addConnectedObserver=function(e){i.default.isFunction(e)&&this.connectedObservers.push(e)},e.prototype.addDisconnectedObserver=function(e){i.default.isFunction(e)&&this.disconnectedObservers.push(e)},e.prototype.notify=function(e,t){for(var n=0;n<e.length;n++)e[n](t)},e}();e.default=s}(c);var yn={};!function(t){var n,o=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});t.__esModule=!0;var r=a,i=function(e){function t(t){var n=e.call(this)||this;return n.reconnectingObservers=[],n.addReconnectingObserver(t.onReconnecting),n.addDisconnectedObserver(t.onDisconnected),n}return o(t,e),t.prototype.connect=function(t){e.prototype.connect.call(this),this.io=this.io.connect(t.uri,t.opts),this.initListener()},t.prototype.doEmit=function(e,t,n){this.io.emit(e,t,n)},t.prototype.initListener=function(){var e=this;this.io.on("reconnecting",(function(t){e.status=r.NetworkStatus.CONNECTING,e.notify(e.reconnectingObservers,t)})),this.io.on("connect",(function(){e.status=r.NetworkStatus.CONNECTED,e.notify(e.connectedObservers)})),this.io.on("disconnect",(function(){e.status=r.NetworkStatus.DISCONNECTED,e.notify(e.disconnectedObservers)})),this.io.on("connect_error",(function(e){}))},t.prototype.addReconnectingObserver=function(e){this.reconnectingObservers.push(e)},t}(c.default);t.default=i}(yn);var mn={},vn={},gn={exports:{}},bn="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(bn){var En=new Uint8Array(16);gn.exports=function(){return bn(En),En}}else{var Sn=new Array(16);gn.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),Sn[t]=e>>>((3&t)<<3)&255;return Sn}}for(var wn=[],_n=0;_n<256;++_n)wn[_n]=(_n+256).toString(16).substr(1);var Cn,Mn,Tn=function(e,t){var n=t||0,o=wn;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")},In=gn.exports,An=Tn,On=0,Rn=0,Nn=function(e,t,n){var o=t&&n||0,r=t||[],i=(e=e||{}).node||Cn,s=void 0!==e.clockseq?e.clockseq:Mn;if(null==i||null==s){var a=In();null==i&&(i=Cn=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==s&&(s=Mn=16383&(a[6]<<8|a[7]))}var u=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:Rn+1,f=u-On+(c-Rn)/1e4;if(f<0&&void 0===e.clockseq&&(s=s+1&16383),(f<0||u>On)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");On=u,Rn=c,Mn=s;var l=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;r[o++]=l>>>24&255,r[o++]=l>>>16&255,r[o++]=l>>>8&255,r[o++]=255&l;var p=u/4294967296*1e4&268435455;r[o++]=p>>>8&255,r[o++]=255&p,r[o++]=p>>>24&15|16,r[o++]=p>>>16&255,r[o++]=s>>>8|128,r[o++]=255&s;for(var d=0;d<6;++d)r[o+d]=i[d];return t||An(r)},Pn=gn.exports,kn=Tn,xn=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||Pn)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var i=0;i<16;++i)t[o+i]=r[i];return t||kn(r)},Dn=Nn,Un=xn,Fn=Un;Fn.v1=Dn,Fn.v4=Un;var Gn=Fn;!function(e){e.__esModule=!0;var t=Gn,n=function(){function e(){}return e.get=function(){return t.v1().replace(/-/g,"")},e}();e.default=n}(vn),function(e){e.__esModule=!0;var t=vn,n=f,o=function(){function e(e){var o=this;this.permission=n.Permission.NONE,this.singleTimeout=0,this.totalTimeout=0,this.startTime=0,this.complete=!1,this.retried=0,this.unique=!1,this.uuid=t.default.get(),this.name=e.name,this.params=e.params,this.permission=e.permission,this.totalTimeout=e.totalTimeout,this.singleTimeout=e.singleTimeout,e.unique&&(this.unique=e.unique),this.success=function(t){o.complete||(o.complete=!0,e.success(t))},this.fail=function(t){o.complete||(o.complete=!0,e.fail(t))}}return e.prototype.start=function(){this.startTime=Date.now()},e.prototype.isTimeout=function(){return this.startTime+this.totalTimeout<Date.now()},e}();e.default=o}(mn);var Ln={},Bn={};!function(e){e.__esModule=!0,e.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}}(Bn),Ln.__esModule=!0,Ln.MessageObserver=void 0;var jn=Bn,qn=function(){function e(e){this.callback=jn.default,this.guidList=[],this.callback=e}return e.prototype.onMessage=function(e,t){if("string"==typeof t&&(t=JSON.parse(t)),t.i){if(this.guidList.findIndex((function(e){return e===t.i}))>-1)return;this.guidList.unshift(t.i),this.guidList.length>300&&this.guidList.pop()}this.callback(t)},e}();Ln.MessageObserver=qn;var Vn={};!function(e){e.__esModule=!0,e.SocketTimeout=void 0,function(e){e[e.connect=1500]="connect",e[e.reconnectionDelayMax=3e3]="reconnectionDelayMax",e[e.commonQuerySingle=2500]="commonQuerySingle",e[e.commonQueryTotal=12e3]="commonQueryTotal",e[e.commonRequestSingle=1700]="commonRequestSingle",e[e.commonRequestTotal=12e3]="commonRequestTotal",e[e.commonInfiniteSingle=1700]="commonInfiniteSingle",e[e.commonInfiniteTotal=864e5]="commonInfiniteTotal"}(e.SocketTimeout||(e.SocketTimeout={}))}(Vn);var Hn={__esModule:!0,AnonymousUserIdRepository:void 0},zn=hn,Wn=Gt,Yn=function(){function e(){}return e.get=function(){var t=e.storage;if(null!==t){var n=t.get(e.ANONYMOUS_USER_ID_KEY);if(!zn.default.isEmpty(n))return n.toString()}return null},e.put=function(t){var n=e.storage;null!==n&&n.put(e.ANONYMOUS_USER_ID_KEY,t.toString())},e.storage=Wn.LocalStorageDispatcher.localStorage(),e.ANONYMOUS_USER_ID_KEY="goeasy-anonymous-user-id",e}();Hn.AnonymousUserIdRepository=Yn;var Jn={__esModule:!0,clientInfo:void 0},Xn=kt,Qn=Pt,Kn=function(){function e(){this.platform=Xn.PlatformDetector.currentPlatform(),this.framework=Qn.FrameworkDetector.currentFramework(),this.z=this.toZ()}return e.prototype.toZ=function(){for(var e=JSON.stringify({platform:this.platform,framework:this.framework}),t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);t+=String.fromCharCode(o+5)}return t},e}(),$n=new Kn;Jn.clientInfo=$n;var Zn={};!function(e){e.__esModule=!0,e.RocketTypes=void 0,function(e){e.authorize="authorize",e.manualDisconnect="manualDisconnect",e.subscribe="subscribe",e.unsubscribe="unsubscribe",e.publish="publish",e.ack="ack",e.historyMessages="historyMessages",e.hereNow="hereNow",e.hereNowByUserIds="hereNowByUserIds",e.imLastConversations="imLastConversations",e.markPrivateMessageAsRead="markPrivateMessageAsRead",e.markGroupMessageAsRead="markGroupMessageAsRead",e.imGroupOnlineCount="imGroupOnlineCount",e.imHereNow="imHereNow",e.imGroupHereNow="imGroupHereNow",e.publishIM="publishIM",e.subscribeUserPresence="subscribeUserPresence",e.unsubscribeUserPresence="unsubscribeUserPresence",e.subscribeGroupPresence="subscribeGroupPresence",e.unsubscribeGroupPresence="unsubscribeGroupPresence",e.removeConversation="removeConversation",e.topConversation="topConversation",e.imData="imData",e.subscribeGroups="subscribeGroups",e.unsubscribeGroup="unsubscribeGroup",e.IM_DELETE_MESSAGE="IM_DELETE_MESSAGE",e.IM_HISTORY="IM_HISTORY",e.IM_HISTORY_CHANGE="IM_HISTORY_CHANGE",e.IM_RECALL_MESSAGE="IM_RECALL_MESSAGE",e.IM_MARK_AS_READ="IM_MARK_AS_READ",e.RTC_ASK_NEW_TOKEN="RTC_ASK_NEW_TOKEN",e.RTC_DIAL="RTC_DIAL",e.RTC_ACCEPT="RTC_ACCEPT",e.RTC_ACCEPT_FAILED="RTC_ACCEPT_FAILED",e.RTC_MANUAL_END="RTC_MANUAL_END",e.RTC_CLIENT_BUSY="RTC_CLIENT_BUSY",e.RTC_TIMEOUT="RTC_TIMEOUT",e.RTC_CALL_DATA="RTC_CALL_DATA",e.CS_PENDING_CONVERSATION="CS_PENDING_CONVERSATION",e.CS_ACCEPT="CS_ACCEPT",e.CS_END="CS_END",e.CS_TRANSFER="CS_TRANSFER",e.CS_AGENTS="CS_AGENTS",e.CS_CUSTOMER_STATUS="CS_CUSTOMER_STATUS",e.CS_MY_TEAMS="CS_MY_TEAMS",e.CS_ONLINE="CS_ONLINE",e.CS_OFFLINE="CS_OFFLINE",e.CS_LIVE_SESSION="CS_LIVE_SESSION",e.CS_QUIT_LIVE="CS_QUIT_LIVE"}(e.RocketTypes||(e.RocketTypes={}))}(Zn);var eo={__esModule:!0,GNS:void 0},to=hn,no=Pt,oo=kt,ro=Nt,io=function(){function e(e){this.uniappPlugin=null,this.regIdPromise=null,this.onClickNotificationCallback=null,this.payloadAssemblers=new Array,this.allowNotification=e,this.supportNotification()&&(this.uniappPlugin=uni.requireNativePlugin("GoEasy-Uniapp"),this.uniappPlugin?this.regIdPromise=this.askRegId():console.warn("No GoEasy-Uniapp Native Plugin."))}return e.init=function(t){this.instance=new e(t)},e.prototype.addAssembler=function(e){this.payloadAssemblers.push(e)},e.prototype.assemblePayload=function(e){var t=this.payloadAssemblers.find((function(t){return t.support(e)}));return t?t.assemble(e):e},e.prototype.createLocalNotification=function(e,t,n){ro.uniApp.runningBackend()&&(n.g=1,"undefined"!=typeof plus&&plus.push.createMessage(t,JSON.stringify(n),{title:e}))},e.prototype.askRegId=function(){var e=this,t=null,n=0,o=function o(){return new Promise((function(r,i){e.uniappPlugin.regId((function(e){r(e)}),(function(r){if(!(1e6===r.data.code&&n<=10))return clearTimeout(t),i(r);t=setTimeout((function(){n++,e.regIdPromise=o()}),3500)}))}))}();return o},e.prototype.getRegIdPromise=function(){return this.regIdPromise},e.prototype.supportNotification=function(){var e=oo.PlatformDetector.currentPlatform(),t=no.FrameworkDetector.currentFramework();return this.allowNotification&&t===no.Framework.UNIAPP&&(e===oo.Platform.APP_ANDROID||e===oo.Platform.APP_IOS)},e.prototype.listenPlusClickNotification=function(){var e=this;plus.push.addEventListener("click",(function(t){if(t&&e.availableIntent(t.payload))try{var n="string"==typeof t.payload?JSON.parse(t.payload):t.payload,o=e.assemblePayload(n);plus.push.clear(),e.onClickNotificationCallback(o)}catch(e){}}))},e.prototype.availableIntent=function(e){return e&&Object.keys(e).length&&e.g&&1===parseInt(e.g)},e.prototype.getIntentData=function(){var e=this;this.uniappPlugin.getIntentData((function(t){if(e.availableIntent(t)){var n=e.assemblePayload(t),o=oo.PlatformDetector.currentPlatform();plus.push.clear(),o===oo.Platform.APP_ANDROID&&e.uniappPlugin.clearAll(),e.onClickNotificationCallback(n)}}))},e.prototype.listenClick=function(){this.listenPlusClickNotification();var e=oo.PlatformDetector.currentPlatform();this.uniappPlugin&&e===oo.Platform.APP_ANDROID&&this.getIntentData()},e.prototype.onClickNotification=function(e){if(this.supportNotification()){if(!to.default.isFunction(e))throw new Error("The arguments must be a function.");null===this.onClickNotificationCallback?(this.onClickNotificationCallback=e,this.listenClick()):console.warn("The onClickNotification event has been listened on. Please do not listen to it more than once.")}else console.warn("The current environment doesn't support or allowNotification is false.")},e}();eo.GNS=io,function(t){var n,o=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});t.__esModule=!0;var r=yn,i=mn,u=f,l=a,p=Ln,d=Bn,h=hn,y=Ut,m=Vn,v=s,g=kt,b=Hn,E=Jn,S=Zn,w=eo,_=function(e){function t(t,n){var o=e.call(this)||this;return o.ioSocket=null,o.sid=null,o.appKey=null,o.anonymous=!1,o.userId=null,o.userData=null,o.otp=null,o.artifactVersion="0.0.0",o.uri=null,o.ioOpts=null,o.allowNotification=!1,o.reconnectingTimes=0,o.messageObservers={},o.connectFailedObservers=[],o.connectingObservers=[],o.expiredReconnectedObservers=[],o.onConnectSuccess=d.default,o.onConnectFailed=d.default,o.onConnectProgress=d.default,o.setUriAndOpts(t),o.extendOptions(n),o.ioSocket=new r.default({onDisconnected:o.onIoDisconnected.bind(o),onReconnecting:o.onIoReconnecting.bind(o)}),o.ioSocket.addConnectedObserver(o.onIoReconnected.bind(o)),o.appKey=t.appkey,o.allowNotification=t.allowNotification,o.modules=t.modules,h.default.isEmpty(n.id)?(o.anonymous=!0,o.userId=b.AnonymousUserIdRepository.get()):o.userId=n.id.toString(),o.artifactVersion=v.default.version,o.addConnectedObserver(o.onConnectSuccess),o.addConnectFailedObserver(o.onConnectFailed),o.addConnectingObserver(o.onConnectProgress),o}return o(t,e),t.prototype.extendOptions=function(e){if(h.default.isFunction(e.onSuccess)&&(this.onConnectSuccess=e.onSuccess),h.default.isFunction(e.onFailed)&&(this.onConnectFailed=e.onFailed),h.default.isFunction(e.onProgress)&&(this.onConnectProgress=e.onProgress),h.default.isDef(e.data)&&!h.default.isObject(e.data))throw{code:400,content:"TypeError: data requires an object."};if((h.default.isDef(e.data)?String(e.data).length:0)>300){if(h.default.isObject(e)&&h.default.isFunction(e.onFailed))throw{code:400,content:"user.data-length limit 300 byte."}}else this.userData=e.data;if(h.default.isObject(e.wxmpId)){if(h.default.isEmpty(e.wxmpId.appid))throw{code:400,content:"wxmpId.appid is required."};if(h.default.isEmpty(e.wxmpId.openid))throw{code:400,content:"wxmpId.openid is required. requires string."}}else if(h.default.isPrimitive(e.wxmpId))throw{code:400,content:"TypeError: wxmpId requires an object."};h.default.isDef(e.wxmpId)&&(this.wxmpId=e.wxmpId),this.otp=e.otp||null},t.prototype.setUriAndOpts=function(e){var t=!0;if(g.PlatformDetector.currentPlatform()===g.Platform.BROWSER){var n="://"+y.goEasyDomainNumber.refreshNumber()+e.host,o=void 0;!0===e.supportOldBrowser?(o=["polling","websocket"],t=!1):o=["websocket"],!1!==e.forceTLS&&t?this.uri="https"+n+":443":this.uri="http"+n+":80",this.ioOpts={transports:o,timeout:m.SocketTimeout.connect}}else this.uri="https://wx-"+e.host+":443",this.ioOpts={transports:["websocket"],reconnectionDelayMax:m.SocketTimeout.reconnectionDelayMax}},t.prototype.onIoReconnected=function(){this.status===l.NetworkStatus.RECONNECTING&&this.authorize()},t.prototype.emit=function(t){e.prototype.emit.call(this,t)},t.prototype.doEmit=function(e,t,n){t.sid=this.sid,this.ioSocket.doEmit(e,t,n)},t.prototype.sendAck=function(e,t){this.ioSocket.io.emit(e,t)},t.prototype.connect=function(){var t=this;e.prototype.connect.call(this),this.onConnecting(),this.ioSocket.connect({uri:this.uri,opts:this.ioOpts});var n=w.GNS.instance;n&&n.supportNotification()&&n.getRegIdPromise()?n.getRegIdPromise().then((function(e){t.regId=e,t.authorize()})).catch((function(e){console.warn("Failed to register the Manufacturers Push service:"+JSON.stringify(e)),t.authorize()})):this.authorize()},t.prototype.disconnect=function(){var e=this;return new Promise((function(t,n){var o=function(){e.status=l.NetworkStatus.DISCONNECTED,e.ioSocket.disconnect(),t()};if(e.allowNotification){var r=new i.default({name:S.RocketTypes.manualDisconnect,params:{},permission:u.Permission.READ,singleTimeout:m.SocketTimeout.commonRequestSingle,totalTimeout:m.SocketTimeout.commonRequestTotal,fail:function(e){n(e)},success:o});e.emit(r)}else o()}))},t.prototype.authorize=function(){var e={appkey:this.appKey,userId:this.userId,userData:JSON.stringify(this.userData),otp:this.otp,artifactVersion:this.artifactVersion,sid:this.sid,allowNT:this.allowNotification,regId:this.regId,wxmpId:this.wxmpId,modules:this.modules,a:this.anonymous,z:E.clientInfo.z};JSON.stringify(e);var t=new i.default({name:S.RocketTypes.authorize,params:e,permission:u.Permission.NONE,singleTimeout:m.SocketTimeout.commonInfiniteSingle,totalTimeout:m.SocketTimeout.commonInfiniteTotal,success:this.onAuthorizeSuccess.bind(this),fail:this.onAuthorizeFailed.bind(this)});this.ioSocket.emit(t)},t.prototype.onConnecting=function(){this.notify(this.connectingObservers,this.reconnectingTimes)},t.prototype.onIoReconnecting=function(){this.reconnectingTimes++,this.status==l.NetworkStatus.CONNECTED||this.status==l.NetworkStatus.EXPIRED_RECONNECTED||this.status==l.NetworkStatus.RECONNECTING?this.status=l.NetworkStatus.RECONNECTING:this.status=l.NetworkStatus.CONNECTING,this.onConnecting()},t.prototype.onIoDisconnected=function(){this.status==l.NetworkStatus.DISCONNECTING&&(this.status=l.NetworkStatus.DISCONNECTED,this.notify(this.disconnectedObservers)),this.notify(this.disconnectedObservers)},t.prototype.onAuthorizeSuccess=function(e){!0===this.anonymous&&e.u&&(b.AnonymousUserIdRepository.put(e.u),this.userId=e.u),this.status===l.NetworkStatus.RECONNECTING?this.sid!==e.sid?(this.status=l.NetworkStatus.EXPIRED_RECONNECTED,this.notify(this.expiredReconnectedObservers)):this.status=l.NetworkStatus.RECONNECTED:(this.status=l.NetworkStatus.CONNECTED,this.sid=e.sid),e.enablePublish&&(this.permissions.find((function(e){return e==u.Permission.WRITE}))||this.permissions.push(u.Permission.WRITE)),e.enableSubscribe&&(this.permissions.find((function(e){return e==u.Permission.READ}))||this.permissions.push(u.Permission.READ)),this.reconnectingTimes=0,this.notify(this.connectedObservers)},t.prototype.onAuthorizeFailed=function(e){this.ioSocket.disconnect(),this.status=l.NetworkStatus.CONNECT_FAILED;var t={code:e.resultCode||408,content:e.content||"Host unreachable or timeout"};this.notify(this.connectFailedObservers,t)},t.prototype.addConnectingObserver=function(e){h.default.isFunction(e)&&this.connectingObservers.push(e)},t.prototype.addConnectFailedObserver=function(e){h.default.isFunction(e)&&this.connectFailedObservers.push(e)},t.prototype.addExpiredReconnectedObserver=function(e){h.default.isFunction(e)&&this.expiredReconnectedObservers.push(e)},t.prototype.addMessageObserver=function(e,t){var n=this;this.messageObservers[e]||(this.messageObservers[e]=[],this.ioSocket.io.on(e,(function(t){n.notifyMessageObservers(e,t)}))),this.messageObservers[e].push(new p.MessageObserver(t))},t.prototype.notifyMessageObservers=function(e,t){for(var n=this.messageObservers[e],o=0;o<n.length;o++)n[o].onMessage(e,t)},t}(c.default);t.default=_}(u);var so={__esModule:!0,ModuleTypes:void 0};so.ModuleTypes={IM:"IM",PUBSUB:"PUBSUB"};var ao={},uo={},co={};!function(e){e.__esModule=!0;var t=hn,n=function(){function e(){}return e.prototype.validateId=function(e,n){if(t.default.isEmpty(e))throw{code:400,content:" ".concat(n," is required.")};if(!t.default.isStringOrNumber(e))throw{code:400,content:"TypeError: ".concat(n," require string or number.")}},e.prototype.validateIdArray=function(e,n){if(!Array.isArray(e)||0===e.length)throw{code:400,content:"TypeError: ".concat(n," require array.")};if(e.length>300)throw{code:400,content:"".concat(n," is over max length 500.")};for(var o=0;o<e.length;o++){if(!t.default.isStringOrNumber(e[o]))throw{code:400,content:"TypeError: ".concat(n," item require string or number.")};if(t.default.isNumber(e[o])&&(e[o]=e[o].toString()),0==e[o].length)throw{code:400,content:"".concat(n," has empty item.")}}if(Array.from(new Set(e)).length<e.length)throw{code:400,content:"Duplicate element in ".concat(n)}},e.prototype.validateChannel=function(e,t){this.validateId(e,t)},e.prototype.validateChannelArray=function(e,t){this.validateIdArray(e,t)},e.prototype.validateChannelAndChannels=function(e,n){var o=!t.default.isEmpty(e),r=!t.default.isEmpty(n);if(!o&&!r)throw{code:400,content:"channel is required."};if(o&&r)throw{code:400,content:"subscribe to either channel or channels, not both."};o&&this.validateId(e,"channel"),r&&this.validateIdArray(n,"channels")},e.prototype.validateCallbackOptions=function(e){if(!t.default.isObject(e))throw{code:400,content:"bad parameters"}},e.prototype.validateNotification=function(e){if(t.default.isObject(e)){if(t.default.isEmpty(e.title))throw{code:400,content:"notification.title is required."};if(!t.default.isString(e.title))throw{code:400,content:"TypeError: notification.title requires string."};if(e.title.length>32)throw{code:400,content:"TypeError: notification.title over max length 32."};if(t.default.isEmpty(e.body))throw{code:400,content:"notification.body is required."};if(!t.default.isString(e.body))throw{code:400,content:"TypeError: notification.body must be string."};if(e.body.length>50)throw{code:400,content:"notification.body over max length 50."}}else if(t.default.isPrimitive(e))throw{code:400,content:"TypeError: notification requires an object."}},e.prototype.validateValIsEmpty=function(e,n){if(t.default.isUndef(e)||t.default.isEmpty(e))throw{code:400,content:"".concat(n," is empty")}},e.prototype.validateWXMPTemplateMsg=function(e){if(t.default.isObject(e)){if(!t.default.isString(e.template_id))throw{code:400,content:"template_id must be string."};if(!t.default.isEmpty(e.url)&&!t.default.isString(e.url))throw{code:400,content:"url must be string"};if(!(t.default.isEmpty(e.miniprogram)||t.default.isString(e.miniprogram.appid)&&t.default.isString(e.miniprogram.pagepath)))throw{code:400,content:"miniprogram.appid and miniprogram.pagepath must be strings."};if(!t.default.isObject(e.data))throw{code:400,content:"data requires an object."}}else if(t.default.isPrimitive(e))throw{code:400,content:"wxmpTemplateMsg must be an object."}},e}(),o=new n;e.default=o}(co);var fo={__esModule:!0,G:void 0},lo=function(){function e(){}return e.i=function(e){this.socket=e},e.s=function(){if(this.socket)return this.socket;throw new Error("Please connect first.")},e.u=function(){return this.s().userId},e.ud=function(){return this.s().userData},e}();fo.G=lo;var po={};!function(e){e.__esModule=!0,e.default=function e(t){if(null===t||"object"!==h(t)||"isActiveClone"in t)return t;var n=t instanceof Array?[]:{};for(var o in t)"object"===h(t[o])?n[o]=e(t[o]):n[o]=t[o];return n}}(po),function(e){e.__esModule=!0;var t=Bn,n=hn,o=vn,r=mn,i=f,s=Vn,a=Zn,u=co,c=fo,l=po,p=function(){function e(){}return e.prototype.publish=function(e){n.default.isFunction(e.onFailed)||(e.onFailed=t.default),n.default.isFunction(e.onSuccess)||(e.onSuccess=t.default),this.validate(e),e.channel=e.channel.toString();var u={channel:e.channel,content:e.message,nt:e.notification,at:e.accessToken,guid:o.default.get()};e.wxmpTemplateMsg&&(u.wxmpTemplateMsg=(0,l.default)(e.wxmpTemplateMsg),u.wxmpTemplateMsg.data=JSON.stringify(u.wxmpTemplateMsg.data));var f=new r.default({name:a.RocketTypes.publish,params:u,unique:!0,singleTimeout:s.SocketTimeout.commonRequestSingle,totalTimeout:s.SocketTimeout.commonRequestTotal,permission:i.Permission.WRITE,success:function(t){e.onSuccess({code:200,content:"ok"})},fail:function(t){e.onFailed({code:t.resultCode,content:t.content})}});c.G.s().emit(f)},e.prototype.validate=function(e){if(u.default.validateChannel(e.channel,"channel"),n.default.isEmpty(e.message))throw{code:400,content:"message is required."};if(!n.default.isString(e.message))throw{code:400,content:"TypeError: message requires string."};if(e.message.length>2500)throw{code:400,content:"Message over max length 2500."};e.wxmpTemplateMsg&&u.default.validateWXMPTemplateMsg(e.wxmpTemplateMsg),e.notification&&u.default.validateNotification(e.notification)},e}();e.default=p}(uo);var ho={},yo={__esModule:!0,Subscription:void 0},mo=function(){function e(e){this.channels=e.channels,this.accessToken=e.accessToken,this.onSuccess=e.onSuccess,this.onFailed=e.onFailed,this.onMessage=e.onMessage}return e.prototype.empty=function(){},e}();yo.Subscription=mo;var vo={};!function(e){e.__esModule=!0,e.RemoteEvents=void 0,function(e){e.message="message",e.imMessage="imMessage",e.userPresence="userPresence",e.groupPresence="groupPresence",e.IM_MSG_READ="IM_MSG_READ",e.IM_MSG_DELETED="IM_MSG_DELETED",e.IM_MSG_RECALLED="IM_MSG_RECALLED",e.RTC_RING_EVENT="RTC_RING_EVENT",e.RTC_CANCEL_RING="RTC_CANCEL_RING",e.RTC_REMOTE_USER_LEFT="RTC_REMOTE_USER_LEFT",e.RTC_CALL_END="RTC_CALL_END",e.CS_ONLINE_CHANGED="CS_ONLINE_CHANGED"}(e.RemoteEvents||(e.RemoteEvents={}))}(vo),ho.__esModule=!0,ho.Subscriber=void 0;var go=Bn,bo=hn,Eo=mn,So=f,wo=yo,_o=Vn,Co=Zn,Mo=vo,To=co,Io=eo,Ao=fo,Oo=function(){function e(){this.subscriptions=[],Io.GNS.instance.addAssembler(new(function(){function e(){}return e.prototype.assemble=function(e){return{channel:e.ch,content:e.ctt}},e.prototype.support=function(e){return!!e.ch},e}()))}return e.prototype.initialGoEasySocket=function(){Ao.G.s().addMessageObserver(Mo.RemoteEvents.message,this.onNewMessage.bind(this)),Ao.G.s().addExpiredReconnectedObserver(this.onExpiredReconnected.bind(this))},e.prototype.resubscribe=function(){var e=this.subscriptions.slice(0);this.subscriptions=[];for(var t=0;t<e.length;t++)0!=e[t].channels.length&&this.subscribe(e[t])},e.prototype.clearSubscriptions=function(){this.subscriptions=[]},e.prototype.onExpiredReconnected=function(){this.resubscribe()},e.prototype.onNewMessage=function(e){if(!(e.n.indexOf("_presence")>-1)){e.a&&Ao.G.s().sendAck("ack",{publishGuid:e.i});var t={time:e.t,channel:e.n,content:e.c};this.createNotification(e),this.findSubscriptionByChannel(t.channel).onMessage(t)}},e.prototype.createNotification=function(e){var t=Io.GNS.instance.supportNotification();if(bo.default.isObject(e.nt)&&t){var n={ch:e.n,ctt:e.c};Io.GNS.instance.createLocalNotification(e.nt.t,e.nt.c,n)}},e.prototype.formatOptions=function(e){this.formatCallback(e),bo.default.isFunction(e.onMessage)||(e.onMessage=go.default),e.channel&&(e.channel=e.channel.toString(),e.channels=[e.channel]),e.channels&&(e.channels=e.channels.toString().split(","))},e.prototype.formatCallback=function(e){bo.default.isFunction(e.onSuccess)||(e.onSuccess=go.default),bo.default.isFunction(e.onFailed)||(e.onFailed=go.default)},e.prototype.subscribe=function(e){var t=this;To.default.validateChannelAndChannels(e.channel,e.channels),this.formatOptions(e);var n=new Eo.default({name:Co.RocketTypes.subscribe,permission:So.Permission.READ,singleTimeout:_o.SocketTimeout.commonInfiniteSingle,totalTimeout:_o.SocketTimeout.commonInfiniteTotal,params:{channels:e.channels,accessToken:e.accessToken},success:function(){var n=new wo.Subscription({channels:e.channels,accessToken:e.accessToken,onSuccess:e.onSuccess,onFailed:e.onFailed,onMessage:e.onMessage});t.subscriptions.push(n),e.onSuccess({code:200,content:"ok"})},fail:function(t){e.onFailed({code:t.resultCode,content:t.content})}});Ao.G.s().emit(n)},e.prototype.unsubscribe=function(e){var t=this;if(To.default.validateChannel(e.channel,"channel"),e.channel=e.channel.toString(),this.findSubscriptionByChannel(e.channel)){var n=new Eo.default({name:Co.RocketTypes.unsubscribe,params:{channel:e.channel},permission:So.Permission.READ,singleTimeout:_o.SocketTimeout.commonRequestSingle,totalTimeout:_o.SocketTimeout.commonRequestTotal,success:function(){e.onSuccess({code:200,content:"ok"}),t.removeChannel(e.channel)},fail:function(t){e.onFailed({code:t.resultCode,content:t.content})}});Ao.G.s().emit(n)}else e.onFailed({code:400,content:"channel["+e.channel+"] is not subscribed"})},e.prototype.removeChannel=function(e){for(var t=0;t<this.subscriptions.length;t++)for(var n=this.subscriptions[t].channels,o=0;o<n.length;o++)if(n[o]==e){this.subscriptions[t].channels.splice(o,1);break}},e.prototype.findSubscriptionByChannel=function(e){for(var t=!1,n=null,o=this.subscriptions.length-1;o>=0;o--){for(var r=this.subscriptions[o].channels,i=0;i<r.length;i++)if(r[i]==e){t=!0,n=this.subscriptions[o];break}if(t)break}return n},e}();ho.Subscriber=Oo;var Ro={__esModule:!0,History:void 0},No=Bn,Po=hn,ko=mn,xo=f,Do=Vn,Uo=Zn,Fo=co,Go=fo,Lo=function(){function e(){}return e.prototype.get=function(e){Po.default.isFunction(e.onSuccess)||(e.onSuccess=No.default),Po.default.isFunction(e.onFailed)||(e.onFailed=No.default),Fo.default.validateChannel(e.channel,"channel"),e.channel=e.channel.toString();var t=new ko.default({name:Uo.RocketTypes.historyMessages,permission:xo.Permission.READ,params:e,singleTimeout:Do.SocketTimeout.commonQuerySingle,totalTimeout:Do.SocketTimeout.commonQueryTotal,success:function(t){e.onSuccess({code:t.resultCode||t.code||200,content:t.content})},fail:function(t){e.onFailed({code:t.resultCode||t.code,content:t.content})}});Go.G.s().emit(t)},e}();Ro.History=Lo;var Bo={},jo={__esModule:!0,PresenceSubscription:void 0},qo=function(e){this.channels=e.channels,this.onSuccess=e.onSuccess,this.onFailed=e.onFailed,this.onPresence=e.onPresence};jo.PresenceSubscription=qo,Bo.__esModule=!0,Bo.PresenceSubscriber=void 0;var Vo=Bn,Ho=hn,zo=mn,Wo=f,Yo=Vn,Jo=jo,Xo=Zn,Qo=vo,Ko=co,$o=fo,Zo=function(){function e(){this.presenters=[]}return e.prototype.initialGoEasySocket=function(){$o.G.s().addMessageObserver(Qo.RemoteEvents.message,this.onNewMessage.bind(this)),$o.G.s().addExpiredReconnectedObserver(this.onExpiredReconnected.bind(this))},e.prototype.resubscribe=function(){var e=this.presenters.slice(0);this.presenters=[];for(var t=0;t<e.length;t++){for(var n=0;n<e[t].channels.length;n++){var o=e[t].channels[n].split("_presence");e[t].channels[n]=o[0]}0!=e[t].channels.length&&this.subscribePresence(e[t])}},e.prototype.onExpiredReconnected=function(){this.resubscribe()},e.prototype.onNewMessage=function(e){if(-1!=e.n.indexOf("_presence")){var t=this.findPresenceByChannel(e.n);if(t){var n=JSON.parse(e.c);n.events=n.events.map((function(e){var t=e.userData?JSON.parse(e.userData):{};return{time:e.time,action:e.action,id:e.userId,data:t}})),t.onPresence(n)}}},e.prototype.formatOptions=function(e){this.formatCallback(e),Ho.default.isFunction(e.onPresence)||(e.onPresence=Vo.default),e.channel&&(e.channel=e.channel.toString(),e.channels=[e.channel]),e.channels&&(e.channels=e.channels.toString().split(","))},e.prototype.formatCallback=function(e){Ho.default.isFunction(e.onSuccess)||(e.onSuccess=Vo.default),Ho.default.isFunction(e.onFailed)||(e.onFailed=Vo.default)},e.prototype.subscribePresence=function(e){var t=this;Ko.default.validateChannelAndChannels(e.channel,e.channels),this.formatOptions(e),Array.isArray(e.channels)&&(e.channels=e.channels.map((function(e){return e+"_presence"})));var n=new zo.default({name:Xo.RocketTypes.subscribe,permission:Wo.Permission.READ,singleTimeout:Yo.SocketTimeout.commonInfiniteSingle,totalTimeout:Yo.SocketTimeout.commonInfiniteTotal,params:{channels:e.channels},success:function(){var n=new Jo.PresenceSubscription({channels:e.channels,onSuccess:e.onSuccess,onFailed:e.onFailed,onPresence:e.onPresence});t.presenters.push(n),e.onSuccess({code:200,content:"ok"})},fail:function(t){e.onFailed({code:t.resultCode,content:t.content})}});$o.G.s().emit(n)},e.prototype.unsubscribePresence=function(e){var t=this;if(this.formatCallback(e),Ho.default.isDef(e.channel))if(e.channel+="_presence",this.findPresenceByChannel(e.channel)){var n=new zo.default({name:Xo.RocketTypes.unsubscribe,params:{channel:e.channel},permission:Wo.Permission.READ,singleTimeout:Yo.SocketTimeout.commonRequestSingle,totalTimeout:Yo.SocketTimeout.commonRequestTotal,success:function(){e.onSuccess({code:200,content:"ok"}),t.removeChannel(e.channel)},fail:function(t){e.onFailed({code:t.resultCode,content:t.content})}});$o.G.s().emit(n)}else e.onFailed({code:400,content:"channel["+e.channel+"] is not subscribed"});else e.onFailed({code:400,content:"channel is required"})},e.prototype.removeChannel=function(e){for(var t=0;t<this.presenters.length;t++)for(var n=this.presenters[t].channels,o=0;o<n.length;o++)if(n[o]==e){this.presenters[t].channels.splice(o,1);break}},e.prototype.findPresenceByChannel=function(e){for(var t=!1,n=null,o=this.presenters.length-1;o>=0;o--){for(var r=this.presenters[o].channels,i=0;i<r.length;i++)if(r[i]==e){t=!0,n=this.presenters[o];break}if(t)break}return n},e}();Bo.PresenceSubscriber=Zo;var er={__esModule:!0,HereNow:void 0},tr=Bn,nr=hn,or=mn,rr=f,ir=Vn,sr=Zn,ar=co,ur=fo,cr=function(){function e(){}return e.prototype.byChannel=function(e){var t={channels:[],includeUsers:!1,distinct:!1};nr.default.isFunction(e.onSuccess)||(e.onSuccess=tr.default),nr.default.isFunction(e.onFailed)||(e.onFailed=tr.default),ar.default.validateChannelArray(e.channels,"channels"),t.channels=e.channels.toString().split(","),t.includeUsers=e.includeUsers||!1,t.distinct=e.distinct||!1;var n=new or.default({name:sr.RocketTypes.hereNow,permission:rr.Permission.READ,params:t,singleTimeout:ir.SocketTimeout.commonQuerySingle,totalTimeout:ir.SocketTimeout.commonQueryTotal,success:function(t){var n=t.content,o=n.channels;for(var r in o)if(o.hasOwnProperty(r)){var i=o[r];i.users&&(i.users=i.users.map((function(e){return e.data=e.data?JSON.parse(e.data):{},e})))}e.onSuccess({code:t.resultCode||t.code||200,content:n})},fail:function(t){e.onFailed({code:t.resultCode||t.code||200,content:t.content})}});ur.G.s().emit(n)},e.prototype.byUserId=function(e){var t={userIds:[],distinct:!0};nr.default.isFunction(e.onSuccess)||(e.onSuccess=tr.default),nr.default.isFunction(e.onFailed)||(e.onFailed=tr.default),ar.default.validateIdArray(e.userIds,"userIds"),t.userIds=e.userIds.toString().split(","),0==e.distinct&&(t.distinct=!1);var n=new or.default({name:sr.RocketTypes.hereNowByUserIds,permission:rr.Permission.READ,params:t,singleTimeout:ir.SocketTimeout.commonQuerySingle,totalTimeout:ir.SocketTimeout.commonQueryTotal,success:function(t){var n=t.content;n=n.map((function(e){return{id:e.userId,data:e.userData?JSON.parse(e.userData):{}}})),e.onSuccess({code:t.resultCode||t.code||200,content:n})},fail:function(t){e.onFailed({code:t.resultCode||t.code||200,content:t.content})}});ur.G.s().emit(n)},e}();er.HereNow=cr;var fr={__esModule:!0,CallbackUtils:void 0},lr=hn,pr=function(){function e(){}return e.onSuccess=function(e,t){lr.default.isFunction(e.onSuccess)&&e.onSuccess(t)},e.onFailed=function(e,t){if(!lr.default.isObject(e)||!lr.default.isFunction(e.onFailed))throw t;e.onFailed(t)},e}();fr.CallbackUtils=pr,ao.__esModule=!0,ao.PubSub=void 0;var dr=uo,hr=ho,yr=Ro,mr=Bo,vr=er,gr=fr,br=a,Er=so,Sr=fo,wr=function(){function e(e){this.subscriber=new hr.Subscriber,this.options=e}return e.init=function(t){e.instance=new e(t)},e.prototype.initialGoEasySocket=function(){this.publisher=new dr.default,this.histories=new yr.History,this.presence=new mr.PresenceSubscriber,this.hereNows=new vr.HereNow,this.subscriber.initialGoEasySocket(),this.presence.initialGoEasySocket()},e.prototype.initialBeforeConnect=function(){this.subscriber.clearSubscriptions()},e.prototype.catch=function(e,t){try{this.validateOptions(),e()}catch(e){gr.CallbackUtils.onFailed(t,e)}},e.prototype.validateOptions=function(){if(!Sr.G.s()||Sr.G.s().getStatus()!==br.NetworkStatus.CONNECTED)throw Error("Please call connect() first.");if(!this.options.modules||!this.options.modules.includes(Er.ModuleTypes.PUBSUB))throw{code:400,content:"Invalid options: module '".concat(Er.ModuleTypes.PUBSUB,"' is not enabled")}},e.prototype.publish=function(e){var t=this;this.catch((function(){t.publisher.publish(e)}),e)},e.prototype.subscribe=function(e){var t=this;this.catch((function(){t.subscriber.subscribe(e)}),e)},e.prototype.unsubscribe=function(e){var t=this;this.catch((function(){t.subscriber.unsubscribe(e)}),e)},e.prototype.subscribePresence=function(e){var t=this;this.catch((function(){t.presence.subscribePresence(e)}),e)},e.prototype.unsubscribePresence=function(e){var t=this;this.catch((function(){t.presence.unsubscribePresence(e)}),e)},e.prototype.history=function(e){var t=this;this.catch((function(){t.histories.get(e)}),e)},e.prototype.hereNow=function(e){var t=this;this.catch((function(){t.hereNows.byChannel(e)}),e)},e.prototype.hereNowByUserIds=function(e){var t=this;this.catch((function(){t.hereNows.byUserId(e)}),e)},e}();ao.PubSub=wr;var _r={},Cr={},Mr={};!function(e){var t;e.__esModule=!0,e.ImApiEvents=void 0,(t=e.ImApiEvents||(e.ImApiEvents={})).PRIVATE_MESSAGE_RECEIVED="PRIVATE_MESSAGE_RECEIVED",t.GROUP_MESSAGE_RECEIVED="GROUP_MESSAGE_RECEIVED",t.SYSTEM_MESSAGE_RECEIVED="SYSTEM_MESSAGE_RECEIVED",t.CONVERSATIONS_UPDATED="CONVERSATIONS_UPDATED",t.USER_PRESENCE="USER_PRESENCE",t.GROUP_PRESENCE="GROUP_PRESENCE",t.MESSAGE_DELETED="MESSAGE_DELETED",t.MESSAGE_READ="MESSAGE_READ",t.MESSAGE_RECALLED="MESSAGE_RECALLED",t.CS_MESSAGE_RECEIVED="CS_MESSAGE_RECEIVED",t.PENDING_CONVERSATIONS_UPDATED="PENDING_CONVERSATIONS_UPDATED"}(Mr);var Tr={};!function(e){var t;e.__esModule=!0,e.RTCApiEvents=void 0,(t=e.RTCApiEvents||(e.RTCApiEvents={})).RING="RING",t.USER_ACCEPTED="USER_ACCEPTED",t.CALL_ENDED="CALL_ENDED",t.USER_QUITED="USER_QUITED"}(Tr),Cr.__esModule=!0,Cr.ApiEventCenter=void 0;var Ir=Mr,Ar=Tr,Or=P.exports,Rr=hn,Nr=function(){function e(){this.emitter=new Or}return e.prototype.on=function(e,t){if(!Rr.default.isString(e))throw Error("event require a string.");if(!Rr.default.isDef(Ir.ImApiEvents[e])&&!Rr.default.isDef(Ar.RTCApiEvents[e]))throw Error("An event that is not defined");if(!Rr.default.isFunction(t))throw Error("callback must be a function");this.emitter.on(e,t)},e.prototype.fire=function(e,t){this.emitter.emit(e,t)},e.prototype.off=function(e,t){this.emitter.off(e,t)},e}();Cr.ApiEventCenter=Nr;var Pr={},kr={},xr={},Dr={};!function(e){e.__esModule=!0;var t=function(){function e(){}return e.prototype.upload=function(e,t){throw Error("Not implementation yet.")},e}();e.default=t}(Dr);var Ur,Fr=e&&e.__extends||(Ur=function(e,t){return Ur=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ur(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ur(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});xr.__esModule=!0,xr.uniAppFileUploader=void 0;var Gr=new(function(e){function t(){return e.call(this)||this}return Fr(t,e),t.prototype.upload=function(e,t){var n=this;try{return new Promise((function(o,r){uni.uploadFile({url:e.host,filePath:n.getTempFilePath(e),name:"file",formData:e.parameters,success:function(t){if(200===t.statusCode){var n=e.payload;n.message=t.errMsg,o({code:200,content:n})}else r({code:t.statusCode,content:t.errMsg})},fail:function(e){r({code:500,content:e.errMsg})}}).onProgressUpdate((function(e){t&&t(e)}))}))}catch(e){return new Promise((function(t,n){n({code:500,content:e})}))}},t.prototype.getTempFilePath=function(e){var t=e.file;return t.tempFilePath||t.fullPath||t.path},t}(Dr.default));xr.uniAppFileUploader=Gr;var Lr={},Br=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Lr.__esModule=!0,Lr.wxFileUploader=void 0;var jr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Br(t,e),t.prototype.upload=function(e,t){var n=this;try{return new Promise((function(o,r){wx.uploadFile({url:e.host,filePath:n.getTempFilePath(e),name:"file",formData:e.parameters,success:function(t){if(200===t.statusCode){var n=e.payload;n.message=t.errMsg,o({code:200,content:n})}else r({code:t.statusCode,content:t.errMsg})},fail:function(e){r({code:500,content:e.errMsg})}}).onProgressUpdate((function(e){t&&t(e)}))}))}catch(e){return new Promise((function(t,n){n({code:500,content:e})}))}},t.prototype.getTempFilePath=function(e){var t=e.file||e.fileRes;return t.path||t.tempFilePath},t}(Dr.default),qr=new jr;Lr.wxFileUploader=qr;var Vr={},Hr=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Vr.__esModule=!0,Vr.htmlFileUploader=void 0;var zr=new(function(e){function t(){return e.call(this)||this}return Hr(t,e),t.prototype.upload=function(e,t){try{return new Promise((function(n,o){var r=new XMLHttpRequest;for(var i in r.open("post",e.host,!0),e.headers)r.setRequestHeader(i,e.headers[i]);r.upload.onprogress=function(e){t&&t(e)},r.upload.onloadstart=function(e){t&&t(e)},r.upload.onloadend=function(e){t&&t(e)};var s=new FormData;for(var a in e.parameters)"fileRes"==a?s.append("file",e.parameters[a]):s.append(a,e.parameters[a]);r.send(s),r.onreadystatechange=function(){if(4==r.readyState)if(r.status>=200&&r.status<300||304==r.status){var t=e.payload;t.message=r.responseText,n({code:200,content:t})}else o({code:r.status,content:r.responseText})}}))}catch(e){return new Promise((function(t,n){n({code:500,content:e})}))}},t}(Dr.default));Vr.htmlFileUploader=zr,kr.__esModule=!0,kr.fileUploader=kr.FileUploader=void 0;var Wr=xr,Yr=Lr,Jr=Vr,Xr=Pt,Qr=function(){function e(){var e;this.uploader=((e={})[Xr.Framework.UNIAPP]=Wr.uniAppFileUploader,e[Xr.Framework.NATIVE_APPLET_WX]=Yr.wxFileUploader,e[Xr.Framework.UNKNOWN]=Jr.htmlFileUploader,e)}return e.prototype.upload=function(e,t){var n=Xr.FrameworkDetector.currentFramework();return this.uploader[n].upload(e,t)},e}();kr.FileUploader=Qr;var Kr=new Qr;kr.fileUploader=Kr;var $r={},Zr={},ei={};!function(e){e.__esModule=!0,e.OssType=void 0,function(e){e.aliYun="ALI",e.qiNiu="QN"}(e.OssType||(e.OssType={}))}(ei);var ti={},ni={};!function(e){e.__esModule=!0;var t=function(e,t,n,o,r){this.host=e,this.headers=t,this.parameters=n,this.file=o,this.payload=r};e.default=t}(ni);var oi={};!function(e){e.__esModule=!0;var t=function(){function e(){}return e.prototype.build=function(e,t,n){},e.prototype.newFileName=function(e){return e&&e.newFilename||""},e}();e.default=t}(oi);var ri={};!function(e){e.__esModule=!0,e.MessageType=void 0,function(e){e.TEXT="text",e.IMAGE="image",e.FILE="file",e.VIDEO="video",e.AUDIO="audio"}(e.MessageType||(e.MessageType={}))}(ri);var ii=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();ti.__esModule=!0,ti.aliYunOSSRequestBuilder=ti.AliYunOSSRequestBuilder=void 0;var si=ni,ai=ri,ui=function(e){function t(){return e.call(this)||this}return ii(t,e),t.prototype.url=function(e){return e.host+"/"+e.dir+"/"+this.newFileName(e)},t.prototype.build=function(e,t,n){var o;o={key:e.dir+"/"+this.newFileName(e),OSSAccessKeyId:e.accessKeyId,policy:e.policy,signature:e.signature,success_action_status:"200",fileRes:t},ai.MessageType.FILE===n&&(o={key:e.dir+"/"+this.newFileName(e),OSSAccessKeyId:e.accessKeyId,policy:e.policy,signature:e.signature,success_action_status:"200","Content-Disposition":"attachment;filename="+t.name,fileRes:t});var r={newFileName:this.newFileName(e),url:this.url(e)};return new si.default(e.host,null,o,t,r)},t}(oi.default);ti.AliYunOSSRequestBuilder=ui;var ci=new ui;ti.aliYunOSSRequestBuilder=ci;var fi={},li=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();fi.__esModule=!0,fi.qiNiuYunOSSRequestBuilder=void 0;var pi=ni,di=new(function(e){function t(){return e.call(this)||this}return li(t,e),t.prototype.url=function(e){return e.downloadUrl},t.prototype.build=function(e,t){var n={key:this.newFileName(e),token:e.token,file:t},o={newFileName:this.newFileName(e),url:this.url(e)};return new pi.default(e.host,null,n,t,o)},t}(oi.default));fi.qiNiuYunOSSRequestBuilder=di,Zr.__esModule=!0,Zr.OSSRequestFactory=void 0;var hi=ei,yi=ti,mi=fi,vi=function(){function e(e){return e===hi.OssType.aliYun?yi.aliYunOSSRequestBuilder:mi.qiNiuYunOSSRequestBuilder}return e.prototype.build=function(e,t,n){},e}();Zr.OSSRequestFactory=vi;var gi={};!function(e){e.__esModule=!0;var t=mn,n=f,o=Vn,r=fo,i=function(){function e(){}return e.prototype.resolve=function(e){return new Promise((function(i,s){var a=new t.default({name:"uploadToken",params:{filename:e},permission:n.Permission.WRITE,singleTimeout:o.SocketTimeout.commonRequestSingle,totalTimeout:o.SocketTimeout.commonRequestTotal,fail:function(e){s(e)},success:function(e){200===e.code?i(e):s(e)}});r.G.s().emit(a)}))},e}();e.default=i}(gi),function(e){e.__esModule=!0;var t=Zr,n=gi,o=function(){function e(){this.uploadTokenResolver=new n.default}return e.prototype.build=function(e,n,o){var r=this;return new Promise((function(i,s){r.uploadTokenResolver.resolve(n).then((function(n){var r=n.content;i(new t.OSSRequestFactory(r.vendor).build(r,e,o))})).catch((function(e){s(e)}))}))},e}();e.default=o}($r),Pr.__esModule=!0,Pr.GoEasyUploader=void 0;var bi=kr,Ei=$r,Si=function(){function e(){this.requestBuilder=new Ei.default,this.fileUploader=bi.fileUploader}return e.prototype.upload=function(e,t,n,o){var r=this;return new Promise((function(i,s){r.requestBuilder.build(e,t,o).then((function(e){i(r.doUpload(e,n))})).catch((function(e){s(e)}))}))},e.prototype.customizeUpload=function(e,t){this.doUpload(e,t)},e.prototype.doUpload=function(e,t){return this.fileUploader.upload(e,t)},e}();Pr.GoEasyUploader=Si;var wi={},_i={},Ci={},Mi={__esModule:!0,AbstractPayloadImprover:void 0},Ti=function(){};Mi.AbstractPayloadImprover=Ti;var Ii=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Ci.__esModule=!0,Ci.FileMessagePayloadImprover=void 0;var Ai=Pr,Oi=ri,Ri=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goEasyUploader=new Ai.GoEasyUploader,t}return Ii(t,e),t.prototype.improve=function(e){var t=this,n=e.message;return new Promise((function(e,o){var r,i=n.buildOptions.createOptions;r=n.type===Oi.MessageType.VIDEO?n.payload.video.name:n.payload.name,t.goEasyUploader.upload(i.file,r,i.onProgress,n.type).then((function(o){t.setPayload(o,n),e()})).catch((function(e){o(e)}))}))},t.prototype.setPayload=function(e,t){var n=e.content,o=void 0===n?{}:n;t.payload.url=o.url},t}(Mi.AbstractPayloadImprover);Ci.FileMessagePayloadImprover=Ri;var Ni={},Pi=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Ni.__esModule=!0,Ni.VideoMessagePayloadImprover=void 0;var ki=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pi(t,e),t.prototype.setPayload=function(e,t){e.content;var n=t.payload,o="?x-oss-process=video/snapshot,t_0000,f_jpg,w_"+n.video.width+",m_fast,ar_auto";n.video.url=e.content.url,n.thumbnail.url=e.content.url+o,n.video.name=e.content.newFileName},t}(Ci.FileMessagePayloadImprover);Ni.VideoMessagePayloadImprover=ki,_i.__esModule=!0,_i.PayloadImprover=void 0;var xi=Ci,Di=Ni,Ui=ri,Fi=function(){function e(){var e;this.improvers=((e={})[Ui.MessageType.FILE]=new xi.FileMessagePayloadImprover,e[Ui.MessageType.AUDIO]=new xi.FileMessagePayloadImprover,e[Ui.MessageType.IMAGE]=new xi.FileMessagePayloadImprover,e[Ui.MessageType.VIDEO]=new Di.VideoMessagePayloadImprover,e)}return e.prototype.improve=function(e){var t=this.improvers[e.message.type];return t?t.improve(e):Promise.resolve()},e}();_i.PayloadImprover=Fi;var Gi={};!function(e){e.__esModule=!0;var t=ri,n=s,o=po,r=function(){function e(e,t,r,i,s){this.validate(e),this.mt=e.type,this.to=t.id.toString(),this.d=JSON.stringify(t.data),this.p=JSON.stringify(e.payload),r&&(this.nt=r),s&&(this.at=s),i&&(this.wxmpTemplateMsg=(0,o.default)(i),this.wxmpTemplateMsg.data=JSON.stringify(this.wxmpTemplateMsg.data));var a=t.type;if(this.t=a,a===n.Scene.CS){var u=e;this.tid=u.teamId}this.guid=e.messageId}return e.prototype.validate=function(e){if(e.type===t.MessageType.TEXT&&JSON.stringify(e.payload).length>3072)throw Error("message-length limit 3kb")},e}();e.default=r}(Gi);var Li={},Bi={__esModule:!0,EmitterEventDriver:void 0},ji=P.exports,qi=function(){function e(){this.emitter=new ji}return e.prototype.on=function(e,t){return this.emitter.on(e,t),this},e.prototype.once=function(e,t){return this.emitter.once(e,t),this},e.prototype.off=function(e,t){return this.emitter.off(e,t),this},e.prototype.fire=function(e,t){return this.emitter.emit(e,t),this},e}();Bi.EmitterEventDriver=qi,Li.__esModule=!0,Li.GoEasyEventCenter=void 0;var Vi=Bi,Hi=function(){function e(){}return e.initial=function(){this.eventDriver=new Vi.EmitterEventDriver},e.on=function(e,t){this.eventDriver.on(e,t)},e.off=function(e,t){this.eventDriver.off(e,t)},e.once=function(e,t){this.eventDriver.once(e,t)},e.fire=function(e,t){this.eventDriver.fire(e,t)},e}();Li.GoEasyEventCenter=Hi;var zi={};!function(e){var t;e.__esModule=!0,e.IM_INTERNAL_EVENTS=void 0,(t=e.IM_INTERNAL_EVENTS||(e.IM_INTERNAL_EVENTS={})).MESSAGE_SENDING="IM_INTERNAL_MESSAGE_SENDING",t.MESSAGE_SEND_SUCCESS="IM_INTERNAL_MESSAGE_SEND_SUCCESS",t.MESSAGE_SEND_FAILED="IM_INTERNAL_MESSAGE_SEND_FAILED",t.MESSAGE_RECEIVED="IM_INTERNAL_MESSAGE_RECEIVED",t.MAX_MESSAGE_CHANGED="IM_INTERNAL_MAX_MESSAGE_CHANGED",t.UNREAD_AMOUNT_CHANGED="IM_INTERNAL_UNREAD_MESSAGE_CHANGED",t.CS_ONLINE_SUCCESS="CS_ONLINE_SUCCESS",t.CS_OFFLINE_SUCCESS="CS_OFFLINE_SUCCESS",t.CS_ACCEPTED="CS_ACCEPTED",t.CS_ENDED="CS_ENDED",t.CS_TRANSFER="CS_TRANSFER",t.CS_AGENT_MESSAGE_RECEIVED="CS_AGENT_MESSAGE_RECEIVED"}(zi);var Wi={__esModule:!0,AbstractMessage:void 0},Yi=fo,Ji=function(){function e(){}return e.prototype.clearUseLessAttribute=function(){delete this.buildOptions},e.prototype.isOtherSent=function(){return this.senderId!==Yi.G.u()},e.prototype.getToData=function(){return this.buildOptions.createOptions.to.data},e}();Wi.AbstractMessage=Ji,function(e){e.__esModule=!0;var t=mn,n=f,o=Vn,r=_i,i=Gi,a=Li,u=zi,c=s,l=Wi,p=Zn,d=fo,h=fr,y=function(){function e(){this.payloadImprover=new r.PayloadImprover}return e.prototype.send=function(e){var t=this;this.validate(e);var n=e.message,o=e.accessToken,r=n.buildOptions,i=r.createOptions,s=i.notification,a=i.wxmpTemplateMsg,u=i.to;u.data||(u.data={}),n.status=c.MessageStatus.SENDING;var f=r.complete,l=this.payloadImprover.improve(e);Promise.all([f,l]).then((function(){t.doSend(n,u,s,a,o,e)})).catch((function(t){n.status=c.MessageStatus.FAIL,h.CallbackUtils.onFailed(e,{code:t.code||400,content:t.content||t})}))},e.prototype.doSend=function(e,r,s,f,l,y){var m=new i.default(e,r,s,f,l);a.GoEasyEventCenter.fire(u.IM_INTERNAL_EVENTS.MESSAGE_SENDING,e);var v=new t.default({name:p.RocketTypes.publishIM,params:m,unique:!0,permission:n.Permission.WRITE,singleTimeout:o.SocketTimeout.commonRequestSingle,totalTimeout:o.SocketTimeout.commonRequestTotal,fail:function(t){e.status=c.MessageStatus.FAIL,a.GoEasyEventCenter.fire(u.IM_INTERNAL_EVENTS.MESSAGE_SEND_FAILED,e),h.CallbackUtils.onFailed(y,{code:t.resultCode,content:t.content})},success:function(t){if(e.status=c.MessageStatus.SUCCESS,e.timestamp=t.content.timestamp,e.scene()===c.Scene.CS){var n=e;n.customerId()!==d.G.u()&&(n.sessionId=t.content.sessionId)}e.clearUseLessAttribute(),a.GoEasyEventCenter.fire(u.IM_INTERNAL_EVENTS.MESSAGE_SEND_SUCCESS,e),h.CallbackUtils.onSuccess(y,e)}});d.G.s().emit(v)},e.prototype.validate=function(e){var t=e.message;if(!(t instanceof l.AbstractMessage))throw new Error("it is invalid message");if(t.status!==c.MessageStatus.NEW)throw new Error("Please create a new message, a message can only be sent once")},e}();e.default=y}(wi);var Xi={},Qi={},Ki={},$i={},Zi={},es={},ts={__esModule:!0,SortedInserter:void 0},ns=function(){function e(){}return e.prototype.insert=function(e,t){var n=this.binarySearch(e,t);if(n>=0)e.splice(n,1,t);else{var o=-n-1;e.splice(o,0,t)}},e.prototype.binarySearch=function(e,t){for(var n=0,o=e.length-1;n<=o;){var r=o+n>>1,i=this.compare(t,e[r]);if(i>0)n=r+1;else{if(!(i<0))return r;o=r-1}}return-n-1},e}();ts.SortedInserter=ns,function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();t.__esModule=!0;var o=s,r=hn,i=ts,a=function(){function e(e){this.messages=new Array,this.allLoaded=!1,this.target=e}return e.prototype.all=function(){return this.messages},e.prototype.sliceOverLengthMessages=function(){this.messages.length>e.CACHE_MAX_LENGTH&&(this.messages=this.messages.slice(-e.CACHE_MAX_LENGTH),!0===this.allLoaded&&(this.allLoaded=!1))},e.prototype.getMaxMessage=function(){return this.messages[this.messages.length-1]},e.prototype.loadLocalMessages=function(e,t){var n=[],o=this.messages.length;if(t){if(o>0){var r=this.messages[0].timestamp,i=this.messages[o-1].timestamp;if(t>=r&&t<=i)for(var s=o-1;s>=0;s--){var a=this.messages[s];if(a.timestamp<t){if(!(n.length<e))break;n.unshift(a)}}}}else n=this.messages.slice(-e);return n},e.prototype.cacheServerMessages=function(t,n){var o=this.messages[0],r=this.messages.length;this.messages.length<e.CACHE_MAX_LENGTH&&(!t.lastTimestamp||r>0&&o.timestamp===t.lastTimestamp)&&(this.messages=n.concat(this.messages),n.length<t.limit&&(this.allLoaded=!0))},e.prototype.findMessageByTime=function(e){return this.messages.find((function(t){return e===t.timestamp}))},e.prototype.findMessagesByTimes=function(e){var t=this,n=[];return e.forEach((function(e){var o=t.findMessageByTime(e);r.default.isDef(o)&&n.push(o)})),n},e.prototype.existsMessage=function(e){return this.findMessageIndexById(e)>-1},e.prototype.findMessageIndexById=function(e){return this.messages.findIndex((function(t){return e===t.messageId}))},e.prototype.deleteMessage=function(e){var t=this.findMessageIndexById(e);t>=0&&this.messages.splice(t,1)},e.prototype.recallMessages=function(e){var t=this;e.forEach((function(e){var n=t.findMessageByTime(e.timestamp);r.default.isDef(n)&&(n.recalled=!0),e.recalled=!0}))},e.prototype.isEmpty=function(){return 0===this.messages.length},e.prototype.deleteMessages=function(e){var t=this;e.forEach((function(e){t.deleteMessage(e.messageId)}))},e.prototype.saveMessage=function(t){e.sortedInserter.insert(this.messages,t),this.sliceOverLengthMessages()},e.prototype.maxSuccessMessageTime=function(){for(var e=this.messages.length-1;e>=0;e--)if(this.messages[e].status===o.MessageStatus.SUCCESS)return this.messages[e].timestamp;return 0},e.prototype.minTime=function(){return this.isEmpty()?0:this.messages[0].timestamp},e.prototype.correctPosition=function(e){this.deleteMessage(e.messageId),this.saveMessage(e)},e.CACHE_MAX_LENGTH=200,e.sortedInserter=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.compare=function(e,t){var n=e.timestamp-t.timestamp;return n>0?1:0===n?0:-1},t}(i.SortedInserter)),e}();t.default=a}(es);var os={},rs={},is={__esModule:!0,Target:void 0},ss=s,as=hn,us=fo,cs=function(){function e(e,t,n){this.scene=e,this.id=t,as.default.isDef(n)&&(this.teamId=n)}return e.prototype.toString=function(){return ss.Scene.PRIVATE===this.scene||ss.Scene.GROUP===this.scene?this.scene+"#"+this.id:this.scene+"#"+this.id+"#"+this.teamId},e.prototype.customerId=function(){if(ss.Scene.CS===this.scene)return this.id===this.teamId?us.G.u():this.id},e.byScene=function(t,n,o){return new e(t,n,o)},e.byIMMessage=function(t){var n,o,r=t.scene();if(r===ss.Scene.PRIVATE){var i=t.senderId,s=t.targetId();o=us.G.u()===i?s:i}else if(r===ss.Scene.GROUP)o=t.targetId();else{if(r!==ss.Scene.CS)throw{code:400,content:"scene ".concat(r," not exists")};o=t.targetId(),n=t.teamId}return new e(r,o,n)},e.byMessageReadRemoteEvent=function(t){var n,o=t.scene,r=t.targetId,i=t.markerId,s=t.teamId;return o===ss.Scene.PRIVATE?n=us.G.u()===i?r:i:o===ss.Scene.GROUP?n=r:o===ss.Scene.CS&&(n=r===s?i===us.G.u()?s:i:i===us.G.u()?r:s),new e(o,n,s)},e.byIMMessageDeletedEvent=function(t){var n=t.scene,o=t.deleterId;return n===ss.Scene.PRIVATE?new e(n,us.G.u()===o?t.targetId:o):n===ss.Scene.GROUP?new e(n,t.targetId):void 0},e.byConversationDTO=function(e){var t=e.lastMessage;return this.byIMMessage(t)},e.byRemoteRecallEvent=function(t){var n;if(t.scene===ss.Scene.PRIVATE){var o=t.conversationId.split(":",2);n=o[0]===us.G.u()?o[1]:o[0]}else n=t.conversationId;return new e(t.scene,n)},e}();is.Target=cs,rs.__esModule=!0,rs.DeleteMessageRequest=void 0;var fs=s,ls=is,ps=function(e){var t=this;this.times=new Array;var n=e[0],o=ls.Target.byIMMessage(n);this.scene=o.scene,this.targetId=o.id,e.forEach((function(e){e.status===fs.MessageStatus.SUCCESS&&t.times.push(e.timestamp)})),this.times.sort((function(e,t){return e<t?-1:e==t?0:1}))};rs.DeleteMessageRequest=ps,function(e){e.__esModule=!0;var t=s,n=rs,o=mn,r=f,i=Vn,a=Zn,u=fo,c=function(){function e(){}return e.deleteServerMessages=function(e){var t=new n.DeleteMessageRequest(e);return t.times.length<0?Promise.resolve():new Promise((function(e,n){var s=new o.default({name:a.RocketTypes.IM_DELETE_MESSAGE,params:t,permission:r.Permission.WRITE,singleTimeout:i.SocketTimeout.commonQuerySingle,totalTimeout:i.SocketTimeout.commonQueryTotal,success:function(t){200===t.code?e(t):n(t)},fail:function(e){n(e)}});u.G.s().emit(s)}))},e.validate=function(e){for(var n=e.messages,o=0;o<n.length;o++){var r=n[o];if(r.status===t.MessageStatus.SENDING)throw{code:400,content:"message["+o+"] is '"+r.status+"' and cannot be deleted"}}},e}();e.default=c}(os);var ds={},hs={__esModule:!0,RecallMessageRequest:void 0},ys=is,ms=function(e){var t=this;this.times=new Array;var n=e[0],o=ys.Target.byIMMessage(n);this.scene=o.scene,this.targetId=o.id,e.forEach((function(e){t.times.push(e.timestamp)})),this.times.sort((function(e,t){return e<t?-1:e==t?0:1}))};hs.RecallMessageRequest=ms,function(e){e.__esModule=!0;var t=s,n=hs,o=mn,r=f,i=Vn,a=Zn,u=fo,c=function(){function e(){}return e.recallServerMessages=function(e){var t=new n.RecallMessageRequest(e);return 0===t.times.length?Promise.resolve():new Promise((function(e,n){var s=new o.default({name:a.RocketTypes.IM_RECALL_MESSAGE,params:t,permission:r.Permission.WRITE,singleTimeout:i.SocketTimeout.commonRequestSingle,totalTimeout:i.SocketTimeout.commonRequestTotal,fail:function(e){n(e)},success:function(t){200===t.code?e(t):n(t)}});u.G.s().emit(s)}))},e.validate=function(e){for(var n=e.messages,o=0;o<n.length;o++){var r=n[o];if(r.status!==t.MessageStatus.SUCCESS)throw{code:400,content:"message["+o+"] is '"+r.status+"' and cannot be recalled"};if(r.recalled)throw{code:400,content:"message["+o+"] has been recalled"};if(r.senderId!==u.G.u())throw{code:400,content:"it is not allowed to recall messages sent by others"}}},e}();e.default=c}(ds);var vs={},gs={};!function(e){e.__esModule=!0;var t=function(e,t,n,o,r){this.scene=e,this.id=t,this.after=n,this.min=o,this.teamId=r};e.default=t}(gs);var bs={__esModule:!0,ReadMessageMarkRequest:void 0},Es=function(e,t,n,o){this.id=e,this.scene=t,this.lastTimestamp=n,this.teamId=o};bs.ReadMessageMarkRequest=Es;var Ss={},ws={},_s=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();ws.__esModule=!0,ws.PrivateMessage=void 0;var Cs=s,Ms=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.read=!1,t}return _s(t,e),t.prototype.scene=function(){return Cs.Scene.PRIVATE},t.prototype.targetId=function(){return this.receiverId},t}(Wi.AbstractMessage);ws.PrivateMessage=Ms;var Ts={},Is=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Ts.__esModule=!0,Ts.GroupMessage=void 0;var As=s,Os=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Is(t,e),t.prototype.scene=function(){return As.Scene.GROUP},t.prototype.targetId=function(){return this.groupId},t}(Wi.AbstractMessage);Ts.GroupMessage=Os;var Rs={},Ns=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Rs.__esModule=!0,Rs.CSMessage=void 0;var Ps=s,ks=fo,xs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.accepted=!1,t}return Ns(t,e),t.prototype.scene=function(){return Ps.Scene.CS},t.prototype.targetId=function(){return ks.G.u()===this.customerId()?this.teamId:this.customerId()},t.prototype.sendByCustomer=function(){return this.to===this.teamId},t.prototype.customerId=function(){return this.sendByCustomer()?this.senderId:this.to},t.prototype.isOtherSent=function(){return ks.G.u()===this.customerId()?this.senderId!==ks.G.u():this.senderId===this.customerId()},t}(Wi.AbstractMessage);Rs.CSMessage=xs;var Ds={};!function(e){var t;e.__esModule=!0,e.CSMessageType=void 0,(t=e.CSMessageType||(e.CSMessageType={})).ACCEPT="CS_ACCEPT",t.END="CS_END",t.TRANSFER="CS_TRANSFER"}(Ds),Ss.__esModule=!0,Ss.RemoteAbbrMessageBuilder=void 0;var Us=s,Fs=ws,Gs=Ts,Ls=Rs,Bs=hn,js=fo,qs=Ds,Vs=function(){function e(){}return e.prototype.build=function(e){var t,n=e.t;n===Us.Scene.PRIVATE?((t=new Fs.PrivateMessage).read=!1,t.receiverId=e.r):n===Us.Scene.GROUP?((t=new Gs.GroupMessage).groupId=e.r,t.senderData=e.d?JSON.parse(e.d):{}):n===Us.Scene.CS&&((t=new Ls.CSMessage).to=e.r,t.teamId=e.tid,t.senderData=e.d?JSON.parse(e.d):{},t.accepted=e.accepted,t.customerId()!==js.G.u()&&(t.sessionId=e.sessionId)),t.senderId=e.s,t.messageId=e.i,t.timestamp=e.ts,t.type=e.mt;var o=e.p;if(Bs.default.isDef(o))if(n===Us.Scene.CS&&t.type===qs.CSMessageType.TRANSFER){var r=JSON.parse(o);r.transferTo.data=JSON.parse(r.transferTo.data),t.payload=r}else t.payload=JSON.parse(o);return t.recalled=e.rc,t.status=Us.MessageStatus.SUCCESS,t},e}();Ss.RemoteAbbrMessageBuilder=Vs;var Hs=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))},zs=e&&e.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};vs.__esModule=!0,vs.RemoteHistory=void 0;var Ws=s,Ys=gs,Js=mn,Xs=Zn,Qs=f,Ks=Vn,$s=fo,Zs=bs,ea=Ss,ta=function(){function e(){this.builder=new ea.RemoteAbbrMessageBuilder}return e.prototype.sync=function(e,t,n,o,r){var i=new Ys.default(e,t,n,o,r);return new Promise((function(e,t){var n=new Js.default({name:Xs.RocketTypes.IM_HISTORY_CHANGE,params:i,permission:Qs.Permission.READ,singleTimeout:Ks.SocketTimeout.commonQuerySingle,totalTimeout:Ks.SocketTimeout.commonQueryTotal,fail:function(e){t(e)},success:function(t){var n=t.content;e(n)}});$s.G.s().emit(n)}))},e.prototype.loadServerMessages=function(e,t){var n=this;return new Promise((function(o,r){var i=new Js.default({name:Xs.RocketTypes.IM_HISTORY,params:t,permission:Qs.Permission.READ,singleTimeout:Ks.SocketTimeout.commonQuerySingle,totalTimeout:Ks.SocketTimeout.commonQueryTotal,fail:function(e){r(e)},success:function(t){var r=t.content;r.messages=n.convertServerMessages(e,r.messages),o(r)}});$s.G.s().emit(i)}))},e.prototype.convertServerMessages=function(e,t){var n=this,o=[],r=e.scene,i=e.id;return t.forEach((function(t){if(t.t=r,Ws.Scene.PRIVATE===r)t.r=t.s===$s.G.u()?i:$s.G.u();else if(Ws.Scene.GROUP===r)t.r=i;else if(Ws.Scene.CS===r){var s=e.customerId(),a=e.teamId;s===$s.G.u()?t.r=a:t.r=s}var u=n.builder.build(t);o.push(u)})),o},e.prototype.updateServerOffsets=function(e,t){return Hs(this,void 0,void 0,(function(){var n;return zs(this,(function(o){return n=new Zs.ReadMessageMarkRequest(t.id,t.scene,e,t.teamId),[2,new Promise((function(e,t){var o=new Js.default({name:Xs.RocketTypes.IM_MARK_AS_READ,params:n,permission:Qs.Permission.WRITE,singleTimeout:Ks.SocketTimeout.commonRequestSingle,totalTimeout:Ks.SocketTimeout.commonRequestTotal,success:function(t){e(t)},fail:function(e){t(e)}});$s.G.s().emit(o)}))]}))}))},e.instance=new e,e}();vs.RemoteHistory=ta;var na={__esModule:!0,UserOffsets:void 0},oa=hn,ra=fo,ia=function(){function e(){this.offsetMap=new Map,this.markingTime=0,this.userId=ra.G.u()}return e.prototype.updateOffset=function(e,t){var n=this.offsetMap.get(e);return oa.default.isDef(n)?t>n&&(this.offsetMap.set(e,t),!0):(this.offsetMap.set(e,t),!0)},e.prototype.updateUserOffsets=function(e){var t=this;e.forEach((function(e){var n=e.userId,o=e.offset;t.updateOffset(n,o)}))},e.prototype.updateMyOffset=function(e){return this.updateOffset(this.userId,e)},e.prototype.myOffset=function(){return this.getOffset(this.userId)},e.prototype.getOffset=function(e){var t=this.offsetMap.get(e);return t||0},e}();na.UserOffsets=ia;var sa={};!function(e){e.__esModule=!0;var t=function(e,t,n,o,r){this.id=e,this.scene=t,this.lastTimestamp=n,this.limit=o,this.teamId=r};e.default=t}(sa);var aa={__esModule:!0,UnreadAmountMaxMessageChangeDetector:void 0},ua=Li,ca=zi,fa=function(){function e(e){this.history=e}return e.prototype.pre=function(){this.oldLastMessage=this.history.getMaxMessage(),this.oldUnreadAmount=this.history.unreadAmount(),this.oldLastMessage&&(this.oldLastMessageRecalled=this.oldLastMessage.recalled,this.oldLastMessageRead=this.oldLastMessage.read,this.oldLastMessageStatus=this.oldLastMessage.status)},e.prototype.post=function(){var e,t,n,o=this.history.unreadAmount(),r=this.history.getMaxMessage();r&&(n=r.status,e=r.read,t=r.recalled),this.oldLastMessage!==r||this.oldLastMessageRead!==e||this.oldLastMessageRecalled!==t||this.oldLastMessageStatus!==n?ua.GoEasyEventCenter.fire(ca.IM_INTERNAL_EVENTS.MAX_MESSAGE_CHANGED,r):this.oldUnreadAmount!==o&&ua.GoEasyEventCenter.fire(ca.IM_INTERNAL_EVENTS.UNREAD_AMOUNT_CHANGED,this.history.target)},e}();aa.UnreadAmountMaxMessageChangeDetector=fa,function(t){var n=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))},o=e&&e.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},r=e&&e.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};t.__esModule=!0;var i=s,a=fr,u=Mr,c=es,f=os,l=ds,p=_r,d=fo,h=vs,y=na,m=sa,v=hn,g=aa,b=Li,E=zi,S=function(){function e(e){this.expiredTime=0,this.remoteHistory=h.RemoteHistory.instance,this.target=e,this.userOffsets=new y.UserOffsets,this.messageCache=new c.default(e)}return e.prototype.initMaxMessageAndOffsets=function(e,t){var n=this;this.existsMessage(e)||(this.messageCache.saveMessage(e),t.forEach((function(e){n.markLocalMessagesRead(n.messageCache.all(),e.userId,e.offset,!1)})))},e.prototype.existsMessage=function(e){return this.messageCache.existsMessage(e.messageId)},e.prototype.loadHistory=function(e,t){return n(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return this.expiredTime>0&&!this.messageCache.isEmpty()?[4,this.updateByServerChange()]:[3,2];case 1:n.sent(),n.label=2;case 2:return v.default.isUndef(t)?t=10:t>30&&(t=30),[4,this.loadServerMessages(e,t)];case 3:return[2,n.sent()]}}))}))},e.prototype.loadServerMessages=function(e,t){return n(this,void 0,void 0,(function(){var n,r,i,s,a,u,c=this;return o(this,(function(o){switch(o.label){case 0:return n=this.messageCache.loadLocalMessages(t,e),!1!==this.messageCache.allLoaded||n.length===t?[3,2]:(r=t-n.length,i=n[0]?n[0].timestamp:e,s=new m.default(this.target.id.toString(),this.target.scene,i,r,this.target.teamId),[4,this.remoteHistory.loadServerMessages(this.target,s)]);case 1:a=o.sent(),u=a.messages,n=u.concat(n),this.messageCache.cacheServerMessages(s,u),a.userOffsets.forEach((function(e){c.userOffsets.updateOffset(e.userId,e.offset)})),this.userOffsets.offsetMap.forEach((function(e,t){c.markLocalMessagesRead(u,t,e,!1)})),o.label=2;case 2:return[2,n]}}))}))},e.prototype.deleteMessages=function(e){return n(this,void 0,void 0,(function(){var t=this;return o(this,(function(r){switch(r.label){case 0:return[4,this.aopUnreadAmountMaxMessage((function(){return n(t,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=e.messages,[4,f.default.deleteServerMessages(t)];case 1:return n.sent(),this.messageCache.deleteMessages(t),a.CallbackUtils.onSuccess(e),[2]}}))}))}))];case 1:return r.sent(),[2]}}))}))},e.prototype.syncDeletedMessage=function(e,t){var n=this;this.aopUnreadAmountMaxMessage((function(){n.doSyncDeletedMessage(e,t)}))},e.prototype.doSyncDeletedMessage=function(e,t){if(e===d.G.u()){var n=this.messageCache.findMessagesByTimes(t);this.messageCache.deleteMessages(n),n.length>0&&p.IM.aec.fire(u.ImApiEvents.MESSAGE_DELETED,n)}},e.prototype.recallMessage=function(e){return n(this,void 0,void 0,(function(){var t=this;return o(this,(function(r){switch(r.label){case 0:return[4,this.aopUnreadAmountMaxMessage((function(){return n(t,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=e.messages,[4,l.default.recallServerMessages(t)];case 1:return n.sent(),this.messageCache.recallMessages(t),a.CallbackUtils.onSuccess(e),[2]}}))}))}))];case 1:return r.sent(),[2]}}))}))},e.prototype.syncRecalledMessage=function(e){var t=this;this.aopUnreadAmountMaxMessage((function(){return n(t,void 0,void 0,(function(){return o(this,(function(t){return this.doSyncRecalledMessage(e),[2]}))}))}))},e.prototype.doSyncRecalledMessage=function(e){var t=this.messageCache.findMessagesByTimes(e);t.length>0&&(this.messageCache.recallMessages(t),p.IM.aec.fire(u.ImApiEvents.MESSAGE_RECALLED,t))},e.prototype.expire=function(){this.messageCache.isEmpty()||(this.expiredTime=this.messageCache.maxSuccessMessageTime())},e.prototype.updateByServerChange=function(){return n(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return[4,this.aopUnreadAmountMaxMessage((function(){return n(e,void 0,void 0,(function(){var e,t,n,r=this;return o(this,(function(o){switch(o.label){case 0:return[4,this.remoteHistory.sync(this.target.scene,this.target.id,this.expiredTime,this.messageCache.minTime(),this.target.teamId)];case 1:return(e=o.sent()).userOffsets.forEach((function(e){r.markLocalMessagesRead(r.messageCache.all(),e.userId,e.offset,!0)})),(t=e.deletedMessageTimes).length>0&&this.doSyncDeletedMessage(d.G.u(),t),(n=e.recalled).length>0&&this.doSyncRecalledMessage(n),this.expiredTime=0,[2]}}))}))}))];case 1:return t.sent(),[2]}}))}))},e.prototype.markRead=function(){return n(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return[4,this.aopUnreadAmountMaxMessage((function(){return n(e,void 0,void 0,(function(){var e,t;return o(this,(function(n){switch(n.label){case 0:return e=this.messageCache.maxSuccessMessageTime(),t=this.userOffsets.myOffset(),e>t?(this.userOffsets.markingTime=e,[4,this.remoteHistory.updateServerOffsets(e,this.target)]):[3,2];case 1:n.sent(),e===this.userOffsets.markingTime&&this.markLocalMessagesRead(this.messageCache.all(),d.G.u(),e,!0),n.label=2;case 2:return[2]}}))}))}))];case 1:return t.sent(),[2]}}))}))},e.prototype.syncMarkedMessage=function(e){var t=this;this.aopUnreadAmountMaxMessage((function(){t.markLocalMessagesRead(t.messageCache.all(),e.markerId,e.time,!0)}))},e.prototype.onMessageSending=function(e){var t=this;this.aopUnreadAmountMaxMessage((function(){t.messageCache.saveMessage(e)}))},e.prototype.onMessageSendSuccess=function(e){var t=this;this.aopUnreadAmountMaxMessage((function(){t.messageCache.correctPosition(e),t.markLocalMessagesRead(t.messageCache.all(),d.G.u(),e.timestamp,!0)}))},e.prototype.onMessageSendFailed=function(e){this.getMaxMessage()===e&&b.GoEasyEventCenter.fire(E.IM_INTERNAL_EVENTS.MAX_MESSAGE_CHANGED,e)},e.prototype.onMessageReceived=function(e){var t=this;this.aopUnreadAmountMaxMessage((function(){t.messageCache.saveMessage(e),t.markLocalMessagesRead(t.messageCache.all(),e.senderId,e.timestamp,!0)}))},e.prototype.aopUnreadAmountMaxMessage=function(e,t){return n(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),(n=new g.UnreadAmountMaxMessageChangeDetector(this)).pre(),[4,e()];case 1:return o.sent(),n.post(),[3,3];case 2:return r=o.sent(),a.CallbackUtils.onFailed(t,r),[3,3];case 3:return[2]}}))}))},e.prototype.markLocalMessagesRead=function(e,t,n,o){if(this.userOffsets.updateOffset(t,n),this.isOtherUserId(t)){var r=this.markMySentRead(e,n);o&&r.length>0&&p.IM.aec.fire(u.ImApiEvents.MESSAGE_READ,r)}else t===d.G.u()&&this.markOthersSentRead(e,n)},e.prototype.markOthersSentRead=function(e,t){if(this.target.scene===i.Scene.PRIVATE)for(var n=e.length-1;n>=0;n--){var o=e[n];if(o.isOtherSent()&&o.timestamp<=t){if(o.read)break;o.read=!0}}},e.prototype.markMySentRead=function(e,t){var n=new Array;if(this.target.scene===i.Scene.PRIVATE)for(var o=e.length-1;o>=0;o--){var r=e[o];if(!r.isOtherSent()&&r.timestamp<=t&&r.status===i.MessageStatus.SUCCESS){if(r.read)break;r.read=!0,n.push(r)}}return n},e.prototype.isOtherUserId=function(e){if(this.target.scene===i.Scene.CS){var t=this.target.customerId();return d.G.u()===t?e!==d.G.u():e===t}return e!==d.G.u()},e.prototype.unreadAmount=function(e){var t,n,o=0,i=this.userOffsets.myOffset(),s=this.messageCache.all();try{for(var a=r(s),u=a.next();!u.done;u=a.next()){var c=u.value;c.isOtherSent()&&!1===c.recalled&&c.timestamp>i&&(o+=1)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},e.prototype.getMaxMessage=function(e){return this.messageCache.getMaxMessage()},e.prototype.maxTime=function(e){var t=this.getMaxMessage();return v.default.isDef(t)?t.timestamp:0},e}();t.default=S}(Zi);var la={},pa={},da={__esModule:!0,LiveSessionRequest:void 0},ha=function(e,t){this.teamId=e,this.customerId=t};da.LiveSessionRequest=ha;var ya={__esModule:!0,CustomerStatus:void 0},ma=function(){};ya.CustomerStatus=ma;var va={},ga={__esModule:!0,CSOnlineRequest:void 0},ba=function(e,t,n){this.teamId=e,this.teamData=JSON.stringify(t),this.agentData=JSON.stringify(n)};ga.CSOnlineRequest=ba;var Ea={__esModule:!0,CSOfflineRequest:void 0},Sa=function(e){this.teamId=e};Ea.CSOfflineRequest=Sa;var wa={__esModule:!0,CsAgentsQueryRequest:void 0},_a=function(e){this.teamId=e};wa.CsAgentsQueryRequest=_a;var Ca=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))},Ma=e&&e.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};va.__esModule=!0,va.AgentStatus=void 0;var Ta=mn,Ia=Zn,Aa=f,Oa=Vn,Ra=hn,Na=ga,Pa=Ea,ka=Li,xa=zi,Da=fr,Ua=fo,Fa=wa,Ga=vo,La=function(){function e(){this.synchronized=!0,Ua.G.s().addDisconnectedObserver(this.onDisconnected.bind(this)),Ua.G.s().addConnectedObserver(this.onConnected.bind(this)),Ua.G.s().addMessageObserver(Ga.RemoteEvents.CS_ONLINE_CHANGED,this.onlineChanged.bind(this))}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.queryTeams=function(){var e=this;return this.queryMyTeamPromise||(this.queryMyTeamPromise=new Promise((function(t,n){var o=new Ta.default({name:Ia.RocketTypes.CS_MY_TEAMS,params:{},permission:Aa.Permission.READ,singleTimeout:Oa.SocketTimeout.commonQuerySingle,totalTimeout:Oa.SocketTimeout.commonQueryTotal,fail:function(e){n(e)},success:function(n){e.teamIds=new Set(n.content),e.synchronized=!0,t(e.teamIds)}});Ua.G.s().emit(o)}))),this.queryMyTeamPromise},e.prototype.myTeams=function(){if(this.synchronized&&this.queryMyTeamPromise)return this.teamIds;throw"please query team first."},e.prototype.isOnline=function(e,t){return Ca(this,void 0,void 0,(function(){return Ma(this,(function(n){switch(n.label){case 0:return[4,this.queryTeams()];case 1:return n.sent(),Da.CallbackUtils.onSuccess(t,this.teamIds.has(e)),[2]}}))}))},e.prototype.online=function(e,t){var n=this;if(!Ra.default.isObject(t.agentData)||!Ra.default.isObject(t.teamData))throw{code:400,content:"agentData and teamData require an object"};var o=new Na.CSOnlineRequest(e,t.teamData,t.agentData),r=new Ta.default({name:Ia.RocketTypes.CS_ONLINE,params:o,permission:Aa.Permission.WRITE,singleTimeout:Oa.SocketTimeout.commonRequestSingle,totalTimeout:Oa.SocketTimeout.commonRequestTotal,fail:function(e){Da.CallbackUtils.onFailed(t,e)},success:function(o){n.teamIds.add(e),Da.CallbackUtils.onSuccess(t),ka.GoEasyEventCenter.fire(xa.IM_INTERNAL_EVENTS.CS_ONLINE_SUCCESS)}});Ua.G.s().emit(r)},e.prototype.offline=function(e,t){var n=this,o=new Pa.CSOfflineRequest(e),r=new Ta.default({name:Ia.RocketTypes.CS_OFFLINE,params:o,permission:Aa.Permission.WRITE,singleTimeout:Oa.SocketTimeout.commonRequestSingle,totalTimeout:Oa.SocketTimeout.commonRequestTotal,fail:function(e){Da.CallbackUtils.onFailed(t,e)},success:function(o){n.teamIds.delete(e),Da.CallbackUtils.onSuccess(t),ka.GoEasyEventCenter.fire(xa.IM_INTERNAL_EVENTS.CS_OFFLINE_SUCCESS)}});Ua.G.s().emit(r)},e.prototype.agents=function(e,t){var n=new Fa.CsAgentsQueryRequest(e),o=new Ta.default({name:Ia.RocketTypes.CS_AGENTS,params:n,permission:Aa.Permission.READ,singleTimeout:Oa.SocketTimeout.commonQuerySingle,totalTimeout:Oa.SocketTimeout.commonQueryTotal,fail:function(e){Da.CallbackUtils.onFailed(t,e)},success:function(e){e.content.forEach((function(e){e.data=JSON.parse(e.data)})),Da.CallbackUtils.onSuccess(t,e)}});Ua.G.s().emit(o)},e.prototype.onlineChanged=function(e){e.online?this.teamIds.add(e.teamId):this.teamIds.delete(e.teamId)},e.prototype.onDisconnected=function(){this.queryMyTeamPromise=null,this.teamIds=null},e.prototype.onConnected=function(){this.synchronized&&(this.queryMyTeamPromise=this.queryTeams())},e}();va.AgentStatus=La;var Ba=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))},ja=e&&e.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};pa.__esModule=!0,pa.LiveSession=void 0;var qa=s,Va=da,Ha=co,za=mn,Wa=Zn,Ya=f,Ja=Vn,Xa=fr,Qa=fo,Ka=Li,$a=zi,Za=ya,eu=Ds,tu=va,nu=function(){function e(e){this.teamId=e,Ka.GoEasyEventCenter.on($a.IM_INTERNAL_EVENTS.CS_AGENT_MESSAGE_RECEIVED,this.onMessageReceived),Ka.GoEasyEventCenter.on($a.IM_INTERNAL_EVENTS.CS_ACCEPTED,this.onMessageReceived),Ka.GoEasyEventCenter.on($a.IM_INTERNAL_EVENTS.CS_ENDED,this.onMessageReceived),Ka.GoEasyEventCenter.on($a.IM_INTERNAL_EVENTS.CS_TRANSFER,this.onMessageReceived)}return e.live=function(t,n){return Ba(this,void 0,void 0,(function(){var o,r,i,s=this;return ja(this,(function(a){switch(a.label){case 0:return o=n.customerId,Ha.default.validateId(o,"customerId"),r=new Va.LiveSessionRequest(t,o),[4,tu.AgentStatus.getInstance().queryTeams()];case 1:return a.sent(),i=new za.default({name:Wa.RocketTypes.CS_LIVE_SESSION,params:r,permission:Ya.Permission.WRITE,singleTimeout:Ja.SocketTimeout.commonRequestSingle,totalTimeout:Ja.SocketTimeout.commonRequestTotal,fail:function(e){Xa.CallbackUtils.onFailed(n,e)},success:function(o){e.destroy(),s.session=new e(t),s.session.liveOptions=n;var r=o.content.customerStatus;"ACCEPTED"===r.status&&(r.agent.data=JSON.parse(r.agent.data)),s.session.status=r,s.session.liveOptions.onStatusUpdated(s.session.status),Xa.CallbackUtils.onSuccess(n)}}),Qa.G.s().emit(i),[2]}}))}))},e.prototype.customerId=function(){return this.liveOptions.customerId},e.isMyCustomer=function(t){var n=e.session;if(n&&n.teamId===t.teamId&&n.customerId()===t.customerId()){var o=tu.AgentStatus.getInstance().myTeams(),r=n.status.agent;return o.has(t.teamId)&&(!r||r.id===Qa.G.u())}return!0},e.quit=function(t){var n=e.session;if(n){var o=n.liveOptions.customerId;Ha.default.validateId(o,"customerId");var r=new Va.LiveSessionRequest(n.teamId,o),i=new za.default({name:Wa.RocketTypes.CS_QUIT_LIVE,params:r,permission:Ya.Permission.WRITE,singleTimeout:Ja.SocketTimeout.commonRequestSingle,totalTimeout:Ja.SocketTimeout.commonRequestTotal,fail:function(e){Xa.CallbackUtils.onFailed(t,e)},success:function(n){e.destroy(),Xa.CallbackUtils.onSuccess(t)}});Qa.G.s().emit(i)}},e.destroy=function(){var t=e.session;t&&(Ka.GoEasyEventCenter.off($a.IM_INTERNAL_EVENTS.CS_AGENT_MESSAGE_RECEIVED,t.onMessageReceived),Ka.GoEasyEventCenter.off($a.IM_INTERNAL_EVENTS.CS_ACCEPTED,t.onMessageReceived),Ka.GoEasyEventCenter.off($a.IM_INTERNAL_EVENTS.CS_ENDED,t.onMessageReceived),Ka.GoEasyEventCenter.off($a.IM_INTERNAL_EVENTS.CS_TRANSFER,t.onMessageReceived),e.session=null)},e.prototype.onMessageReceived=function(t){var n=e.session;if(t.scene()===qa.Scene.CS&&n.liveOptions){var o=t,r=n.liveOptions.customerId;n.teamId===o.teamId&&o.customerId()===r&&(n.tryUpdateStatus(o),n.liveOptions.onNewMessage(o))}},e.prototype.tryUpdateStatus=function(e){if(!("FREE"!==this.status.status&&this.status.sessionId>e.sessionId)){var t;switch(e.type){case eu.CSMessageType.ACCEPT:(t=new Za.CustomerStatus).status="ACCEPTED",t.start=e.payload.sessionStart,t.sessionId=e.sessionId,t.agent=new qa.User(e.senderId,e.senderData);break;case eu.CSMessageType.END:(t=new Za.CustomerStatus).status="FREE";break;case eu.CSMessageType.TRANSFER:(t=new Za.CustomerStatus).status="ACCEPTED",t.start=e.payload.sessionStart,t.sessionId=e.sessionId,t.agent=e.payload.transferTo;break;default:"FREE"===this.status.status&&((t=new Za.CustomerStatus).status="PENDING",t.start=e.timestamp,t.sessionId=e.sessionId)}t&&(this.status=t,this.liveOptions.onStatusUpdated(t))}},e}();pa.LiveSession=nu,function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),o=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};t.__esModule=!0;var i=sa,s=fr,a=hn,u=Li,c=zi,f=fo,l=Ds,p=pa,d=function(e){function t(t){var n=e.call(this,t)||this;return n.unread=0,n.markingAmount=0,n}return n(t,e),t.prototype.loadHistory=function(e,t){return o(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return a.default.isUndef(t)?t=10:t>30&&(t=30),[4,this.loadServerMessages(e,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.loadServerMessages=function(e,t){return o(this,void 0,void 0,(function(){var n,o,s=this;return r(this,(function(r){switch(r.label){case 0:return n=new i.default(this.target.id.toString(),this.target.scene,e,t,this.target.teamId),[4,this.remoteHistory.loadServerMessages(this.target,n)];case 1:return(o=r.sent()).userOffsets.forEach((function(e){s.userOffsets.updateOffset(e.userId,e.offset)})),[2,o.messages]}}))}))},t.prototype.deleteMessages=function(e){return o(this,void 0,void 0,(function(){return r(this,(function(t){return s.CallbackUtils.onFailed(e,"Delete CS message is not supported yet"),[2]}))}))},t.prototype.recallMessage=function(e){return o(this,void 0,void 0,(function(){return r(this,(function(t){return s.CallbackUtils.onFailed(e,"Recall CS message is not supported yet"),[2]}))}))},t.prototype.initMaxMessageAndOffsets=function(e,t){var n=this;t.forEach((function(e){n.userOffsets.updateOffset(e.userId,e.offset)})),(a.default.isUndef(this.acceptedMaxMessage)||this.acceptedMaxMessage.timestamp<e.timestamp)&&this.increaseUnreadAmount(e),this.saveAcceptedMessage(e)},t.prototype.initPendingMaxMessageAndOffsets=function(e,t){var n=this;t.forEach((function(e){n.userOffsets.updateOffset(e.userId,e.offset)})),this.savePendingMessage(e)},t.prototype.savePendingMessage=function(e){this.pendingMaxMessage?this.pendingMaxMessage.timestamp<e.timestamp&&(this.pendingMaxMessage=e):this.pendingMaxMessage=e},t.prototype.saveAcceptedMessage=function(e){this.acceptedMaxMessage?this.acceptedMaxMessage.timestamp<e.timestamp&&(this.acceptedMaxMessage=e):this.acceptedMaxMessage=e},t.prototype.onMessageSending=function(e){this.saveAcceptedMessage(e),u.GoEasyEventCenter.fire(c.IM_INTERNAL_EVENTS.MAX_MESSAGE_CHANGED,e)},t.prototype.onMessageSendSuccess=function(e){this.saveAcceptedMessage(e),this.userOffsets.updateOffset(e.senderId,e.timestamp),this.acceptedMaxMessage===e&&u.GoEasyEventCenter.fire(c.IM_INTERNAL_EVENTS.MAX_MESSAGE_CHANGED,e)},t.prototype.onMessageSendFailed=function(e){this.acceptedMaxMessage===e&&u.GoEasyEventCenter.fire(c.IM_INTERNAL_EVENTS.MAX_MESSAGE_CHANGED,e)},t.prototype.onMessageReceived=function(e){p.LiveSession.isMyCustomer(this.target)&&(!e.accepted||e.senderId!==f.G.u()&&e.type===l.CSMessageType.ACCEPT?this.savePendingMessage(e):this.saveAcceptedMessage(e),this.userOffsets.updateOffset(e.senderId,e.timestamp),this.increaseUnreadAmount(e),u.GoEasyEventCenter.fire(c.IM_INTERNAL_EVENTS.MAX_MESSAGE_CHANGED,e))},t.prototype.increaseUnreadAmount=function(e){(e.sendByCustomer()||e.type===l.CSMessageType.TRANSFER&&e.senderId!==f.G.u())&&this.userOffsets.myOffset()<e.timestamp&&e.accepted&&(this.unread+=1)},t.prototype.markRead=function(){return o(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:return e=this.maxAcceptedMessageTime(),p.LiveSession.isMyCustomer(this.target)&&this.preMark(e)?[4,this.remoteHistory.updateServerOffsets(e,this.target)]:[3,2];case 1:t.sent(),this.postMark(e),t.label=2;case 2:return[2]}}))}))},t.prototype.preMark=function(e){var t=this.userOffsets.myOffset();return e>this.userOffsets.markingTime&&e>t&&(this.userOffsets.markingTime=e,this.markingAmount=this.unread,!0)},t.prototype.postMark=function(e){e===this.userOffsets.markingTime&&(this.unread-=this.markingAmount,this.markingAmount=0,this.userOffsets.updateOffset(f.G.u(),e),u.GoEasyEventCenter.fire(c.IM_INTERNAL_EVENTS.UNREAD_AMOUNT_CHANGED,this.target))},t.prototype.syncMarkedMessage=function(e){},t.prototype.getMaxMessage=function(e){return e?this.acceptedMaxMessage:this.pendingMaxMessage},t.prototype.unreadAmount=function(e){return e?this.unread:0},t.prototype.existsMessage=function(e){return this.acceptedMaxMessage&&this.acceptedMaxMessage.messageId===e.messageId||this.pendingMaxMessage&&this.pendingMaxMessage.messageId===e.messageId},t.prototype.maxAcceptedMessageTime=function(){return this.acceptedMaxMessage?this.acceptedMaxMessage.timestamp:0},t.prototype.maxTime=function(e){var t=this.getMaxMessage(e);return t?t.timestamp:0},t}(Zi.default);t.default=d}(la);var ou={};!function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),o=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};t.__esModule=!0;var i=fr,s=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.deleteMessages=function(e){return o(this,void 0,void 0,(function(){return r(this,(function(t){return i.CallbackUtils.onFailed(e,"Delete CS message is not supported yet"),[2]}))}))},t.prototype.recallMessage=function(e){return o(this,void 0,void 0,(function(){return r(this,(function(t){return i.CallbackUtils.onFailed(e,"Recall CS message is not supported yet"),[2]}))}))},t}(Zi.default);t.default=s}(ou),function(t){var n=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))},o=e&&e.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};t.__esModule=!0;var r=s,i=hn,a=Zi,u=is,c=Li,f=zi,l=Wi,p=os,d=ds,h=vo,y=fo,m=fr,v=la,g=ou,b=function(){function e(){this.map=new Map}return e.init=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.initialListeners=function(){var e=this;c.GoEasyEventCenter.on(f.IM_INTERNAL_EVENTS.MESSAGE_SENDING,(function(t){return e.onMessageSending(t)})),c.GoEasyEventCenter.on(f.IM_INTERNAL_EVENTS.MESSAGE_SEND_SUCCESS,(function(t){return e.onMessageSendSuccess(t)})),c.GoEasyEventCenter.on(f.IM_INTERNAL_EVENTS.MESSAGE_SEND_FAILED,(function(t){return e.onMessageSendFailed(t)})),c.GoEasyEventCenter.on(f.IM_INTERNAL_EVENTS.MESSAGE_RECEIVED,(function(t){return e.onMessageReceived(t)})),c.GoEasyEventCenter.on(f.IM_INTERNAL_EVENTS.CS_AGENT_MESSAGE_RECEIVED,(function(t){return e.onMessageReceived(t)})),c.GoEasyEventCenter.on(f.IM_INTERNAL_EVENTS.CS_ACCEPTED,(function(t){return e.onMessageReceived(t)})),c.GoEasyEventCenter.on(f.IM_INTERNAL_EVENTS.CS_ENDED,(function(t){return e.onMessageReceived(t)})),c.GoEasyEventCenter.on(f.IM_INTERNAL_EVENTS.CS_TRANSFER,(function(t){return e.onMessageReceived(t)})),y.G.s().addMessageObserver(h.RemoteEvents.IM_MSG_READ,this.onRemoteMarkRead.bind(this)),y.G.s().addMessageObserver(h.RemoteEvents.IM_MSG_DELETED,this.onRemoteMessageDeleted.bind(this)),y.G.s().addMessageObserver(h.RemoteEvents.IM_MSG_RECALLED,this.onRemoteMessageRecalled.bind(this)),y.G.s().addDisconnectedObserver(this.onDisconnected.bind(this))},e.prototype.loadHistory=function(e,t){return n(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return n=this.queryToTarget(e,t),[4,this.findOrCreateHistory(n).loadHistory(e.lastTimestamp,e.limit)];case 1:return r=o.sent(),m.CallbackUtils.onSuccess(e,{code:200,content:r}),[2]}}))}))},e.prototype.queryToTarget=function(e,t){if(i.default.isDef(e.userId))return new u.Target(r.Scene.PRIVATE,e.userId);if(i.default.isDef(e.groupId))return new u.Target(r.Scene.GROUP,e.groupId);if(i.default.isDef(e.type)){if(!Object.values(r.Scene).includes(e.type))throw new Error("incorrect type, must be: "+Object.values(r.Scene));if(i.default.isUndef(e.id))throw new Error("If type is not empty, id is required.");return r.Scene.CS==e.type&&i.default.isUndef(t)&&(t=e.id),new u.Target(e.type,e.id,t)}throw new Error("incorrect query options.")},e.prototype.onMessageSending=function(e){var t=u.Target.byIMMessage(e);this.findOrCreateHistory(t).onMessageSending(e)},e.prototype.onMessageSendSuccess=function(e){var t=u.Target.byIMMessage(e);this.findHistory(t).onMessageSendSuccess(e)},e.prototype.onMessageSendFailed=function(e){var t=u.Target.byIMMessage(e);this.findHistory(t).onMessageSendFailed(e)},e.prototype.onMessageReceived=function(e){var t=u.Target.byIMMessage(e);this.findOrCreateHistory(t).onMessageReceived(e)},e.prototype.privateMarkAsRead=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:if(i.default.isUndef(e.userId))throw new Error("userId could not be empty.");return t=u.Target.byScene(r.Scene.PRIVATE,e.userId),[4,this.markAsRead(t,e)];case 1:return n.sent(),[2]}}))}))},e.prototype.groupMarkAsRead=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:if(i.default.isUndef(e.groupId))throw new Error("groupId could not be empty.");return t=u.Target.byScene(r.Scene.GROUP,e.groupId),[4,this.markAsRead(t,e)];case 1:return n.sent(),[2]}}))}))},e.prototype.markMessageAsRead=function(e,t){return n(this,void 0,void 0,(function(){var n;return o(this,(function(o){switch(o.label){case 0:if(i.default.isUndef(e.id))throw new Error("id could not be empty.");if(!Object.values(r.Scene).includes(e.type))throw new Error("incorrect type, must be: "+Object.values(r.Scene));return r.Scene.CS==e.type&&i.default.isUndef(t)&&(t=e.id),n=u.Target.byScene(e.type,e.id,t),[4,this.markAsRead(n,e)];case 1:return o.sent(),[2]}}))}))},e.prototype.markAsRead=function(e,t){return n(this,void 0,void 0,(function(){var n;return o(this,(function(o){switch(o.label){case 0:return(n=this.findHistory(e))?[4,n.markRead()]:[3,2];case 1:o.sent(),o.label=2;case 2:return m.CallbackUtils.onSuccess(t),[2]}}))}))},e.prototype.onRemoteMarkRead=function(e){var t=u.Target.byMessageReadRemoteEvent(e),n=this.findHistory(t);n&&n.syncMarkedMessage(e)},e.prototype.deleteMessage=function(e){return n(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(o){switch(o.label){case 0:return this.validateMessageArray(e.messages),p.default.validate(e),t=e.messages[0],n=u.Target.byIMMessage(t),(r=this.findHistory(n))?[4,r.deleteMessages(e)]:[3,2];case 1:return o.sent(),[3,3];case 2:throw{code:400,content:"No message that could be deleted"};case 3:return[2]}}))}))},e.prototype.onRemoteMessageDeleted=function(e){var t=u.Target.byIMMessageDeletedEvent(e),n=this.findHistory(t);n&&n.syncDeletedMessage(e.deleterId,e.times)},e.prototype.recallMessage=function(e){return n(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(o){switch(o.label){case 0:return this.validateMessageArray(e.messages),d.default.validate(e),t=e.messages[0],n=u.Target.byIMMessage(t),(r=this.findHistory(n))?[4,r.recallMessage(e)]:[3,2];case 1:return o.sent(),[3,3];case 2:throw{code:400,content:"No message that could be recalled"};case 3:return[2]}}))}))},e.prototype.onRemoteMessageRecalled=function(e){var t=u.Target.byRemoteRecallEvent(e),n=this.findHistory(t);n&&n.syncRecalledMessage(e.times)},e.prototype.onDisconnected=function(){this.map.forEach((function(e,t){e.expire()}))},e.prototype.findOrCreateHistory=function(e){var t=this.findHistory(e);return t||(t=e.scene===r.Scene.CS?y.G.u()===e.customerId()?new g.default(e):new v.default(e):new a.default(e),this.map.set(e.toString(),t),t)},e.get=function(t){return e.instance.findOrCreateHistory(t)},e.prototype.findHistory=function(e){return this.map.get(e.toString())},e.prototype.validateMessageArray=function(e){if(!i.default.isArray(e)||i.default.isEmpty(e))throw{code:400,content:"messages requires non empty array"};if(e.length>50)throw{code:400,content:"The maximum number of messages is 50"};for(var t=u.Target.byIMMessage(e[0]),n=0;n<e.length;n++){var o=e[n];if(!(o instanceof l.AbstractMessage))throw{code:400,content:"message["+n+"] is not a correct message"};if(n>0){var r=u.Target.byIMMessage(o);if(r.scene!==t.scene||r.id!==t.id)throw{code:400,content:"each message must be from the same friend or group"}}}},e}();t.default=b}($i),Ki.__esModule=!0,Ki.Conversation=void 0;var ru=s,iu=$i,su=function(){function e(e){this.top=!1,this.data=null,this.dataLoaded=!1,this.target=e}return e.prototype.toDto=function(){var e=this.target.scene,t=this.target.id,n=new ru.ConversationDTO;return e===ru.Scene.PRIVATE?n.userId=t:e===ru.Scene.GROUP?n.groupId=t:e===ru.Scene.CS&&(n.id=this.target.teamId),n.type=e,n.lastMessage=this.getMaxMessage(),n.unread=this.getUnreadAmount(),n.top=this.top,n.data=this.data,n},e.prototype.getMaxMessage=function(){return iu.default.get(this.target).getMaxMessage()},e.prototype.getUnreadAmount=function(){return iu.default.get(this.target).unreadAmount()},e.prototype.maxMessageTime=function(){return iu.default.get(this.target).maxTime()},e}();Ki.Conversation=su;var au={},uu=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();au.__esModule=!0,au.CSConversation=void 0;var cu=$i,fu=s,lu=function(e){function t(t){var n=e.call(this,t)||this;return n.accepted=!1,n}return uu(t,e),t.prototype.toDto=function(){var e=new fu.ConversationDTO,t=this.target.scene,n=this.target.id,o=this.target.teamId;return e.id=n,e.teamId=o,e.type=t,e.lastMessage=this.getMaxMessage(),e.unread=this.getUnreadAmount(),e.top=this.top,e.data=this.data,e},t.prototype.getMaxMessage=function(){return cu.default.get(this.target).getMaxMessage(this.accepted)},t.prototype.getUnreadAmount=function(){return cu.default.get(this.target).unreadAmount(this.accepted)},t.prototype.maxMessageTime=function(){return cu.default.get(this.target).maxTime(this.accepted)},t}(Ki.Conversation);au.CSConversation=lu;var pu={},du={};!function(e){e.__esModule=!0;var t=function(e,t,n,o){this.type=e,this.top=t,this.targetId=n,this.teamId=o};e.default=t}(du);var hu={};!function(e){e.__esModule=!0;var t=function(e,t,n){this.type=e,this.targetId=t,this.teamId=n};e.default=t}(hu);var yu={};!function(e){e.__esModule=!0;var t=function(e,t,n){this.type=e,this.targetId=t,this.teamId=n};e.default=t}(yu),function(t){var n=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))},o=e&&e.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};t.__esModule=!0;var r=du,i=mn,s=Zn,a=f,u=Vn,c=hu,l=fo,p=yu,d=function(){function e(){}return e.prototype.top=function(e,t){var n=new r.default(e.scene,t,e.id,e.teamId);return new Promise((function(e,t){var o=new i.default({name:s.RocketTypes.topConversation,params:n,permission:a.Permission.WRITE,singleTimeout:u.SocketTimeout.commonRequestSingle,totalTimeout:u.SocketTimeout.commonRequestTotal,success:function(n){200===n.code?e(n):t(n)},fail:function(e){t(e)}});l.G.s().emit(o)}))},e.prototype.remove=function(e){var t=new c.default(e.scene,e.id,e.teamId);return new Promise((function(e,n){var o=new i.default({name:s.RocketTypes.removeConversation,params:t,permission:a.Permission.WRITE,singleTimeout:u.SocketTimeout.commonRequestSingle,totalTimeout:u.SocketTimeout.commonRequestTotal,success:function(t){200==t.code?e(t):n(t)},fail:function(e){n(e)}});l.G.s().emit(o)}))},e.prototype.query=function(e){var t=this;return new Promise((function(r,s){var c=new i.default({name:e,params:{},permission:a.Permission.READ,singleTimeout:u.SocketTimeout.commonQuerySingle,totalTimeout:u.SocketTimeout.commonQueryTotal,fail:function(e){s(e)},success:function(e){return n(t,void 0,void 0,(function(){return o(this,(function(t){return r(e),[2]}))}))}});l.G.s().emit(c)}))},e.prototype.loadData=function(e){var t=new p.default(e.scene,e.id,e.teamId);return new Promise((function(e,n){var o=new i.default({name:s.RocketTypes.imData,params:t,permission:a.Permission.READ,singleTimeout:u.SocketTimeout.commonQuerySingle,totalTimeout:u.SocketTimeout.commonQueryTotal,success:function(t){var n=JSON.parse(t.content);e(n)},fail:function(e){n(e)}});l.G.s().emit(o)}))},e.instance=new e,e}();t.default=d}(pu);var mu=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vu=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))},gu=e&&e.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},bu=e&&e.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Qi.__esModule=!0,Qi.Conversations=void 0;var Eu=Ki,Su=fr,wu=s,_u=Ss,Cu=Zn,Mu=Mr,Tu=ts,Iu=Li,Au=zi,Ou=is,Ru=au,Nu=_r,Pu=pu,ku=$i,xu=fo,Du=Ds,Uu=hn,Fu=function(){function e(){var e=this;this.list=new Array,this.builder=new _u.RemoteAbbrMessageBuilder,this.remoteConversations=Pu.default.instance,this.synchronized=!1,Iu.GoEasyEventCenter.on(Au.IM_INTERNAL_EVENTS.MAX_MESSAGE_CHANGED,(function(t){return e.onMaxMessageChanged(t)})),Iu.GoEasyEventCenter.on(Au.IM_INTERNAL_EVENTS.UNREAD_AMOUNT_CHANGED,(function(t){return e.onUnreadMessageChanged(t)}))}return e.prototype.onUnreadMessageChanged=function(e){this.findConversation(e)&&this.fireUpdated()},e.prototype.fireUpdated=function(){var e=this.loadLocalConversations(),t=this.getUpdatedEventName();Nu.IM.aec.fire(t,{unreadTotal:e.content.unreadTotal,conversations:e.content.conversations})},e.prototype.getUpdatedEventName=function(){return Mu.ImApiEvents.CONVERSATIONS_UPDATED},e.prototype.latestConversations=function(e){return vu(this,void 0,void 0,(function(){var t;return gu(this,(function(n){switch(n.label){case 0:return this.synchronized?[3,2]:[4,this.loadServerConversations()];case 1:n.sent(),n.label=2;case 2:return t=this.loadLocalConversations(),Su.CallbackUtils.onSuccess(e,t),[2]}}))}))},e.prototype.loadServerConversations=function(){return vu(this,void 0,void 0,(function(){var e,t;return gu(this,(function(n){switch(n.label){case 0:return e=this.rocketName(),[4,this.remoteConversations.query(e)];case 1:return t=n.sent(),this.convertAbbrConversation(t.content),this.synchronized=!0,[2]}}))}))},e.prototype.rocketName=function(){return Cu.RocketTypes.imLastConversations},e.prototype.convertAbbrConversation=function(e){var t,n,o=e;try{for(var r=bu(o),i=r.next();!i.done;i=r.next()){var s=i.value,a=s.t,u=s.top,c=s.d?JSON.parse(s.d):{},f=s.userOffsets;s.lmsg.t=a;var l=s.lmsg,p=this.builder.build(l),d=Ou.Target.byIMMessage(p),h=this.findConversation(d);Uu.default.isUndef(h)?(h=this.buildByAbbr(s,p),this.insertOne(h)):(h.top=u,h.data=c),ku.default.get(d).initMaxMessageAndOffsets(p,f),this.correctPosition(h)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.onMaxMessageChanged=function(e){return vu(this,void 0,void 0,(function(){var t;return gu(this,(function(n){switch(n.label){case 0:return e.scene()===wu.Scene.CS&&(t=e,xu.G.u()!=t.customerId()&&(!1===t.accepted||t.type===Du.CSMessageType.ACCEPT&&t.senderId!=xu.G.u()))?[2]:[4,this.saveOrUpdateConversation(e)];case 1:return n.sent(),[2]}}))}))},e.prototype.saveOrUpdateConversation=function(e){return vu(this,void 0,void 0,(function(){var t,n,o,r;return gu(this,(function(i){switch(i.label){case 0:return t=e.status,n=Ou.Target.byIMMessage(e),o=this.findConversation(n),Uu.default.isUndef(o)&&t!==wu.MessageStatus.FAIL?(o=this.buildByMessage(e),this.insertOne(o),t!==wu.MessageStatus.SUCCESS?[3,2]:(r=o,[4,this.remoteConversations.loadData(n)])):[3,2];case 1:r.data=i.sent(),o.dataLoaded=!0,i.label=2;case 2:return t===wu.MessageStatus.SENDING&&(o.data=e.getToData(),o.dataLoaded=!0),o&&o.dataLoaded&&(this.correctPosition(o),this.fireUpdated()),[2]}}))}))},e.prototype.loadLocalConversations=function(){var e,t,n=0,o=new Array;try{for(var r=bu(this.list),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.dataLoaded&&s.getMaxMessage()){n+=s.getUnreadAmount();var a=s.toDto();o.push(a)}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return{code:200,content:{unreadTotal:n,conversations:o}}},e.prototype.findConversationIndex=function(e){return this.list.findIndex((function(t){return e.toString()===t.target.toString()}))},e.prototype.findConversation=function(e){var t=this.findConversationIndex(e);return this.list[t]},e.prototype.removeLocalConversation=function(e){var t=this.findConversationIndex(e.target);this.list.splice(t,1)},e.prototype.insertOne=function(t){e.sortedInserter.insert(this.list,t),this.list.length>e.CONVERSATIONS_MAX_LENGTH&&(this.list=this.list.slice(0,e.CONVERSATIONS_MAX_LENGTH))},e.prototype.correctPosition=function(e){this.removeLocalConversation(e),this.insertOne(e)},e.prototype.removeConversation=function(e){var t=Ou.Target.byIMMessage(e),n=this.findConversation(t);n&&(this.removeLocalConversation(n),this.fireUpdated())},e.prototype.top=function(e,t,n){return vu(this,void 0,void 0,(function(){var o;return gu(this,(function(r){switch(r.label){case 0:if(!Uu.default.isBoolean(t))throw new Error("top must be boolean.");if(!(o=this.findConversation(e)))throw new Error("conversation does not exist.");return o.top==t?[3,2]:[4,this.remoteConversations.top(e,t)];case 1:r.sent(),o.top=t,this.correctPosition(o),r.label=2;case 2:return this.fireUpdated(),Su.CallbackUtils.onSuccess(n),[2]}}))}))},e.prototype.remove=function(e,t){return vu(this,void 0,void 0,(function(){var n;return gu(this,(function(o){switch(o.label){case 0:if(!(n=this.findConversation(e)))throw new Error("conversation does not exist.");return[4,this.remoteConversations.remove(e)];case 1:return o.sent(),this.removeLocalConversation(n),this.fireUpdated(),Su.CallbackUtils.onSuccess(t),[2]}}))}))},e.prototype.buildByAbbr=function(e,t){var n,o=Ou.Target.byIMMessage(t);if(e.t===wu.Scene.CS){var r=t;xu.G.u()===r.customerId()?n=new Eu.Conversation(o):(n=new Ru.CSConversation(o)).accepted=r.accepted}else n=new Eu.Conversation(o);return n.dataLoaded=!0,n.top=e.top,n.data=e.d?JSON.parse(e.d):{},n},e.prototype.buildByMessage=function(e){var t,n=Ou.Target.byIMMessage(e);if(e.scene()===wu.Scene.CS){var o=e;xu.G.u()===o.customerId()?t=new Eu.Conversation(n):(t=new Ru.CSConversation(n)).accepted=o.accepted}else t=new Eu.Conversation(n);return t},e.CONVERSATIONS_MAX_LENGTH=200,e.sortedInserter=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.compare=function(e,t){var n;if(e.top==t.top){var o=e.maxMessageTime();n=t.maxMessageTime()-o}else n=e.top?-1:1;return 0===n?0:n>0?1:-1},t}(Tu.SortedInserter)),e}();Qi.Conversations=Fu;var Gu={},Lu=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Bu=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))},ju=e&&e.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},qu=e&&e.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Gu.__esModule=!0,Gu.PendingConversations=void 0;var Vu=s,Hu=Zn,zu=is,Wu=Li,Yu=zi,Ju=Mr,Xu=Ds,Qu=$i,Ku=au,$u=fo,Zu=hn,ec=function(e){function t(){var t=e.call(this)||this;return t.expired=!1,Wu.GoEasyEventCenter.on(Yu.IM_INTERNAL_EVENTS.CS_ONLINE_SUCCESS,(function(){return t.onCSOnlineSuccess()})),Wu.GoEasyEventCenter.on(Yu.IM_INTERNAL_EVENTS.CS_OFFLINE_SUCCESS,(function(){return t.onCSOfflineSuccess()})),$u.G.s().addDisconnectedObserver(t.onDisconnected.bind(t)),$u.G.s().addConnectedObserver(t.onConnected.bind(t)),t}return Lu(t,e),t.prototype.onMaxMessageChanged=function(e){return Bu(this,void 0,void 0,(function(){var t;return ju(this,(function(n){switch(n.label){case 0:return e.scene()!==Vu.Scene.CS||(t=e).customerId()==$u.G.u()||!1!==t.accepted&&t.type!==Xu.CSMessageType.ACCEPT?[3,3]:Xu.CSMessageType.ACCEPT!==e.type?[3,1]:(this.removeConversation(e),[3,3]);case 1:return[4,this.saveOrUpdateConversation(e)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.latestConversations=function(t){return Bu(this,void 0,void 0,(function(){var n;return ju(this,(function(o){switch(o.label){case 0:return n=this.synchronized,[4,e.prototype.latestConversations.call(this,t)];case 1:return o.sent(),this.list.length>0&&!n&&this.fireUpdated(),[2]}}))}))},t.prototype.onUnreadMessageChanged=function(e){},t.prototype.onCSOnlineSuccess=function(){return Bu(this,void 0,void 0,(function(){return ju(this,(function(e){switch(e.label){case 0:return[4,this.loadServerConversations()];case 1:return e.sent(),this.fireUpdated(),[2]}}))}))},t.prototype.onCSOfflineSuccess=function(){this.list=[],this.fireUpdated()},t.prototype.getUpdatedEventName=function(){return Ju.ImApiEvents.PENDING_CONVERSATIONS_UPDATED},t.prototype.rocketName=function(){return Hu.RocketTypes.CS_PENDING_CONVERSATION},t.prototype.convertAbbrConversation=function(e){return Bu(this,void 0,void 0,(function(){var t,n,o,r,i,s,a,u,c,f,l,p,d;return ju(this,(function(h){t=e;try{for(n=qu(t),o=n.next();!o.done;o=n.next())(r=o.value).lastMessage.t=Vu.Scene.CS,i=r.customerData,s=r.lastMessage,a=r.userOffsets,u=i?JSON.parse(i):{},c=this.builder.build(s),f=zu.Target.byIMMessage(c),l=this.findConversation(f),Zu.default.isUndef(l)&&((l=new Ku.CSConversation(f)).accepted=c.accepted,l.dataLoaded=!0,this.insertOne(l)),l.top=!1,l.data=u,Qu.default.get(f).initPendingMaxMessageAndOffsets(c,a),this.correctPosition(l)}catch(e){p={error:e}}finally{try{o&&!o.done&&(d=n.return)&&d.call(n)}finally{if(p)throw p.error}}return[2]}))}))},t.prototype.onDisconnected=function(){this.expired=!0},t.prototype.onConnected=function(){return Bu(this,void 0,void 0,(function(){return ju(this,(function(e){switch(e.label){case 0:return this.expired?(this.expired=!1,this.list=[],[4,this.loadServerConversations()]):[3,2];case 1:e.sent(),this.fireUpdated(),e.label=2;case 2:return[2]}}))}))},t}(Qi.Conversations);Gu.PendingConversations=ec,function(e){e.__esModule=!0;var t=Qi,n=is,o=s,r=Gu,i=Rs,a=fo,u=function(){function e(){this.conversations=new t.Conversations,this.pendingConversations=new r.PendingConversations}return e.prototype.latestConversations=function(e){this.conversations.latestConversations(e)},e.prototype.latestPendingConversations=function(e){this.pendingConversations.latestConversations(e)},e.prototype.topPrivateConversation=function(e){var t=n.Target.byScene(o.Scene.PRIVATE,e.userId);this.conversations.top(t,e.top,e)},e.prototype.topGroupConversation=function(e){var t=n.Target.byScene(o.Scene.GROUP,e.groupId);this.conversations.top(t,e.top,e)},e.prototype.topConversation=function(e){var t=e.conversation;this.validateConversationDTO(t);var o=n.Target.byConversationDTO(t);this.conversations.top(o,e.top,e)},e.prototype.removePrivateConversation=function(e){var t=n.Target.byScene(o.Scene.PRIVATE,e.userId);this.conversations.remove(t,e)},e.prototype.removeGroupConversation=function(e){var t=n.Target.byScene(o.Scene.GROUP,e.groupId);this.conversations.remove(t,e)},e.prototype.removeConversation=function(e){var t=e.conversation;this.validateConversationDTO(t);var o=n.Target.byConversationDTO(t);this.conversations.remove(o,e)},e.prototype.validateConversationDTO=function(e){if(!(e instanceof o.ConversationDTO))throw new Error("Incorrect conversation object.");var t=e.lastMessage;if(t instanceof i.CSMessage&&t.customerId()!==a.G.u()&&!1===t.accepted)throw new Error("pending conversation cannot be topped or removed.")},e}();e.default=u}(Xi);var tc={};!function(e){e.__esModule=!0;var t=zi,n=Li,o=Ss,r=vo,i=eo,a=hn,u=s,c=fo,f=Mr,l=$i,p=is,d=_r,h=function(){function e(){this.builder=new o.RemoteAbbrMessageBuilder,i.GNS.instance.addAssembler(new(function(){function e(){}return e.prototype.assemble=function(e){var t={messageId:e.id,timestamp:e.tm,type:e.t,senderId:e.sid,toType:e.tt};return e.tt===u.Scene.GROUP&&(t.groupId=e.gid),t},e.prototype.support=function(e){return!!e.sid},e}()))}return e.prototype.initialGoEasySocket=function(){c.G.s().addMessageObserver(r.RemoteEvents.imMessage,this.onMessageReceived.bind(this))},e.prototype.onMessageReceived=function(e){if(e.t!==u.Scene.CS){var o=this.builder.build(e);this.sendAck(o);var r=p.Target.byIMMessage(o),i=r.scene;l.default.get(r).existsMessage(o)||(this.createNotification(e),n.GoEasyEventCenter.fire(t.IM_INTERNAL_EVENTS.MESSAGE_RECEIVED,o),i===u.Scene.PRIVATE?d.IM.aec.fire(f.ImApiEvents.PRIVATE_MESSAGE_RECEIVED,o):i===u.Scene.GROUP&&d.IM.aec.fire(f.ImApiEvents.GROUP_MESSAGE_RECEIVED,o))}},e.prototype.sendAck=function(e){c.G.s().sendAck("imAck",{publishGuid:e.messageId})},e.prototype.createNotification=function(e){var t=i.GNS.instance.supportNotification();if(a.default.isObject(e.nt)&&e.s!==c.G.u()&&t){var n={id:e.i,tm:e.ts,t:e.mt,sid:e.s,tt:e.t};n.tt===u.Scene.GROUP&&(n.gid=e.r),i.GNS.instance.createLocalNotification(e.nt.t,e.nt.c,n)}},e}();e.default=h}(tc);var nc={};!function(e){e.__esModule=!0;var t=mn,n=f,o=Vn,r=co,i=Zn,s=fr,a=fo,u=function(){function e(){}return e.prototype.subscribe=function(e){r.default.validateIdArray(e.groupIds,"groupIds"),e.groupIds=e.groupIds.toString().split(",");var u=new t.default({name:i.RocketTypes.subscribeGroups,params:{groupIds:e.groupIds,at:e.accessToken},permission:n.Permission.WRITE,singleTimeout:o.SocketTimeout.commonInfiniteSingle,totalTimeout:o.SocketTimeout.commonInfiniteTotal,success:function(){s.CallbackUtils.onSuccess(e,{code:200,content:"ok"})},fail:function(t){s.CallbackUtils.onFailed(e,{code:t.resultCode||408,content:t.content||"Failed to subscribe group message"})}});a.G.s().emit(u)},e.prototype.unsubscribe=function(e){r.default.validateId(e.groupId,"groupId"),e.groupId=e.groupId.toString();var u=new t.default({name:i.RocketTypes.unsubscribeGroup,params:{groupId:e.groupId},permission:n.Permission.READ,singleTimeout:o.SocketTimeout.commonRequestSingle,totalTimeout:o.SocketTimeout.commonRequestTotal,success:function(){s.CallbackUtils.onSuccess(e,{code:200,content:"ok"})},fail:function(t){s.CallbackUtils.onFailed(e,{code:t.resultCode||408,content:t.content||"Failed to unsubscribe group message"})}});a.G.s().emit(u)},e}();e.default=u}(nc);var oc={};!function(e){e.__esModule=!0;var t=mn,n=f,o=Vn,r=Zn,i=vo,s=Mr,a=co,u=fr,c=fo,l=_r,p=function(){function e(){c.G.s().addMessageObserver(i.RemoteEvents.groupPresence,this.newMessageReceived.bind(this))}return e.prototype.presence=function(e){a.default.validateIdArray(e.groupIds,"groupIds"),e.groupIds.toString().split(",");var t={groupIds:e.groupIds};this.emitRocket(r.RocketTypes.subscribeGroupPresence,t,(function(){u.CallbackUtils.onSuccess(e,{code:200,content:"ok"})}),(function(t){u.CallbackUtils.onFailed(e,{code:t.code||408,content:t.content||"Failed to subscribe group message"})}),o.SocketTimeout.commonInfiniteSingle,o.SocketTimeout.commonInfiniteTotal)},e.prototype.unPresence=function(e){a.default.validateId(e.groupId,"groupId"),e.groupId=e.groupId.toString();var t={groupId:e.groupId};this.emitRocket(r.RocketTypes.unsubscribeGroupPresence,t,(function(){u.CallbackUtils.onSuccess(e,{code:200,content:"ok"})}),(function(t){u.CallbackUtils.onFailed(e,{code:t.code||408,content:t.content||"Failed to unsubscribe presence"})}),o.SocketTimeout.commonRequestSingle,o.SocketTimeout.commonRequestTotal)},e.prototype.emitRocket=function(e,o,r,i,s,a){var u=new t.default({name:e,params:o,singleTimeout:s,totalTimeout:a,permission:n.Permission.WRITE,success:r,fail:i});c.G.s().emit(u)},e.prototype.newMessageReceived=function(e){var t=null;e.c&&(t=JSON.parse(e.c)),t&&t.events&&t.events.map((function(e){var n=e.userData?JSON.parse(e.userData):{},o={time:e.time,action:e.action,groupOnlineCount:t.userAmount,groupId:t.groupId,id:e.userId,data:n};l.IM.aec.fire(s.ImApiEvents.GROUP_PRESENCE,o)}))},e}();e.default=p}(oc);var rc={};!function(e){e.__esModule=!0;var t=mn,n=f,o=Vn,r=Zn,i=co,s=fr,a=fo,u=function(){function e(){}return e.prototype.get=function(e){i.default.validateId(e.groupId,"groupId"),e.groupId=e.groupId.toString();var u=new t.default({name:r.RocketTypes.imGroupOnlineCount,params:{groupId:e.groupId},permission:n.Permission.READ,singleTimeout:o.SocketTimeout.commonQuerySingle,totalTimeout:o.SocketTimeout.commonQueryTotal,fail:function(t){s.CallbackUtils.onFailed(e,t||{code:408,content:"Failed to query online group users"})},success:function(t){200==t.code?s.CallbackUtils.onSuccess(e,t):s.CallbackUtils.onFailed(e,t)}});a.G.s().emit(u)},e}();e.default=u}(rc);var ic={};!function(e){e.__esModule=!0;var t=mn,n=f,o=Vn,r=Zn,i=co,s=fr,a=fo,u=function(){function e(){}return e.prototype.hereNow=function(e){i.default.validateId(e.groupId,"groupId"),e.groupId=e.groupId.toString();var u=new t.default({name:r.RocketTypes.imGroupHereNow,params:{groupId:e.groupId},permission:n.Permission.READ,singleTimeout:o.SocketTimeout.commonQuerySingle,totalTimeout:o.SocketTimeout.commonQueryTotal,fail:function(t){s.CallbackUtils.onFailed(e,{code:t.resultCode||408,content:t.content||"Failed to query online group users"})},success:function(t){if(200==t.code){var n=t.content;t.content=n.map((function(e){var t=e.userData?JSON.parse(e.userData):{};return{id:e.userId,data:t}})),s.CallbackUtils.onSuccess(e,t)}else s.CallbackUtils.onFailed(e,t)}});a.G.s().emit(u)},e}();e.default=u}(ic);var sc={};!function(e){e.__esModule=!0;var t=mn,n=f,o=Vn,r=co,i=Zn,s=vo,a=Mr,u=fr,c=fo,l=_r,p=function(){function e(){c.G.s().addMessageObserver(s.RemoteEvents.userPresence,this.newMessageReceived.bind(this))}return e.prototype.presence=function(e){r.default.validateIdArray(e.userIds,"userIds"),e.userIds.toString().split(",");var t={userIds:e.userIds};this.emitRocket(i.RocketTypes.subscribeUserPresence,t,(function(){u.CallbackUtils.onSuccess(e,{code:200,content:"ok"})}),(function(t){u.CallbackUtils.onFailed(e,{code:t.code||408,content:t.content||"Failed to subscribe group message"})}),o.SocketTimeout.commonInfiniteSingle,o.SocketTimeout.commonInfiniteTotal)},e.prototype.unPresence=function(e){r.default.validateId(e.userId,"userId"),e.userId=e.userId.toString();var t={userId:e.userId};this.emitRocket(i.RocketTypes.unsubscribeUserPresence,t,(function(){u.CallbackUtils.onSuccess(e,{code:200,content:"ok"})}),(function(t){u.CallbackUtils.onFailed(e,{code:t.code||408,content:t.content||"Failed to unsubscribe presence"})}),o.SocketTimeout.commonRequestSingle,o.SocketTimeout.commonRequestTotal)},e.prototype.emitRocket=function(e,o,r,i,s,a){var u=new t.default({name:e,params:o,singleTimeout:s,totalTimeout:a,permission:n.Permission.WRITE,success:r,fail:i});c.G.s().emit(u)},e.prototype.newMessageReceived=function(e){var t=[];e.c&&(t=JSON.parse(e.c).events||[]),t.map((function(e){var t=e.userData?JSON.parse(e.userData):{},n={time:e.time,action:e.action,id:e.userId,data:t};l.IM.aec.fire(a.ImApiEvents.USER_PRESENCE,n)}))},e}();e.default=p}(sc);var ac={};!function(e){e.__esModule=!0;var t=mn,n=f,o=Vn,r=Zn,i=co,s=fr,a=fo,u=function(){function e(){}return e.prototype.hereNow=function(e){var u=e.userIds;i.default.validateIdArray(u,"userIds"),u.toString().split(",");var c=new t.default({name:r.RocketTypes.imHereNow,params:e,permission:n.Permission.READ,singleTimeout:o.SocketTimeout.commonQuerySingle,totalTimeout:o.SocketTimeout.commonQueryTotal,fail:function(t){s.CallbackUtils.onFailed(e,t)},success:function(t){if(200==t.code){var n=t.content;t.content=n.map((function(e){var t=e.userData?JSON.parse(e.userData):{};return{id:e.userId,data:t}})),s.CallbackUtils.onSuccess(e,t)}else s.CallbackUtils.onFailed(e,t)}});a.G.s().emit(c)},e}();e.default=u}(ac);var uc={},cc={},fc={__esModule:!0,str:void 0},lc=hn,pc=function(){function e(){}return e.prototype.fileExtension=function(e,t){if(lc.default.isString(e))try{var n=e.split(t);return n[n.length-1]}catch(e){throw Error(e)}},e}(),dc=new pc;fc.str=dc;var hc={},yc={},mc={__esModule:!0,AbstractMessagePayload:void 0},vc=function(){};mc.AbstractMessagePayload=vc;var gc=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();yc.__esModule=!0,yc.FileMessagePayload=void 0;var bc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.contentType="",t.name="",t.size=0,t.url="",t}return gc(t,e),t}(mc.AbstractMessagePayload);yc.FileMessagePayload=bc;var Ec=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();hc.__esModule=!0,hc.ImageMessagePayload=void 0;var Sc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.width=0,t.height=0,t}return Ec(t,e),t}(yc.FileMessagePayload);hc.ImageMessagePayload=Sc;var wc={},_c={__esModule:!0,AbstractPayloadBuilder:void 0},Cc=function(){function e(){}return e.prototype.build=function(e){this.validate(e.createOptions);var t=this.create();return this.setPayload(e,t),t},e}();_c.AbstractPayloadBuilder=Cc,function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();t.__esModule=!0;var o=yc,r=hn,i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(){return new o.FileMessagePayload},t.prototype.setPayload=function(e,t){var n=t,o=e.createOptions.file;n.url=o.path,n.name=o.name,n.size=o.size,n.contentType=o.type,e.complete=Promise.resolve()},t.prototype.validate=function(e){if(!r.default.isObject(e))throw Error("it is an empty message.");if(!r.default.isDef(e.file))throw Error("file is empty.")},t}(_c.AbstractPayloadBuilder);t.default=i}(wc),function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();t.__esModule=!0;var o=fc,r=hn,i=hc,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(){return new i.ImageMessagePayload},t.prototype.setPayload=function(t,n){e.prototype.setPayload.call(this,t,n);var i=t.createOptions.file,s=n,a=i.path||i.tempFilePath,u=r.default.isEmpty(i.name)||void 0===i.name?a:i.name;s.name="wx-image."+o.str.fileExtension(u,"."),s.contentType="image/"+o.str.fileExtension(u,"."),s.url=a,s.size=i.size,t.complete=new Promise((function(e,t){wx.getImageInfo({src:s.url,success:function(t){s.width=t.width,s.height=t.height,e()},fail:function(e){t(e)}})}))},t.prototype.validate=function(t){e.prototype.validate.call(this,t)},t}(wc.default);t.default=s}(cc);var Mc={},Tc={},Ic=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Tc.__esModule=!0,Tc.AudioMessagePayload=void 0;var Ac=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.duration=0,t}return Ic(t,e),t}(yc.FileMessagePayload);Tc.AudioMessagePayload=Ac,function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();t.__esModule=!0;var o=Tc,r=hn,i=fc,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(){return new o.AudioMessagePayload},t.prototype.setPayload=function(t,n){e.prototype.setPayload.call(this,t,n);var o=t.createOptions.file,s=n,a=o.tempFilePath,u=r.default.isEmpty(o.name)||null==o.name?a:o.name,c=o.duration,f=o.fileSize;s.url=a,s.size=f,s.duration=c/1e3,s.name="wx-audio."+i.str.fileExtension(u,"."),s.contentType="audio/"+i.str.fileExtension(u,"."),t.complete=Promise.resolve()},t.prototype.validate=function(t){e.prototype.validate.call(this,t)},t}(wc.default);t.default=s}(Mc);var Oc={},Rc={},Nc=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Rc.__esModule=!0,Rc.TextMessagePayload=void 0;var Pc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.text="",t}return Nc(t,e),t}(mc.AbstractMessagePayload);Rc.TextMessagePayload=Pc;var kc=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Oc.__esModule=!0,Oc.TextPayloadBuilder=void 0;var xc=Rc,Dc=hn,Uc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kc(t,e),t.prototype.create=function(){return new xc.TextMessagePayload},t.prototype.setPayload=function(e,t){var n=t,o=e.createOptions;n.text=o.text,e.complete=Promise.resolve()},t.prototype.validate=function(e){if(Dc.default.isEmpty(e.text))throw{code:400,content:"text is empty"};if(!Dc.default.isString(e.text))throw{code:400,content:"TypeError: text requires string."};if(""===e.text.trim())throw{code:400,content:"text is empty"};if(e.text.length>2500)throw{code:400,content:"Message text over max length 2500"}},t}(_c.AbstractPayloadBuilder);Oc.TextPayloadBuilder=Uc;var Fc={},Gc={},Lc=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Gc.__esModule=!0,Gc.VideoMessagePayload=void 0;var Bc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.video=new qc,t.thumbnail=new jc,t}return Lc(t,e),t}(mc.AbstractMessagePayload);Gc.VideoMessagePayload=Bc;var jc=function(){this.name="",this.url="",this.width=0,this.height=0,this.contentType=""},qc=function(){this.name="",this.url="",this.width=0,this.height=0,this.contentType="",this.size=0,this.duration=0};!function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();t.__esModule=!0;var o=Gc,r=hn,i=fc,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(){return new o.VideoMessagePayload},t.prototype.setPayload=function(e,t){var n=e.createOptions.file,o=t,s=o.video,a=o.thumbnail,u=n.duration,c=n.height,f=n.size,l=n.tempFilePath,p=n.thumbTempFilePath,d=n.width,h=n.name,y=void 0===h?"":h,m=r.default.isEmpty(y)?l:y;s.contentType="video/"+i.str.fileExtension(m,"."),s.name="wx-video."+i.str.fileExtension(m,"."),s.url=l,s.width=a.width=d,s.height=a.height=c,s.size=f,s.duration=u,a.url=p,a.contentType="image/jpg",a.name="wx-thumbnail.jpg",e.complete=Promise.resolve()},t.prototype.validate=function(e){if(!r.default.isObject(e))throw Error("it is an empty message.");if(!r.default.isDef(e.file))throw Error("file is empty.")},t}(_c.AbstractPayloadBuilder);t.default=s}(Fc);var Vc={},Hc={};!function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();t.__esModule=!0;var o=yc,r=hn,i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(){return new o.FileMessagePayload},t.prototype.setPayload=function(e,t){var n=t,o=e.createOptions.file;n.url=o.fullPath,n.name=o.name,n.size=o.size,n.contentType=o.type,o.type,e.complete=Promise.resolve()},t.prototype.validate=function(e){if(!r.default.isObject(e))throw Error("it is an empty message.");if(!r.default.isDef(e.file))throw Error("file is empty.")},t}(_c.AbstractPayloadBuilder);t.default=i}(Hc),function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();t.__esModule=!0;var o=fc,r=hn,i=hc,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(){return new i.ImageMessagePayload},t.prototype.setPayload=function(e,t){var n=t,i=e.createOptions.file;n.url=i.path,n.size=i.size;var s=r.default.isEmpty(i.name)||void 0===i.name?i.path:i.name;n.contentType="image/"+o.str.fileExtension(s,"."),n.name="uni-image."+o.str.fileExtension(s,"."),e.complete=new Promise((function(e,t){uni.getImageInfo({src:i.path,success:function(t){n.width=t.width,n.height=t.height,e()},fail:function(e){t(e)}})}))},t.prototype.validate=function(t){e.prototype.validate.call(this,t)},t}(Hc.default);t.default=s}(Vc);var zc={};!function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();t.__esModule=!0;var o=hn,r=fc,i=Tc,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(){return new i.AudioMessagePayload},t.prototype.setPayload=function(e,t){var n=e.createOptions,i=t,s=n.file,a=s.tempFilePath,u=o.default.isEmpty(s.name)||null==s.name?a:s.name;i.url=a,i.name="uni-audio."+r.str.fileExtension(u,"."),i.contentType="audio/"+r.str.fileExtension(u,"."),e.complete=new Promise((function(e,t){uni.getFileInfo({filePath:a,success:function(r){var s=r.size;if(i.size=s,0===s)e();else if(o.default.isDef(n.file.duration))i.duration=n.file.duration/1e3,e();else{var u=uni.createInnerAudioContext();u.src=a,u.onCanplay((function(n){n.errCode?(u.destroy(),t(n)):(i.duration=u.duration,u.destroy(),e())})),u.onError((function(n){u.destroy(),-99===n.errCode?e():t(n)}))}},fail:function(e){t(e)}})}))},t.prototype.validate=function(t){e.prototype.validate.call(this,t)},t}(Hc.default);t.default=s}(zc);var Wc={};!function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();t.__esModule=!0;var o=hn,r=fc,i=Gc,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(){return new i.VideoMessagePayload},t.prototype.setPayload=function(e,t){var n=e.createOptions.file,i=t,s=i.video,a=i.thumbnail,u=n.duration,c=n.height,f=n.size,l=n.tempFilePath,p=n.width,d=n.name,h=void 0===d?"":d,y=o.default.isEmpty(h)?l:h;s.size=f,s.width=p,s.height=c,s.url=l,s.duration=u,s.contentType="video/"+r.str.fileExtension(y,"."),s.name="uni-video."+r.str.fileExtension(y,"."),a.url=l,a.width=p,a.height=c,a.contentType="image/jpg",a.name="uni-thumbnail.jpg",e.complete=Promise.resolve()},t.prototype.validate=function(e){if(!o.default.isObject(e))throw Error("it is an empty message.");if(!o.default.isDef(e.file))throw Error("file is empty.")},t}(_c.AbstractPayloadBuilder);t.default=s}(Wc);var Yc={},Jc={};!function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();t.__esModule=!0;var o=yc,r=hn,i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(){return new o.FileMessagePayload},t.prototype.setPayload=function(e,t){var n=t,o=e.createOptions.file,r=window.URL||window.webkitURL;n.url=r.createObjectURL(o),n.name=o.name,n.size=o.size,n.contentType=o.type,e.complete=Promise.resolve()},t.prototype.validate=function(e){if(!r.default.isObject(e))throw Error("it is an empty message.");if(!(e.file instanceof File))throw Error("wrong file type.");if(0==e.file.size)throw Error("File size is 0.");if(e.file.size>524288e3)throw Error("message-length limit 30mib")},t}(_c.AbstractPayloadBuilder);t.default=i}(Jc),function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();t.__esModule=!0;var o=hc,r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(){return new o.ImageMessagePayload},t.prototype.setPayload=function(t,n){e.prototype.setPayload.call(this,t,n);var o=t.createOptions.file,r=n,i=window.URL||window.webkitURL,s=new Image;s.src=i.createObjectURL(o),t.complete=new Promise((function(e,t){s.onload=function(){r.width=s.width,r.height=s.height,i.revokeObjectURL(s.src),e()},s.onerror=function(e){i.revokeObjectURL(s.src),t(e)}}))},t.prototype.validate=function(t){e.prototype.validate.call(this,t);var n=["gif","jpg","png","jpeg"];if(!n.find((function(e){return e===t.file.type.split("/")[1].toLowerCase()})))throw Error("Only "+n.join(",")+" is supported image.")},t}(Jc.default);t.default=r}(Yc);var Xc={};!function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();t.__esModule=!0;var o=Tc,r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(){return new o.AudioMessagePayload},t.prototype.setPayload=function(t,n){e.prototype.setPayload.call(this,t,n);var o=t.createOptions.file,r=n,i=window.URL||window.webkitURL,s=document.createElement("audio");s.src=i.createObjectURL(o),t.complete=new Promise((function(e,t){s.onloadedmetadata=function(){r.duration=s.duration,i.revokeObjectURL(s.src),e()},s.onerror=function(e){i.revokeObjectURL(s.src),t(e)}}))},t.prototype.validate=function(t){e.prototype.validate.call(this,t);var n=["mp3","ogg","wav","wma","ape","acc","mpeg"];if(!n.find((function(e){return e===t.file.type.split("/")[1].toLowerCase()})))throw Error("Only "+n.join(",")+" is supported audio.")},t}(Jc.default);t.default=r}(Xc);var Qc={};!function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();t.__esModule=!0;var o=Gc,r=hn,i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(){return new o.VideoMessagePayload},t.prototype.setPayload=function(e,t){var n=this,o=e.createOptions.file,r=t,i=r.video,s=r.thumbnail,a=window.URL||window.webkitURL,u=document.createElement("video");u.src=a.createObjectURL(o),i.size=o.size,i.name=o.name,i.contentType=o.type,i.url=u.src,s.name=o.name,s.contentType="image/jpg",e.complete=new Promise((function(e,t){u.onloadedmetadata=function(){i.duration=u.duration,i.width=u.videoWidth,i.height=u.videoHeight,s.width=u.videoWidth,s.height=u.videoHeight,s.url=n.getThumbnailUrl(u),a.revokeObjectURL(u.src),e()},u.onerror=function(e){a.revokeObjectURL(u.src),t(e)}}))},t.prototype.getThumbnailUrl=function(e){var t=document.createElement("canvas");return t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height),t.toDataURL("image/png")},t.prototype.validate=function(e){if(!r.default.isObject(e))throw Error("it is an empty message.");if(!(e.file instanceof File))throw Error("wrong file type.");if(0==e.file.size)throw Error("File size is 0.");if(e.file.size>31457280)throw Error("message-length limit 30mib");var t=["avi","mov","rmvb","rm","flv","mp4","3gp","quicktime"];if(!t.find((function(t){return t===e.file.type.split("/")[1].toLowerCase()})))throw Error("Only "+t.join(",")+" is supported video.")},t}(_c.AbstractPayloadBuilder);t.default=i}(Qc);var Kc={},$c={};!function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();t.__esModule=!0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(mc.AbstractMessagePayload);t.default=o}($c);var Zc=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Kc.__esModule=!0,Kc.CustomPayloadBuilder=void 0;var ef=$c,tf=hn,nf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zc(t,e),t.prototype.create=function(){return new ef.default},t.prototype.setPayload=function(e,t){var n=e.createOptions;t.payload=n.payload,e.complete=Promise.resolve()},t.prototype.validate=function(e){var t=e.type,n=e.payload;if(tf.default.isEmpty(t))throw Error("type is empty.");if(!tf.default.isString(t))throw Error("type require a string");if(tf.default.isEmpty(n))throw Error("payload is empty.");if(!tf.default.isPlainObject(n)&&!tf.default.isStringOrNumber(n))throw Error("payload require object | string | number.")},t}(_c.AbstractPayloadBuilder);Kc.CustomPayloadBuilder=nf;var of={__esModule:!0,LocalIMMessageBuildOptions:void 0},rf=function(e,t){this.type=e,this.createOptions=t};of.LocalIMMessageBuildOptions=rf,uc.__esModule=!0,uc.IMMessageBuilder=void 0;var sf=Pt,af=cc,uf=wc,cf=Mc,ff=Oc,lf=Fc,pf=Vc,df=Hc,hf=zc,yf=Wc,mf=Yc,vf=Jc,gf=Xc,bf=Qc,Ef=Kc,Sf=of,wf=vn,_f=hn,Cf=s,Mf=Ts,Tf=ws,If=co,Af=Rs,Of=fr,Rf=fo,Nf=function(){function e(){var e;this.framework=sf.FrameworkDetector.currentFramework(),this.payloadBuilders=((e={})[sf.Framework.UNIAPP]={image:new pf.default,file:new df.default,audio:new hf.default,video:new yf.default,text:new ff.TextPayloadBuilder},e[sf.Framework.NATIVE_APPLET_WX]={image:new af.default,file:new uf.default,audio:new cf.default,video:new lf.default,text:new ff.TextPayloadBuilder},e[sf.Framework.UNKNOWN]={image:new mf.default,file:new vf.default,audio:new gf.default,video:new bf.default,text:new ff.TextPayloadBuilder},e)}return e.prototype.buildMessage=function(e,t){var n=this.payloadBuilders[this.framework][e],o=new Sf.LocalIMMessageBuildOptions(e,t);if(n){var r=n.build(o);o.payload=r}else r=(new Ef.CustomPayloadBuilder).build(o),o.payload=r.payload;var i=this.build(o);return o.complete.then((function(){Of.CallbackUtils.onSuccess(t,i)})).catch((function(e){Of.CallbackUtils.onFailed(t,e)})),i},e.prototype.build=function(e){var t,n=e.type,o=e.payload,r=e.createOptions,i=r.to,s=i.type;return this.validate(r),s===Cf.Scene.GROUP?((t=new Mf.GroupMessage).groupId=i.id.toString(),t.senderData=Rf.G.ud()):s===Cf.Scene.PRIVATE?((t=new Tf.PrivateMessage).read=!1,t.receiverId=i.id.toString()):s===Cf.Scene.CS&&((t=new Af.CSMessage).to=i.id.toString(),t.teamId=i.id.toString(),t.senderData=Rf.G.ud()),t.senderId=Rf.G.u(),t.messageId=wf.default.get(),t.payload=o,t.timestamp=Date.now(),t.type=n,t.recalled=!1,t.status=Cf.MessageStatus.NEW,t.buildOptions=e,t},e.prototype.validate=function(e){var t=e.to;if(!t)throw new Error("message require property to.");if(!_f.default.isObject(t))throw new Error("TypeError: to requires an object.");if(!_f.default.isObject(t.data))throw new Error("TypeError: to.data requires an object.");if(!t.type||t.type!==Cf.Scene.GROUP&&t.type!==Cf.Scene.PRIVATE&&t.type!==Cf.Scene.CS)throw new Error("message require property to.type");if(_f.default.isEmpty(t.id))throw new Error("message require property to.id");if(!_f.default.isStringOrNumber(t.id))throw new Error("to.id should be a string or number.");if(Rf.G.u()===t.id)throw new Error("to.id can not be the same as your id.");e.notification&&If.default.validateNotification(e.notification),e.wxmpTemplateMsg&&If.default.validateWXMPTemplateMsg(e.wxmpTemplateMsg)},e}();uc.IMMessageBuilder=Nf;var Pf={},kf=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Pf.__esModule=!0,Pf.CsMessageReceiver=void 0;var xf=Li,Df=zi,Uf=va,Ff=fo,Gf=_r,Lf=Mr,Bf=is,jf=$i,qf=s,Vf=pa,Hf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kf(t,e),t.prototype.onMessageReceived=function(e){var t=this;if(e.t===qf.Scene.CS){var n=this.builder.build(e);this.sendAck(n);var o=Bf.Target.byIMMessage(n);jf.default.get(o).existsMessage(n)||(n.customerId()===Ff.G.u()?(this.createNotification(e),xf.GoEasyEventCenter.fire(Df.IM_INTERNAL_EVENTS.MESSAGE_RECEIVED,n),Gf.IM.aec.fire(Lf.ImApiEvents.CS_MESSAGE_RECEIVED,n)):Uf.AgentStatus.getInstance().queryTeams().then((function(){Vf.LiveSession.isMyCustomer(o)&&t.createNotification(e),xf.GoEasyEventCenter.fire(Df.IM_INTERNAL_EVENTS.CS_AGENT_MESSAGE_RECEIVED,n)})))}},t}(tc.default);Pf.CsMessageReceiver=Hf;var zf=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))},Wf=e&&e.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};_r.__esModule=!0,_r.IM=void 0;var Yf=Cr,Jf=Pr,Xf=wi,Qf=Xi,Kf=tc,$f=nc,Zf=oc,el=rc,tl=ic,nl=sc,ol=ac,rl=hn,il=so,sl=co,al=fr,ul=uc,cl=ri,fl=$i,ll=fo,pl=Pf,dl=function(){function e(t){this._iMReceiver=new Kf.default,this.csMessageReceiver=new pl.CsMessageReceiver,this.options=t,e.aec=new Yf.ApiEventCenter,this._userHereNow=new ol.default,this.goEasyUploader=new Jf.GoEasyUploader,this._groupHereNow=new tl.default,this._groupOnlineCount=new el.default,this.groupMessageSubscriber=new $f.default}return e.init=function(t){e.instance=new e(t)},e.prototype.afterConnect=function(){this._iMReceiver.initialGoEasySocket(),this.csMessageReceiver.initialGoEasySocket(),this.messageBuilder=new ul.IMMessageBuilder,this.messageSender=new Xf.default,this.histories=fl.default.init(),this.histories.initialListeners(),this.conversations=new Qf.default,this._groupPresenceSubscriber=new Zf.default,this._userPresenceSubscriber=new nl.default},e.prototype.validateModules=function(){if(rl.default.isUndef(ll.G.s()))throw Error("Please call connect() first.");if(!this.options.modules||!this.options.modules.includes(il.ModuleTypes.IM))throw Error("Invalid options: module '".concat(il.ModuleTypes.IM,"' is not enabled"))},e.prototype.catch=function(e,t){return zf(this,void 0,void 0,(function(){var n;return Wf(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.validateModules(),sl.default.validateCallbackOptions(t),[4,e()];case 1:return o.sent(),[3,3];case 2:return n=o.sent(),al.CallbackUtils.onFailed(t,n),[3,3];case 3:return[2]}}))}))},e.prototype.on=function(t,n){e.aec.on(t,n)},e.prototype.off=function(t,n){e.aec.off(t,n)},e.prototype.createTextMessage=function(e){return this.validateModules(),this.messageBuilder.buildMessage(cl.MessageType.TEXT,e)},e.prototype.createImageMessage=function(e){return this.validateModules(),this.messageBuilder.buildMessage(cl.MessageType.IMAGE,e)},e.prototype.createFileMessage=function(e){return this.validateModules(),this.messageBuilder.buildMessage(cl.MessageType.FILE,e)},e.prototype.createAudioMessage=function(e){return this.validateModules(),this.messageBuilder.buildMessage(cl.MessageType.AUDIO,e)},e.prototype.createVideoMessage=function(e){return this.validateModules(),this.messageBuilder.buildMessage(cl.MessageType.VIDEO,e)},e.prototype.createCustomMessage=function(e){return this.validateModules(),this.messageBuilder.buildMessage(e.type,e)},e.prototype.sendMessage=function(e){var t=this;this.catch((function(){t.messageSender.send(e)}),e)},e.prototype.recallMessage=function(e){var t=this;this.catch((function(){t.histories.recallMessage(e)}),e)},e.prototype.deleteMessage=function(e){var t=this;this.catch((function(){t.histories.deleteMessage(e)}),e)},e.prototype.markGroupMessageAsRead=function(e){var t=this;this.catch((function(){return zf(t,void 0,void 0,(function(){return Wf(this,(function(t){switch(t.label){case 0:return[4,this.histories.groupMarkAsRead(e)];case 1:return t.sent(),[2]}}))}))}),e)},e.prototype.markPrivateMessageAsRead=function(e){var t=this;this.catch((function(){return zf(t,void 0,void 0,(function(){return Wf(this,(function(t){switch(t.label){case 0:return[4,this.histories.privateMarkAsRead(e)];case 1:return t.sent(),[2]}}))}))}),e)},e.prototype.markMessageAsRead=function(e,t){var n=this;this.catch((function(){return zf(n,void 0,void 0,(function(){return Wf(this,(function(n){switch(n.label){case 0:return[4,this.histories.markMessageAsRead(e,t)];case 1:return n.sent(),[2]}}))}))}),e)},e.prototype.latestConversations=function(e){this.validateModules(),this.conversations.latestConversations(e)},e.prototype.removePrivateConversation=function(e){var t=this;this.catch((function(){return t.conversations.removePrivateConversation(e)}),e)},e.prototype.removeGroupConversation=function(e){var t=this;this.catch((function(){return t.conversations.removeGroupConversation(e)}),e)},e.prototype.topPrivateConversation=function(e){var t=this;this.catch((function(){return t.conversations.topPrivateConversation(e)}),e)},e.prototype.topGroupConversation=function(e){var t=this;this.catch((function(){return t.conversations.topGroupConversation(e)}),e)},e.prototype.history=function(e,t){var n=this;this.catch((function(){n.histories.loadHistory(e,t)}),e)},e.prototype.subscribeUserPresence=function(e){var t=this;this.catch((function(){return t._userPresenceSubscriber.presence(e)}),e)},e.prototype.unsubscribeUserPresence=function(e){var t=this;this.catch((function(){return t._userPresenceSubscriber.unPresence(e)}),e)},e.prototype.hereNow=function(e){var t=this;this.catch((function(){return t._userHereNow.hereNow(e)}),e)},e.prototype.subscribeGroup=function(e){var t=this;this.catch((function(){return t.groupMessageSubscriber.subscribe(e)}),e)},e.prototype.unsubscribeGroup=function(e){var t=this;this.catch((function(){return t.groupMessageSubscriber.unsubscribe(e)}),e)},e.prototype.subscribeGroupPresence=function(e){var t=this;this.catch((function(){return t._groupPresenceSubscriber.presence(e)}),e)},e.prototype.unsubscribeGroupPresence=function(e){var t=this;this.catch((function(){return t._groupPresenceSubscriber.unPresence(e)}),e)},e.prototype.groupHereNow=function(e){var t=this;this.catch((function(){return t._groupHereNow.hereNow(e)}),e)},e.prototype.groupOnlineCount=function(e){var t=this;this.catch((function(){return t._groupOnlineCount.get(e)}),e)},e.prototype.latestPendingConversations=function(e){this.validateModules(),this.conversations.latestPendingConversations(e)},e.prototype.topConversation=function(e){this.validateModules(),this.conversations.topConversation(e)},e.prototype.removeConversation=function(e){this.validateModules(),this.conversations.removeConversation(e)},e}();_r.IM=dl;var hl={};!function(e){var t;e.__esModule=!0,e.MediaType=void 0,(t=e.MediaType||(e.MediaType={})).VIDEO="VIDEO",t.VOICE="VOICE"}(hl);var yl={},ml={},vl={},gl={__esModule:!0,CSStatusQueryRequest:void 0},bl=function(e,t){this.customerId=e,this.teamId=t};gl.CSStatusQueryRequest=bl;var El={__esModule:!0,CSAcceptRequest:void 0},Sl=function(e,t){this.customerId=e,this.teamId=t};El.CSAcceptRequest=Sl;var wl={__esModule:!0,CSTransferRequest:void 0},_l=function(e,t,n){this.customerId=e,this.teamId=t,this.agentId=n};wl.CSTransferRequest=_l;var Cl=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))},Ml=e&&e.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};vl.__esModule=!0,vl.ConversationHandler=void 0;var Tl=gl,Il=El,Al=co,Ol=mn,Rl=Zn,Nl=f,Pl=Vn,kl=fr,xl=fo,Dl=wl,Ul=Li,Fl=zi,Gl=Ss,Ll=function(){function e(e){this.builder=new Gl.RemoteAbbrMessageBuilder,this.teamId=e}return e.prototype.accept=function(e,t){var n=this;Al.default.validateId(t.id,"id");var o=t.id.toString(),r=new Il.CSAcceptRequest(o,e),i=new Ol.default({name:Rl.RocketTypes.CS_ACCEPT,params:r,permission:Nl.Permission.WRITE,singleTimeout:Pl.SocketTimeout.commonRequestSingle,totalTimeout:Pl.SocketTimeout.commonRequestTotal,fail:function(e){kl.CallbackUtils.onFailed(t,e)},success:function(e){var o=n.builder.build(e.content.message);Ul.GoEasyEventCenter.fire(Fl.IM_INTERNAL_EVENTS.CS_ACCEPTED,o),kl.CallbackUtils.onSuccess(t)}});xl.G.s().emit(i)},e.prototype.end=function(e,t){var n=this;Al.default.validateId(t.id,"id");var o=t.id.toString(),r=new Il.CSAcceptRequest(o,e),i=new Ol.default({name:Rl.RocketTypes.CS_END,params:r,permission:Nl.Permission.WRITE,singleTimeout:Pl.SocketTimeout.commonRequestSingle,totalTimeout:Pl.SocketTimeout.commonRequestTotal,fail:function(e){kl.CallbackUtils.onFailed(t,e)},success:function(e){var o=n.builder.build(e.content.message);Ul.GoEasyEventCenter.fire(Fl.IM_INTERNAL_EVENTS.CS_ENDED,o),kl.CallbackUtils.onSuccess(t)}});xl.G.s().emit(i)},e.prototype.queryCustomerStatus=function(e,t){return Cl(this,void 0,void 0,(function(){var n;return Ml(this,(function(o){switch(o.label){case 0:return Al.default.validateId(t.id,"id"),[4,this.doCustomerStatus(e,t.id)];case 1:return n=o.sent(),this.activeCustomerStatus=n,this.activeCustomerStatusOptions=t,kl.CallbackUtils.onSuccess(t,n),[2]}}))}))},e.prototype.doCustomerStatus=function(e,t){var n=t.toString(),o=new Tl.CSStatusQueryRequest(n,e);return new Promise((function(e,t){var n=new Ol.default({name:Rl.RocketTypes.CS_CUSTOMER_STATUS,params:o,permission:Nl.Permission.READ,singleTimeout:Pl.SocketTimeout.commonQuerySingle,totalTimeout:Pl.SocketTimeout.commonQueryTotal,fail:function(e){t(e)},success:function(t){var n=t.content;n.agent&&(n.agent.data=JSON.parse(n.agent.data)),e(n)}});xl.G.s().emit(n)}))},e.prototype.transfer=function(e,t){var n=this;Al.default.validateId(t.customerId,"customerId"),Al.default.validateId(t.agentId,"agentId");var o=t.customerId.toString(),r=t.agentId.toString(),i=new Dl.CSTransferRequest(o,e,r),s=new Ol.default({name:Rl.RocketTypes.CS_TRANSFER,params:i,permission:Nl.Permission.WRITE,singleTimeout:Pl.SocketTimeout.commonRequestSingle,totalTimeout:Pl.SocketTimeout.commonRequestTotal,fail:function(e){kl.CallbackUtils.onFailed(t,e)},success:function(e){var o=n.builder.build(e.content.message);Ul.GoEasyEventCenter.fire(Fl.IM_INTERNAL_EVENTS.CS_TRANSFER,o),kl.CallbackUtils.onSuccess(t)}});xl.G.s().emit(s)},e}();vl.ConversationHandler=Ll;var Bl={__esModule:!0,MessageCreator:void 0},jl=s,ql=_r,Vl=function(){function e(){}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.createTextMessage=function(e,t){var n=ql.IM.instance.createTextMessage(t);this.extendProps(e,n)},e.prototype.createImageMessage=function(e,t){var n=ql.IM.instance.createImageMessage(t);this.extendProps(e,n)},e.prototype.createFileMessage=function(e,t){var n=ql.IM.instance.createFileMessage(t);this.extendProps(e,n)},e.prototype.createAudioMessage=function(e,t){var n=ql.IM.instance.createAudioMessage(t);this.extendProps(e,n)},e.prototype.createVideoMessage=function(e,t){var n=ql.IM.instance.createVideoMessage(t);this.extendProps(e,n)},e.prototype.createCustomMessage=function(e,t){var n=ql.IM.instance.createCustomMessage(t);this.extendProps(e,n)},e.prototype.extendProps=function(e,t){if(t.scene()===jl.Scene.CS){var n=t;n.teamId=e,n.accepted=!0}},e}();Bl.MessageCreator=Vl;var Hl=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))},zl=e&&e.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};ml.__esModule=!0,ml.Team=void 0;var Wl=co,Yl=fr,Jl=_r,Xl=vl,Ql=va,Kl=Bl,$l=pa,Zl=function(){function e(e){this.teamId=e,this.agentStatus=Ql.AgentStatus.getInstance(),this.conversationHandler=new Xl.ConversationHandler(e),this.messageCreator=Kl.MessageCreator.getInstance()}return e.prototype.catch=function(e,t){return Hl(this,void 0,void 0,(function(){var n;return zl(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),Wl.default.validateCallbackOptions(t),[4,e()];case 1:return o.sent(),[3,3];case 2:return n=o.sent(),Yl.CallbackUtils.onFailed(t,n),[3,3];case 3:return[2]}}))}))},e.prototype.isOnline=function(e){var t=this;this.catch((function(){t.agentStatus.isOnline(t.teamId,e)}),e)},e.prototype.online=function(e){var t=this;this.catch((function(){t.agentStatus.online(t.teamId,e)}),e)},e.prototype.offline=function(e){var t=this;this.catch((function(){t.agentStatus.offline(t.teamId,e)}),e)},e.prototype.customerStatus=function(e){var t=this;this.catch((function(){t.conversationHandler.queryCustomerStatus(t.teamId,e)}),e)},e.prototype.accept=function(e){var t=this;this.catch((function(){t.conversationHandler.accept(t.teamId,e)}),e)},e.prototype.end=function(e){var t=this;this.catch((function(){t.conversationHandler.end(t.teamId,e)}),e)},e.prototype.history=function(e){Jl.IM.instance.history(e,this.teamId)},e.prototype.markMessageAsRead=function(e){Jl.IM.instance.markMessageAsRead(e,this.teamId)},e.prototype.createTextMessage=function(e){this.messageCreator.createTextMessage(this.teamId,e)},e.prototype.createImageMessage=function(e){this.messageCreator.createImageMessage(this.teamId,e)},e.prototype.createFileMessage=function(e){this.messageCreator.createFileMessage(this.teamId,e)},e.prototype.createAudioMessage=function(e){this.messageCreator.createAudioMessage(this.teamId,e)},e.prototype.createVideoMessage=function(e){this.messageCreator.createVideoMessage(this.teamId,e)},e.prototype.createCustomMessage=function(e){this.messageCreator.createCustomMessage(this.teamId,e)},e.prototype.transfer=function(e){var t=this;this.catch((function(){t.conversationHandler.transfer(t.teamId,e)}),e)},e.prototype.agents=function(e){var t=this;this.catch((function(){t.agentStatus.agents(t.teamId,e)}),e)},e.prototype.liveSession=function(e){var t=this;this.catch((function(){$l.LiveSession.live(t.teamId,e)}),e)},e.prototype.quitLiveSession=function(e){this.catch((function(){$l.LiveSession.quit(e)}),e)},e}();ml.Team=Zl,yl.__esModule=!0,yl.CS=void 0;var ep=ml,tp=co,np=function(){function e(){}return e.team=function(e){tp.default.validateId(e,"teamId");var t=this.teams.get(e);return t||(t=new ep.Team(e.toString()),this.teams.set(e.toString(),t)),t},e.teams=new Map,e}();return yl.CS=np,function(t){var n=e&&e.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();t.__esModule=!0,t.CSTeam=t.GoEasyIM=t.GoEasyPubSub=t.CustomerStatusOptions=t.User=t.AgentOnlineOptions=t.ConversationDTO=t.MessageStatus=t.Scene=t.CallBackOptions=void 0;var o,r,i=a,s=u,c=hn,f=so,l=ao,p=_r,d=eo,h=Mr,y=Li,m=hl,v=yl,g=fo,b=function(){};t.CallBackOptions=b,function(e){e.PRIVATE="private",e.GROUP="group",e.SYSTEM="system",e.CS="cs"}(o=t.Scene||(t.Scene={})),(r=t.MessageStatus||(t.MessageStatus={})).NEW="new",r.SENDING="sending",r.SUCCESS="success",r.FAIL="fail";var E=function(){};t.ConversationDTO=E;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(b);t.AgentOnlineOptions=S;var w=function(e,t){this.id=e,this.data=t};t.User=w;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(b);t.CustomerStatusOptions=_;var C=function(){function e(e){l.PubSub.init(e)}return e.prototype.initialGoEasySocket=function(){l.PubSub.instance.initialGoEasySocket()},e.prototype.initialBeforeConnect=function(){l.PubSub.instance.initialBeforeConnect()},e.prototype.publish=function(e){l.PubSub.instance.publisher.publish(e)},e.prototype.subscribe=function(e){l.PubSub.instance.subscriber.subscribe(e)},e.prototype.unsubscribe=function(e){l.PubSub.instance.subscriber.unsubscribe(e)},e.prototype.subscribePresence=function(e){l.PubSub.instance.presence.subscribePresence(e)},e.prototype.unsubscribePresence=function(e){l.PubSub.instance.presence.unsubscribePresence(e)},e.prototype.history=function(e){l.PubSub.instance.histories.get(e)},e.prototype.hereNow=function(e){l.PubSub.instance.hereNows.byChannel(e)},e.prototype.hereNowByUserIds=function(e){l.PubSub.instance.hereNows.byUserId(e)},e}();t.GoEasyPubSub=C;var M=function(){function e(e){p.IM.init(e)}return e.prototype.afterConnect=function(){p.IM.instance.afterConnect()},e.prototype.on=function(e,t){p.IM.instance.on(e,t)},e.prototype.off=function(e,t){p.IM.instance.off(e,t)},e.prototype.createTextMessage=function(e){return p.IM.instance.createTextMessage(e)},e.prototype.createImageMessage=function(e){return p.IM.instance.createImageMessage(e)},e.prototype.createFileMessage=function(e){return p.IM.instance.createFileMessage(e)},e.prototype.createAudioMessage=function(e){return p.IM.instance.createAudioMessage(e)},e.prototype.createVideoMessage=function(e){return p.IM.instance.createVideoMessage(e)},e.prototype.createCustomMessage=function(e){return p.IM.instance.createCustomMessage(e)},e.prototype.sendMessage=function(e){p.IM.instance.sendMessage(e)},e.prototype.recallMessage=function(e){p.IM.instance.recallMessage(e)},e.prototype.deleteMessage=function(e){p.IM.instance.deleteMessage(e)},e.prototype.markGroupMessageAsRead=function(e){p.IM.instance.markGroupMessageAsRead(e)},e.prototype.markPrivateMessageAsRead=function(e){p.IM.instance.markPrivateMessageAsRead(e)},e.prototype.latestConversations=function(e){p.IM.instance.latestConversations(e)},e.prototype.removePrivateConversation=function(e){p.IM.instance.removePrivateConversation(e)},e.prototype.removeGroupConversation=function(e){p.IM.instance.removeGroupConversation(e)},e.prototype.topPrivateConversation=function(e){p.IM.instance.topPrivateConversation(e)},e.prototype.topGroupConversation=function(e){p.IM.instance.topGroupConversation(e)},e.prototype.history=function(e){p.IM.instance.history(e)},e.prototype.subscribeUserPresence=function(e){p.IM.instance.subscribeUserPresence(e)},e.prototype.unsubscribeUserPresence=function(e){p.IM.instance.unsubscribeUserPresence(e)},e.prototype.hereNow=function(e){p.IM.instance.hereNow(e)},e.prototype.subscribeGroup=function(e){p.IM.instance.subscribeGroup(e)},e.prototype.unsubscribeGroup=function(e){p.IM.instance.unsubscribeGroup(e)},e.prototype.subscribeGroupPresence=function(e){p.IM.instance.subscribeGroupPresence(e)},e.prototype.unsubscribeGroupPresence=function(e){p.IM.instance.unsubscribeGroupPresence(e)},e.prototype.groupHereNow=function(e){p.IM.instance.groupHereNow(e)},e.prototype.groupOnlineCount=function(e){p.IM.instance.groupOnlineCount(e)},e.prototype.markMessageAsRead=function(e){p.IM.instance.markMessageAsRead(e)},e.prototype.csteam=function(e){return new I(e)},e.prototype.pendingConversations=function(e){p.IM.instance.latestPendingConversations(e)},e.prototype.topConversation=function(e){p.IM.instance.topConversation(e)},e.prototype.removeConversation=function(e){p.IM.instance.removeConversation(e)},e}();t.GoEasyIM=M;var T=function(){function e(t){if(c.default.isDef(e.instance)&&e.instance.getConnectionStatus()!==i.NetworkStatus.DISCONNECTED)return e.instance;this.validateOptions(t),this.options=t,d.GNS.init(t.allowNotification),this.pubsub=new C(this.options),this.im=new M(this.options)}return e.getInstance=function(t){return c.default.isUndef(e.instance)&&(e.instance=new e(t)),e.instance},e.prototype.connect=function(e){this.getConnectionStatus()!==i.NetworkStatus.DISCONNECTED&&c.default.isObject(e)&&c.default.isFunction(e.onFailed)?e.onFailed({code:408,content:"It is already connected, don't try again until disconnect() is called. "}):(this.confirmUserId(e),y.GoEasyEventCenter.initial(),this.pubsub.initialBeforeConnect(),this.goEasySocket=new s.default(this.options,e),this.goEasySocket.connect(),g.G.i(this.goEasySocket),this.im.afterConnect(),this.pubsub.initialGoEasySocket())},e.prototype.disconnect=function(e){this.goEasySocket.disconnect().then((function(){c.default.isObject(e)&&c.default.isFunction(e.onSuccess)&&e.onSuccess()})).catch((function(t){c.default.isObject(e)&&c.default.isFunction(e.onFailed)&&e.onFailed(t)}))},e.prototype.getConnectionStatus=function(){return this.goEasySocket?this.goEasySocket.getStatus():i.NetworkStatus.DISCONNECTED},e.prototype.validateOptions=function(e){var t="";if(!c.default.isObject(e))throw t="options is require an object.",Error(t);if(!c.default.isPrimitive(e.appkey)||0==e.appkey.length)throw t="Invalid options:'appkey' is empty.",Error(t);if(!c.default.isPrimitive(e.host)||0==e.host.length)throw t="Invalid options:'host' is empty.",Error(t);if(!c.default.isArray(e.modules))throw t="Invalid options: 'modules' must be nonempty array",Error(t);var n=[f.ModuleTypes.IM,f.ModuleTypes.PUBSUB],o=e.modules.map((function(e){var o=e.toUpperCase();if(!n.includes(o))throw t="Invalid options: module '".concat(e,"' is not support"),Error(t);return o}));e.modules=o},e.prototype.onClickNotification=function(e){d.GNS.instance.onClickNotification(e)},e.prototype.confirmUserId=function(e){if(this.options.modules.includes(f.ModuleTypes.IM)&&(c.default.isEmpty(e.id)||!c.default.isStringOrNumber(e.id)))throw{code:400,content:"TypeError: id requires number or string."};if("string"==typeof e.id&&e.id.length>60)throw{code:400,content:"id over max length 60"}},e.version="2.5.2",e.IM_EVENT=h.ImApiEvents,e.IM_SCENE=o,e.MEDIA_TYPE=m.MediaType,e}();t.default=T;var I=function(){function e(e){this.id=e}return e.prototype.isOnline=function(e){v.CS.team(this.id).isOnline(e)},e.prototype.online=function(e){v.CS.team(this.id).online(e)},e.prototype.offline=function(e){v.CS.team(this.id).offline(e)},e.prototype.customerStatus=function(e){v.CS.team(this.id).customerStatus(e)},e.prototype.accept=function(e){v.CS.team(this.id).accept(e)},e.prototype.end=function(e){v.CS.team(this.id).end(e)},e.prototype.history=function(e){v.CS.team(this.id).history(e)},e.prototype.markMessageAsRead=function(e){v.CS.team(this.id).markMessageAsRead(e)},e.prototype.createTextMessage=function(e){v.CS.team(this.id).createTextMessage(e)},e.prototype.createImageMessage=function(e){v.CS.team(this.id).createImageMessage(e)},e.prototype.createFileMessage=function(e){v.CS.team(this.id).createFileMessage(e)},e.prototype.createAudioMessage=function(e){v.CS.team(this.id).createAudioMessage(e)},e.prototype.createVideoMessage=function(e){v.CS.team(this.id).createVideoMessage(e)},e.prototype.createCustomMessage=function(e){v.CS.team(this.id).createCustomMessage(e)},e.prototype.transfer=function(e){v.CS.team(this.id).transfer(e)},e.prototype.agents=function(e){v.CS.team(this.id).agents(e)},e.prototype.liveSession=function(e){v.CS.team(this.id).liveSession(e)},e.prototype.quitLiveSession=function(e){v.CS.team(this.id).quitLiveSession(e)},e}();t.CSTeam=I}(s),i(s)}))}).call(this,n("c8ba"),n("4362"),n("b639").Buffer)},"4c3d":function(e,t,n){"use strict";(function(t){var o=n("c532"),r=n("c8af"),i=n("7917"),s=n("cafa"),a=n("e467"),u={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function f(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(e=n("b50d")),e}function l(e,t,n){if(o.isString(e))try{return(t||JSON.parse)(e),o.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}var p={transitional:s,adapter:f(),transformRequest:[function(e,t){if(r(t,"Accept"),r(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e))return e;if(o.isArrayBufferView(e))return e.buffer;if(o.isURLSearchParams(e))return c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,i=o.isObject(e),s=t&&t["Content-Type"];if((n=o.isFileList(e))||i&&"multipart/form-data"===s){var u=this.env&&this.env.FormData;return a(n?{"files[]":e}:e,u&&new u)}return i||"application/json"===s?(c(t,"application/json"),l(e)):e}],transformResponse:[function(e){var t=this.transitional||p.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||r&&o.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(s){if("SyntaxError"===a.name)throw i.from(a,i.ERR_BAD_RESPONSE,this,null,this.response);throw a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n("4581")},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],(function(e){p.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){p.headers[e]=o.merge(u)})),e.exports=p}).call(this,n("4362"))},5270:function(e,t,n){"use strict";var o=n("c532"),r=n("c401"),i=n("2e67"),s=n("4c3d"),a=n("fb60");function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a}e.exports=function(e){u(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),o.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]}));var t=e.adapter||s.adapter;return t(e).then((function(t){return u(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(u(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},"5cce":function(e,t){e.exports={version:"0.27.2"}},"5f02":function(e,t,n){"use strict";var o=n("c532");e.exports=function(e){return o.isObject(e)&&!0===e.isAxiosError}},7917:function(e,t,n){"use strict";var o=n("c532");function r(e,t,n,o,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),r&&(this.response=r)}o.inherits(r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=r.prototype,s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){s[e]={value:e}})),Object.defineProperties(r,s),Object.defineProperty(i,"isAxiosError",{value:!0}),r.from=function(e,t,n,s,a,u){var c=Object.create(i);return o.toFlatObject(e,c,(function(e){return e!==Error.prototype})),r.call(c,e.message,t,n,s,a),c.name=e.name,u&&Object.assign(c,u),c},e.exports=r},"7aac":function(e,t,n){"use strict";var o=n("c532");e.exports=o.isStandardBrowserEnv()?function(){return{write:function(e,t,n,r,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),o.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),o.isString(r)&&a.push("path="+r),o.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"7f73":function(e,t,n){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},"83b9":function(e,t,n){"use strict";var o=n("d925"),r=n("e683");e.exports=function(e,t){return e&&!o(t)?r(e,t):t}},"848b":function(e,t,n){"use strict";var o=n("5cce").version,r=n("7917"),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var s={};function a(e,t,n){if("object"!==typeof e)throw new r("options must be an object",r.ERR_BAD_OPTION_VALUE);var o=Object.keys(e),i=o.length;while(i-- >0){var s=o[i],a=t[s];if(a){var u=e[s],c=void 0===u||a(u,s,e);if(!0!==c)throw new r("option "+s+" must be "+c,r.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new r("Unknown option "+s,r.ERR_BAD_OPTION)}}i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+o+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,o,a){if(!1===e)throw new r(i(o," has been removed"+(t?" in "+t:"")),r.ERR_DEPRECATED);return t&&!s[o]&&(s[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,a)}},e.exports={assertOptions:a,validators:i}},"8df4":function(e,t,n){"use strict";var o=n("fb60");function r(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,o=n._listeners.length;for(t=0;t<o;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,o=new Promise((function(e){n.subscribe(e),t=e})).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e((function(e){n.reason||(n.reason=new o(e),t(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},r.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},r.source=function(){var e,t=new r((function(t){e=t}));return{token:t,cancel:e}},e.exports=r},9152:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,o,r){var i,s,a=8*r-o-1,u=(1<<a)-1,c=u>>1,f=-7,l=n?r-1:0,p=n?-1:1,d=e[t+l];for(l+=p,i=d&(1<<-f)-1,d>>=-f,f+=a;f>0;i=256*i+e[t+l],l+=p,f-=8);for(s=i&(1<<-f)-1,i>>=-f,f+=o;f>0;s=256*s+e[t+l],l+=p,f-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,o),i-=c}return(d?-1:1)*s*Math.pow(2,i-o)},t.write=function(e,t,n,o,r,i){var s,a,u,c=8*i-r-1,f=(1<<c)-1,l=f>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=o?0:i-1,h=o?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+l>=1?p/u:p*Math.pow(2,1-l),t*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(t*u-1)*Math.pow(2,r),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,r),s=0));r>=8;e[n+d]=255&a,d+=h,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;e[n+d]=255&s,d+=h,s/=256,c-=8);e[n+d-h]|=128*y}},9224:function(e){e.exports=JSON.parse('{"a":"0.1.1"}')},b50d:function(e,t,n){"use strict";var o=n("c532"),r=n("467f"),i=n("7aac"),s=n("30b5"),a=n("83b9"),u=n("c345"),c=n("3934"),f=n("cafa"),l=n("7917"),p=n("fb60"),d=n("b68a");e.exports=function(e){return new Promise((function(t,n){var h,y=e.data,m=e.headers,v=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}o.isFormData(y)&&o.isStandardBrowserEnv()&&delete m["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var E=e.auth.username||"",S=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(E+":"+S)}var w=a(e.baseURL,e.url);function _(){if(b){var o="getAllResponseHeaders"in b?u(b.getAllResponseHeaders()):null,i=v&&"text"!==v&&"json"!==v?b.response:b.responseText,s={data:i,status:b.status,statusText:b.statusText,headers:o,config:e,request:b};r((function(e){t(e),g()}),(function(e){n(e),g()}),s),b=null}}if(b.open(e.method.toUpperCase(),s(w,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=_:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(_)},b.onabort=function(){b&&(n(new l("Request aborted",l.ECONNABORTED,e,b)),b=null)},b.onerror=function(){n(new l("Network Error",l.ERR_NETWORK,e,b,b)),b=null},b.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",o=e.transitional||f;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new l(t,o.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,e,b)),b=null},o.isStandardBrowserEnv()){var C=(e.withCredentials||c(w))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;C&&(m[e.xsrfHeaderName]=C)}"setRequestHeader"in b&&o.forEach(m,(function(e,t){"undefined"===typeof y&&"content-type"===t.toLowerCase()?delete m[t]:b.setRequestHeader(t,e)})),o.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),v&&"json"!==v&&(b.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function(e){b&&(n(!e||e&&e.type?new p:e),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),y||(y=null);var M=d(w);M&&-1===["http","https","file"].indexOf(M)?n(new l("Unsupported protocol "+M+":",l.ERR_BAD_REQUEST,e)):b.send(y)}))}},b639:function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var o=n("1fb5"),r=n("9152"),i=n("e3db");function s(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=c.prototype):(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return f(this,e,t,n)}function f(e,t,n,o){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?m(e,t,n,o):"string"===typeof t?h(e,t,n):v(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t,n,o){return l(t),t<=0?u(e,t):void 0!==n?"string"===typeof o?u(e,t).fill(n,o):u(e,t).fill(n):u(e,t)}function d(e,t){if(l(t),e=u(e,t<0?0:0|g(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t,n){if("string"===typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var o=0|E(t,n);e=u(e,o);var r=e.write(t,n);return r!==o&&(e=e.slice(0,r)),e}function y(e,t){var n=t.length<0?0:0|g(t.length);e=u(e,n);for(var o=0;o<n;o+=1)e[o]=255&t[o];return e}function m(e,t,n,o){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(o||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===o?new Uint8Array(t):void 0===o?new Uint8Array(t,n):new Uint8Array(t,n,o),c.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=c.prototype):e=y(e,t),e}function v(e,t){if(c.isBuffer(t)){var n=0|g(t.length);return e=u(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||te(t.length)?u(e,0):y(e,t);if("Buffer"===t.type&&i(t.data))return y(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),c.alloc(+e)}function E(e,t){if(c.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(o)return Q(e).length;t=(""+t).toLowerCase(),o=!0}}function S(e,t,n){var o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return F(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return D(this,t,n);case"latin1":case"binary":return U(this,t,n);case"base64":return N(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function w(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}function _(e,t,n,o,r){if(0===e.length)return-1;if("string"===typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"===typeof t&&(t=c.from(t,o)),c.isBuffer(t))return 0===t.length?-1:C(e,t,n,o,r);if("number"===typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):C(e,[t],n,o,r);throw new TypeError("val must be string, number or Buffer")}function C(e,t,n,o,r){var i,s=1,a=e.length,u=t.length;if(void 0!==o&&(o=String(o).toLowerCase(),"ucs2"===o||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(r){var f=-1;for(i=n;i<a;i++)if(c(e,i)===c(t,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===u)return f*s}else-1!==f&&(i-=i-f),f=-1}else for(n+u>a&&(n=a-u),i=n;i>=0;i--){for(var l=!0,p=0;p<u;p++)if(c(e,i+p)!==c(t,p)){l=!1;break}if(l)return i}return-1}function M(e,t,n,o){n=Number(n)||0;var r=e.length-n;o?(o=Number(o),o>r&&(o=r)):o=r;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");o>i/2&&(o=i/2);for(var s=0;s<o;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function T(e,t,n,o){return ee(Q(t,e.length-n),e,n,o)}function I(e,t,n,o){return ee(K(t),e,n,o)}function A(e,t,n,o){return I(e,t,n,o)}function O(e,t,n,o){return ee(Z(t),e,n,o)}function R(e,t,n,o){return ee($(t,e.length-n),e,n,o)}function N(e,t,n){return 0===t&&n===e.length?o.fromByteArray(e):o.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);var o=[],r=t;while(r<n){var i,s,a,u,c=e[r],f=null,l=c>239?4:c>223?3:c>191?2:1;if(r+l<=n)switch(l){case 1:c<128&&(f=c);break;case 2:i=e[r+1],128===(192&i)&&(u=(31&c)<<6|63&i,u>127&&(f=u));break;case 3:i=e[r+1],s=e[r+2],128===(192&i)&&128===(192&s)&&(u=(15&c)<<12|(63&i)<<6|63&s,u>2047&&(u<55296||u>57343)&&(f=u));break;case 4:i=e[r+1],s=e[r+2],a=e[r+3],128===(192&i)&&128===(192&s)&&128===(192&a)&&(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a,u>65535&&u<1114112&&(f=u))}null===f?(f=65533,l=1):f>65535&&(f-=65536,o.push(f>>>10&1023|55296),f=56320|1023&f),o.push(f),r+=l}return x(o)}t.Buffer=c,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:s(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return f(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return p(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,o=t.length,r=0,i=Math.min(n,o);r<i;++r)if(e[r]!==t[r]){n=e[r],o=t[r];break}return n<o?-1:o<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var o=c.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,r),r+=s.length}return o},c.byteLength=E,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):S.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,o,r){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===r&&(r=this.length),t<0||n>e.length||o<0||r>this.length)throw new RangeError("out of range index");if(o>=r&&t>=n)return 0;if(o>=r)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,o>>>=0,r>>>=0,this===e)return 0;for(var i=r-o,s=n-t,a=Math.min(i,s),u=this.slice(o,r),f=e.slice(t,n),l=0;l<a;++l)if(u[l]!==f[l]){i=u[l],s=f[l];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},c.prototype.write=function(e,t,n,o){if(void 0===t)o="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)o=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var i=!1;;)switch(o){case"hex":return M(this,e,t,n);case"utf8":case"utf-8":return T(this,e,t,n);case"ascii":return I(this,e,t,n);case"latin1":case"binary":return A(this,e,t,n);case"base64":return O(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function x(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);var n="",o=0;while(o<t)n+=String.fromCharCode.apply(String,e.slice(o,o+=k));return n}function D(e,t,n){var o="";n=Math.min(e.length,n);for(var r=t;r<n;++r)o+=String.fromCharCode(127&e[r]);return o}function U(e,t,n){var o="";n=Math.min(e.length,n);for(var r=t;r<n;++r)o+=String.fromCharCode(e[r]);return o}function F(e,t,n){var o=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>o)&&(n=o);for(var r="",i=t;i<n;++i)r+=X(e[i]);return r}function G(e,t,n){for(var o=e.slice(t,n),r="",i=0;i<o.length;i+=2)r+=String.fromCharCode(o[i]+256*o[i+1]);return r}function L(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,n,o,r,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<i)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function j(e,t,n,o){t<0&&(t=65535+t+1);for(var r=0,i=Math.min(e.length-n,2);r<i;++r)e[n+r]=(t&255<<8*(o?r:1-r))>>>8*(o?r:1-r)}function q(e,t,n,o){t<0&&(t=4294967295+t+1);for(var r=0,i=Math.min(e.length-n,4);r<i;++r)e[n+r]=t>>>8*(o?r:3-r)&255}function V(e,t,n,o,r,i){if(n+o>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(e,t,n,o,i){return i||V(e,t,n,4,34028234663852886e22,-34028234663852886e22),r.write(e,t,n,o,23,4),n+4}function z(e,t,n,o,i){return i||V(e,t,n,8,17976931348623157e292,-17976931348623157e292),r.write(e,t,n,o,52,8),n+8}c.prototype.slice=function(e,t){var n,o=this.length;if(e=~~e,t=void 0===t?o:~~t,e<0?(e+=o,e<0&&(e=0)):e>o&&(e=o),t<0?(t+=o,t<0&&(t=0)):t>o&&(t=o),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=c.prototype;else{var r=t-e;n=new c(r,void 0);for(var i=0;i<r;++i)n[i]=this[i+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);var o=this[e],r=1,i=0;while(++i<t&&(r*=256))o+=this[e+i]*r;return o},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);var o=this[e+--t],r=1;while(t>0&&(r*=256))o+=this[e+--t]*r;return o},c.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);var o=this[e],r=1,i=0;while(++i<t&&(r*=256))o+=this[e+i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);var o=t,r=1,i=this[e+--o];while(o>0&&(r*=256))i+=this[e+--o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),r.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),r.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),r.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),r.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,o){if(e=+e,t|=0,n|=0,!o){var r=Math.pow(2,8*n)-1;B(this,e,t,n,r,0)}var i=1,s=0;this[t]=255&e;while(++s<n&&(i*=256))this[t+s]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,o){if(e=+e,t|=0,n|=0,!o){var r=Math.pow(2,8*n)-1;B(this,e,t,n,r,0)}var i=n-1,s=1;this[t+i]=255&e;while(--i>=0&&(s*=256))this[t+i]=e/s&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):q(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):q(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t|=0,!o){var r=Math.pow(2,8*n-1);B(this,e,t,n,r-1,-r)}var i=0,s=1,a=0;this[t]=255&e;while(++i<n&&(s*=256))e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t|=0,!o){var r=Math.pow(2,8*n-1);B(this,e,t,n,r-1,-r)}var i=n-1,s=1,a=0;this[t+i]=255&e;while(--i>=0&&(s*=256))e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):q(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):q(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return H(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return H(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,o){if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var r,i=o-n;if(this===e&&n<t&&t<o)for(r=i-1;r>=0;--r)e[r+t]=this[r+n];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<i;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},c.prototype.fill=function(e,t,n,o){if("string"===typeof e){if("string"===typeof t?(o=t,t=0,n=this.length):"string"===typeof n&&(o=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==o&&"string"!==typeof o)throw new TypeError("encoding must be a string");if("string"===typeof o&&!c.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=c.isBuffer(e)?e:Q(new c(e,o).toString()),a=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function Y(e){if(e=J(e).replace(W,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function J(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function X(e){return e<16?"0"+e.toString(16):e.toString(16)}function Q(e,t){var n;t=t||1/0;for(var o=e.length,r=null,i=[],s=0;s<o;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===o){(t-=3)>-1&&i.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&i.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function K(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function $(e,t){for(var n,o,r,i=[],s=0;s<e.length;++s){if((t-=2)<0)break;n=e.charCodeAt(s),o=n>>8,r=n%256,i.push(r),i.push(o)}return i}function Z(e){return o.toByteArray(Y(e))}function ee(e,t,n,o){for(var r=0;r<o;++r){if(r+n>=t.length||r>=e.length)break;t[r+n]=e[r]}return r}function te(e){return e!==e}}).call(this,n("c8ba"))},b68a:function(e,t,n){"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},bc3a:function(e,t,n){e.exports=n("cee4")},c345:function(e,t,n){"use strict";var o=n("c532"),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(o.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=o.trim(e.substr(0,i)).toLowerCase(),n=o.trim(e.substr(i+1)),t){if(s[t]&&r.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},c401:function(e,t,n){"use strict";var o=n("c532"),r=n("4c3d");e.exports=function(e,t,n){var i=this||r;return o.forEach(n,(function(n){e=n.call(i,e,t)})),e}},c532:function(e,t,n){"use strict";var o=n("1d2b"),r=Object.prototype.toString,i=function(e){return function(t){var n=r.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function s(e){return e=e.toLowerCase(),function(t){return i(t)===e}}function a(e){return Array.isArray(e)}function u(e){return"undefined"===typeof e}function c(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var f=s("ArrayBuffer");function l(e){var t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&f(e.buffer),t}function p(e){return"string"===typeof e}function d(e){return"number"===typeof e}function h(e){return null!==e&&"object"===typeof e}function y(e){if("object"!==i(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var m=s("Date"),v=s("File"),g=s("Blob"),b=s("FileList");function E(e){return"[object Function]"===r.call(e)}function S(e){return h(e)&&E(e.pipe)}function w(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||r.call(e)===t||E(e.toString)&&e.toString()===t)}var _=s("URLSearchParams");function C(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function M(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function T(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),a(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}function I(){var e={};function t(t,n){y(e[n])&&y(t)?e[n]=I(e[n],t):y(t)?e[n]=I({},t):a(t)?e[n]=t.slice():e[n]=t}for(var n=0,o=arguments.length;n<o;n++)T(arguments[n],t);return e}function A(e,t,n){return T(t,(function(t,r){e[r]=n&&"function"===typeof t?o(t,n):t})),e}function O(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}function R(e,t,n,o){e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)}function N(e,t,n){var o,r,i,s={};t=t||{};do{o=Object.getOwnPropertyNames(e),r=o.length;while(r-- >0)i=o[r],s[i]||(t[i]=e[i],s[i]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t}function P(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var o=e.indexOf(t,n);return-1!==o&&o===n}function k(e){if(!e)return null;var t=e.length;if(u(t))return null;var n=new Array(t);while(t-- >0)n[t]=e[t];return n}var x=function(e){return function(t){return e&&t instanceof e}}("undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array));e.exports={isArray:a,isArrayBuffer:f,isBuffer:c,isFormData:w,isArrayBufferView:l,isString:p,isNumber:d,isObject:h,isPlainObject:y,isUndefined:u,isDate:m,isFile:v,isBlob:g,isFunction:E,isStream:S,isURLSearchParams:_,isStandardBrowserEnv:M,forEach:T,merge:I,extend:A,trim:C,stripBOM:O,inherits:R,toFlatObject:N,kindOf:i,kindOfTest:s,endsWith:P,toArray:k,isTypedArray:x,isFileList:b}},c8af:function(e,t,n){"use strict";var o=n("c532");e.exports=function(e,t){o.forEach(e,(function(n,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[o])}))}},cafa:function(e,t,n){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},cee4:function(e,t,n){"use strict";var o=n("c532"),r=n("1d2b"),i=n("0a06"),s=n("4a7b"),a=n("4c3d");function u(e){var t=new i(e),n=r(i.prototype.request,t);return o.extend(n,i.prototype,t),o.extend(n,t),n.create=function(t){return u(s(e,t))},n}var c=u(a);c.Axios=i,c.CanceledError=n("fb60"),c.CancelToken=n("8df4"),c.isCancel=n("2e67"),c.VERSION=n("5cce").version,c.toFormData=n("e467"),c.AxiosError=n("7917"),c.Cancel=c.CanceledError,c.all=function(e){return Promise.all(e)},c.spread=n("0df6"),c.isAxiosError=n("5f02"),e.exports=c,e.exports.default=c},d925:function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,o=e.length-1;o>=0;o--){var r=e[o];"."===r?e.splice(o,1):".."===r?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function o(e){"string"!==typeof e&&(e+="");var t,n=0,o=-1,r=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!r){n=t+1;break}}else-1===o&&(r=!1,o=t+1);return-1===o?"":e.slice(n,o)}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],o=0;o<e.length;o++)t(e[o],o,e)&&n.push(e[o]);return n}t.resolve=function(){for(var t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,o="/"===s.charAt(0))}return t=n(r(t.split("/"),(function(e){return!!e})),!o).join("/"),(o?"/":"")+t||"."},t.normalize=function(e){var o=t.isAbsolute(e),s="/"===i(e,-1);return e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"),e||o||(e="."),e&&s&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function o(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var r=o(e.split("/")),i=o(n.split("/")),s=Math.min(r.length,i.length),a=s,u=0;u<s;u++)if(r[u]!==i[u]){a=u;break}var c=[];for(u=a;u<r.length;u++)c.push("..");return c=c.concat(i.slice(a)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,o=-1,r=!0,i=e.length-1;i>=1;--i)if(t=e.charCodeAt(i),47===t){if(!r){o=i;break}}else r=!1;return-1===o?n?"/":".":n&&1===o?"/":e.slice(0,o)},t.basename=function(e,t){var n=o(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,o=-1,r=!0,i=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===o&&(r=!1,o=s+1),46===a?-1===t?t=s:1!==i&&(i=1):-1!==t&&(i=-1);else if(!r){n=s+1;break}}return-1===t||-1===o||0===i||1===i&&t===o-1&&t===n+1?"":e.slice(t,o)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},e3db:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},e467:function(e,t,n){"use strict";(function(t){var o=n("c532");function r(e,n){n=n||new FormData;var r=[];function i(e){return null===e?"":o.isDate(e)?e.toISOString():o.isArrayBuffer(e)||o.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):t.from(e):e}function s(e,t){if(o.isPlainObject(e)||o.isArray(e)){if(-1!==r.indexOf(e))throw Error("Circular reference detected in "+t);r.push(e),o.forEach(e,(function(e,r){if(!o.isUndefined(e)){var a,u=t?t+"."+r:r;if(e&&!t&&"object"===typeof e)if(o.endsWith(r,"{}"))e=JSON.stringify(e);else if(o.endsWith(r,"[]")&&(a=o.toArray(e)))return void a.forEach((function(e){!o.isUndefined(e)&&n.append(u,i(e))}));s(e,u)}})),r.pop()}else n.append(t,i(e))}return s(e),n}e.exports=r}).call(this,n("b639").Buffer)},e683:function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},f6b4:function(e,t,n){"use strict";var o=n("c532");function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},fb60:function(e,t,n){"use strict";var o=n("7917"),r=n("c532");function i(e){o.call(this,null==e?"canceled":e,o.ERR_CANCELED),this.name="CanceledError"}r.inherits(i,o,{__CANCEL__:!0}),e.exports=i}}]);
//# sourceMappingURL=chunk-e1750f74.22499fc4.js.map